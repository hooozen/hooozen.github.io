[{"title":"Swift å¿«é€Ÿå…¥é—¨ (ä¸Š)","url":"/archives/77/","content":"\næœ¬æ–‡ä»‹ç» Swift è¯­è¨€çš„åŸºç¡€å†…å®¹, é¢å‘å·²ç»ç†Ÿç»ƒæŒæ¡æŸé¡¹å¼€å‘è¯­è¨€çš„å¼€å‘è€…, å› æ­¤å†…å®¹åŠ›æ±‚ç®€æ´. \"Swift å¿«é€Ÿå…¥é—¨\" ä¸Šç¯‡åŒ…æ‹¬å¸¸ç”¨çš„æ•°æ®ç±»å‹ã€æ§åˆ¶è¯­å¥ã€å‡½æ•°, ä»¥åŠ Swift ç‰¹æœ‰çš„é—­åŒ…è¯­æ³•. ä¸‹ç¯‡å°†ä»‹ç» Swift çš„ç»“æ„ä½“ã€ç±»ä¸ç»§æ‰¿ä»¥åŠåè®®ç­‰å†…å®¹.\n\n<!--more-->\n\n## 1. åŸºç¡€\n\nSwift æ˜¯ä¸€é—¨**å¼ºç±»å‹è¯­è¨€**ï¼Œä½¿ç”¨å…³é”®å­— `var` å®šä¹‰å˜é‡, `let` å®šä¹‰å¸¸é‡.\n\n### æ•°æ®ç±»å‹\n\nå¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰:\n\n- æ•´å½¢ `Int` , é»˜è®¤ä¸º `Int64`.\n  - `Int16` ç›¸å½“äº `short` , 2 å­—èŠ‚, [-32768, 32767].\n  - `Int32` ç›¸å½“äº `int` , 4 å­—èŠ‚, [-2147483648, 2147483647].\n  - `Int64` ç›¸å½“äº `long` , 8 å­—èŠ‚, [-9223372036854775808, 9223372036854775807].\n- å­—ç¬¦ä¸² `Sting`, ä½¿ç”¨åŒå¼•å·å®šä¹‰å­—é¢é‡.\n  - ä½¿ç”¨ä¸‰åŒå¼•å·å¯ä»¥æ¢è¡Œ, ä½†ä½¿ç”¨ä¸‰å¼•å·æ—¶éœ€å¦èµ·ä¸€è¡Œ.\n  - ä½¿ç”¨ `\\(variable)` è¯­æ³•å®šä¹‰æ¨¡ç‰ˆå­—ç¬¦ä¸²\n\n    ```swift\n    let to = \"world\"\n    var greeting = \"Hello, \\(to)!\"\n    var gretting2 =\n    \"\"\"\n    Hello\n    \\(to)\n    \"\"\"\n    ```\n\n- `Double`, åŒç²¾åº¦æµ®ç‚¹æ•°\n- `Bool`, `true`/`false`\n\n### ç±»å‹æ¨æ–­\n\nSwift åœ¨å®šä¹‰å˜é‡æ—¶ä¼šè¿›è¡Œç±»å‹æ¨æ–­. ä¹Ÿå¯ä»¥é€šè¿‡ `variable: Type` çš„è¯­æ³•æ˜¾ç¤ºæŒ‡å®šç±»å‹:\n\n```swift\nlet album: String = \"Reputation\"\nlet year: Int = 1989\nlet height: Double = 1.78\nlet taylorRocks: Bool = true\n```\n\n### æŸ¥çœ‹ç±»å‹\n\né€šè¿‡å‡½æ•° `type(of: variable)` æŸ¥çœ‹ `variable` çš„ç±»å‹.\n\n```swift\ntype(of: year) == Int.self // true\n```\n\n## 2. å¤æ‚æ•°æ®ç±»å‹\n\n### æ•°ç»„ `Array`\n\nå£°æ˜æ•°ç»„å˜é‡:\n\n```swift\nvar a: [String] = []\nvar b: Array<String> = []\nvar c: [Any] = [\"ss\", 1]\n```\n\næ•°ç»„è®¿é—®ä¸èƒ½è¶Šç•Œ, å¦åˆ™ä¼šæŠ¥é”™.\n\nSwift ä¼šè‡ªåŠ¨æ¨æ–­æ•°ç»„ç±»å‹ï¼Œä½†å½“æ•°ç»„ä¸­æœ‰ä¸åŒç±»å‹å…ƒç´ æ—¶è¦æ˜¾å¼å£°æ˜ç±»å‹. ä¾‹å¦‚ä½¿ç”¨ `Any` ç±»å‹ (`Any` æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹)ï¼š\n\n```swift\nvar songs: [Any] = [\"Shake it Off\", \"You Belong with Me\", \"Back to December\", 3]`\n```\n\nåªæ˜¯**å£°æ˜**æ•°ç»„å˜é‡å¹¶ä¸ä¼šå®é™…åˆ›å»ºå®ƒï¼š\n\n```swift\nvar songs: [String]\n\nsongs[0] = \"Shake it off\"Â \n// error: variable 'songs' passed by reference before being initialized\n```\n\nä½¿ç”¨ä¸‹é¢ä¸¤ç§è¯­æ³•ï¼Œåˆ™ä¼šè¢«ç«‹å³åˆ›å»ºï¼š\n\n```swift\nvar songs: [String] = []\nvar songs = [String]()\n```\n\n### é›†åˆ `Set`\n\næ— é¡ºåº, ä¸é‡å¤. ä½†å¯ä»¥è¢«è¿­ä»£. å¯ä»¥é€šè¿‡ `contains` åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­.\n\n```swift\nlet names = Set([\"Hozen\", \"Libai\", \"Quyuan\", \"Hozen\"])\n// (3 elements) {\"Libai\", \"Quyuan\", \"Hozen\"}\n\nfor name in names {\n    print(name)\n}\n\nnames.contains(\"hozen\") // false\nnames.contains(\"Hozen\") // true\n```\n\n### å…ƒç»„\n\n- é¡ºåºå›ºå®š.\n- ä¸€æ—¦å®šä¹‰, **ä¸å¯å¢åˆ **.\n- ä½†å¯ä»¥é€šè¿‡ `.` æ“ä½œç¬¦æ¥**ä¿®æ”¹**.\n\n```swift\nvar hozen = (name: \"hozen\", age: 22)\nhozen.name = \"hozenli\"\nhozen.1 = 27\n\nhozen\n// (name \"hozen\", age 27)\n```\n\n### å­—å…¸ `Dictionary`\n\n```swift\nvar hozen: [String: Any] = [\"name\": \"hozen\", \"age\": 21]\nhozen[\"name\"]\n```\n\nè®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶ï¼Œè¿”å› `nil`ï¼Œä¹Ÿå¯è®¾ç½®é»˜è®¤å€¼:\n\n```swift\nhozen[\"gender\", default: \"unkonw\"]\n```\n\nåˆ›å»ºç©ºå­—å…¸æ—¶éœ€è¦æ˜¾ç¤ºæŒ‡å®šæ•°æ®ç±»å‹, ç„¶åå†æ·»åŠ æ¡ç›®\n\n```swift\nvar teams = [String: String]()\nteams[\"Paul\"] = \"red\"\n```\n\n### æšä¸¾ `Enum`\n\nå’Œå¾ˆå¤šè¯­è¨€ä¸­çš„æšä¸¾ç±»å‹ç±»ä¼¼, åœ¨ Swift ä¸­æšä¸¾ç±»å‹æ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰, ä½†ä½¿ç”¨å®ƒå¯ä»¥ä½¿å¾—ç¼–ç æ›´åŠ å®‰å…¨é«˜æ•ˆ.\n\n```swift\nenum Result {\n    case success\n    case failure\n}\nvar res = Result.failure\n\nres = Result.success\n```\n\nå¯ä»¥ä½¿ç”¨ç®€ç•¥è¯­æ³•:\n\n```swift\nenum Weekday {\n    case monday, tuesday, wednesday, thursday, friday\n}\n\nvar day = Weekday.monday\nday = .tuesday\nday = .friday\n```\n\nå¯ä»¥ä¸ºæšä¸¾ç±»å‹è®¾ç½®å…³è”å±æ€§ï¼Œä»¥æ–¹ä¾¿çš„é€‚åº”ä¸€äº›åœºæ™¯\n\n```swift\nenum Result {\n    case success(code: Int, msg: String)\n    case failure(code: Int, msg: String)\n}\nvar res = Result.failure(code: 404, msg: \"Not Found\")\n```\n\nå½“æŒ‡å®šæšä¸¾å€¼ä¸º `Int` ç±»å‹æ—¶, Swift ä¼šä¸ºæšä¸¾å€¼**ä» `0` å¼€å§‹è‡ªåŠ¨è®¾ç½®**åŸå§‹å€¼, æ­¤æ—¶å¯ä»¥é€šè¿‡ `rawValue` å®šä¹‰ä¸€ä¸ªæšä¸¾å€¼.\n\n```swift\nenum Planet: Int {\n case mercury\n case venus\n case earth\n case mars\n}\n\nlet earth = Planet(rawValue: 2)\n```\n\nä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®æšä¸¾å€¼çš„åŸå§‹å€¼,\n\n```swift\nenum ResultCode: Int {\n    case success = 200\n    case notFound = 404\n}\n```\n\n### è¡¥å……å’Œå°ç»“\n\nä¸åŒäºæ•°ç»„ã€é›†åˆã€å­—å…¸, Swift ä¸­**å…ƒç»„æ˜¯ä¸€ç§åŒ¿åæ•°æ®ç±»å‹**.\n\nSwift ä¸º `Array` å’Œ `Dictionary` è®¾ç½®äº†ç‰¹æ®Šçš„è¯­æ³•, è€Œ `Set` æ²¡æœ‰:\n\n```swift\nvar arr = [Int]()\nvar dict = [String, Int]()\n```\n\né™¤äº†å„è‡ªå­—é¢é‡å®šä¹‰è¯­æ³•è¿˜æ”¯æŒå°–æ‹¬å·çš„å®šä¹‰è¯­æ³•:\n\n```swift\nvar arr = Array<Int>()\nvar dict = Dictionary<String, Int>()\nvar sset = Set<String>()\n```\n\n## 3. è¿ç®—ç¬¦å’Œæ§åˆ¶è¯­å¥\n\n### è¿ç®—ç¬¦\n\n- å¯é‡è½½,\n- å¯å¤åˆ: `+=`\n- æ¯”è¾ƒè¿ç®—ç¬¦: `>` `<` `>=` `<=` ä¸¤è¾¹å¿…é¡»åŒç±»å‹.\n- `==`, `!=` åˆ¤ç­‰ä¼šè¿›è¡Œ**éšå¼ç±»å‹è½¬æ¢**.\n- `&&`, `||` è¦æ±‚ä¸¤ä¾§éƒ½æ˜¯ `Bool` ç±»å‹.\n\nå’Œ Python ç±»ä¼¼, æ•°ç»„å¯ä»¥é€šè¿‡ `+` **æ‹¼æ¥**.\n\n### æ¡ä»¶è¯­å¥\n\n```swift\nvar cdt = true\n\nif cdt {\n    print(\"true\")\n} else {\n    print(\"false\")\n}\n// true\\n\n```\n\n### ä¸‰å…ƒè¿ç®—ç¬¦ `[cdt] ? [exp] : [exp]`\n\nSwift æœ‰å’Œ C è¯­è¨€ç±»ä¼¼çš„ä¸‰å…ƒè¿ç®—ç¬¦è¯­æ³•\n\n### switch è¯­å¥\n\nSwift çš„ switch è¯­å¥ä¸­å„ä¸ª case é»˜è®¤æ˜¯è‡ªåŠ¨ç»“æŸçš„, å› æ­¤**ä¸éœ€è¦ break**,  ç›¸åå½“éœ€è¦ç»§ç»­æ‰§è¡Œæ—¶éœ€è¦ `fallthrough`.\n\n```swift\nvar weather = \"sunny\"\n\nswitch weather {\ncase \"rain\":\n    print(\"Bring an umbrella\")\ncase \"snow\":\n    print(\"Wrap up warm\")\ncase \"sunny\":\n    print(\"Wear sunscreen\")\n    fallthrough\ndefault:\n    print(\"Enjoy your day!\")\n}\n```\n\nswitch è¦ç¡®ä¿è¦†ç›–æ‰€æœ‰åœºæ™¯ï¼Œå› æ­¤å¾ˆå¤šæƒ…å†µä¸‹ default æ˜¯å¿…é¡»çš„ï¼Œä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚å¯¹äº enum å˜é‡æ¥è¯´ï¼Œå®¹æ˜“ç©·å°½æ‰€æœ‰ case.\n\n### èŒƒå›´è¿ç®—ç¬¦ `..<` `...`\n\nèŒƒå›´è¿ç®—ç¬¦ä¼šè¿”å› `Range<Int>`. ä¾‹å¦‚ `1..<4` è¡¨ç¤º 1, 2, 3, è€Œ `1...4` è¡¨ç¤º 1, 2, 3, 4.\n\n```swift\nlet score = 85\n\nswitch score {\ncase 0..<50:\n    print(\"You failed badly.\")\ncase 50..<85:\n    print(\"You did OK.\")\ndefault:\n    print(\"You did great!\")\n}\n// You did great!\\n\n```\n\n### for in å¾ªç¯\n\nfor å¾ªç¯ä¸­çš„è¿­ä»£å˜é‡ä¸ºä¸´æ—¶å˜é‡.\n\nå½“ä¸ä½¿ç”¨è¿­ä»£å˜é‡æ—¶, å¯ä»¥ç”¨ `_` ä»£æ›¿.\n\n```swift\nfor _ in 0..<4 {\n    print(\"good\")\n}\n```\n\n### while å’Œ repeat while\n\n```swift\nvar number = 18\nwhile number <= 20 {\n    print(number)\n    number += 1\n}\n\nrepeat {\n    print(number) // 21\\n\n} while number <= 20\n```\n\nä½¿ç”¨ `break` ç»“æŸ**å½“å‰**å¾ªç¯, ä½¿ç”¨ `continue` è·³è¿‡å½“å‰è¿­ä»£.\n\nä¸ºå¾ªç¯è¯­å¥æ·»åŠ æ ‡ç­¾å¯ä»¥ä½¿ç”¨ `break label` è·³å‡ºæŒ‡å®šå¾ªç¯.\n\n## 5. å‡½æ•°\n\n### å‡½æ•°åŸºæœ¬è¯­æ³•\n\n```swift\nfunc square(number: Int) -> Int{\n    number * number\n}\n\nlet res: Int = square(number: 8)\n```\n\néœ€è¦æŒ‡æ˜**å½¢å‚å**å’Œ**å‚æ•°ç±»å‹**. å½“å‡½æ•°æœ‰è¿”å›å€¼æ—¶è¦æŒ‡æ˜**è¿”å›ç±»å‹**.\n\nä½¿ç”¨ `return` è¯­å¥è¿”å›, å½“å‡½æ•°ä½“**åªæœ‰ä¸€è¡Œæ—¶, å¯ä»¥çœç•¥** `return`.\n\nå’Œ Python ç±»ä¼¼, å¯ä»¥ä½¿ç”¨å…ƒç»„è¿”å›å¤šä¸ªå€¼.\n\n### å‚æ•°æ ‡ç­¾\n\né™¤äº†å½¢å¼å‚æ•°å, Swift è¿˜ä¸ºè¿˜ä¸ºå‚æ•°æ·»åŠ äº†**æ ‡ç­¾**. æ ‡ç­¾ç”¨äºå¤–éƒ¨(è°ƒç”¨æ—¶), å½¢å‚åç”¨äºå†…éƒ¨, ä»¥å®ç°æ›´å¥½çš„è¯­ä¹‰åŒ–.  \n\n```swift\nfunc sayHello(to name: String) {\n    print(\"hello! \\(name)\")\n}\n\nsayHello(to: \"Allen\")\n```\n\nè°ƒç”¨å‡½æ•°æ—¶, éœ€è¦æŒ‡æ˜å‚æ•°æ ‡ç­¾.  æ²¡æœ‰å®šä¹‰æ ‡ç­¾æ—¶ä½¿ç”¨å½¢å‚åä½œä¸ºæ ‡ç­¾. ä¹Ÿå¯ä»¥æŠŠå‚æ•°æ ‡ç­¾æŒ‡å®šä¸º `_` æ¥çœç•¥è°ƒç”¨æ—¶çš„å‚æ•°æ ‡ç­¾:\n\n```swift\nfunc sayHello(_ name: String) {\n    print(\"hello! \\(name)\")\n}\n\nsayHello(\"Allen\")\n```\n\n### é»˜è®¤å‚æ•°å€¼\n\nä¸ C è¯­è¨€ç±»ä¼¼çš„è¯­æ³•æŒ‡å®šé»˜è®¤å‚æ•°å€¼\n\n```swift\nfunc greet(_ name: String, nicely: Bool = true) {\n    if nicely {\n        print(\"hello, \\(name)\")\n    } else {\n        print (\"oh no, it's \\(name) again...\")\n    }\n}\n\ngreet(\"Hozen\")\ngreet(\"Hozen\", nicely: false)\n```\n\n### å¯å˜å‚æ•°\n\nåœ¨å‚æ•°ç±»å‹åæ·»åŠ  `...` ä½¿å‡½æ•°å¯ä»¥æ¥å—å¯å˜æ•°é‡çš„å‚æ•°, å‡½æ•°ä½“å†…è¯¥å‚æ•°ä¼šè¢«è½¬æ¢ä¸ºæ•°ç»„. æ³¨æ„è°ƒç”¨æ—¶å¯å˜å‚æ•°çš„å†™æ³•.\n\n```swift\nfunc square(numbers: Int...) {\n    for number in numbers {\n        print (\"\\(number) squared is \\(number * number)\")\n    }\n}\n\nsquare(numbers: 1,2,3)\n```\n\n### å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°\n\nå¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°è¦åœ¨è¿”å›ç±»å‹å‰æ·»åŠ å…³é”®å­— `throws`. å¹¶åœ¨éœ€è¦æŠ›å‡ºå¼‚å¸¸çš„åœ°æ–¹ä½¿ç”¨ `throw` è¯­å¥æŠ›å‡ºå¼‚å¸¸.\n\n```swift\nenum PasswordError: Error {\n    case short, obvious\n}\n\nfunc checkPassword(_ password: String) throws -> String {\n    if password.count < 5 {\n        throw PasswordError.short\n    }\n\n    if password == \"12345\" {\n        throw PasswordError.obvious\n    }\n\n    if password.count < 8 {\n        return \"OK\"\n    } else if password.count < 10 {\n        return \"Good\"\n    } else {\n        return \"Excellent\"\n    }\n}\n```\n\nå½“è°ƒç”¨å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°æ—¶è¦ä½¿ç”¨ `do` `try` `catch` è¯­å¥.\n\n```swift\nlet string = \"12345\"\n\ndo {\n    let result = try checkPassword(string)\n    print(\"Password rating: \\(result)\")\n} catch PasswordError.short {\n    print(\"Please use a longer password.\")\n} catch PasswordError.obvious {\n    print(\"I have the same combination on my luggage!\")\n} catch {\n    print(\"There was an error.\")\n}\n```\n\n### `inout` å‚æ•°\n\nåœ¨ Swift ä¸­, å‚æ•°é»˜è®¤éƒ½æ˜¯ `let` å¸¸é‡ä¸å¯è¢«ä¿®æ”¹. ä¸‹é¢çš„å‡½æ•°ä¼šæŠ¥é”™, å› ä¸ºæœŸæœ›ä¿®æ”¹ `number` çš„å€¼.\n\n```swift\nfunc doubleInPlace(_ number: Int) {\n    number *= number\n    // Left side of mutating operator isn't mutable: 'number' is a 'let' constant\n}\n```\n\nå¦‚æœæƒ³è¦ä¿®æ”¹å‚æ•°çš„å€¼, éœ€è¦åœ¨å®šä¹‰å‡½æ•°çš„å‚æ•°ç±»å‹å‰åŠ ä¸Šå…³é”®å­— `inout`. **å¹¶ä¸”**åœ¨è°ƒç”¨æ—¶è¦åœ¨å®å‚å˜é‡å‰åŠ ä¸Š `&`.\n\n```swift\nfunc doubleInPlace(_ number: inout Int) {\n    number *= number\n}\n\nvar num = 5\ndoubleInPlace(&num)\nprint(num)\n```\n\nè¿™ä¹ˆè®¾è®¡çš„ç›®çš„å…¶å®æ˜¯è¦æ±‚å‡½æ•°ä¸ä¼šå¯¹ä¼ å…¥çš„å€¼é€ æˆå‰¯ä½œç”¨, é™¤éæ˜ç¡®çš„æŒ‡æ˜. inout å‚æ•°çš„ä½¿ç”¨ç±»ä¼¼äº C è¯­è¨€çš„æŒ‡é’ˆ.\n\n## 6. é—­åŒ…\n\nå‡½æ•°ä½œä¸ºâ€œä¸€ç­‰å…¬æ°‘â€å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡, å¹¶ä½œä¸ºå‚æ•°ä¼ é€’, ç§°ä¹‹ä¸ºé—­åŒ…. (è¿™ä¸ JavaScript ä¸­é—­åŒ…çš„æ¦‚å¿µå¹¶ä¸å®Œå…¨ç›¸åŒ)\n\n### é—­åŒ…å®šä¹‰å’Œè°ƒ\n\n```swift\nlet driving = {\n    print(\"I am driving in my car\")\n}\n\ndriving()\n```\n\nå¯¹äºé—­åŒ…å‡½æ•°, å®šä¹‰å‚æ•°æ—¶è¦ä½¿ç”¨ `in` å…³é”®å­—, ä¸”ä¸å¯å®šä¹‰å‚æ•°æ ‡ç­¾, è°ƒç”¨æ—¶ä¹Ÿæ— æ³•ä½¿ç”¨æ ‡ç­¾.\n\n```swift\nlet driving = {(place: String) in\n    print(\"I am going to \\(place) in my car\")\n}\ndriving(\"ShangHai\")\n```\n\né—­åŒ…çš„è¿”å›å’Œå‡½æ•°ç±»ä¼¼, åªæœ‰ä¸€è¡Œæ—¶å¯ä»¥çœç•¥ `return`.\n\n```swift\nlet drivingWithReturn = { (place: String) -> String in\n    \"I am going to \\(place) in my car\"\n}\n\nlet message = drivingWithReturn(\"shanghai\")\nprint(message)\n```\n\n### é—­åŒ…ä½œä¸ºå‚æ•°ä¼ é€’\n\né—­åŒ…å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’. ä½¿ç”¨ `func` å®šä¹‰çš„å‡½æ•°ä¹Ÿå¯ä»¥.\n\né—­åŒ…å’Œå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶, éœ€è¦ä½¿ç”¨å½¢å¦‚ `(arg1: Int) -> Void` çš„è¯­æ³•ä¸ºå‚æ•°å£°æ˜ç±»å‹.\n\n```swift\nfunc travel(action: () -> Void) {\n    print(\"I'm getting ready to go\")\n    action()\n    print(\"I arrived\")\n}\ntravel(action: driving)\n```\n\n### å°¾éšé—­åŒ…è¯­æ³•\n\nè¿™æ˜¯ Swift ä¸­å¾ˆ**ç‹¬ç‰¹**ä¸”åˆ**å¸¸ç”¨**çš„è¯­æ³•å½¢å¼.\n\nå½“å‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°æ—¶, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•è°ƒç”¨. å³ç›´æ¥ä½¿ç”¨å¤§æ‹¬å·å°†è¦ä¼ å…¥çš„å‡½æ•°ä»¥é—­åŒ…çš„å½¢å¼å®šä¹‰.\n\n```swift\nfunc travel(action: () -> Void) {\n    print(\"I'm getting ready to go\")\n    action()\n    print(\"I arrived\")\n}\n\ntravel() {\n    print(\"trailing closure syntax\")\n}\n```\n\næ›´ç‰¹åˆ«åœ°, å½“æ²¡æœ‰å…¶ä»–å‚æ•°æ—¶å¯ä»¥çœç•¥å°æ‹¬å·:\n\n```swift\ntravel {\n    print(\"trailing closure syntax\")\n}\n```\n\n### å¸¸è§çš„é—­åŒ…è¯­æ³•\n\n- å¸¦å‚æ•°çš„é—­åŒ…ä½œä¸ºå‚æ•°\n\n    ```swift\n    func travel(action: (String) -> Void) {\n        print(\"I'm getting ready to go\")\n        // æŠŠ London ä¼ å…¥é—­åŒ… actiong\n        action(\"London\")\n        print(\"I arrived\")\n    }\n    \n    travel() {(place: String) in\n        print(\"trailing closure syntax with param \\(place)\")\n    }\n    ```\n\n- æœ‰è¿”å›å€¼çš„é—­åŒ…ä½œä¸ºå‚æ•°\n\n    ```swift\n    func travel(action: (String) -> String) {\n        print(\"I'm getting ready to go\")\n        let message = action(\"London\")\n        print(message)\n        print(\"I arrived\")\n    }\n        \n    travel() {(place: String) in\n        \"trailing closure syntax with param \\(place)\"\n    }\n    ```\n\n- ä¸€ç³»åˆ—ç®€å†™è¯­æ³•\n  - å½“é—­åŒ…ä½œä¸ºå‚æ•°æ—¶, å®ƒçš„å‚æ•°è¢«æ˜ç¡®, åˆ™å®šä¹‰é—­åŒ…æ—¶å¯ä»¥çœç•¥ç±»å‹\n  - ç±»ä¼¼ `func`, å‡½æ•°ä½“åªæœ‰ä¸€è¡Œæ—¶å¯ä»¥çœç•¥ `return`.\n\n      ```swift\n      travel() {place in\n          \"trailing closure syntax with param \\(place)\"\n      }\n      ```\n\n  - å‚æ•°åœ¨å£°æ˜æ—¶ç±»å‹è¢«æ˜ç¡®, å®šä¹‰æ—¶ç”šè‡³å¯ä»¥ç›´æ¥çœç•¥å½¢å‚, ä½¿ç”¨ `$[num]` ä»£è¡¨.\n\n      ``` swift\n      func travel(action: (String, Int) -> String) {\n          print(\"I'm getting ready to go.\")\n          print(action(\"London\", 60))\n          print(\"I arrived\")\n      }\n      travel {\n          \"I'm goning to \\($0) at \\($1) miles hour\"\n      }\n      ```\n\n### è¿”å›é—­åŒ…\n\n```swift\nfunc travel() -> (String) -> Void {\n    return {(place) in\n        print(\"I 'm going to \\(place)\")\n    }\n}\n\ntravel()(\"London\")\n// I 'm going to London\n```\n\n### é—­åŒ…ä½œç”¨åŸŸä¿å­˜\n\né—­åŒ…ä¼šä¿å­˜ä½œç”¨åŸŸé“¾, è¿™ä¸€ç‚¹å’Œ JavaScript ç±»ä¼¼.\n\n```swift\nfunc travel() -> (String) -> Void {\n    var counter = 0\n    return {(place: String) in\n        counter += 1\n        print(\"I am going to \\(place). (calling \\(counter) times)\")\n    }\n}\n\nlet action = travel()\n\naction(\"Shanghai\")\n// I am going to Shanghai. (calling 1 times)\n\naction(\"Jinan\")\n// I am going to Jinan. (calling 2 times)\n```\n","tags":["Swift"],"categories":["developer"]},{"title":"å †(ä¼˜å…ˆé˜Ÿåˆ—)çš„å®ç°åŸç†","url":"/archives/76/","content":"\nå †(ä¼˜å…ˆé˜Ÿåˆ—)æ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸­éå¸¸ç»å…¸çš„ç»“æ„ï¼Œè¢«å¹¿æ³›åº”ç”¨åˆ°è®¡ç®—æœºç§‘å­¦å½“ä¸­. ä¾‹å¦‚åœ¨å †æ’å’Œä¼˜å…ˆçº§è°ƒåº¦ä¸­å †ä¾¿æ˜¯æ ¸å¿ƒçš„æ•°æ®ç»“æ„. æœ¬æ–‡ä»‹ç»å †çš„åŸºæœ¬å®ç°åŸç†ï¼ŒåŠ›æ±‚æ¸…æ™°æ˜“æ‡‚.\n\n<!--more-->\n\n## 1. åŸºç¡€æ¦‚å¿µ\n\n> In computer science, a heap is a specialized tree-based data structure that satisfies the heap property: In a max heap, for any given node C, if P is a parent node of C, then the key (the value) of P is greater than or equal to the key of C. In a min heap, the key of P is less than or equal to the key of C.\n\nå †(ä¼˜å…ˆé˜Ÿåˆ—)çš„è¿™ç§ç»“æ„æ˜¯ä¸ºäº†åœ¨å †è¿›è¡Œæ“ä½œæ—¶èƒ½å¤Ÿå°½å¯èƒ½é™ä½ç®—æ³•çš„å¤æ‚åº¦ï¼Œä»ä½¿ç”¨è§’åº¦è®²ï¼Œå †(ä¼˜å…ˆé˜Ÿåˆ—)æ”¯æŒ**åˆå§‹åŒ–**ã€**é˜Ÿå¤´å¼¹å‡º**ã€**æ’å…¥**ç­‰æ“ä½œã€‚å¹¶ä¿è¯ä»é˜Ÿå¤´å–å‡ºçš„å…ƒç´ å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§ã€‚ä¾‹å¦‚ä»¥å…ƒç´ å¤§å°ä½œä¸ºä¼˜å…ˆçº§åˆ™å¯æ„é€ å¤§(å°)æ ¹å †ï¼Œä¿è¯æ¯æ¬¡ä»é˜Ÿå¤´å–å‡ºçš„éƒ½æ˜¯æœ€å¤§(å°)çš„å…ƒç´ ã€‚  \n\nå †çš„å®ç°ä¸€èˆ¬æ˜¯ç”±**æ•°ç»„**æ¨¡æ‹Ÿ**å®Œå…¨äºŒå‰æ ‘**çš„æ•°æ®ç»“æ„å®ç°ã€‚ç”¨æ•°ç»„å­˜å‚¨çš„å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œä¸‹æ ‡ä¸º `i` çš„èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹(å¦‚æœå­˜åœ¨)ä¸‹æ ‡åˆ†åˆ«ä¸º `2i + 1` å’Œ `2i + 2`. åŒç†ï¼ŒèŠ‚ç‚¹ `i` çš„çˆ¶èŠ‚ç‚¹(å¦‚æœå­˜åœ¨)ä¸º `(i - 1) / 2`ã€‚\n\nå®šä¹‰ä¼˜å…ˆé˜Ÿåˆ— `Heap` çš„ APIï¼Œå…¶ä¸­ `cmp` ç”¨ä»¥æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ çš„ä¼˜å…ˆçº§ï¼š\n\n```ts\nclass Heap<T> {\n  q: T[];\n  cmp: (a: T, b: T) => boolean;\n\n  constructor(data: T[], cmp?: (a: T, b: T) => boolean) {}\n\n  get size() {\n    return this.q.length\n  }\n\n  pop(): T | undefined {}\n  push(x: T) {}\n}\n```\n\n## 2. æ ¸å¿ƒç®—æ³•\n\n### 2.1 èŠ‚ç‚¹ä¸‹æ²‰ (sink)\n\nå¦‚æœæœ‰ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½å·²ç»æ˜¯å¤§æ ¹å †ï¼Œä¸ºäº†ä½¿è¯¥äºŒå‰æ ‘æ„æˆå †ï¼Œéœ€è¦æŠŠæ ¹èŠ‚ç‚¹â€œ**ä¸‹æ²‰ (sink)**â€œ åˆ°åˆé€‚çš„ä½ç½®ï¼š\n\n- å°†è¯¥äºŒå‰æ ‘æ ¹èŠ‚ç‚¹çš„å€¼ä¸å·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹åšå¯¹æ¯”ï¼Œ\n- å¦‚æœå®ƒçš„å€¼å¤§äºå·¦å³å­æ ‘æ ¹èŠ‚ç‚¹åˆ™æ­¤äºŒå‰æ ‘ä¹Ÿæ„æˆä¸€ä¸ªå¤§æ ¹å †. ç®—æ³•ç»“æŸ.\n- å¦åˆ™å°†å®ƒä¸æ¯”è‡ªèº«å¤§çš„é‚£ä¸ªèŠ‚ç‚¹çš„ä½ç½®è¿›è¡Œäº¤æ¢\n- æ­¤æ—¶ç»§ç»­è€ƒè™‘äº¤æ¢åèŠ‚ç‚¹æ‰€åœ¨çš„å­æ ‘ï¼Œ**é€’å½’**æ‰§è¡Œä¸Šè¿°æ“ä½œ\n\né€šè¿‡ä»¥ä¸Šç®—æ³•ï¼Œåˆå§‹çš„æ ¹èŠ‚ç‚¹è¢«â€œ**ä¸‹æ²‰**â€åˆ°åˆé€‚çš„ä½ç½®ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ªå¤§æ ¹å †ã€‚\n\nä¸‹æ²‰ç®—æ³•çš„é€’å½’å®ç°å¦‚ä¸‹ï¼š\n\n```ts\nsink(i: number) {\n  let max = 2 * i + 1\n\n  if (max >= this.size) return\n\n  if (max + 1 < this.size && this.cmp(this.q[max + 1], this.q[max])) {\n    ++max\n  }\n\n  if (this.cmp(this.q[i], this.q[max])) return;\n\n  [this.q[i], this.q[max]] = [this.q[max], this.q[i]]\n  this.sink(max)\n}\n```\n\nå®é™…ä¸Šï¼Œä¸‹æ²‰ç®—æ³•å¾€å¾€ä½¿ç”¨è¿­ä»£å®ç°ï¼š\n\n```ts\nsink(i: number) {\n  while (2 * i + 1 < this.size) {\n    let max = 2 * i + 1\n\n    if (max + 1 < this.size && this.cmp(this.q[max + 1], this.q[max])) {\n      ++max\n    }\n\n    if (this.cmp(this.q[i], this.q[max])) break;\n\n    [this.q[i], this.q[max]] = [this.q[max], this.q[i]]\n\n    i = max\n  }\n}\n```\n\n### 2.2 èŠ‚ç‚¹ä¸Šæµ® (swim)\n\nå¯¹äºä¸€ä¸ªå †ï¼Œå¦‚æœåœ¨å®ƒçš„æœ«å°¾æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œä¸ºäº†ä¿è¯å †çš„æ€§è´¨éœ€è¦æŠŠè¯¥èŠ‚ç‚¹â€œ**ä¸Šæµ® (swim)**â€åˆ°åˆé€‚çš„ä½ç½®ï¼š\n\n- å°†è¯¥å…ƒç´ ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ»¡è¶³å †çš„å®šä¹‰ï¼Œåˆ™æ­¤æ—¶äºŒå‰æ ‘æ„æˆå †ï¼Œç®—æ³•ç»“æŸ\n- å¦åˆ™å°†ä»–ä¸çˆ¶å…ƒç´ äº¤æ¢\n- é€’å½’æ‰§è¡Œä¸Šè¿°æ“ä½œ\n\nå½“ç®—æ³•ç»“æŸæ—¶ï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹**ä¸Šæµ® (swim)** åˆ°åˆé€‚çš„ä½ç½®ä½¿å †çš„æ€§è´¨å¾—ä»¥ä¿è¯.\n\nä¸Šæµ®ç®—æ³•çš„é€’å½’å®ç°å¦‚ä¸‹ï¼š\n\n```ts\nswim(i: number) {\n  const p = Math.floor((i - 1) / 2)\n\n  if (p < 0) return\n\n  if (this.cmp(this.q[p], this.q[i])) return;\n  [this.q[p], this.q[i]] = [this.q[i], this.q[p]]\n\n  this.swim(p)\n}\n```\n\nå®é™…ä¸Šï¼Œå¸¸ç”¨è¿­ä»£å®ç°ä¸Šæµ®ç®—æ³•ï¼š\n\n```ts\nswim(i: number) {\n  while (Math.floor((i - 1) / 2) >= 0) {\n    const p = Math.floor((i - 1) / 2)\n    if (this.cmp(this.q[p], this.q[i])) break;\n\n    [this.q[p], this.q[i]] = [this.q[i], this.q[p]]\n    i = p\n  }\n}\n```\n\n## 3. API å®ç°\n\næœ‰äº†ä¸Šæµ®å’Œä¸‹æ²‰ç®—æ³•ï¼Œå †çš„ API å®ç°èµ·æ¥å°±éå¸¸ç®€å•ç›´è§‚äº†.\n\n### 3.1 æ’å…¥å…ƒç´ \n\nå¾€ä¸€ä¸ªå †é‡Œæ’å…¥å…ƒç´ æ—¶ï¼Œåªéœ€è¦æŠŠè¯¥å…ƒç´ æ”¾åˆ°å †çš„æœ«å°¾ï¼Œç„¶åæŠŠè¯¥å…ƒç´ ä¸Šæµ®åˆ°åˆé€‚çš„ä½ç½®å³å¯ï¼š\n\n```ts\npush(x: T) {\n  this.q.push(x)\n  this.swim(this.size - 1)\n}\n```\n\n### 3.2 å¼¹å‡ºå…ƒç´ \n\nç”±äºå †çš„æ€§è´¨ï¼Œé˜Ÿé¦–çš„å…ƒç´ ä¸€å®šæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ . å› æ­¤ç›´æ¥æŠŠè¯¥å…ƒç´ å¼¹å‡ºå³å¯. ä¸ºäº†ä¿è¯å‰©ä¸‹æ•°æ®ä»ç„¶ç¬¦åˆå †çš„æ€§è´¨ï¼Œéœ€è¦æŠŠæœ«å°¾çš„å…ƒç´ æ”¾åˆ°é˜Ÿé¦–ï¼Œç„¶åæŠŠå®ƒä¸‹æ²‰åˆ°åˆé€‚çš„ä½ç½®å³å¯.\n\n```ts\npop(): T | undefined {\n  const res = this.q[0]\n  this.q[0] = this.q[this.size - 1]\n  this.q.pop()\n  this.sink(0)\n\n  return res\n}\n```\n\n### 3.3 åˆå§‹åŒ–å»ºå †\n\nå»ºå †æ˜¯æŒ‡å¯¹äºä¸€ä¸ªç©ºå †ï¼Œç»™å®šä¸€ç»„å…ƒç´ æŠŠè¿™äº›å…ƒç´ ç»„ç»‡æˆä¸€ä¸ªå †. ä¸€ä¸ªç®€å•çš„æ€è·¯æ˜¯ä¸€æ¬¡æŠŠè¿™äº›å…ƒç´  `push` åˆ°å †ä¸­.  ä½†å®é™…ä¸Šå¾€å¾€ä½¿ç”¨ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹æ³•, è¿™ç§æ–¹æ³•åœ¨åŸæœ‰çš„æ•°ç»„ä¸Šè¿›è¡Œè°ƒæ•´ï¼Œæœ€åä½¿ä¹‹æˆä¸ºå †.\n\nå¯¹äºç»™å®šçš„æ•°ç»„ç›´æ¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œæ˜¾ç„¶è¿™æ£µæ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå †. é‚£ä¹ˆå¯¹äºè¿™äº›å¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ»¡è¶³ä¸‹æ²‰ç®—æ³•çš„åˆå§‹æ¡ä»¶ï¼Œåˆ™å¯¹è¿™äº›çˆ¶èŠ‚ç‚¹æ‰§è¡Œä¸‹æ²‰ç®—æ³•åï¼Œæ–°çš„å †è¢«å»ºç«‹. é€’å½’çš„è€ƒè™‘ä»¥è¿™äº›å †çš„çˆ¶èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå¯¹ä»–ä»¬æ‰§è¡Œä¸‹æ²‰ç®—æ³•ï¼Œé€çº§å®Œæˆå †çš„æ„å»ºï¼Œç›´è‡³æŠµè¾¾æ ¹èŠ‚ç‚¹.\n\nç®€è€Œè¨€ä¹‹ï¼Œä»æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å€’åºéå†è¯¥æ•°ç»„å¹¶æ‰§è¡Œä¸‹æ²‰ç®—æ³•ï¼Œå³å®Œæˆå †çš„å»ºç«‹:\n\n```ts\ninit() {\n  for (let i = Math.floor((this.size - 2) / 2); i >= 0; i--) {\n    this.sink(i)\n  }\n}\n```\n\n### 3.4 å®Œæ•´å®ç°\n\nå †çš„å®ç°ä¸»è¦ä¾èµ–ä¸¤ä¸ªæ ¸å¿ƒç®—æ³•: **ä¸‹æ²‰**å’Œ**ä¸Šæµ®**ï¼Œå…·ä½“ API çš„å®ç°éƒ½æ˜¯åŸºäºè¿™ä¸¤ä¸ªç®—æ³•çš„ç®€å•ä½¿ç”¨.\n\n```ts\nexport default class Heap<T> {\n  q: T[];\n  cmp: (a: T, b: T) => boolean;\n\n  constructor(data: T[], cmp?: (a: T, b: T) => boolean) {\n    this.q = data\n    this.cmp = cmp || ((a: T, b: T) => (a as number) - (b as number) > 0);\n    this.init()\n  }\n\n  get size(): number {\n    return this.q.length\n  }\n\n  init() {\n    for (let i = Math.floor((this.size - 2) / 2); i >= 0; i--) {\n      this.sink(i)\n    }\n  }\n\n  sink(i: number) {\n    while (2 * i + 1 < this.size) {\n      let max = 2 * i + 1\n\n      if (max + 1 < this.size && this.cmp(this.q[max + 1], this.q[max])) {\n        ++max\n      }\n\n      if (this.cmp(this.q[i], this.q[max])) break;\n\n      [this.q[i], this.q[max]] = [this.q[max], this.q[i]]\n\n      i = max\n    }\n  }\n\n  pop(): T | undefined {\n    const res = this.q[0]\n    this.q[0] = this.q[this.size - 1]\n    this.q.pop()\n    this.sink(0)\n\n    return res\n  }\n\n  push(x: T) {\n    this.q.push(x)\n    this.swim(this.size - 1)\n  }\n\n  swim(i: number) {\n    while (Math.floor((i - 1) / 2) >= 0) {\n      const p = Math.floor((i - 1) / 2)\n      if (this.cmp(this.q[p], this.q[i])) break;\n\n      [this.q[p], this.q[i]] = [this.q[i], this.q[p]]\n      i = p\n    }\n  }\n}\n```\n","tags":["æ•°æ®ç»“æ„","å †"],"categories":["developer"]},{"title":"Vue3 å“åº”å¼(4)-Wacth çš„å®ç°åŸç†","url":"/archives/75/","content":"\nå‰å‡ ç¯‡æ–‡ç« å·²ç»æ„å»ºäº†è¾ƒä¸ºå®Œå–„çš„å“åº”å¼ç³»ç»Ÿï¼Œå¹¶ä¸”å®ç°äº†è®¡ç®—å±æ€§ computed ä»¥åŠè°ƒåº¦å™¨ã€æ‡’æ‰§è¡Œç­‰ç‰¹æ€§ã€‚è¿™ä¸€ç¯‡æ–‡ç« å°±æ¥å®ç°å¦å¤–ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½â€”â€” watch ç›‘å¬ã€‚\n\n<!--more-->\n\n## watch çš„åŸºç¡€åŸç†\n\n### ç®€å•å®ç°\n\nwatch æ— éæ˜¯å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼šå¯¹äºæŒ‡å®šçš„å“åº”å¼å˜é‡ï¼Œå½“è¯¥å˜é‡å‘ç”Ÿå˜åŒ–æ—¶èƒ½å¤Ÿæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸€ä¸ªéœ€æ±‚å®Œå…¨å¯ä»¥ä½¿ç”¨è°ƒåº¦å™¨ scheduler æ¥å®ç°ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œé€šè¿‡ç»™ `effect` ä¼ å…¥ä¸€ä¸ªè¯»å– `data.cnt` çš„å‡½æ•°ï¼Œæ¥ä½¿ `data.cnt` ä¸å‰¯ä½œç”¨å‡½æ•°è¿›è¡Œç»‘å®šã€‚ç„¶ååœ¨ `scheduler` ä¸ŠæŒ‡å®šå›è°ƒå‡½æ•°ï¼Œæ¯å½“ `data.cnt` å‘ç”Ÿå˜åŒ–æ—¶å°±æ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚\n\n```js\nconst data = reactive({ cnt: 0 })\n\neffect(() => {\n  data.cnt  // è§¦å‘ track å‡½æ•°\n}, {\n  scheduler: () => {\n    // to do something when data.cnt changes\n    console.log('data.cnt changed')\n  }\n})\n```\n\n### é€’å½’ç›‘å¬æ‰€æœ‰å±æ€§\n\nä¸Šä¸€èŠ‚ä¸­å®ç°ç›‘å¬çš„æ–¹å¼æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¸è¶³ï¼Œé‚£å°±æ˜¯å¿…é¡»æŒ‡å®šè¦ç›‘å¬å“åº”å¼æ•°æ®çš„å“ªä¸ªå±æ€§ï¼Œå¦åˆ™å…¶ä»–å±æ€§çš„å˜åŒ–ä¸ä¼šè§¦å‘ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚ä½†å®é™…ä¸Šæˆ‘ä»¬å¸Œæœ›æ‰€ç›‘å¬å˜é‡çš„ä»»ä½•å±æ€§å‘ç”Ÿå˜åŒ–éƒ½èƒ½è§¦å‘å›è°ƒã€‚è¿™å°±è‡ªç„¶è€Œç„¶æƒ³åˆ°ä½¿ç”¨é€’å½’çš„æ–¹æ³•æ¥éå†å˜é‡çš„æ‰€æœ‰å±æ€§ã€‚æˆ‘ä»¬å¦‚æ­¤å°è£… `watch` å‡½æ•°ï¼Œå…¶ä¸­ `traverse(obj)` ç”¨æ¥é€’å½’çš„è¯»å– `obj` çš„æ‰€æœ‰å±æ€§ï¼š\n\n```js\nfunction watch(obj, handler) {\n  effect(\n    () => traverse(obj),\n    {\n      scheduler: hanlder\n    }\n  )\n}\n\nfunction traverse(obj, seen = new Set()) {\n  if (typeof obj !== 'object' || value === null || seen.has(obj)) return\n  seen.add(obj)\n\n  for (const k in obj) {\n    traverse(obj[k])\n  }\n\n  return obj  // è¿™é‡Œä¹‹æ‰€ä»¥è¿”å› obj æ˜¯ä¸ºäº†åé¢ä¿å­˜ watch çš„å€¼ç”¨\n}\n```\n\næœ‰äº†ä»¥ä¸Šçš„å°è£…æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è°ƒç”¨ `watch` æ¥è‡ªåŠ¨è¿½è¸ªå“åº”å¼æ•°æ®çš„æ‰€æœ‰å˜åŒ–äº†ï¼š\n\n```js\nwatch(obj, () => {\n  // to do something when data changes\n  console.log('obj changed')\n})\n```\n\n### `getter`\n\nVue ä¸­å¯¹äº `watch` æ–¹æ³•è¿˜æä¾›äº† `getter` çš„ä½¿ç”¨æ–¹å¼ï¼Œå®ƒçš„è°ƒç”¨æ–¹å¼å¦‚ä¸‹ã€‚é€šè¿‡ `getter` è¿”å›ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œwatch ä»…ä»…ç›‘å¬ `getter` è¿”å›çš„å€¼ï¼Œå¹¶ä¸”é»˜è®¤ä¸ä¼šè¿›è¡Œæ·±å±‚ç›‘å¬ã€‚\n\n```js\nwatch(\n  () => obj.cnt,\n  () => {\n    // to do something when data changes\n  }\n)\n```\n\nä¸º `watch` æ·»åŠ  `getter` çš„å®ç°éå¸¸ç®€å•ï¼Œå³é€šè¿‡åˆ¤æ–­ `watch` çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸æ˜¯å‡½æ•° (`getter`)ï¼Œå¦‚æœæ˜¯å‡½æ•°åˆ™ç›´æ¥å°† `getter` ä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ä¼ ç»™ `effect`ï¼Œå¦åˆ™ä½¿ç”¨ä¸Šé¢çš„é€’å½’å¤„ç†ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nfunction watch(source, handler) {\n  let getter\n  if (typeof source === 'function') {\n    getter = source\n  } else {\n    getter = () => traverse(source)\n  }\n  effect(\n    getter,\n    {\n      scheduler: hanlder\n    }\n  )\n}\n```\n\n## watch çš„åŠŸèƒ½ä¼˜åŒ–\n\n### è·å¾—â€œæ–°æ—§å€¼â€\n\nè¿™é‡Œå®ç° Vue.js ä¸­å›åˆ°å‡½æ•°ä¸­è·å–æ–°æ—§å€¼å‚æ•°çš„åŠŸèƒ½ã€‚è¿™é‡Œä¸»è¦åˆ©ç”¨åˆ° `lazy` é€‰é¡¹ã€‚\n\n```js\nfunction watch(source, handler) {\n  let getter\n  if (typeof source === 'function') {\n    getter = source\n  } else {\n    getter = () => traverse(source)\n  }\n\n  let oldVal, val\n\n  const effectFn = effect(\n    getter,\n    {\n      lazy: true,\n      scheduler() {\n        val = effectFn()\n        handler(oldVal, val)\n        oldVal = val\n      } \n    }\n  )\n\n  oldVal = effectFn()\n}\n```\n\n### `immediate` ç«‹å³æ‰§è¡Œ\n\né€šè¿‡ä»¥ä¸Šçš„å°è£…ï¼Œ`watch` æ‰€ç›‘å¬çš„æ•°æ®åªæœ‰å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥åƒ Vue.js ä¸­ä¸ºå…¶è®¾ç½® `immediate` å‚æ•°æ¥ä½¿å…¶ç«‹å³æ‰§è¡Œã€‚\n\n```js\nfunction watch(source, handler, options) {\n  let getter\n  if (typeof source === 'function') {\n    getter = source\n  } else {\n    getter = () => traverse(source)\n  }\n\n  let oldVal, val\n\n  const job = () => {\n    val = effectFn()\n    handler(oldVal, val)\n    oldVal = val\n  }\n\n  const effectFn = effect(\n    getter,\n    {\n      lazy: true,\n      scheduler: job\n    }\n  )\n\n  if (options.immediate) {\n    job()\n  } else {\n    oldVal = effectFn()\n  }\n}\n```\n\n## å°ç»“\n\næœ¬æ–‡å®ç°äº† Vue.js æ•°æ®ä¾¦å¬æ–¹æ³• `watch` çš„åŸºç¡€åŸç†ï¼Œå…¨éƒ¨çš„ä»£ç å¦‚ä¸‹ã€‚[ç‚¹å‡»è¿™é‡Œ](https://codepen.io/Hozen/pen/abPqVxK) åœ¨çº¿è¿è¡Œå’Œè°ƒè¯•ã€‚\n\n```js\nlet activeEffect;\nconst effectStack = [];\nconst bucket = new WeakMap();\n\nconst data = reactive({ foo: 1, bar: 2 });\n\nwatch(\n  () => data.bar,\n  (old, val) => {\n    console.log(`data change from ${old} to ${val}`);\n  },\n  { immediate: true }\n);\n\nsetTimeout(() => {\n  data.bar = 100;\n}, 2000);\n\nfunction watch(source, cb, options = {}) {\n  let getter;\n  if (typeof source === \"function\") {\n    getter = source;\n  } else {\n    getter = () => traverse(source);\n  }\n\n  let oldVal, val;\n  const job = () => {\n    val = effectFn();\n    cb(oldVal, val);\n    oldVal = val;\n  };\n\n  const effectFn = effect(getter, {\n    lazy: true,\n    scheduler: job\n  });\n\n  if (options.immediate) {\n    job();\n  } else {\n    oldVal = effectFn();\n  }\n}\n\nfunction traverse(obj, seen = new Set()) {\n  if (typeof obj !== \"object\" || obj === null || seen.has(obj)) return;\n  for (const k in obj) {\n    traverse(obj[k]);\n  }\n  return obj;\n}\n\nfunction computed(getter) {\n  let dirty = true;\n  let cache;\n  const effectFn = effect(getter, {\n    lazy: true,\n    scheduler: () => {\n      dirty = true;\n      trigger(obj, \"value\");\n    }\n  });\n  const obj = {\n    get value() {\n      if (dirty) {\n        cache = effectFn();\n        dirty = false;\n      }\n      track(obj, \"value\");\n      return cache;\n    }\n  };\n  return obj;\n}\n\nfunction reactive(obj) {\n  return new Proxy(obj, {\n    get(target, key) {\n      track(target, key);\n      return Reflect.get(target, key);\n    },\n    set(target, key, value) {\n      const res = Reflect.set(target, key, value);\n      trigger(target, key);\n      return res;\n    }\n  });\n}\n\nfunction track(target, key) {\n  if (!activeEffect) return;\n  let depsMap = bucket.get(target);\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()));\n  }\n  let deps = depsMap.get(key);\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()));\n  }\n  deps.add(activeEffect);\n  activeEffect.depSets.push(deps);\n}\n\nfunction trigger(target, key) {\n  let depsMap = bucket.get(target);\n  if (!depsMap) return;\n  let deps = depsMap.get(key);\n  if (!deps) return;\n  const depsToRun = new Set(deps);\n  //  depsToRun.forEach(fn => fn())\n  depsToRun.forEach((fn) => {\n    if (fn === activeEffect) return;\n    if (fn.options.scheduler) {\n      // å¦‚æœè®¾ç½®äº†è°ƒåº¦å™¨ï¼Œåˆ™å°†å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œäº¤ç»™è°ƒåº¦å™¨\n      fn.options.scheduler(fn);\n    } else {\n      // å¦åˆ™é»˜è®¤ç›´æ¥æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n      fn();\n    }\n  });\n}\n\nfunction effect(fn, options = {}) {\n  const effectFn = () => {\n    cleanup(effectFn);\n    activeEffect = effectFn;\n    effectStack.push(effectFn);\n\n    const res = fn(); // è·å–å‰¯ä½œç”¨å‡½æ•°çš„ç»“æœ\n\n    effectStack.pop();\n    activeEffect = effectStack[effectStack.length - 1];\n\n    return res; // è¿”å›å‰¯ä½œç”¨å‡½æ•°ç»“æœ\n  };\n  effectFn.depSets = [];\n  effectFn.options = options;\n  if (!options.lazy) {\n    effectFn(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡ effectFn å»ºç«‹ç»‘å®š\n  }\n  return effectFn; // è¿”å› effectFn\n}\n\nfunction cleanup(effectFn) {\n  effectFn.depSets.forEach((deps) => {\n    deps.delete(effectFn);\n  });\n  effectFn.depSets.length = 0;\n}\n```\n\n## *å‚è€ƒèµ„æ–™*\n\n[1] vuejs/core: ğŸ–– Vue.js is a progressive, incrementally-adoptable JavaScript framework for building UI on the web.[EB/OL]. [2023-09-22]. <https://github.com/vuejs/core>.\n\n[2] Vue.js - æ¸è¿›å¼ JavaScript æ¡†æ¶ | Vue.js[EB/OL]. [2023-09-22]. <https://cn.vuejs.org/>.\n\n[3] éœæ˜¥é˜³. Vue.jsè®¾è®¡ä¸å®ç°[M/OL]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2022[2023-09-19]. <https://book.douban.com/subject/35768338/>.\n\n[4] JavaScript | MDN[EB/OL]. [2023-04-10](2023-09-22). <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript>.\n","tags":["å“åº”å¼","Vue"],"categories":["developer"]},{"title":"Vue3 å“åº”å¼(3)-è®¡ç®—å±æ€§ computed","url":"/archives/74/","content":"\nä¸Šæ–‡[Vue3 å“åº”å¼(2)-åˆ†æ”¯åˆ‡æ¢ã€åµŒå¥—ã€å’Œæ— é™é€’å½’](https://www.hozen.site/archives/73/)è§£å†³äº†åŸæœ‰å“åº”å¼ç³»ç»Ÿçš„ä¸€äº›é—®é¢˜ï¼Œå®ç°äº†è¾ƒä¸ºå®Œå–„çš„æ•°æ®ç»‘å®šã€‚æœ¬æ–‡åœ¨æ­¤åŸºç¡€ä¸Šå®ç°ç®€å•çš„è®¡ç®—å±æ€§åŠŸèƒ½ `computed`ã€‚\n\n<!--more-->\n\n## è°ƒåº¦å™¨ Scheduler\n\nåœ¨å®ç°è®¡ç®—å±æ€§å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹è°ƒåº¦å™¨ Schedulerï¼Œå®ƒå°†åœ¨å®ç°è®¡ç®—å±æ€§å’Œç›‘å¬ç­‰ç‰¹æ€§æ—¶ä½¿ç”¨ã€‚\n\nåœ¨åŸæœ‰çš„å®ç°ä¸­ï¼Œæ¯æ¬¡å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè‡ªåŠ¨çš„è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½å¸Œæœ›æ§åˆ¶å‰¯ä½œç”¨å‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œæˆ–è€…åœ¨è°ƒç”¨å‰ååšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯è®©å‰¯ä½œç”¨å‡½æ•°ç›´æ¥æ‰§è¡Œã€‚\n\né€šè¿‡ä¹‹å‰çš„ä»£ç æˆ‘ä»¬çŸ¥é“ï¼Œå‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œæ˜¯åœ¨ `trigger` æ–¹æ³•ä¸­çš„ä»¥ä¸‹ç‰‡æ®µï¼š\n\n```js\nfunction trigger(target, key) {\n  // ...\n  effectToRun.forEach(fn => {\n    if (fn !== activeEffect) fn()\n  })\n}\n```\n\nå¦‚æœæƒ³è¦æ§åˆ¶å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œå®é™…ï¼Œåˆ™åªéœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨ä¸Šè¿°ä»£ç ç‰‡æ®µä¸­ä¸ç›´æ¥æ‰§è¡Œ `fn`ï¼Œè€Œæ˜¯æŠŠ `fn` ä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°ã€‚å…·ä½“å¦‚ä½•æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°å°±å¯ä»¥é€šè¿‡ä¼ å…¥ä¸åŒçš„å›è°ƒå‡½æ•°æ¥å†³å®šäº†ã€‚è¿™é‡Œå¯ä»¥é€šè¿‡ç»™å‰¯ä½œç”¨å‡½æ•°ç»‘å®šä¸€ä¸ª `scheduler` å‚æ•°æ¥å®ç°ï¼Œä»£ç æ”¹åŠ¨å¦‚ä¸‹ï¼š\n\n```js\nfunction effect(fn, options={}) {\n  const effectFn = () => {\n    //...\n  }\n  effectFn.depSets = []\n  effectFn.options = options\n  effectFn()\n}\n\nfunction trigger(target, key) {\n  // ...\n  effectToRun.forEach(fn => {\n    if (fn === activeEffect) return\n    if (fn.options.scheduler) {\n      // å¦‚æœè®¾ç½®äº†è°ƒåº¦å™¨ï¼Œåˆ™å°†å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œäº¤ç»™è°ƒåº¦å™¨\n      fn.options.scheduler(fn)\n    } else {\n      // å¦åˆ™é»˜è®¤ç›´æ¥æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n      fn()\n    }\n  })\n}\n```\n\n## è®¡ç®—å±æ€§ computed\n\n### computed çš„è®¾è®¡ç›®æ ‡\n\næˆ‘ä»¬å¸Œæœ›è®¾è®¡è¿™æ ·çš„ä¸€ä¸ªå‡½æ•° `computed`ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•° (è®°ä¸º `getter`)ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ (è®°ä½œ `obj`)ï¼Œè¯¥å¯¹è±¡çš„å€¼ç”± `getter` è®¡ç®—è·å¾—ã€‚æ¯å½“ `getter` ä¸­æ‰€ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`obj.value` éƒ½èƒ½è¢«é‡æ–°è®¡ç®—è·å¾—æ›´æ–°ã€‚\n\n```js\nfunction computed(getter) {\n  // ... \n  return {\n    value: // computed by getter\n  }\n}\n\nconst obj = computed(() => {\n  // ... depends on some value\n  return res\n})\n\nconsole.log(obj.value)\n```\n\nå¹¶ä¸”åœ¨ä½¿ç”¨ Vue çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬è¿˜ä¼šå‘ç°ï¼Œå½“è®¡ç®—å±æ€§è¢«å®šä¹‰åè€Œæ²¡æœ‰è¢«ä½¿ç”¨å‰ï¼Œè®¡ç®—å±æ€§æ‰€ä¾èµ–çš„å˜é‡å˜åŒ–æ˜¯ä¸ä¼šè¢«è§¦å‘è®¡ç®—çš„ï¼Œå³â€œæ‡’â€æ‰§è¡Œã€‚å› æ­¤æˆ‘ä»¬æ€»ç»“è®¾è®¡çš„ `computed` è¦è¾¾åˆ°ä»¥ä¸‹ç›®æ ‡ï¼š\n\n* å“åº”å¼ï¼Œå½“æ‰€ä¾èµ–çš„å“åº”å¼æ•°æ®å˜åŒ–æ—¶èƒ½å¤Ÿæ›´æ–°çŠ¶æ€\n* è¿”å›ä¸€ä¸ªç”± `getter` è®¡ç®—è·å¾—çš„å€¼\n* â€œæ‡’â€æ‰§è¡Œï¼Œåªæœ‰ `obj.value` è¢«è¯»å–æ—¶æ‰ä¼šè§¦å‘è®¡ç®—\n* ç¼“å­˜ï¼Œå½“è®¡ç®—ç»“æœä¸å˜æ—¶ï¼Œ`computed` èƒ½å¤Ÿä½¿ç”¨ç¼“å­˜å€¼ä»¥å‡å°‘é‡å¤çš„è®¡ç®—\n\n### è¿”å›å€¼çš„å®ç°\n\né¦–å…ˆå¯¹äºå“åº”å¼çš„è¦æ±‚ï¼Œæˆ‘ä»¬ä¹‹å‰å®ç°çš„ `effect` å‡½æ•°å®Œå…¨å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œç›´æ¥è°ƒç”¨ `effect(getter)` å°±å¯ä»¥æŠŠ `getter` ä¸­çš„ä¾èµ–ä¸ `getter` ç»‘å®šèµ·æ¥ï¼Œæ¯å½“ä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œ`getter` å°±ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚ä½†é—®é¢˜åœ¨äºæ— æ³•æ‹¿åˆ° `getter` è¿”å›çš„å€¼ï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„å¯ä»¥å¯¹åŸæœ‰çš„ `effect` åšå¦‚ä¸‹æ”¹åŠ¨:\n\n```js\nfunction effect(fn, options={}) {\n  const effectFn = () => {\n    cleanup(effectFn)\n    activeEffect = effectFn\n    effectStack.push(effectFn)\n\n    const res = fn()  // è·å–å‰¯ä½œç”¨å‡½æ•°çš„ç»“æœ\n\n    effectStack.pop()\n    activeEffect = effectStack[effectStack.length - 1]\n\n    return res  // è¿”å›å‰¯ä½œç”¨å‡½æ•°ç»“æœ\n  }\n  effectFn.depSets = []\n  effectFn.options = options\n  effectFn()  \n  return effectFn  // è¿”å› effectFn\n}\n```\n\né€šè¿‡ä»¥ä¸Šçš„æ”¹åŠ¨ï¼Œè®© `effectFn` å‡½æ•°ä» `effect` ä¸­è¿”å›ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä»å¤–éƒ¨è°ƒç”¨ `effectFn` äº†ï¼Œå¹¶ä¸”ä»»ä½•æ—¶å€™è°ƒç”¨ `effectFn` è·å¾—çš„è¿”å›å€¼éƒ½æ˜¯æ ¹æ®æœ€æ–°çš„ä¾èµ–æ‰€è®¡ç®—çš„ã€‚\n\n### `lazy` æ‡’æ‰§è¡Œçš„å®ç°\n\nå¢åŠ  `options.lazy` æ¥æ§åˆ¶æ˜¯å¦åœ¨è°ƒç”¨ `effect` æ—¶ç«‹å³æ‰§è¡Œ `effectFn`ï¼Œéå¸¸ç®€å•:\n\n```js\nfunction effect(fn, options={}) {\n  const effectFn = () => {\n    cleanup(effectFn)\n    activeEffect = effectFn\n    effectStack.push(effectFn)\n\n    const res = fn()  // è·å–å‰¯ä½œç”¨å‡½æ•°çš„ç»“æœ\n\n    effectStack.pop()\n    activeEffect = effectStack[effectStack.length - 1]\n\n    return res  // è¿”å›å‰¯ä½œç”¨å‡½æ•°ç»“æœ\n  }\n  effectFn.depSets = []\n  effectFn.options = options\n  if (!options.lazy) {\n    effectFn()  // ç«‹å³æ‰§è¡Œä¸€æ¬¡ effectFn å»ºç«‹ç»‘å®š\n  }\n  return effectFn  // è¿”å› effectFn\n}\n```\n\næœ‰äº† `lazy: true` é€‰é¡¹ï¼Œå½“æˆ‘ä»¬ä¸è°ƒç”¨ `effect` è¿”å›çš„ `effectFn` æ—¶ï¼Œ`effectFn` æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šå‘ç”Ÿæ•°æ®çš„ç»‘å®šã€‚è¿™æ ·æ— è®ºè®¡ç®—å±æ€§æ‰€ä¾èµ–çš„å€¼å‘ç”Ÿå¤šå°‘æ¬¡å˜åŒ–éƒ½ä¸ä¼šè§¦å‘è®¡ç®—å±æ€§ã€‚\n\nä½†æ˜¯ï¼Œè¿™é‡Œçš„â€œæ‡’æ‰§è¡Œâ€å…¶å®ä»ç„¶æœ‰ä¸€ä¸ªé—®é¢˜ (ä¸å¤Ÿâ€œæ‡’â€)ï¼Œæˆ‘å°†åœ¨ä¸‹é¢ä»‹ç»å¹¶è§£å†³å®ƒã€‚\n\n### åŒ…è£… `computed`\n\næœ‰äº†ä»¥ä¸ŠåŸºç¡€ï¼ŒåŒ…è£…è®¡ç®—å±æ€§å°±é¡ºç†æˆç« äº†ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨æ¯æ¬¡è¯»å– `obj.value` æ—¶å»æ‰§è¡Œä¸€ä¸‹ `effectFn` å¹¶æŠŠå…¶è¿”å›å€¼ä½œä¸º `obj.value` è¿”å›ç»™ç”¨æˆ·å°±å¯ä»¥äº†ã€‚è¿™æ ·è‡ªç„¶è€Œç„¶æƒ³åˆ°ä½¿ç”¨å¯¹è±¡çš„ `get` æ–¹æ³•ã€‚\n\n```js\nfunction computed(getter) {\n  const effectFn = effect(getter, { lazy: true });\n  return {\n    get value() {\n      return effectFn();\n    }\n  };\n}\n```\n\n### ç¼“å­˜çš„å®ç°\n\nå½“æˆ‘ä»¬å¤šæ¬¡è¯»å– `obj.value` æ—¶ï¼Œå³ä½¿ä¾èµ–æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè¿˜æ˜¯ä¼šåå¤è°ƒç”¨ `effectFn` ä¸­çš„å‰¯ä½œç”¨å‡½æ•° `fn` æ¥é‡æ–°è®¡ç®—è·å¾—ç›¸åŒçš„ç»“æœã€‚è¿™æ˜¾ç„¶æ˜¯å¯¹æ€§èƒ½çš„æµªè´¹ã€‚å› æ­¤éœ€è¦å¯¹å…¶å®ç°ç¼“å­˜çš„åŠŸèƒ½ã€‚ç¼“å­˜çš„å®ç°ä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨ `computed` ä¸­ç¼“å­˜è®¡ç®—ç»“æœå¹¶è®¾ç½®æ ‡è®°ï¼Œè€Œåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶é‡ç½®æ ‡è®°ã€‚å½“æœ‰æ ‡è®°æ—¶é‡æ–°è®¡ç®—æ›´æ–°ç¼“å­˜ï¼Œå¦åˆ™ç›´æ¥è¿”å›ç¼“å­˜ã€‚\n\n```js\nfunction computed(getter) {\n  let dirty = true \n  let cache  // ç¼“å­˜è®¡ç®—ç»“æœ\n  const effectFn = effect(getter, { lazy: true });\n  return {\n    get value() {\n      if (dirty) {\n        // éœ€è¦é‡æ–°è®¡ç®—\n        cache = effectFn()  // æ›´æ–°ç¼“å­˜\n        dirty = false  // è®¾ç½®æ ‡è®°\n      }\n      return cache;\n    }\n  };\n}\n```\n\nä½†ä»¥ä¸Šçš„ä¿®æ”¹åªå®Œæˆäº†â€œè®¾ç½®æ ‡è®°â€çš„å·¥ä½œï¼Œè¿˜åº”è¯¥åœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–å³åœ¨ `trigger` ä¸­è°ƒç”¨ `effectFn` æ—¶é‡ç½®æ ‡è®°ã€‚æ­¤æ—¶è°ƒåº¦å™¨ Scheduler å°±æ´¾ä¸Šäº†ç”¨åœºï¼š\n\n```js\nfunction computed(getter) {\n  let dirty = true  // æ ‡è®°æ˜¯å¦éœ€è¦ä»æ–°è®¡ç®—\n  let cache  // ç¼“å­˜è®¡ç®—ç»“æœ\n  const effectFn = effect(getter, { \n    lazy: true,\n    scheduler: () => {\n      dirty = true\n    }\n  });\n  return {\n    get value() {\n      if (dirty) {\n        cache = effectFn()\n        dirty = false\n      }\n      return cache;\n    }\n  };\n}\n```\n\né€šè¿‡è°ƒåº¦å™¨å°±å®Œæˆäº†â€œæ¸…é™¤æ ‡è®°â€çš„å·¥ä½œã€‚åŒæ—¶å®ƒè¿˜è§£å†³äº†â€œæ‡’æ‰§è¡Œâ€ä¸­çš„é—ç•™é—®é¢˜ï¼šåœ¨åŸæ¥çš„ä»£ç ä¸­ï¼Œä¸€æ—¦è®¡ç®—å±æ€§çš„ä¾èµ–å‘ç”Ÿï¼Œæ— è®ºæœ‰æ²¡æœ‰è¯»å–è®¡ç®—å±æ€§çš„å€¼ï¼Œéƒ½ä¼šè§¦å‘å®ƒæ‰€å…³è”çš„å‰¯ä½œç”¨å‡½æ•° (å³ `getter`)ï¼Œè¿™å¹¶ä¸â€œæ‡’â€ã€‚ä½†é€šè¿‡è°ƒåº¦å™¨ï¼Œè·³è¿‡äº† `trigger` ä¸­ `fn` çš„æ‰§è¡Œï¼Œä»…ä»…è®¾ç½®äº† `dirty` æ ‡è®°ã€‚å› æ­¤ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ï¼Œé™¤éçœŸæ­£çš„è¯»å–è®¡ç®—å±æ€§çš„å€¼ï¼ŒçœŸæ­£å®ç°äº†â€œæ‡’â€æ‰§è¡Œã€‚\n\n### æœ€åä¸€ä¸ªé—®é¢˜\n\nå½“æˆ‘ä»¬ä½¿ç”¨ `effect` åŒ…è£¹ä¸€ä¸ªä¾èµ–äºè®¡ç®—å±æ€§çš„å‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå½“ç„¶å¸Œæœ›å½“è®¡ç®—å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘å‰¯ä½œç”¨å‡½æ•°ã€‚è¿™å°±åƒä½¿ç”¨ Vue æ—¶æŠŠè®¡ç®—å±æ€§æ¸²æŸ“åˆ°æ¨¡æ¿ä¸­ï¼Œå½“è®¡ç®—å±æ€§å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°æ¨¡æ¿ä¸­çš„å€¼ã€‚ä¾‹å¦‚ï¼š\n\n```js\nconst data = reactive({ foo: 1, bar: 2})\nconst sumRes = computed(() => data.foo + foo.bar)\n\neffect(() => {\n  document.body.innerText = sumRes.value\n})\n\ndata.foo = 100\n```\n\nå½“æŠŠ `data.foo` çš„å€¼æ›´æ–°ä¸º `100` æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ›´æ–°é¡µé¢æ–‡æœ¬çš„å‰¯ä½œç”¨å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œä»è€Œé‡æ–°è®¡ç®— `sumRes.value` æŠŠæœ€æ–°çš„å€¼ `202` æ›´æ–°åˆ°é¡µé¢ã€‚ä½†å®é™…ä¸Šè¿™å¹¶æ²¡æœ‰å‘ç”Ÿã€‚è¿™æ˜¯å› ä¸ºåœ¨å®šä¹‰è®¡ç®—å±æ€§æ—¶åªä¼šå°† `data.foo`, `foo.bar` ä¸åŒ…è£… `getter` çš„å‰¯ä½œç”¨å‡½æ•°å…³è”ï¼Œè€Œä¸ä¼šä¸åŒ…è£¹è®¡ç®—å±æ€§çš„å¤–å±‚å‰¯ä½œç”¨å‡½æ•°äº§ç”Ÿå…³è”ã€‚è¿™å’Œæˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„åµŒå¥—çš„ `effect` æ˜¯ä¸€æ ·çš„ï¼Œå³å†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°é‡Œä¾èµ–çš„å˜é‡å‘ç”Ÿå˜åŒ–ï¼Œåªä¼šè§¦å‘å†…éƒ¨å‰¯ä½œç”¨å‡½æ•°è€Œä¸ä¼šè§¦å‘å¤–éƒ¨å‰¯ä½œç”¨å‡½æ•°ã€‚ä½†åœ¨è®¡ç®—å±æ€§çš„éœ€æ±‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å®ƒæ¥è§¦å‘å¤–éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°ã€‚\n\nä¸ºäº†ä¿®å¤ä¸Šé¢çš„é—®é¢˜ï¼Œéœ€è¦åœ¨ `computed` çš„å®ç°ä¸­é€šè¿‡æ‰‹åŠ¨è°ƒç”¨ `track` å’Œ `trigger` æ·»åŠ å…³è”ï¼š\n\n```js\nfunction computed(getter) {\n  let dirty = true  // æ ‡è®°æ˜¯å¦éœ€è¦ä»æ–°è®¡ç®—\n  let cache  // ç¼“å­˜è®¡ç®—ç»“æœ\n  const effectFn = effect(getter, { \n    lazy: true,\n    scheduler: () => {\n      dirty = false \n      trigger(obj, 'value')  // 2.å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘å‰¯ä½œç”¨å‡½æ•°\n    }\n  });\n  const obj = {\n    get value() {\n      if (dirty) {\n        cache = effectFn()\n        dirty = false\n      }\n      track(obj, 'value')  // 1.è¯»å–å€¼æ—¶æ·»åŠ å…³è”\n      return cache;\n    }\n  };\n  return obj\n}\n```\n\nå½“è®¡ç®—å±æ€§å‡ºç°åœ¨ `effect` å†…éƒ¨æ—¶ï¼Œæ­¤æ—¶ `activeEffect` çš„å€¼åˆ™ä¸ºå½“å‰çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå› æ­¤è¯»å–è®¡ç®—å±æ€§çš„å€¼æ—¶ä¼šè°ƒç”¨ `track` æŠŠè®¡ç®—å±æ€§çš„ `value` ä¸å½“å‰çš„å‰¯ä½œç”¨å‡½æ•°å…³è”èµ·æ¥ã€‚è‡ªç„¶åœ°ï¼Œå½“è®¡ç®—å±æ€§çš„å€¼æ›´æ–°æ—¶ï¼Œåˆ™ä¼šè°ƒç”¨ `trigger` æŠŠç›¸å…³çš„å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œã€‚\n\n## å°ç»“\n\næœ¬æ–‡ä¸»è¦ä»‹ç»äº†è°ƒåº¦å™¨å’Œè®¡ç®—å±æ€§çš„å®ç°ï¼Œå…¶ä¸­è®¡ç®—å±æ€§æ¶‰åŠâ€œæ‡’â€æ‰§è¡Œå’Œç¼“å­˜ç­‰é—®é¢˜ã€‚æœ€ç»ˆçš„ä»£ç å®ç°å¦‚ä¸‹ã€‚å¯ä»¥[ç‚¹å‡»è¿™é‡Œ](https://codepen.io/Hozen/pen/mdaXboj)åœ¨çº¿è¿è¡Œæµ‹è¯•ã€‚\n\n```js\nconsole.log(\"code: Vue3_reactive_3_computed\");\n\nlet activeEffect;\nconst effectStack = [];\nconst bucket = new WeakMap();\n\nconst data = reactive({ foo: 1, bar: 2 });\nconst sumRes = computed(() => data.foo + data.bar);\n\neffect(() => {\n  document.body.innerText = sumRes.value;\n});\n\nsetTimeout(() => {\n  data.foo = 100;\n}, 2000);\n\nfunction computed(getter) {\n  let dirty = true;\n  let cache;\n  const effectFn = effect(getter, {\n    lazy: true,\n    scheduler: () => {\n      dirty = true;\n      trigger(obj, \"value\");\n    }\n  });\n  const obj = {\n    get value() {\n      if (dirty) {\n        cache = effectFn();\n        dirty = false;\n      }\n      track(obj, \"value\");\n      return cache;\n    }\n  };\n  return obj;\n}\n\nfunction reactive(obj) {\n  return new Proxy(obj, {\n    get(target, key) {\n      track(target, key);\n      return Reflect.get(target, key);\n    },\n    set(target, key, value) {\n      const res = Reflect.set(target, key, value);\n      trigger(target, key);\n      return res;\n    }\n  });\n}\n\nfunction track(target, key) {\n  if (!activeEffect) return;\n  let depsMap = bucket.get(target);\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()));\n  }\n  let deps = depsMap.get(key);\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()));\n  }\n  deps.add(activeEffect);\n  activeEffect.depSets.push(deps);\n}\n\nfunction trigger(target, key) {\n  let depsMap = bucket.get(target);\n  if (!depsMap) return;\n  let deps = depsMap.get(key);\n  if (!deps) return;\n  const depsToRun = new Set(deps);\n  //  depsToRun.forEach(fn => fn())\n  depsToRun.forEach((fn) => {\n    if (fn === activeEffect) return;\n    if (fn.options.scheduler) {\n      // å¦‚æœè®¾ç½®äº†è°ƒåº¦å™¨ï¼Œåˆ™å°†å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œäº¤ç»™è°ƒåº¦å™¨\n      fn.options.scheduler(fn);\n    } else {\n      // å¦åˆ™é»˜è®¤ç›´æ¥æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°\n      fn();\n    }\n  });\n}\n\nfunction effect(fn, options = {}) {\n  const effectFn = () => {\n    cleanup(effectFn);\n    activeEffect = effectFn;\n    effectStack.push(effectFn);\n\n    const res = fn(); // è·å–å‰¯ä½œç”¨å‡½æ•°çš„ç»“æœ\n\n    effectStack.pop();\n    activeEffect = effectStack[effectStack.length - 1];\n\n    return res; // è¿”å›å‰¯ä½œç”¨å‡½æ•°ç»“æœ\n  };\n  effectFn.depSets = [];\n  effectFn.options = options;\n  if (!options.lazy) {\n    effectFn(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡ effectFn å»ºç«‹ç»‘å®š\n  }\n  return effectFn; // è¿”å› effectFn\n}\n\nfunction cleanup(effectFn) {\n  effectFn.depSets.forEach((deps) => {\n    deps.delete(effectFn);\n  });\n  effectFn.depSets.length = 0;\n}\n```\n\n## *å‚è€ƒèµ„æ–™*\n\n[1] vuejs/core: ğŸ–– Vue.js is a progressive, incrementally-adoptable JavaScript framework for building UI on the web.[EB/OL]. [2023-09-22]. <https://github.com/vuejs/core>.\n\n[2] Vue.js - æ¸è¿›å¼ JavaScript æ¡†æ¶ | Vue.js[EB/OL]. [2023-09-22]. <https://cn.vuejs.org/>.\n\n[3] éœæ˜¥é˜³. Vue.jsè®¾è®¡ä¸å®ç°[M/OL]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2022[2023-09-19]. <https://book.douban.com/subject/35768338/>.\n\n[4] JavaScript | MDN[EB/OL]. [2023-04-10](2023-09-22). <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript>.\n","tags":["å“åº”å¼","Vue"],"categories":["developer"]},{"title":"Vue3 å“åº”å¼(2)-åˆ†æ”¯åˆ‡æ¢ã€åµŒå¥—ã€å’Œæ— é™é€’å½’","url":"/archives/73/","content":"\nä¸Šæ–‡[Vue3 å“åº”å¼(1)-åŸºç¡€åŸç†](https://www.hozen.site/archives/72/)ä»‹ç»äº†å“åº”å¼ç³»ç»Ÿçš„åŸºæœ¬åŸç†å¹¶åˆ©ç”¨ Proxy è¿›è¡Œäº†ç®€å•çš„å®ç°ï¼Œèƒ½å¤Ÿåº”å¯¹ç®€å•çš„å“åº”å¼åœºæ™¯ã€‚ä½†è¯¥ç³»ç»Ÿä»ç„¶é¢ä¸´ç€ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚å½“å‰¯ä½œç”¨å‡½æ•°ä¸­æ—¢åŒ…å«å¯¹å“åº”å¼å¯¹è±¡çš„è¯»å–æ“ä½œä¹ŸåŒ…å«è®¾ç½®æ“ä½œæ—¶ä¼šä½¿ç³»ç»Ÿè¿›å…¥æ— é™é€’å½’çš„æ­»å¾ªç¯ã€å½“ä»£ç åˆ†æ”¯åˆ‡æ¢æ—¶å†—ä½™çš„å…³è”æ²¡æœ‰è¢«åŠæ—¶æ¸…ç†ç­‰é—®é¢˜ã€‚æœ¬æ–‡å°±æ¥ä¸€ä¸€ä»‹ç»è¿™äº›é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ã€‚\n\n<!--more-->\n\n## åˆ†æ”¯åˆ‡æ¢\n\n### åˆ†æ”¯åˆ‡æ¢é—®é¢˜çš„æè¿°\n\nå¯¹äºåŸæœ‰çš„å“åº”å¼ç³»ç»Ÿï¼Œæˆ‘ä»¬è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š\n\n``` js\nconst data = reactive({\n  isShow: true,\n  text: 'Hi!'\n})\n\nfunction fn() {\n  console.log('Debug: update text')\n  document.body.innerText = data.isShow ? data.text : ''\n}\n\neffect(fn)\n\ndata.isShow = false\ndata.text = 'Hello World!'\n\n```\n\næ ¹æ®åŸæœ‰çš„å®ç°ï¼Œå½“æ‰§è¡Œ `effect` æ—¶ä¼šç«‹å³è°ƒç”¨ `fn`ï¼Œç”±äº `data.isShow` ä¸º `true`ï¼Œå› æ­¤ä¼šè¯»å– `data.text` çš„å€¼ï¼Œæ­¤æ—¶ä»£ç†çš„ `get` æ‹¦æˆªå™¨ä¼šæŠŠ `fn` åˆ†åˆ«ä¸ `data.isShow` å’Œ `data.text` å…³è”ã€‚å› æ­¤å½“æ‰§è¡Œ `data.isShow = false` æ—¶ï¼Œä¼šé‡æ–°æ‰§è¡Œ `fn`ï¼Œå°†é¡µé¢çš„æ–‡æœ¬ç½®ç©ºã€‚è‡³æ­¤éƒ½æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ç”±äºæ­¤æ—¶ `data.isShow` ä¸º `false`ï¼Œå‰¯ä½œç”¨å‡½æ•° `fn` å¹¶ä¸ä¾èµ–äº `data.text` äº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®º `data.text` çš„å€¼å‘ç”Ÿä»€ä¹ˆå˜åŒ–éƒ½ä¸äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼Œæ— éœ€å†æ¬¡è°ƒç”¨ `fn` äº†ã€‚ä½†ç”±äºå¼€å§‹æ—¶å·²ç»å°† `fn` ä¸ `data.text` ç›¸å…³è”äº†ï¼Œæ‰€ä»¥ä»»ä½•æ—¶å€™è®¾ç½® `data.text` æ—¶éƒ½ä¼šé‡æ–°è°ƒç”¨ `fn`ï¼Œå³ä½¿è¿™æ ·æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚\n\nå¯¹äºè¿™ç§å‰¯ä½œç”¨å‡½æ•°ä¸­åŒ…å«åˆ†æ”¯åˆ‡æ¢çš„æƒ…å†µï¼Œæ¯æ¬¡åˆ†æ”¯åˆ‡æ¢æ—¶æ‰€ä¾èµ–çš„å“åº”å¼å˜é‡å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ç”±äºæ¯æ¬¡è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ—¶éƒ½ä¼šè§¦å‘ `get` æ‹¦æˆªå™¨ï¼Œæ‰€ä»¥å¹¶ä¸æ‹…å¿ƒç”±äºåˆ†æ”¯åˆ‡æ¢å¸¦æ¥çš„æ–°å¢ä¾èµ–ã€‚ä½†å¯¹äºå·²ç»æ— ç”¨çš„ä¾èµ–ä»£ç ä¸­è¿˜æ²¡æœ‰ä»»ä½•æ¸…ç†çš„æ“ä½œï¼Œè¿™å°±ä¼šå¯¼è‡´å†—ä½™çš„å‰¯ä½œç”¨å‡½æ•°ä¾ç„¶è¢«æ‰§è¡Œã€‚è¿™æ ·è™½ç„¶ä¸ä¼šå¯¹ç³»ç»Ÿäº§ç”Ÿé¢å¤–çš„å‰¯ä½œç”¨ï¼Œä½†å½“å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå¼€é”€è¾ƒå¤§æ—¶ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ã€‚\n\n### åˆ†æ”¯åˆ‡æ¢é—®é¢˜çš„è§£å†³æ–¹æ³•\n\nå¯¹äºä»¥ä¸Šé—®é¢˜ï¼Œè§£å†³æ–¹æ³•éå¸¸ç®€å•ï¼Œé‚£å°±æ˜¯åœ¨æ¯æ¬¡å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå‰æŠŠè¯¥å‰¯ä½œç”¨å‡½æ•°ä»æ‰€æœ‰ä¸ä¹‹ç›¸å…³çš„ä¾èµ–é›†åˆä¸­ç§»é™¤ã€‚ç„¶åæ ¹æ®æ­¤æ—¶çš„åˆ†æ”¯æƒ…å†µé‡æ–°æ”¶é›†å‰¯ä½œç”¨å‡½æ•°ã€‚ä¾‹å¦‚å¯¹äºä¸Šè¿°ä¾‹å­ï¼Œç¬¬ä¸€æ¬¡æ”¶é›†ä¾èµ–æ—¶ï¼Œé›†åˆ `bucket[data].isShow` å’Œé›†åˆ `bucket[data].text` ä¸­éƒ½æœ‰å‰¯ä½œç”¨å‡½æ•° `fn`ã€‚å½“åˆ†æ”¯åˆ‡æ¢æ—¶ï¼Œé¦–å…ˆå°† `fn` ä»è¿™ä¸¤ä¸ªé›†åˆä¸­åˆ é™¤ï¼Œç„¶åæ ¹æ® `data.isShow` ä¸º `false`ï¼Œæœ¬æ¬¡æ‰§è¡Œå°†åªä¼šæŠŠ `fn` æ”¶é›†åˆ°é›†åˆ `bucket[data].isShow` ä¸­ã€‚å› æ­¤`data.text` çš„å˜åŒ–å°†ä¸ä¼šå†è°ƒç”¨ `fn`ã€‚\n\nä¸ºäº†æ–¹ä¾¿çš„çŸ¥é“å‰¯ä½œç”¨å‡½æ•° `fn` éƒ½å­˜åœ¨äºå“ªäº›é›†åˆä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å‰¯ä½œç”¨å‡½æ•°å¢åŠ ä¸€ä¸ªæ•°ç»„å±æ€§æ¥ä¿å­˜ä¸ä¹‹å…³è”çš„é›†åˆï¼Œå¹¶åœ¨ `track` ä¸­æŠŠç›¸å…³çš„é›†åˆæ”¾å…¥å‰¯ä½œç”¨å‡½æ•°æ•°ç»„ä¸­ã€‚ç„¶ååœ¨æ¯æ¬¡å‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå¯¹ä¾èµ–è¿›è¡Œæ¸…ç†ã€‚å…·ä½“çš„ä¿®æ”¹å¦‚ä¸‹\n\n```js\nfunction effect(fn) {\n  const effectFn = () => {\n    cleanup(effectFn)  // ä¸ºäº†è°ƒç”¨ cleanup éœ€è¦é‡æ–°åŒ…è£… fn\n    activeEffect = effectFn  // è®¾ç½®ä¸ºåŒ…è£…åçš„ effectFn\n    fn()\n  } \n  effectFn.depSets = []  // ä¿å­˜ç›¸å…³çš„é›†åˆ \n  effectFn()\n}\n\nfunction track(target, key) {\n   if (!activeEffect) return\n  let depsMap = bucket.get(target)\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()))\n  }\n  let deps = depsMap.get(key)\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()))\n  }\n  deps.add(activeEffect)\n  activeEffect.depSets.push(deps)  // è®°å½•ç›¸å…³çš„é›†åˆ\n}\n\nfunction cleanup (effectFn) {\n  effectFn.depSets.forEach(deps => {\n    deps.delete(effectFn)\n  })\n  effectFn.depSets.length = 0  // æ¸…ç†å®Œæ¯•ï¼Œæ•°ç»„ç½®ç©º\n}\n```\n\n**ä½†è¯·æ³¨æ„**ï¼Œé€šè¿‡ä»¥ä¸Šä¿®æ”¹è™½ç„¶å®Œæˆäº†å¯¹å†—ä½™ä¾èµ–çš„æ¸…ç†ï¼Œä½†æ˜¯è¿è¡Œæ—¶å‘ç°ç³»ç»Ÿä¼šè¿›å…¥æ­»å¾ªç¯ï¼è¿™æ˜¯ç”±äºåœ¨ `trigger` ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n\n```js\nfunction trigger(target, key){\n  // ...\n  deps.forEach(fn => fn())\n}\n```\n\nåœ¨æ‰§è¡Œè¯¥ä»£ç æ—¶ï¼Œæ¯æ¬¡æ‰§è¡Œ `fn` æ—¶éƒ½ä¼šè§¦å‘ `cleanup` å°† `fn` ä»é›†åˆ `deps` ä¸­æ¸…é™¤ï¼Œç„¶ååˆè§¦å‘ `track` æŠŠ `fn` åˆé‡æ–°æ”¶é›†åˆ°é›†åˆ `deps` ä¸­ï¼Œå°±ç›¸å½“äºæ‰§è¡Œä»¥ä¸‹ä»£ç é€ æˆæ­»å¾ªç¯ï¼š\n\n```js\nconst s = new Set([1])\nfor (const x of s) {\n  s.delete(1)\n  s.add(1)\n}\n```\n\nå› æ­¤ï¼Œæˆ‘ä»¬è¿˜è¦å¯¹ `trigger` åšä¸€ç‚¹ä¿®æ”¹ã€‚åªéœ€è¦æŠŠè¦è¿è¡Œçš„å‰¯ä½œç”¨å‡½æ•°é›†åˆåšä¸€ä¸ªâ€œå¿«ç…§â€ï¼Œä½¿å¾—æ¥ä¸‹æ¥çš„ `cleanup` ä¸å½±å“æœ¬æ¬¡çš„è¿è¡Œå³å¯ï¼š\n\n```js\nfunction trigger(target, key){\n  // ...\n  // deps.forEach(fn => fn())\n  const depsToRun = new Set(deps)\n  depsToRun.forEach(fn => fn())\n}\n```\n\n## åµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°\n\n### åµŒå¥—é—®é¢˜çš„æè¿°\n\nå¦‚æœå‰¯ä½œç”¨å‡½æ•°å‘ç”ŸåµŒå¥—ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¾‹å¦‚å¯¹äºä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¸Œæœ› `data.foo` ä¸å¤–å±‚çš„å‰¯ä½œç”¨å‡½æ•°å‘ç”Ÿç»‘å®šï¼Œè€Œ `data.bar` ä¸å†…å±‚çš„å‰¯ä½œç”¨å‡½æ•°ç»‘å®šã€‚ä½†æ‰§è¡Œ `data.foo = false` æ—¶å‘ç°ï¼Œå¹¶æ²¡æœ‰è§¦å‘å¤–éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°è€Œæ˜¯ä»…ä»…è§¦å‘äº†å†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ\n\n```js\nconst data = reactive({\n  foo: true,\n  bar: false\n})\n\neffect(() => {\n  effect(() => {\n    console.log('inner effect', data.bar)\n  })\n  console.log('out effect', data.foo)\n})\n\ndata.foo = false\n```\n\né—®é¢˜å‡ºåœ¨ `activeEffect` å˜é‡çš„å¤„ç†ä¸Šï¼Œå½“å¼€å§‹æ‰§è¡Œå¤–éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œå…ˆæŠŠ `activeEffect` æŒ‡å‘å¤–éƒ¨å‡½æ•°ï¼Œç„¶åè¿›å…¥å†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œæ­¤æ—¶ `activeEffect` æŒ‡å‘å†…éƒ¨çš„å‡½æ•°ï¼Œå½“å†…éƒ¨çš„å‡½æ•°æ‰§è¡Œå®Œåã€‚è¿è¡Œåˆ° `console.log('out effect', data foo)` æ—¶ï¼Œ`track` å¼€å§‹æ”¶é›†ä¾èµ–ï¼Œä½†æ­¤æ—¶çš„ `activeEffect` æŒ‡å‘çš„æ˜¯å†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå› æ­¤å°† `data.foo` ä¸å†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°å‘ç”Ÿäº†ç»‘å®šã€‚å¯¼è‡´ `data.foo` æœ¬åº”è¯¥ä¸å¤–éƒ¨å‰¯ä½œç”¨å‡½æ•°è¿›è¡Œå…³è”çš„é¢„æœŸæ²¡æœ‰å®ç°ï¼Œä¹Ÿå°±å¯¼è‡´äº†ä¸Šé¢çš„è¿è¡Œç»“æœã€‚\n\n### åµŒå¥—é—®é¢˜çš„è§£å†³\n\nå¯¹äºåµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°å¯¼è‡´å¤–å±‚å‡½æ•°ä¸¢å¤±çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡æ ˆæ¥è§£å†³ã€‚ä¿®æ”¹ `effect` å‡½æ•°ï¼Œæ¯å½“å¼€å§‹æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°æ—¶ï¼ŒæŠŠå½“å‰çš„å‰¯ä½œç”¨å‡½æ•°å…¥æ ˆï¼Œå¹¶æŠŠ `activeEffect` æ ‡è®°ä¸ºå½“å‰å‡½æ•°ã€‚æ‰§è¡Œå®Œæ¯•åï¼ŒæŠŠæ ˆé¡¶å‰¯ä½œç”¨å‡½æ•°å‡ºæ ˆï¼Œå¹¶æŠŠ `activeEffect` æŒ‡å›æ ˆé¡¶çš„å‰¯ä½œç”¨å‡½æ•° (å¦‚æœæœ‰çš„è¯)ã€‚\n\n```js\nconst effectStack = []\n\nfunction effect(fn) {\n  const effectFn = () => {\n    cleanup(effectFn)\n    activeEffect = effectFn\n    effectStack.push(effectFn)  // å…¥æ ˆï¼Œé˜²æ­¢æ‰§è¡Œ fn æ—¶ä½¿ effectFn ä¸¢å¤±\n    fn()\n    effectStack.pop()  // æ‰§è¡Œå®Œæ¯•ï¼Œå‡ºæ ˆ\n    activeEffect = effectStack[effectStack.length - 1]  // å°† activeEffect æŒ‡å›æ ˆé¡¶\n  } \n  effectFn.depSets = []  // ä¿å­˜ç›¸å…³çš„é›†åˆ \n  effectFn()\n}\n```\n\nç»è¿‡å¦‚æ­¤ä¿®æ”¹åï¼Œåœ¨æ‰§è¡Œå¤–éƒ¨å‰¯ä½œç”¨å‡½æ•°æ—¶ä¼šæŠŠå½“å‰å‰¯ä½œç”¨å‡½æ•°å…¥æ ˆï¼Œè¿›å…¥å†…éƒ¨å‰¯ä½œç”¨å‡½æ•°æ—¶è™½ç„¶ä¼šæŠŠ `activeEffect` æŒ‡å‘å†…éƒ¨å‰¯ä½œç”¨å‡½æ•°ï¼Œä½†å½“å®ƒæ‰§è¡Œå®Œæ¯•åï¼Œä¼šå°† `activeEffect` æŒ‡å›æ ˆé¡¶çš„å¤–éƒ¨å‰¯ä½œç”¨å‡½æ•°ã€‚å› æ­¤å¯ä»¥å®ç°æ­£ç¡®çš„å…³è”ã€‚\n\nè¿™é‡Œå¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œå¯¹æ ˆçš„æ›´ç¬¦åˆç›´è§‰çš„ä½¿ç”¨åº”è¯¥æ˜¯åœ¨ `effectFn` ä¸­å°†å…¶å…¥æ ˆï¼Œç„¶ååœ¨æ¶ˆè´¹å®ƒçš„åœ°æ–¹ (`track` æ–¹æ³•å¤„) ç›´æ¥å‡ºæ ˆä½¿ç”¨å³å¯ã€‚ä¸ºä»€ä¹ˆå…¨éƒ¨æ”¾åœ¨ `effectFn` é‡Œæ‰‹åŠ¨ç®¡ç†å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œä¸€ä¸ª `effectFn` é‡Œå¯èƒ½æ¶‰åŠå¤šä¸ªå“åº”å¼å˜é‡åŠå±æ€§ï¼Œä¼šè§¦å‘å¤šæ¬¡ `track`ï¼Œåœ¨ `track` é‡Œå¤šæ¬¡å¼¹å‡ºä½¿ç”¨ä¼šå¯¼è‡´ç»‘å®šé”™è¯¯çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œä»¥åŠæ ˆçš„ä¸‹æº¢ã€‚\n\n## æ— é™é€’å½’é—®é¢˜\n\n### æ— é™é€’å½’é—®é¢˜çš„æè¿°\n\nè€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­å…ˆè¯»å–æŸä¸ªå“åº”å¼å˜é‡çš„å€¼ï¼Œç„¶ååˆæ”¹å˜å®ƒçš„å€¼ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå½“æ‰§è¡Œ `data.cnt++` (å³ `data.cnt = data.cnt + 1`) æ—¶ï¼Œé¦–å…ˆè¯»å– `data.cnt` è§¦å‘ `track` å°†è¯¥å‡½æ•°ä¸ `data.cnt` è¿›è¡Œå…³è”ã€‚ç„¶åä¸º `data.cnt` è®¾ç½®æ–°å€¼æ—¶ï¼Œåˆä¼šè§¦å‘è¯¥å‰¯ä½œç”¨å‡½æ•°ï¼Œç»§ç»­æ‰§è¡Œ `data.cnt++`ã€‚å¯¼è‡´ä»¥ä¸Šè¿‡ç¨‹æ— é™é€’å½’æ‰§è¡Œã€‚\n\n```js\nconst data = reactive({\n  cnt: 0\n})\n\neffect(() => {\n  console.log(data.cnt++)\n})\n```\n\nå†è€ƒè™‘ä¸‹é¢çš„åœºæ™¯åŒæ ·æ˜¯åœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­æ—¢è¯»å€¼åˆèµ‹å€¼ï¼Œä¸ºä»€ä¹ˆä¸ä¼šå‘ç”Ÿæ— é™é€’å½’ï¼Ÿ\n\n```js\nconst data = reactive({\n  cnt: 0\n})\n\neffect(() => {\n  data.cnt = 0\n  console.log(data.cnt)\n})\n```\n\nè¿™ä¸ªä¾‹å­ä¸åŒçš„æ˜¯å…ˆèµ‹å€¼åå–å€¼ã€‚ç”±äºå‰¯ä½œç”¨å‡½æ•°æ‰§è¡Œå‰ä¼šå…ˆè°ƒç”¨ `cleanup` æ¸…é™¤æ‰€æœ‰å…³è”ï¼Œæ‰€ä»¥å½“èµ‹å€¼ `data.cnt` è¿˜æ²¡æœ‰æŠŠå‰¯ä½œç”¨å‡½æ•°å…³è”èµ·æ¥ï¼Œå› æ­¤ä¸ä¼šæ— é™é€’å½’ã€‚\n\n### æ— é™é€’å½’é—®é¢˜çš„è§£å†³\n\nå¯¹äºä¸Šé¢æ— é™é€’å½’çš„ä¾‹å­ï¼Œå…¶æœ¬è´¨æ˜¯å½“å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé€šè¿‡æŸç§æ–¹æ³•é€šçŸ¥æ‰€æœ‰ä¸ä¹‹ç›¸å…³çš„å‡½æ•°ï¼Œè®©å®ƒä»¬é‡æ–°æ‰§è¡Œä»¥è¾¾åˆ°æ›´æ–°çŠ¶æ€çš„ç›®çš„ã€‚ä½†æ˜¯æˆ‘ä»¬**ä¸éœ€è¦é€šçŸ¥ä½¿å¾—æ•°æ®å‘ç”Ÿå˜åŒ–çš„å‡½æ•°æœ¬èº«**ï¼Œå› ä¸ºå‡½æ•°æœ¬èº«èƒ½å¤Ÿè·å¾—åˆ°æ­¤æ—¶æ•°æ®çš„å˜åŒ–ã€‚å› æ­¤è§£å†³æ–¹æ³•å°±å¾ˆæ˜ç¡®äº†ï¼Œé‚£å°±æ˜¯åœ¨ `trigger` ä¸­ä¸è¦å»â€œé€šçŸ¥â€ `activeEffect` è‡ªèº«ã€‚\n\n```js\nfunction trigger(target, value) {\n  // ...\n  const depsToRun = new Set(deps)\n  //  depsToRun.forEach(fn => fn())\n  depsToRun.forEach(fn => {\n    if (fn !== activeEffect) fn()\n  })\n}\n```\n\nå…¶å®è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚ä½•ä¿è¯å…¨å±€å˜é‡ `activeEffect` æŒ‡å‘çš„æ˜¯è§¦å‘ `trigger` çš„å‰¯ä½œç”¨å‡½æ•°æœ¬èº«ï¼Ÿå…¶å®å¹¶ä¸èƒ½ä¿è¯ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹åœ¨ `trigger` ä¸­ `activeEffect` éƒ½æ˜¯ `undefined`ã€‚ä½†æ˜¯åªè¦èƒ½ä¿è¯åœ¨å¯èƒ½å‘ç”Ÿæ— é™é€’å½’çš„æƒ…å†µä¸‹ï¼Œ`activeEffect` æŒ‡å‘çš„æ˜¯è§¦å‘ `trigger` çš„å‰¯ä½œç”¨æœ¬èº«å³å¯ã€‚è€Œè¿™ä¸€ç‚¹æ˜¯æ˜¾ç„¶å¯ä»¥ä¿è¯çš„ã€‚\n\n## ä»£ç å’Œæµ‹è¯•\n\nç»è¿‡å¯¹ä»¥ä¸Šä¸‰ä¸ªé—®é¢˜çš„åˆ†æå’Œè§£å†³ï¼Œæœ€ç»ˆç‰ˆæœ¬çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nlet activeEffect;\nconst effectStack = [];\nconst bucket = new WeakMap();\n\nfunction reactive(obj) {\n  return new Proxy(obj, {\n    get(target, key) {\n      track(target, key); // æœé›†ä¾èµ–å‡½æ•°\n      return Reflect.get(target, key);\n    },\n    set(target, key, value) {\n      const res = Reflect.set(target, key, value);\n      trigger(target, key); // è§¦å‘å…³è”çš„ä¾èµ–å‡½æ•°\n      return res;\n    }\n  });\n}\n\nfunction track(target, key) {\n  if (!activeEffect) return;\n  let depsMap = bucket.get(target);\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()));\n  }\n  let deps = depsMap.get(key);\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()));\n  }\n  deps.add(activeEffect);\n  activeEffect.depSets.push(deps); // è®°å½•ç›¸å…³çš„é›†åˆ\n}\n\nfunction trigger(target, key) {\n  let depsMap = bucket.get(target);\n  if (!depsMap) return;\n  let deps = depsMap.get(key);\n  if (!deps) return;\n  const depsToRun = new Set(deps);\n  //  depsToRun.forEach(fn => fn())\n  depsToRun.forEach((fn) => {\n    if (fn !== activeEffect) fn();\n  });\n}\n\nfunction effect(fn) {\n  const effectFn = () => {\n    cleanup(effectFn);\n    activeEffect = effectFn;\n    effectStack.push(effectFn); // å…¥æ ˆï¼Œé˜²æ­¢æ‰§è¡Œ fn æ—¶ä½¿ effectFn ä¸¢å¤±\n    fn();\n    effectStack.pop(); // æ‰§è¡Œå®Œæ¯•ï¼Œå‡ºæ ˆ\n    activeEffect = effectStack[effectStack.length - 1]; // å°† activeEffect æŒ‡å›æ ˆé¡¶\n  };\n  effectFn.depSets = []; // ä¿å­˜ç›¸å…³çš„é›†åˆ\n  effectFn();\n}\n\nfunction cleanup(effectFn) {\n  effectFn.depSets.forEach((deps) => {\n    deps.delete(effectFn);\n  });\n  effectFn.depSets.length = 0; // æ¸…ç†å®Œæ¯•ï¼Œæ•°ç»„ç½®ç©º\n}\n```\n\nç‚¹å‡»[è¿™é‡Œ](https://codepen.io/Hozen/pen/rNoYLqZ)åœ¨çº¿è¿è¡Œå’Œæµ‹è¯•ã€‚\n\n## å°ç»“\n\nè‡³æ­¤å°±åŸºæœ¬ä¸Šå®ç°äº†ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„å“åº”å¼ç³»ç»Ÿï¼Œå…¶å®åœ¨ä½¿ç”¨ Vue çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å‡ ä¹ä¸ä¼šå»è°ƒç”¨ `effect` æ–¹æ³•ï¼Œæˆ‘ä»¬åªæ˜¯å£°æ˜å“åº”å¼å˜é‡ï¼Œå¹¶æŠŠå®ƒåº”ç”¨åˆ°æ¨¡æ¿ä¸­ã€‚Vue ä¼šè§£ææ¨¡æ¿æ¥é€šè¿‡ `effect` ç»‘å®šæ•°æ®ä¸æ¸²æŸ“å‡½æ•°ã€‚\n\nä¸‹ä¸€ç« å°†ä»‹ç»å¦‚ä½•åœ¨å·²æœ‰çš„å“åº”å¼ç³»ç»Ÿä¸Šå®ç° `computed` æ–¹æ³•ã€‚\n\nå¦å¤–ï¼Œå¯¹äºç¬¬äºŒä¸ªé—®é¢˜[åµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°](#åµŒå¥—çš„å‰¯ä½œç”¨å‡½æ•°)ï¼Œä»ç„¶æœ‰ä¸€ä¸ªé—®é¢˜ã€‚é‚£å°±æ˜¯ç”±äºå†…éƒ¨çš„å‰¯ä½œç”¨å‡½æ•°æ˜¯ç”±é—­åŒ…åˆ›å»ºçš„ï¼Œåœ¨ä¾èµ–é›†åˆä¸­æ— æ³•å»é‡ã€‚è¿™æ ·å¯¼è‡´æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡å¤–éƒ¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å†…éƒ¨å‰¯ä½œç”¨å‡½æ•°å¹¶å°†å…¶ä¸ä¾èµ–çš„å˜é‡ç»‘å®šã€‚å½“è¯¥å˜é‡æ›´æ–°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰ç»‘å®šçš„å‰¯ä½œç”¨å‡½æ•°éƒ½æ‰§è¡Œä¸€éï¼Œè™½ç„¶å®ƒä»¬çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚\n\n## *å‚è€ƒèµ„æ–™*\n\n[1] vuejs/core: ğŸ–– Vue.js is a progressive, incrementally-adoptable JavaScript framework for building UI on the web.[EB/OL]. [2023-09-22]. <https://github.com/vuejs/core>.\n\n[2] Vue.js - æ¸è¿›å¼ JavaScript æ¡†æ¶ | Vue.js[EB/OL]. [2023-09-22]. <https://cn.vuejs.org/>.\n\n[3] éœæ˜¥é˜³. Vue.jsè®¾è®¡ä¸å®ç°[M/OL]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2022[2023-09-19]. <https://book.douban.com/subject/35768338/>.\n\n[4] JavaScript | MDN[EB/OL]. [2023-04-10](2023-09-22). <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript>.\n","tags":["å“åº”å¼","Vue"],"categories":["developer"]},{"title":"Vue3 å“åº”å¼(1)-åŸºç¡€åŸç†","url":"/archives/72/","content":"\nVue ä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°å£°æ˜å¼çš„ UIï¼Œæ˜¯å› ä¸º Vue é€šè¿‡å“åº”å¼å°†æ•°æ®å’Œ UI è¿›è¡Œäº†ç»‘å®šï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ Vue ä¼šè‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„å‡½æ•°æ¥é‡æ–°æ¸²æŸ“å—åˆ°å½±å“çš„ UIã€‚æœ¬ç³»åˆ—æ–‡ç« å°±æ¥ç®€å•åˆ†æä¸‹ Vue å“åº”å¼ç³»ç»Ÿçš„å®ç°ã€‚æœ¬æ–‡å…ˆä»å“åº”å¼çš„åŸºç¡€åŸç†å¼€å§‹ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„å“åº”å¼ç³»ç»Ÿã€‚\n\n<!--more-->\n\n## ç³»ç»Ÿè®¾è®¡\n\n### è®¾è®¡ç›®æ ‡\n\næˆ‘ä»¬å¸Œæœ›å®ç°è¿™æ ·çš„ç³»ç»Ÿï¼šèƒ½å¤Ÿå°†æŸäº›å˜é‡åŒ…è£…æˆå“åº”å¼çš„å˜é‡ï¼Œå½“è¯¥å˜é‡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾èµ–äºè¯¥å˜é‡çš„å‡½æ•°èƒ½å¤Ÿé‡æ–°æ‰§è¡Œä»¥è¾¾åˆ°åˆ·æ–°çŠ¶æ€çš„ç›®çš„ï¼Œä¾‹å¦‚é‡æ–°æ¸²æŸ“ UIã€‚\n\nå…·ä½“åœ°ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹å‡½æ•°ï¼š\n\n* `reactive()`: åŒ…è£…å“åº”å¼å˜é‡\n* `effect()`: åŒ…è£…èƒ½å¤Ÿå“åº”æ•°æ®å˜åŒ–çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨æ‰€æ¶‰åŠçš„å“åº”å¼å˜é‡å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ\n\nä¾‹å¦‚ï¼Œå¯¹äºä»¥ä¸‹ä»£ç ï¼Œé¦–å…ˆä½¿ç”¨ `reactive()` æ–¹æ³•å°† `obj` åŒ…è£…æˆå“åº”å¼å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ `effect()` æ–¹æ³•åŒ…è£…æ¸²æŸ“é¡µé¢æ–‡å­—å†…å®¹çš„å‡½æ•° `fn`ï¼Œä½¿å¾—å½“ `data.text` å‘ç”Ÿå˜åŒ–æ—¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è°ƒç”¨ `fn` æ¥æ›´æ–°é¡µé¢çš„æ–‡å­—å†…å®¹ã€‚\n\n```js\nconst obj = {\n  text: 'Hi'\n}\nconst data = reactive(obj)\n\nfunction fn() {\n  document.body.innerText = data.text\n}\n\neffect(fn)\n\nsetTiemout(() => {\n  data.text = 'Hello World'\n}, 2000)\n```\n\n### æŠ€æœ¯åŸç†\n\nå¯¹äºä»¥ä¸Šçš„è®¾è®¡ç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `Proxy` å¯¹è±¡æ¥å®ç°ã€‚æ•´ä½“çš„æ€è·¯æ˜¯è¿™æ ·ï¼š\n\n* å½“è°ƒç”¨ `reactive(obj)` æ—¶ï¼Œè¿”å›ä¸€ä¸ªå¯¹åŸå§‹æ•°æ® `obj` çš„ä»£ç† `data`ã€‚å¹¶æ‹¦æˆªå®ƒçš„ `get` å’Œ `set` æ“ä½œã€‚\n* åœ¨æ‹¦æˆª `get` æ—¶ï¼Œè®°å½•è¯»å–è¯¥å±æ€§çš„å‡½æ•°ï¼Œä¾‹å¦‚ `fn` ä¸­è¯»å–äº† `data.text`ï¼Œåˆ™å°† `fn` å‡½æ•°æ”¶é›†èµ·æ¥\n* åœ¨æ‹¦æˆª `set` æ“ä½œæ—¶ï¼Œå°†ä¸Šä¸€æ­¥æ”¶é›†èµ·æ¥çš„å‡½æ•°é‡æ–°æ‰§è¡Œ\n* `effect` æ–¹æ³•åˆ™ç”¨æ¥å¤„ç†å¯¹å‰¯ä½œç”¨å‡½æ•° `fn` çš„æ ‡è®°ç®¡ç†\n\nç®€è€Œè¨€ä¹‹ï¼Œå¯¹äºå“åº”å¼æ•°æ®ï¼Œå½“è¯»å–æŸä¸ªå±æ€§æ—¶æ”¶é›†ä¾èµ–äºè¯¥å±æ€§çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œå½“ä¿®æ”¹è¯¥å±æ€§çš„å€¼æ—¶æŠŠä¹‹å‰æ”¶é›†çš„å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œã€‚\n\n## ç¼–ç å®ç°\n\n### `reactive`\n\né¦–å…ˆå®ç° `reactive` æ–¹æ³•:\n\n```js\nfunction reactive(obj) {\n  return new Proxy(obj, {\n    get(target, key) {\n      track(target, key)  // æ”¶é›†ä¾èµ–å‡½æ•°\n      return Reflect.get(target, key)\n    },\n    set(target, key, value) {\n      const res = Reflect.set(target, key, value)\n      trigger(target, key)  // è§¦å‘å…³è”çš„ä¾èµ–å‡½æ•°\n      return res\n    }\n  })\n}\n```\n\nä¸‹é¢å®ç°è¿½è¸ªå’Œè§¦å‘æ–¹æ³• `tarck` å’Œ `trigger`ã€‚æ³¨æ„è¿™ä¸¤ä¸ªæ–¹æ³•é‡Œä½¿ç”¨åˆ°äº†å…¨å±€å˜é‡ `activeEffect` å’Œ `bucket`ï¼Œå…¶ä¸­\n\n* `activeEffect` æ˜¯ç”¨æ¥æ ‡è®°å½“å‰ç”±å“ªä¸ªå‰¯ä½œç”¨å‡½æ•°è¯»å–äº†å“åº”å¼å˜é‡ï¼Œå®ƒåœ¨ `effect` æ–¹æ³•é‡Œè¢«è®¾ç½®\n* `bucket` æ˜¯ä¸€ä¸ªå“ˆå¸Œç»“æ„ï¼Œç”¨æ¥å…³è”å“åº”å¼å˜é‡å’Œä¸ä¹‹ç›¸å…³çš„å‰¯ä½œç”¨å‡½æ•°\n\n```js\nlet activeEffect\nconst bucket = new WeakMap()\n\nfunction track(target, key) {\n  if (!activeEffect) return\n  let depsMap = bucket.get(target)\n  if (!depsMap) {\n    bucket.set(target, (depsMap = new Map()))\n  }\n  let deps = depsMap.get(key)\n  if (!deps) {\n    depsMap.set(key, (deps = new Set()))\n  }\n  deps.add(activeEffect)  // å°†è¯»å–è¯¥å±æ€§çš„å‰¯ä½œç”¨å‡½æ•°æ”¶é›†åˆ°å¯¹åº”çš„é›†åˆä¸­\n}\n\nfunction trigger(target, key) {\n  let depsMap = bucket.get(target)\n  if (!depsMap) return \n  let deps = depsMap.get(key)\n  if (!deps) return \n  deps.forEach(fn => fn())  // æŠŠä¸ä¹‹å…³è”çš„å‰¯ä½œç”¨å‡½æ•°ä¾æ¬¡æ‰§è¡Œ\n}\n```\n\n### `effect`\n\nå¦‚ä¸Šæ–‡æ‰€è¿° `effect()` æ–¹æ³•ä¸»è¦ç”¨æ¥è®¾ç½® `activeEffect`:\n\n```js\nfunction effect(fn) {\n  activeEffect = fn\n  fn()  // ç«‹å³è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°æ¥è®¾ç½®åˆå§‹å€¼å¹¶æ”¶é›†ä¾èµ–\n}\n```\n\næ³¨æ„åˆ°è¿™é‡Œ `bucket` ä½¿ç”¨äº† `WeakMap` æ•°æ®ç»“æ„ä¸»è¦æ˜¯ä»æ€§èƒ½å‡ºå‘è€ƒè™‘çš„ï¼Œå‚è€ƒ[WeakMap](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)ã€‚\n\n### æµ‹è¯•å’Œå°ç»“\n\nä½¿ç”¨[è®¾è®¡ç›®æ ‡](#è®¾è®¡ç›®æ ‡)ä¸€èŠ‚ä¸­ä»£ç è¿›è¡Œæµ‹è¯•å¯ä»¥å‘ç°ï¼Œ2 ç§’åé¡µé¢çš„æ–‡æœ¬ä¼šè‡ªåŠ¨æ›´æ–°ã€‚\n\n<p class=\"codepen\" data-height=\"300\" data-default-tab=\"js,result\" data-slug-hash=\"KKbyddW\" data-user=\"Hozen\" style=\"height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\">\n  <span>See the Pen <a href=\"https://codepen.io/Hozen/pen/KKbyddW\">\n  v1_basic</a> by Hozen (<a href=\"https://codepen.io/Hozen\">@Hozen</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\nç”±äº Proxy çš„æ‹¦æˆªæ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œæ‰€ä»¥ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¾ˆå®¹æ˜“æœ€ç»ˆå’Œåˆ†æï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n1. é¦–å…ˆåŒ…è£…å“åº”å¼å¯¹è±¡ï¼Œå¯¹æ•°æ®çš„è¯»å–å’Œè®¾ç½®è¿›è¡Œæ‹¦æˆªã€‚\n2. åœ¨ `effect` å‡½æ•°åŒ…è£…çš„å‰¯ä½œç”¨å‡½æ•°ä¸­ï¼Œç”±äºè¯»å–äº† `data.text`ï¼Œå¹¶è®¾ç½®äº† `activeEffect`ã€‚è¢«ä»£ç†å¯¹è±¡ `data` çš„ `get` æ‰€æ‹¦æˆªã€‚å°†å½“å‰å‰¯ä½œç”¨å‡½æ•°æ”¶é›†åˆ°äº†é›†åˆ `bucket[data].text` ä¸­ã€‚\n3. å½“ 2 ç§’åæ‰§è¡Œ `data.text = 'Hello World'` æ—¶ï¼Œè¢« `set` æ‹¦æˆªè§¦å‘ `trigger`ï¼Œå°† `bucket[data].text` é›†åˆä¸­æ‰€æœ‰çš„å‰¯ä½œç”¨å‡½æ•°ä¾æ¬¡æ‰§è¡Œã€‚é¡µé¢çš„æ–‡æœ¬è¢«æ›´æ–°ã€‚\n\n## *å‚è€ƒèµ„æ–™*\n\n[1] vuejs/core: ğŸ–– Vue.js is a progressive, incrementally-adoptable JavaScript framework for building UI on the web.[EB/OL]. [2023-09-22]. <https://github.com/vuejs/core>.\n\n[2] Vue.js - æ¸è¿›å¼ JavaScript æ¡†æ¶ | Vue.js[EB/OL]. [2023-09-22]. <https://cn.vuejs.org/>.\n\n[3] éœæ˜¥é˜³. Vue.jsè®¾è®¡ä¸å®ç°[M/OL]. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2022[2023-09-19]. <https://book.douban.com/subject/35768338/>.\n\n[4] JavaScript | MDN[EB/OL]. [2023-04-10](2023-09-22). <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript>.\n","tags":["å“åº”å¼","Vue"],"categories":["developer"]},{"title":"å¹³å‡¡çš„ä¸–ç•Œ","url":"/archives/71/","content":"\næˆ‘ç¬¬ä¸€æ¬¡è¯»å¹³å‡¡çš„ä¸–ç•Œæ˜¯åœ¨å¤šå¹´å‰çš„æš‘æœŸå…¼èŒã€‚å½“æ—¶åœ¨ä¸€ä¸ªåŸä¸­æ‘åšè¾…å¯¼ç­çš„æ•°å­¦è€å¸ˆï¼Œå¯„å®¿åœ¨èˆ…èˆ…å®¶ã€‚æ¯å¤©å…­ç‚¹é’Ÿä»å°åŸçš„ä¸€å¤´éª‘åˆ°å¦ä¸€å¤´ï¼Œç„¶åå¼€å§‹ä¸€æ•´å¤©å¿™ç¢Œçš„å·¥ä½œã€‚ä¸€å…±å…­ä¸ªç­ï¼Œæ¯ä¸ªç­ä¸Šä¸€èŠ‚æ•°å­¦è¯¾ï¼Œä¸€æ•´å¤©éš¾å¾—æ­‡æ¯ã€‚<!--more-->åˆä¼‘æ—¶é—´å‡ ä½ç¦»å®¶è¿œçš„è€å¸ˆè½®å²—ç…§çœ‹æ²¡å›å®¶çš„å­©å­ï¼Œæ˜¯éš¾å¾—çš„ä¼‘æ¯æœºä¼šã€‚â€œåŠå…¬å®¤â€é‡Œæœ‰ä¸€å¼ åºŠï¼Œä¸€èˆ¬ç•™ç»™å¥³è€å¸ˆæ­‡æ¯ã€‚ç ´æ—§çš„åºŠå¤´æ¡ŒæŠ½å±‰æ¢—å¡å¾—è¦å‘½ï¼Œå¥½å®¹æ˜“æ‹‰å¼€åä¸€æœ¬åšåšçš„å·²æ²¡æœ‰å°é¢çš„ä¹¦èƒ¡ä¹±èººåœ¨é‡Œé¢ã€‚ååœ¨æœ¨è´¨çš„æ²™å‘ä¸Šéš¾ä»¥å…¥ç¡ï¼Œä¾¿ç¿»çœ‹èµ·æ¥ã€‚çº¸å¼ æ˜¯å‘é»„çš„åŠé€æ˜è–„çº¸ï¼Œæ–‡å­—è¢«ç¼©å°çš„æå°ï¼Œæ˜¾ç„¶è¿™æ˜¯ä¸€æœ¬æ˜¯ä¸Šäº†å²æ•°çš„ç›—ç‰ˆä¹¦ç±ã€‚æ‰‰é¡µæœ´ç´ ä½†è¿˜å®Œæ•´ï¼Œã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹â€”â€”è·¯é¥è‘—ã€‚\n\nä»é‚£ä»¥åçš„åˆä¼‘æ—¶é—´ï¼Œæ— è®ºæ˜¯æ‰§å‹¤è¿˜æ˜¯ä¼‘æ¯æˆ‘éƒ½ä¼šæŠŠé‚£æœ¬ä¹¦æ‹¿å‡ºæ¥è¯»ã€‚åšåšçš„ä¸€æœ¬ï¼Œç›´åˆ°æš‘æœŸå…¼èŒç»“æŸä¹Ÿæ²¡æœ‰å®Œå…¨è¯»å®Œã€‚å°è¯´çš„æƒ…èŠ‚ç°åœ¨å·²è®°ä¸å¤ªæ¸…æ¥šï¼Œå½“æ—¶åªæ˜¯é»˜é»˜çš„è¯»ï¼Œç™¾ä¸‡å­—çš„é¸¿ç¯‡ä¸æ¯«ä¸è§‰å¾—åŒçƒ¦ã€‚é‚£äº›æ–‡å­—åƒæ°´ä¸€æ ·è„‰è„‰æµå…¥æˆ‘çš„èº«ä½“ã€‚å½“æ—¶çš„æˆ‘å¯¹äººç”Ÿã€å¯¹çˆ±æƒ…æœ‰å¤ªå¤šçš„è¿·èŒ«ä¸æ— æªï¼Œæˆ‘ä¸çŸ¥é“è‡ªå·±è¦æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Œç”šè‡³ä¸çŸ¥é“è‡ªå·±æ˜¯ä»€ä¹ˆæ ·çš„äººï¼Œä¸çŸ¥é“å¦‚ä½•é¢å¯¹é‚£äº›è®©æˆ‘è¾—è½¬éš¾çœ çš„äººå’Œäº‹ã€‚æˆ‘çœ‹ä¸åˆ°è‡ªå·±ã€‚ä¹¦é‡Œä¸»äººå…¬ä»¬çš„ä¸€ç”Ÿåœ¨æˆ‘çœ¼å‰ä¸€ä¸€å±•å¼€ã€ç»½æ”¾ã€ç„¶åæ¶ˆé€ï¼Œæˆ‘ä»¿ä½›ç»ˆäºæ‹¥æœ‰äº†å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ç¬¬ä¸‰åªçœ¼ç›ã€‚æˆ‘çš„å•çº¯ã€æ„šè ¢ã€èµ¤è¯šã€å¹¼ç¨šã€åšéŸ§ã€å›ºæ‰§éƒ½å¦‚å°è¯´é‡Œçš„äººç‰©ä¸€èˆ¬åœ¨è¿™åªçœ¼ç›ä¸‹ä¸€è§ˆæ— ä½™ã€‚æˆ‘è§‰å¾—æœ‰äº›ä¸œè¥¿å¼€å§‹æ…¢æ…¢å‘ç”Ÿå˜åŒ–ã€‚\n\næš‘å‡ç­çš„æœ€åä¸€å¤©ï¼Œæ¯ä¸ªå­©å­ä»¬è„¸ä¸Šéƒ½æ´‹æº¢ç€å–œæ‚¦ï¼Œä»¿ä½›è¡¥ä¹ ç­ç»“æŸåä»–ä»¬å°±å†ä¹Ÿä¸ç”¨è¯»ä¹¦ã€ä¸ç”¨ä¸Šå­¦ï¼Œä¸ç”¨å¹²ä»»ä½•ä»–ä»¬ä¸å–œæ¬¢çš„äº‹äº†ã€‚é‚£æœ¬æ²¡çœ‹å®Œçš„ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹æˆ‘åˆæ”¾å›äº†æ—§ä¹¦æ¡Œçš„æŠ½å±‰é‡Œã€‚æˆ‘è®°èµ·é‚£ä¸ªå¤å¤©ä¸‹äº†å¾ˆå¤šé›¨ï¼Œæˆ‘æ·‹æ¹¿åœ¨è®¸å¤šä¸‹ç­å›å®¶çš„è·¯ä¸Šã€‚\n\n![å¤šé›¨çš„å¤å­£](/assets/images/71-1.jpg)\n","tags":["æ•£æ–‡","éšç¬”"],"categories":["life"]},{"title":"Vue3+Typescript å¼€å‘ä¸€ä¸ªå›¾ç‰‡æ‹¼æ¥ PWA","url":"/archives/69/","content":"\nä¸€ä¸ªç®€å•çš„é•¿å›¾æ‹¼æ¥å·¥å…·ï¼Œä¸»è¦åº”ç”¨äº† Vue3 æŠ€æœ¯æ ˆå’Œ HTML5 çš„ Canvas æŠ€æœ¯ã€‚æœ€ååŒ…è£…æˆ PWAï¼Œå¯ä»¥ä»æ‰‹æœºæ¡Œé¢ç›´æ¥è®¿é—®ã€‚æœ¬æ–‡åšä¸€ä¸ªé¡¹ç›®å›é¡¾å’Œæ€»ç»“ï¼Œæºç å’Œåœ°å€é™„ä¸‹ï¼š\n\nçº¿ä¸Šåœ°å€: [picStitch](https://ps.hozen.site/)  \næºç : [hooozen/picStitch](https://github.com/hooozen/picStitch)  \n\n<!--more-->\n\n## æŠ€æœ¯æ€»ç»“\n\nä¸»è¦æ¶‰åŠçš„æŠ€æœ¯ï¼š\n\n* é¢å‘å¯¹è±¡æŠ€æœ¯\n* Vue3 + Typescript ç»„åˆå¼ API\n* Vue-router@4 å’Œ pinia çŠ¶æ€ç®¡ç†\n* Vite æ„å»ºå’Œ PWA åŒ…è£…\n* HTML5 Canvas API å’Œ Drag API\n* ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶é€‚é…\n* Vue3 æ·±å±‚ç»„ä»¶å°è£…\n\n### é¢å‘å¯¹è±¡å¼€å‘\n\næ— è®ºæ˜¯ä¸»åŠ¨è¿˜æ˜¯è¢«è¿«ï¼Œéšç€ä¸šåŠ¡é€»è¾‘å˜å¾—å¤æ‚ï¼Œå¼€å‘è€…å¿…ç„¶è¦å¼•å…¥é¢å‘å¯¹è±¡æŠ€æœ¯ã€‚å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œé‡‡ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š\n\nä»ä¸»è§‚æ–¹é¢æ¥è®²ï¼Œæˆ‘æƒ³æŠŠè¿™ä¸ªé¡¹ç›®åšæˆ Web å’Œå°ç¨‹åºå¤šç«¯åº”ç”¨ï¼Œäºæ˜¯æŠŠä¸€äº›å›¾ç‰‡è£å‰ªã€ç»˜åˆ¶çš„æ ¸å¿ƒä»£ç å°è£…æˆå…¬å…±åŸºç¡€ç±»ã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¤ç”¨å’Œç»´æŠ¤ï¼Œä¸ºåé¢å¤šç«¯çš„å¼€å‘å’Œç»´æŠ¤èŠ‚çœå¤§é‡ç²¾åŠ›ã€‚\n\nå®¢è§‚æ–¹é¢ï¼Œè¿™ä¸ªé¡¹ç›®æ¶‰åŠäº†å›¾ç‰‡é¢„è§ˆå’Œå›¾ç‰‡ç¼–è¾‘ä¸¤å—ç”»å¸ƒã€‚ä¸¤å—ç”»å¸ƒåœ¨å›¾ç‰‡ç»˜åˆ¶æ–¹é¢æœ‰å…±åŒçš„é€»è¾‘ï¼ŒåŒæ—¶åˆåˆ†åˆ«æ‰¿æ‹…ä¿å­˜å’Œç¼–è¾‘ç­‰ä¸åŒçš„èŒè´£ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ä¸¤å—ç”»å¸ƒä¹‹é—´è¦åšçŠ¶æ€çš„å¤åˆ¶å’ŒåŒæ­¥ï¼šå½“ä»é¢„è§ˆç”»å¸ƒåˆ°ç¼–è¾‘ç”»å¸ƒæ—¶ï¼Œéœ€è¦æŠŠé¢„è§ˆç”»å¸ƒçš„å›¾ç‰‡çŠ¶æ€å¤åˆ¶åˆ°ç¼–è¾‘ç”»å¸ƒã€‚å½“ç¼–è¾‘ç”»å¸ƒç¼–è¾‘æˆåŠŸæ—¶ï¼Œè¦æŠŠç¼–è¾‘ç”»å¸ƒçš„çŠ¶æ€åŒæ­¥å›é¢„è§ˆç”»å¸ƒã€‚ä¸ºäº†é¿å…æ€§èƒ½é—®é¢˜ï¼Œä¸¤å—ç”»å¸ƒè¦å…±ç”¨å›¾ç‰‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸¤å—ç”»å¸ƒä»…ä¿å­˜å›¾ç‰‡çš„è£å‰ªä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥æå¤§åœ°èŠ‚çº¦å†…å­˜ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š\n\n![ä¸¤å—ç”»å¸ƒä¸å›¾ç‰‡ä¹‹é—´çš„å…³è”](/assets/images/69-1.jpg)\n\nåœ¨å¯¹ä¸šåŠ¡é€»è¾‘åå¤æ¢³ç†åï¼Œä»¥åŠå¼€å‘è¿‡ç¨‹ä¸­çš„åå¤å®éªŒï¼Œæœ€ç»ˆå°è£…äº†ä»¥ä¸‹å‡ ä¸ªåŸºç¡€çš„ç±»([æºç ](https://github.com/hooozen/picStitch/tree/main/src/class/base))ï¼š\n\n* `ImageClipView`: å›¾åƒçš„è£å‰ªè§†å›¾ï¼Œç”¨æ¥ä¿å­˜å›¾ç‰‡çš„è£å‰ªçŠ¶æ€ï¼Œå¹¶å¯¹å¤–æä¾›è£å‰ªæ–¹æ³•\n* `ImageCavnasView`: å›¾åƒçš„ç»˜åˆ¶è§†å›¾ï¼Œç”¨æ¥ä¿å­˜å›¾ç‰‡åœ¨ç”»å¸ƒä¸Šçš„ç»˜åˆ¶çŠ¶æ€\n* `PicStitchCavnas`: é¡¹ç›®çš„ Canvas åŸºç±»ï¼Œå°è£…äº† HTML5 Canvas çš„ç»˜åˆ¶ã€åˆ·æ–°å’Œä¿å­˜ç­‰æ–¹æ³•ï¼Œä»¥åŠä¸€äº›æŠ½åƒæ¥å£.\n* `FlexCanvas`: å¼¹æ€§ç”»å¸ƒç±». å› ä¸ºé¢„è§ˆå›¾ç‰‡æ—¶ç”»å¸ƒçš„é«˜åº¦ä»¥åŠå›¾ç‰‡çš„ç¼©æ”¾æ¯”ä¾‹è¦æ ¹æ®æ‰€æœ‰å›¾ç‰‡åŠ¨æ€è®¡ç®—ï¼Œå› æ­¤å°è£…æˆç±».\n* `JointCanva`: â€œè¿æ¥â€ç”»å¸ƒç±». ç”¨äºç¼–è¾‘å›¾ç‰‡çš„è¿æ¥å¤„ï¼Œä¸»è¦å°è£…äº†å¯¹ç”»å¸ƒä¸Šå›¾ç‰‡è¿›è¡Œè£å‰ªçš„æ–¹æ³•.\n* `ImageClipViewManager`: å›¾åƒç®¡ç†ç±». å•ä¾‹æ¨¡å¼ï¼Œé€šè¿‡ç®¡ç†å›¾ç‰‡å¯¹è±¡æ¥ç”Ÿæˆè§†å›¾ï¼Œä»¥åŠå®ç°è§†å›¾çš„å¤åˆ¶å’ŒçŠ¶æ€åŒæ­¥.\n\nç»è¿‡ä»¥ä¸Šå°è£…åï¼Œå¯¹äºåŒä¸€ä¸ª Image å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ç”Ÿæˆå¤šä¸ª `ImageClipView` æ¥ä¿å­˜å¯¹å›¾ç‰‡çš„ä¸åŒè£å‰ªçŠ¶æ€ã€‚ç„¶ååœ¨ç”»å¸ƒå’Œ `ImageClipView` ä¹‹é—´å°è£…ä¸€å±‚ `ImageCanvasView` æ¥æä¾›å¯¹è£å‰ªåå›¾ç‰‡çš„ç»˜åˆ¶ç¼©æ”¾ä»¥åŠç»˜åˆ¶åæ ‡ç­‰æ–¹æ³•å’Œå±æ€§ï¼Œä¾¿äºå›¾ç‰‡çš„ç»˜åˆ¶ã€‚è€Œ `ImageClipViewManager` ç±»ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå¯¹æ‰€æœ‰çš„ `ImageClipView` è¿›è¡Œç®¡ç†ï¼Œå¯ä»¥å¤åˆ¶æŒ‡å®šçš„è§†å›¾ä½¿å…¶èƒ½å°†ä¸€ä¸ªç”»å¸ƒçš„å›¾ç‰‡è½¬ç§»åˆ°å¦ä¸€ä¸ªç”»å¸ƒä¸Šã€‚è¿™æ · `FlexCanvas` å’Œ `JointCanvas` åªéœ€è¦ç®¡ç»˜åˆ¶å’Œç¼–è¾‘çš„è´£ä»»ï¼Œè€Œä¸éœ€è¦å…³ç³»ç”»å¸ƒé—´çš„é€šä¿¡ã€‚\n\nä»¥ä¸Šç±»çš„å°è£…ä¸»è¦éµå¾ªäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œåœ¨æˆ‘çœ‹æ¥è¿™æ˜¯é¢å‘å¯¹è±¡æœ€é‡è¦çš„åŸåˆ™ã€‚å•ä¸€åŸåˆ™ä½¿å¾—ç±»çš„æ‰©å±•å’Œä½¿ç”¨å˜å¾—ååˆ†ç®€å•æ¸…æ™°.\n\næœ€åï¼Œ**å†™ JS çš„é¢å‘å¯¹è±¡ä¸€å®šè¦ç”¨ Typescript**ï¼Œè¿™å°†èŠ‚çº¦å¤§é‡å®è´µæ—¶é—´ã€‚\n\n### Vue3 æŠ€æœ¯æ ˆ\n\næˆ‘ä¸ªäººå¯¹å„ç§æŠ€æœ¯æ ˆçš„æ€åº¦æ˜¯å¾ˆå†·é™çš„ï¼Œæˆ‘è®¤ä¸ºâ€œVue å’Œ React ä»¥åŠå…¶ä»–ä¸ªå„ç§æŠ€æœ¯æ ˆçš„åŒºåˆ«ä¸ä¼šå¤§äºè­¦çŠ¬å’ŒçŒç‹—ä¹‹é—´çš„åŒºåˆ«â€ã€‚æ‰€ä»¥å¯¹äºè¿™äº›å‰ç«¯åº“æˆ‘åªæ˜¯çœ‹ä½œä¸€ç§æ—¶å…´çš„å·¥å…·ï¼Œç”¨åˆ°çš„æ—¶å€™å»ç¿»é˜…æ–‡æ¡£æˆ–è€…æºç å³å¯ã€‚æˆ‘è§‰å¾—å¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´åŸç”Ÿ JavaScript ä»¥åŠç¼–ç¨‹æ€æƒ³å’Œç»å…¸æ¨¡å¼æ‰æ˜¯æœ€é‡è¦çš„ã€‚å› æ­¤å¯¹æ­¤å°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚\n\nå°è¯•ä¸‹æ¥ï¼ŒVite + Vue3 + pinia ç¡®å®æ˜¯ä¸€å¥—ç‰¹åˆ«çœåŠ›å’Œè½»é‡çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œå°¤å…¶æ˜¯å¼•å…¥ TypeScript å’Œç»„åˆå¼ API åï¼Œå¯ä»¥æŠ›å¼ƒä¹‹å‰ Vue2 æ—¶ä»£å¾ˆå¤šå¤æ‚çš„æ¦‚å¿µã€‚ä¾‹å¦‚ pinia å®ç°çš„çŠ¶æ€ç®¡ç†å‡ ä¹å¯ä»¥ä¸ä½¿ç”¨ `action` å’Œ `getter` å°±å¯ä»¥å®ç°ç»å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘ï¼Œå¯¹äºå°å‹é¡¹ç›®æ¥è¯´è¦æ¯” Vuex â€œäººæ€§åŒ–â€å¾—å¤šã€‚Vite çš„æ„å»ºé€Ÿåº¦å’Œé…ç½®é€Ÿåº¦ä¹Ÿè¦ç”© webpack å¥½å‡ é“è¡—ã€‚\n\næ€»çš„æ¥è¯´ï¼ŒVite + Vue3 æ˜¯ä¸€å¥—ç¦»â€œå¼€ç®±å³ç”¨â€åˆè¿‘äº†ä¸€å¤§æ­¥çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œéå¸¸æ¨èã€‚\n\n### åˆ©ç”¨ Vue åº•å±‚ API å°è£…ç»„ä»¶\n\nå¤§å®¶ä¸€å®šç”¨è¿‡ ElementUI çš„ Message ç»„ä»¶å’Œ Notify ç­‰ç»„ä»¶ã€‚è¿™äº›ç»„ä»¶å’Œå¸¸è§çš„ Vue ç»„ä»¶æœ‰ä¸ªä¸åŒç‚¹æ˜¯å®ƒä»¬å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨ï¼Œè€Œä¸ç”¨å°†ç»„ä»¶å†™åœ¨æ¨¡æ¿äº†ã€‚å¹¶ä¸”åƒ Message ç»„ä»¶æ˜¯ç›´æ¥æ’å…¥åˆ° `body` ä¸Šå…³é—­ååˆä¼šä» `body` ç»ˆç§»é™¤çš„ã€‚åŒæ—¶å¯ä»¥å¤šæ¬¡è°ƒç”¨ä¸€æ¬¡äº§ç”Ÿå¤šä¸ª Message å¼¹å‡ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![element çš„ Message ç»„ä»¶å¯ä»¥é€šè¿‡æ–¹æ³•è°ƒç”¨äº§ç”Ÿå¤šä¸ªå®ä¾‹](/assets/images/69-3.gif)\n\n![Message ç”¨åå³æ¯ï¼Œä¸ä¼šé€ æˆæ€§èƒ½é—®é¢˜](/assets/images/69-4.gif)\n\nç”±äºé¡¹ç›®ä¸­æˆ‘ä¹Ÿè¦ç”¨åˆ°ç±»ä¼¼çš„ç»„ä»¶ï¼Œäºæ˜¯æˆ‘å‚ç…§ Element-plush Message çš„æºç è‡ªå·±å°è£…äº†ä¸¤ä¸ªç±»ä¼¼çš„ç»„ä»¶ ([æºç ](https://github.com/hooozen/picStitch/tree/main/src/components/Tip))ã€‚ä¸»è¦çš„æœ‰ä»¥ä¸‹ç»†èŠ‚å’ŒæŠ€å·§éœ€è¦æ³¨æ„ï¼š\n\n* é€šè¿‡ `index.ts` å¯¼å‡ºçš„æ–¹æ³•è°ƒç”¨åç”Ÿæˆä¸€ä¸ª `Tip` å®ä¾‹ï¼Œåœ¨ç”Ÿäº§å®ä¾‹æ—¶åˆ›å»º `VNode` å¹¶æ¸²æŸ“ã€‚åŒæ—¶è¿”å›å®ä¾‹çš„å…³é—­æ–¹æ³•ã€‚\n* åˆ›å»ºå®ä¾‹åˆ©ç”¨ Vue çš„ `createVNode` å’Œ `render` æ–¹æ³•æ¥ç”Ÿæˆå’Œæ¸²æŸ“\n\n  ```ts\n  import { createVNode, render } from 'vue'\n  import TipConstructor from 'Tip.vue'\n\n  const container = document.createElement(\"div\");\n  ...\n  const createTip = ({ ...options }, context?: AppContext | null) => {\n    ...\n    const vnode = createVNode(TipConstructor, props);\n    vnode.appContext = context || tip._context;\n    render(vnode, container);\n    document.body.appendChild(container.firstElementChild!);\n    ...\n  }\n  ```\n\n* `createVNode(TipConstructor, props)` æ–¹æ³•ä¸­çš„ `props` å‚æ•°åŒ…å«äº†å±æ€§å’Œäº‹ä»¶ï¼Œå…¶ä¸­æ–¹æ³•æ˜¯ä»¥ `onMethodName` æ–¹å¼å‘½åçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `props` ä¸­åŒ…å«äº† `onClose(){}` æ–¹æ³•ï¼Œæ„å‘³ç€åœ¨ Tip ç»„ä»¶ä¸­å¯ä»¥è§¦å‘ `emit('close')` äº‹ä»¶ã€‚è¿™ä¸€ç‚¹å®˜æ–¹æ–‡æ¡£ä¸­æ²¡æœ‰ä»‹ç»ï¼Œä½†å¯¹ç»„ä»¶çš„é”€æ¯éå¸¸ é‡è¦ã€‚\n\n* ç»„ä»¶çš„é”€æ¯é€šè¿‡ `render(null, ...)` æ¥å®ç°ï¼š\n\n  ```ts\n  render(null, container); // container ä¸æ¸²æŸ“ vnode æ—¶ä¼ å…¥çš„ç›¸åŒ\n  ```\n\n* å¯¹ Message å®ä¾‹çš„ç®¡ç†ï¼Œæ¥å®ç°å¼¹å‡ºçš„ä½ç½®æœ‰æ­£ç¡®çš„åç§»ï¼Œä»¥åŠé™åˆ¶ Message å®ä¾‹çš„æœ€å¤§æ•°é‡\n\nä»¥ä¸Šä»…ä½œä¸ºä¸€ä¸ªç®€å•ç¬”è®°å’Œæç¤ºï¼Œæƒ³è¦å®Œæ•´è¯´æ˜ Message çš„å®ç°æ€è·¯ææ€•éœ€è¦ä¸€ç¯‡æ–‡ç« çš„ç¯‡å¹…æˆ–è€…é˜…è¯» element çš„æºç ã€‚\n\n### PWA\n\nè™½ç„¶ç»è¿‡è¿™ä¹ˆå¤šå¹´çš„å‘å±•ï¼ŒPWA ä»æ—§ä¸æ¸©ä¸ç«ï¼Œå°¤å…¶åœ¨å›½å†…å·²ç»è¢«å„ç§â€œå°ç¨‹åºâ€æ©æ²¡ï¼Œä½†ä¸å¦¨ç¢æˆ‘ä»è§‰å¾— PWA æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„æ„æƒ³å’Œä¼Ÿå¤§çš„å°è¯•ã€‚åœ¨ Vite ä¸‹åªéœ€è¦ä¸€ä¸ªæ’ä»¶ï¼Œå°±å¯ä»¥å°† Web åº”ç”¨åŒ…è£…æˆ PWAï¼š[Vite PWA](https://vite-pwa-org.netlify.app/)\n\n### å›¾ç‰‡æ‹–åŠ¨\n\n![åœ¨ Web ç«¯å®ç°å›¾ç‰‡çš„æ‹–åŠ¨ä»¥åŠè‡ªé€‚åº”å¸ƒå±€å¹¶ä¸å¦‚æƒ³è±¡ä¸­ç®€å•](/assets/images/69-2.gif)\n\nå›¾ç‰‡çš„æ‹–åŠ¨æ’åºçœ‹ä¼¼æ˜¯ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œå…¶å®é‡Œé¢æœ‰å¾ˆå¤šç»†èŠ‚å’Œéš¾ç‚¹ã€‚å°¤å…¶æ˜¯ Web ç«¯éœ€è¦å¯¹ä¸åŒçª—å£å¤§å°åšè‡ªé€‚åº”ï¼Œå°±æ˜¾å¾—æ›´åŠ å¤æ‚äº†ã€‚ç®€å•ä»‹ç»ä¸‹æˆ‘è¸©çš„å‘ä»¥åŠæœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼š\n\né¦–å…ˆæ˜¯ HTML5 çš„ Drag äº‹ä»¶âŒã€‚Drag äº‹ä»¶æœ€å¤§çš„é—®é¢˜å°±åœ¨äºæ‹–åŠ¨æ—¶ï¼Œå…ƒç´ æœ¬èº«æ˜¯ä¸ç§»åŠ¨çš„ï¼Œè€Œåªæ˜¯ä¸€ä¸ªåŠé€æ˜çš„å…ƒç´ æŠ•å½±è·Ÿéšé¼ æ ‡ç§»åŠ¨ã€‚å…¶å®è¿™æœ‰æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæƒ³å®ç°æµç•…å’Œä¼˜ç¾çš„åŠ¨ç”»æ•ˆæœï¼Œå°±éœ€è¦å„ç§ trackã€‚å› æ­¤åè€Œä¸å¦‚ä½¿ç”¨é¼ æ ‡äº‹ä»¶æ›´æ–¹ä¾¿ã€‚(ä½†æœ¬ App è¿˜æ˜¯åˆ©ç”¨äº† Drag äº‹ä»¶å®ç°äº†æ–‡ä»¶çš„æ‹–æ‹½ä¸Šä¼ )\n\nå…¶æ¬¡æ˜¯ä½¿ç”¨ Flex å®šä½æ¥å¸ƒå±€å…ƒç´ çš„åˆå§‹å®šä½ï¼Œå½“å…ƒç´ æ’åºå˜åŒ–æ—¶ä½¿ç”¨ `Translate` æ¥ç§»åŠ¨å…ƒç´ çš„ä½ç½®âŒã€‚è¿™æ ·åšçš„æœ€å¤§é—®é¢˜æ˜¯ï¼Œå½“ç§»é™¤æŸä¸ªå…ƒç´ æ—¶ï¼Œå…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„åˆå§‹ä½ç½®ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™å°±æ„å‘³ç€è¿˜è¦å®æ—¶è·Ÿè¸ªå…ƒç´ çš„åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®å˜åŒ–ï¼Œç„¶åä½¿ç”¨ä¸åŒçš„å‚æ•°å»è®¡ç®—å„ä¸ªå…ƒç´ çš„ `Translate`ï¼Œéå¸¸å¤æ‚ã€‚ä½†è¿™ä¸ªæ–¹æ³•ä¹Ÿæœ‰å¥½å¤„ï¼Œé‚£å°±æ˜¯çª—å£ resize æ—¶å…ƒç´ ä¼šè‡ªåŠ¨ç¡®å®šåˆé€‚çš„ä½ç½®ï¼Œä½†å‰ææ˜¯å¾—è§£å†³å¥½å‰é¢æåˆ°çš„é—®é¢˜ã€‚\n\nç›´æ¥æ”¹å˜ DOM èŠ‚ç‚¹çš„çœŸå®ä½ç½®â“ã€‚è¿™ä¸ªæ–¹æ¡ˆæˆ‘æ ¹æœ¬æ²¡æœ‰å°è¯•ã€‚å› ä¸ºåœ¨æ‹–åŠ¨è¿‡ç¨‹ä¸­ï¼Œåˆ’è¿‡å…ƒç´ æ—¶è®¸å¤šå…ƒç´ çš„ä½ç½®éƒ½è¦æ›´æ–°ï¼Œè™½ç„¶æœ‰ Vue çš„è™šæ‹ŸèŠ‚ç‚¹ç®—æ³•ï¼Œä½†æˆ‘ä»ç„¶è§‰å¾—è¿™æ˜¯å¯¹æ€§èƒ½çš„æµªè´¹ã€‚æ›´é‡è¦çš„æ˜¯ç›´æ¥æ”¹å˜ DOM èŠ‚ç‚¹çš„ä½ç½®æ„å‘³ç€å°†æ— æ³•ä½¿ç”¨è¿‡æ¸¡åŠ¨ç”»ï¼ä¸èƒ½æ¥å—ï¼\n\næˆ‘æœ€åé‡‡ç”¨äº†ã€ç»å¯¹å®šä½+é¼ æ ‡äº‹ä»¶+Translateã€‘ä½ç§»çš„æ–¹æ¡ˆï¼Œå¤§ä½“çš„æ€è·¯å¦‚ä¸‹ï¼š\n\né¦–å…ˆé€šè¿‡å¤–å±‚å…ƒç´ çš„å¤§å°æ¥åˆ’åˆ†æ ¼å­ã€‚ç„¶åè®©æ‰€æœ‰çš„å›¾ç‰‡éƒ½ absolute å®šä½åœ¨å¤–å±‚å…ƒç´ çš„å·¦ä¸Šè§’ï¼Œç„¶åæ ¹æ®å®ƒä»¬çš„é¡ºåºè®¡ç®—åº”è¯¥åç§»çš„ä½ç½®ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ‰€æœ‰çš„å›¾ç‰‡è®¡ç®—åç§»é‡çš„ç®—æ³•éƒ½ä¸€æ ·ï¼Œä¹Ÿä¸ä¼šéšç€å›¾ç‰‡æ•°é‡çš„å˜åŒ–è€Œå˜åŒ–ã€‚åŒæ—¶èƒ½å¤Ÿå…¼é¡¾ä½¿ç”¨å„ç§è¿‡æ¸¡åŠ¨ç”»ã€‚\n\nå½“ç„¶å¦‚ä½•è®¡ç®—æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„å…ƒç´ ä½ç½®ï¼Œä»¥åŠæ‰€å¤„çš„æ ¼å­å’Œå„ä¸ªå…ƒç´ çš„é¡ºåºå˜åŒ–ä¹Ÿéœ€è¦ä»”ç»†çš„è€ƒè™‘ï¼Œä½†å½’æ ¹ç»“åº•æ˜¯ä¸€ä¸ªæ•°å­¦é—®é¢˜ï¼Œå°±ä¸ä»‹ç»äº†ã€‚\n\nè™½ç„¶æœ€ç»ˆæ¯”è¾ƒå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æˆ‘è§‰å¾—æ‹–åŠ¨å…ƒç´ ä½œä¸ºä¸€ä¸ªå¾ˆå¸¸ç”¨çš„éœ€æ±‚ï¼Œä»éœ€è¦å¼€å‘è€…èŠ±è´¹è¿™ä¹ˆå¤§çš„ç²¾åŠ›å’Œä»£ç é€»è¾‘è¿›è¡Œå¼€å‘éå¸¸ä¸åˆç†ï¼Œæµè§ˆå™¨åº”è¯¥å°è£…æ›´åŠ æ˜“ç”¨çš„ APIã€‚ä¸çŸ¥é“å¤§å®¶åœ¨è§£å†³æ­¤ç±»éœ€æ±‚æ—¶é‡‡ç”¨äº†ä»€ä¹ˆæ–¹æ¡ˆï¼Œæˆ‘éå¸¸å¥½å¥‡ã€‚\n\n### ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶\n\nç§»åŠ¨ç«¯çš„è§¦æ‘¸äº‹ä»¶å¹¶ä¸å…¼å®¹é¼ æ ‡äº‹ä»¶ï¼å¹¶ä¸”æœ‰å¾ˆå¤šåå¸¸çš„è¡Œä¸ºï¼Œä¾‹å¦‚ `touchmove` äº‹ä»¶å¹¶ä¸åƒ `mousemove` äº‹ä»¶å¯ä»¥è·å¾—æ‰€å¤„çš„å…ƒç´ ï¼Œå› ä¸ºå…¶ `target` æ°¸è¿œæŒ‡å‘åˆå§‹ç‚¹å‡»çš„å…ƒç´ ã€‚å¹¶ä¸”åƒé¼ æ ‡äº‹ä»¶çš„ `offsetX` ç­‰å±æ€§åœ¨è§¦æ‘¸äº‹ä»¶ä¸Šä¹Ÿæ˜¯**æ²¡æœ‰**çš„ã€‚å¦å¤–ç§»åŠ¨ç«¯çš„è§¦æ‘¸äº‹ä»¶è¿˜å®¹æ˜“è§¦å‘æµè§ˆå™¨çš„è¿”å›å’Œåˆ·æ–°ç­‰æ‰‹åŠ¿ï¼Œéå¸¸éš¾å—ã€‚\n\næ€»ä¹‹ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡æœ‰è¿›è¡Œè¿‡ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶çš„é€‚é…ï¼Œé‚£ä¹ˆä¸€å®šä¸ºå®ƒé¢„ç•™å¥½è¶³å¤Ÿçš„æ—¶é—´æ¥æŸ¥é˜…æ–‡æ¡£å’Œ StackOverflowã€‚\n\n### Canvas å’Œ SVG\n\né¡¹ç›®ä¸­ç”¨åˆ°çš„å›¾ç‰‡åŒ…æ‹¬æˆ‘è‡ªå·±è®¾è®¡çš„ LOGO å…¨éƒ½ä½¿ç”¨äº† SVG æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆä¼˜é›…çš„å›¾ç‰‡è§£å†³æ–¹æ¡ˆã€‚å¹¶ä¸” SVG è¿˜å¯ä»¥é€šè¿‡ base64 ç¼–ç åµŒå…¥åˆ° CSS ä½œä¸º `background-url`ã€‚\n\nCanvas ç”¨æ¥å¤„ç†å›¾ç‰‡éå¸¸æ–¹ä¾¿ï¼Œè¦æ³¨æ„ä¿å­˜å›¾ç‰‡çš„ä¸€äº›æ–¹æ³•ã€‚ä¾‹å¦‚ `canvas.toBlob` å’Œ `canvas.toDataURL` æ–¹æ³•çš„å¯¹æ¯”ã€‚\n\n## å…¶ä»–\n\nä¸€å®šè¦äº‹å…ˆè¿›è¡Œ UI å’Œäº¤äº’è®¾è®¡ï¼Œå¦åˆ™å¯èƒ½å†™ç€å†™ç€å‘ç°ä¸€äº›åŠŸèƒ½åœ¨å½“å‰çš„ UI ä¸‹å¾ˆéš¾å®ç°ï¼Œæˆ–è€…æ“ä½œé€»è¾‘éå¸¸å¥‡æ€ªã€‚è€Œé¿å…å‡ºç°è¿™ç§é—®é¢˜çš„æœ€å¥½çš„æ–¹æ³•å°±æ˜¯å‚è€ƒç±»ä¼¼åŠŸèƒ½çš„ APPï¼Œå¾ˆæ˜æ˜¾æˆ‘è¿™æ¬¾ APP çš„ UI å¾ˆå¤§éƒ¨åˆ†å€Ÿé‰´äº†å¾®ä¿¡ï¼Œè€Œäº¤äº’é€»è¾‘å€Ÿé‰´äº†[AppÂ Store ä¸Šçš„â€œPicTailorâ€ (apple.com)](https://apps.apple.com/cn/app/id1589654548)ï¼Œå¦‚æœè¿™æ¬¾è½¯ä»¶æœ‰å®‰å“ç‰ˆæˆ‘ä¹Ÿä¸ä¼šå¼€å‘è¿™ä¸ªå°å·¥å…·äº†ã€‚\n","tags":["ä¸ªäººé¡¹ç›®"],"categories":["developer"]},{"title":"Webæ€§èƒ½ä¼˜åŒ–â€”â€”ç½‘ç»œç¯‡","url":"/archives/68/","content":"\nWeb æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ï¼Œå¾€å¾€æ¶‰åŠä»éœ€æ±‚åˆ°ç»´æŠ¤çš„è½¯ä»¶å·¥ç¨‹çš„å„ä¸ªæ–¹é¢ã€‚å¹¶ä¸”æ ¹æ®å…·ä½“ä¸šåŠ¡çš„ä¸åŒä¹Ÿä¼šé‡‡å–ä¸å°½ç›¸åŒçš„é’ˆå¯¹æ€§æªæ–½ã€‚æœ¬æ–‡ä¸»è¦é’ˆå¯¹ Web ç½‘ç»œæ€§èƒ½ï¼Œä»é—®é¢˜äº§ç”Ÿçš„åŸå› ä»¥åŠå¯¹åº”çš„ä¸€äº›ä¼˜åŒ–æªæ–½ï¼Œå¯¹ Web çš„æ€§èƒ½ä¼˜åŒ–åšä¸€äº›ç®€å•çš„æ€»ç»“å’Œæ€è€ƒã€‚\n\n<!--more-->\n\n## 1. Web ç½‘ç»œæ€§èƒ½åˆ†æ\n\néšç€è®¡ç®—æœºæ€§èƒ½çš„æå‡å’Œç°ä»£æµè§ˆå™¨çš„ä¸æ–­è¿›æ­¥ï¼Œå®¢æˆ·ç«¯çš„æ€§èƒ½å®Œå…¨èƒ½å¤Ÿèƒœä»»æ™®é€šçš„ Web é¡µé¢ç”šè‡³æ˜¯å¤æ‚çš„ Web åº”ç”¨å’Œå…·æœ‰ç‚«é…·ç‰¹æ•ˆçš„ Web æ¸¸æˆã€‚å®¢æˆ·ç«¯æ€§èƒ½å¯¹äºç»å¤§å¤šæ•° Web å¼€å‘è€…æ¥è¯´ä¸å†æ˜¯æ€§èƒ½ä¼˜åŒ–çš„ç“¶é¢ˆã€‚Web æ€§èƒ½ä¼˜åŒ–çš„ç„¦ç‚¹æ¥åˆ°è®¡ç®—æœºç½‘ç»œçš„ä¼ è¾“èƒ½åŠ›ã€‚ä½†éšç€å®¶åº­ç”¨æˆ·çš„ç½‘ç»œå¸¦å®½å’Œé€šä¿¡è´¨é‡ä¸æ–­æå‡ï¼Œå…¥æˆ·å¸¦å®½èƒ½è¾¾åˆ°æ•°ç™¾å…†ç”šè‡³ä¸Šåƒå…†ï¼Œè¿™å¯¹äºé€šå¸¸åªæœ‰æ•°å…†å¤§å°çš„ Web é¡µé¢èµ„æºæ¥è¯´æ˜¯å®Œå…¨è¶³å¤Ÿçš„ã€‚ä¼¼ä¹ä¸€åˆ‡æœ‰å…³ Web æ€§èƒ½çš„è½¯ç¡¬ä»¶ç¯å¢ƒçœ‹èµ·æ¥éƒ½å¾ˆç¾å¥½ï¼Œé‚£ä¹ˆ Web æ€§èƒ½çš„ç“¶é¢ˆå‡ºç°åœ¨å“ªå‘¢ï¼Ÿ\n\nç­”æ¡ˆæ˜¯**ç½‘ç»œå»¶è¿Ÿ**ã€‚ç½‘ç»œå»¶è¿Ÿä¹‹æ‰€ä»¥æˆä¸ºå½±å“ Web æ€§èƒ½çš„é‡è¦å› ç´ ï¼Œæœ‰å¾ˆå¤šæ–¹é¢çš„åŸå› ï¼Œä¸‹é¢ç»“åˆæˆ‘ä¸ªäººçš„çŸ¥è¯†å’Œç»éªŒç®€å•åˆ†æã€‚\n\n### 1.1. ä¿¡å·ä¼ è¾“æ—¶å»¶\n\nç½‘ç»œä¿¡å·ä¼ è¾“çš„å»¶è¿Ÿå—å¾ˆå¤šå› ç´ å½±å“ï¼ŒåŒ…æ‹¬\n\n* ä¿¡å·åœ¨é“¾è·¯ä¸­çš„ä¼ æ’­é€Ÿåº¦\n* æ¶ˆæ¯é•¿åº¦å’Œé“¾è·¯é€Ÿç‡ (å¸¦å®½)\n* ç½‘ç»œè®¾å¤‡å¯¹ç½‘ç»œä¿¡å·çš„å¤„ç†èƒ½åŠ›\n* ä»¥åŠç½‘ç»œæ‹¥å¡é€ æˆçš„æ’é˜Ÿæ—¶é—´ç­‰\n\nå³ä½¿æŠ›å¼€å…¶ä»–å› ç´ ï¼Œåªè€ƒè™‘ä¿¡å·åœ¨é“¾è·¯ä¸­çš„ä¼ æ’­é€Ÿåº¦ä¹Ÿä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªä¸å®¹å¿½è§†çš„æ•°å€¼ (è§ä¸‹è¡¨)ã€‚å¹¶ä¸”æ ¹æ®ç°æœ‰çš„ç‰©ç†å­¦ç†è®ºï¼Œä¿¡å·ä¼ æ’­é€Ÿåº¦æ— æ³•çªç ´å…‰é€Ÿä¸Šé™ï¼Œæ‰€ä»¥ä¿¡å·ä¼ æ’­çš„æ—¶å»¶å·²ç»å¾ˆéš¾å¾—åˆ°åƒå®¢æˆ·ç«¯æ€§èƒ½å’Œç½‘ç»œå¸¦å®½é‚£æ ·å¤§å¹…çš„æå‡äº†ã€‚\n\n| è·¯çº¿ | è·ç¦»(km) | æ—¶é—´: å…‰åœ¨çœŸç©ºä¸­ | æ—¶é—´: å…‰åœ¨å…‰çº¤ä¸­ | RTT(Roud-Trip Time) |\n| - | - | - | - | - |\n|çº½çº¦åˆ°æ—§é‡‘å±±|4148|14ms|21ms|42ms|\n|çº½çº¦åˆ°ä¼¦æ•¦|5585|19ms|28ms|56ms|\n|çº½çº¦åˆ°æ‚‰å°¼|15993|53ms|80ms|160ms|\n\nä¸Šè¡¨æ‘˜è‡ªã€ŠWeb æ€§èƒ½æƒå¨æŒ‡å—ã€‹[<sup>[2]</sup>](#ref2)ï¼Œåˆ—ä¸¾äº†ç†æƒ³æƒ…å†µä¸‹å…‰çº¤ä¿¡å·åœ¨å…¨çƒä¸€äº›åŸå¸‚ä¹‹é—´çš„ä¼ æ’­å»¶è¿Ÿï¼Œå¯ä»¥å‘ç°å½“è·ç¦»è¾ƒè¿œæ—¶å…‰çº¤çš„ RTT ä¼šè¾¾åˆ°è¾ƒé«˜çš„æ•°å€¼ã€‚\n\n### 1.2. ä¼ è¾“åè®®çš„æ¡æ‰‹æœºåˆ¶\n\nç”±äº HTTP æœ€åˆæ˜¯åŸºäº TCP å®ç°çš„ï¼Œæ‰€ä»¥åœ¨å»ºç«‹ HTTP è¿æ¥å‰ä¸å¯é¿å…åœ°è¦å…ˆè¿›è¡Œ TCP çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚å¹¶ä¸”ç›®å‰å®‰å…¨ä¼ è¾“åˆæˆäº†å¾ˆå¤š Web åº”ç”¨çš„å¿…è¦éœ€æ±‚ï¼ŒHTTPS å‡ ä¹æˆä¸º Web é¡µé¢çš„â€œæ ‡é…â€ã€‚å› æ­¤ TLS ç­‰å®‰å…¨ä¼ è¾“åè®®çš„æ¡æ‰‹æœºåˆ¶ä¹Ÿè¦åœ¨æ­£å¼å»ºç«‹ HTTP é€šä¿¡ä¹‹å‰è¿›è¡Œã€‚è¿™å°±å¯¼è‡´äº†åœ¨æ•°æ®æ­£å¼å¼€å§‹ä¼ è¾“ä¹‹å‰è‡³å°‘è¦ç»å† 2 è‡³ 3 ä¸ª RTT æ‰èƒ½å¼€å§‹ã€‚ä¹Ÿå°±æ˜¯è¯´å³ä½¿ä¸è€ƒè™‘æ•°æ®ä¼ è¾“æ‰€éœ€è¦çš„æ—¶é—´ï¼Œå•æ˜¯å‡†å¤‡å·¥ä½œå°±è¦æ¶ˆè€—ä¸Šç™¾æ¯«ç§’çš„æ—¶é—´ã€‚\n\n![TLS 1.0 æ¡æ‰‹æµç¨‹ï¼Œè‡³å°‘æ¶ˆè€— 3 ä¸ª RTT](/assets/images/68-1.jpg)\n\n### 1.3. ç½‘ç»œèµ„æºè¯·æ±‚çš„ä¸²è¡Œ\n\nç”±äº Web åº”ç”¨è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸€ä¸ªé¡µé¢å¾€å¾€ä¼´éšç€åæ•°ä¸ªç”šè‡³æ•°åä¸Šç™¾ä¸ªèµ„æºè¯·æ±‚ã€‚å¦‚æœè¿™äº›è¯·æ±‚ä¸²è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå†å¤§çš„ç½‘ç»œå¸¦å®½ä¹Ÿå¾—ä¸åˆ°æœ‰æ•ˆåˆ©ç”¨ï¼Œç½‘ç»œå»¶è¿Ÿé€ æˆçš„èµ„æºåŠ è½½æ—¶é—´è¢«æˆå€æ‰©å¤§ã€‚ç­‰åˆ°å‡ åä¸ªèµ„æºçš„ä¾æ¬¡åŠ è½½å®Œæˆæ—¶ç”¨æˆ·æ—©å·²å¤±å»äº†è€å¿ƒã€‚\n\nä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç°ä»£æµè§ˆå™¨ä¼šå¯¹é¡µé¢è¿›è¡Œèµ„æºé¢„æ‰«æï¼Œç„¶åå¹¶è¡Œåœ°å¯¹ç½‘ç»œèµ„æºè¿›è¡Œè¯·æ±‚å’ŒåŠ è½½ã€‚ä½†åæ¶ˆæ¯æ˜¯ï¼Œä¸ºäº†é¿å…æœåŠ¡å™¨å› æ¥æ¥å—è¿‡å¤šçš„ TCP è¯·æ±‚è€Œä¸å ªé‡è´Ÿï¼Œå„æµè§ˆå™¨éƒ½ä¼šå¯¹åŒä¸€ä¸ªåŸŸåå‘èµ·çš„ TCP è¯·æ±‚æ•°è¿›è¡Œé™åˆ¶ï¼Œä¸€èˆ¬æ˜¯ 6 ä¸ªå·¦å³ã€‚è¿™å°±æ„å‘³å½“é¡µé¢ä¸­éœ€è¦çš„èµ„æºè¯·æ±‚å¤ªå¤šæ—¶ï¼Œå¾ˆå¤šè¯·æ±‚è¿˜æ˜¯ä¸å¯é¿å…åœ°è¦ä¸²è¡Œæ‰§è¡Œã€‚\n\n### 1.4. ç§»åŠ¨ç½‘ç»œçš„ä¸ç¨³å®šæ€§\n\néšç€ç§»åŠ¨è®¾å¤‡çš„å¤§è§„æ¨¡æ™®åŠå’Œåº”ç”¨ï¼Œç§»åŠ¨ç½‘ç»œç¯å¢ƒæˆä¸ºå¼€å‘è€…ä¸å¾—ä¸è€ƒè™‘çš„å› ç´ ã€‚ç§»åŠ¨ç½‘ç»œç›¸è¾ƒæœ‰çº¿ç½‘ç»œï¼Œä¸ä»…ç½‘ç»œå»¶è¿Ÿæ›´é«˜ã€å¸¦å®½æ›´ä½ï¼Œæ›´è‡´å‘½çš„æ˜¯ç§»åŠ¨ç½‘ç»œçš„ä¸ç¨³å®šæ€§ä¼šå¯¼è‡´ TCP è¿æ¥çš„ä¸¢åŒ…ç”šè‡³ä¸­æ–­ã€‚è€Œ TCP è¿æ¥ä¸€æ—¦å‡ºç°é—®é¢˜å°±ä¼šè§¦å‘æ‹¥å¡é¿å…æœºåˆ¶é™ä½ç½‘ç»œä¼ è¾“çš„é€Ÿç‡ï¼Œç”šè‡³é‡æ–°æ‰§è¡Œæ¡æ‰‹ç®—æ³•ï¼è¿™å¯¹äºæœ¬å°±ä¸å¿«çš„ç§»åŠ¨ç½‘ç»œæ¥è¯´æ›´æ˜¯é›ªä¸ŠåŠ éœœã€‚è€Œç§»åŠ¨è®¾å¤‡ç”¨æˆ·å› ä¸ºæœ‰æ›´ä¸°å¯Œçš„ APP å¯ä»¥ä½¿ç”¨ï¼Œå¯èƒ½å¯¹ Web åº”ç”¨çš„åŒ…å®¹åº¦æ›´ä½ï¼Œè¿™å°±æ„å‘³ç€ç¼“æ…¢çš„åŠ è½½é€Ÿåº¦å°†æå¤§åœ°æ‘§æ¯ç”¨æˆ·çš„å¥½æ„Ÿã€‚\n\n## 2. ç½‘ç»œæ€§èƒ½çš„ä¼˜åŒ–æ–¹æ³•\n\nä»¥ä¸Šå¯¹å½±å“ç½‘ç»œæ€§èƒ½çš„å› ç´ è¿›è¡Œäº†åˆ†æã€‚å¯ä»¥å‘ç°æ ¸å¿ƒå°±åœ¨äºç½‘ç»œä¿¡å·ä¼ æ’­çš„æ—¶å»¶æ— æ³•é¿å…ï¼Œè€Œå…¶ä»–å› ç´ å¦‚å¤šèµ„æºçš„ä¸²è¡Œè¯·æ±‚ã€åè®®çš„æ¡æ‰‹ç®—æ³•ã€ç§»åŠ¨ç½‘ç»œçš„ä¸ç¨³å®šç­‰å› ç´ åˆåŠ å‰§äº†ç½‘ç»œçš„å»¶è¿Ÿã€‚é‚£ä¹ˆè§£å†³æ–¹è‡ªç„¶ä¹Ÿè¦ä»è¿™äº›å› ç´ å…¥æ‰‹ã€‚\n\n### 2.1. å‡çº§æœåŠ¡ç«¯çš„ HTTP åè®®\n\nå¦‚æœåªèƒ½é€‰ä¸€ä¸ªä¼˜åŒ– Web ç½‘ç»œæ€§èƒ½çš„æ–¹æ³•æˆ‘ä¸€å®šä¼šé€‰æ‹©æŠŠæœåŠ¡ç«¯çš„ HTTP åè®®å‡çº§è‡³ HTTP/3ã€‚å› ä¸ºä» HTTP/2 å¼€å§‹å°±å¼•å…¥äº†æ•°æ®åˆ†å¸§çš„æŠ€æœ¯ï¼Œåœ¨å»ºç«‹ä¸€ä¸ªè¿æ¥çš„åŸºç¡€ä¸Šèƒ½å®ç°å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œè¯·æ±‚ã€‚åŒæ—¶è¿˜è¿›è¡Œäº†ä¸€ç³»åˆ—çš„æ€§èƒ½ä¼˜åŒ–ã€‚è€Œ HTTP/3 æ›´æ˜¯ä½¿ç”¨ UDP é‡å†™äº† HTTPï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†å¾ˆå¤šç”±äº TCP æ¡æ‰‹ä»¥åŠæ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶å¯¼è‡´çš„å»¶è¿Ÿã€‚å¹¶ä¸”æ›´é‡è¦çš„æ˜¯ä»å¼€å‘è€…çš„è§’åº¦æ¥çœ‹ï¼Œè¿™å‡ ä¹æ˜¯ä¸€ä¸ªé›¶æˆæœ¬çš„ä¸¾æªï¼Œç”±äº HTTP/3 çš„å…¼å®¹æ€§å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‡ ä¹ä¸éœ€è¦å¯¹åŸæœ‰çš„è½¯ä»¶è¿›è¡Œä»»ä½•ä¿®æ”¹ (å½“ç„¶è¦å‡çº§æœåŠ¡ç«¯çš„ web server)ã€‚ç°ä»£æµè§ˆå™¨ä¹Ÿå¯¹ HTTP/2 å’Œ HTTP/3 æœ‰äº†å¾ˆå¥½çš„æ”¯æŒã€‚\n\nä¸‹è¡¨æ˜¯æˆªæ­¢åˆ°è¯¥æ–‡ç« å‘è¡¨æˆ‘çš„ä¸»é¡µ [hozen.site](https://www.hozen.site) 7 å¤©å†…çš„è®¿é—®è¯·æ±‚çš„å®¢æˆ·ç«¯ HTTP ç‰ˆæœ¬ç»Ÿè®¡ã€‚ä»ç»Ÿè®¡ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒHTTP/2 å’Œ HTTP/3 çš„è®¿é—®å æ¯”å·²ç»é«˜è¾¾ä¸‰åˆ†ä¹‹äºŒï¼Œå¹¶ä¸”æˆ‘ä¼°è®¡å…¶ä¸­çœŸå®ç”¨æˆ·çš„ HTTP/2 å’Œ HTTP/3 çš„å æ¯”ä¼šæ›´é«˜ã€‚å› ä¸ºåº”è¯¥æœ‰å¾ˆå¤šç½‘ç»œçˆ¬è™«ä½¿ç”¨äº†ä½ç‰ˆæœ¬çš„ HTTP åè®®ã€‚\n\n| ç‰ˆæœ¬ | è¯·æ±‚ | è¯·æ±‚ç™¾åˆ†æ¯”|\n| - | -| -|\n|HTTP/2|8,045|49.72%|\n|HTTP/1.1| 5,344 |33.03%|\n|HTTP/3 |2,767 |17.1%|\n|HTTP/1.0| 23| 0.1%\n\nå½“ç„¶ç”±äºç”¨æˆ·ç¾¤ä½“çš„ä¸åŒ HTTP åè®®ç‰ˆæœ¬çš„åˆ†å¸ƒä¼šæœ‰å·®åˆ«ï¼Œä½†æ¯«æ— ç–‘é—®çš„æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨é«˜ç‰ˆæœ¬ HTTP çš„å æ¯”ä¼šä¸æ–­çš„æé«˜ã€‚æ‰€ä»¥ä½æˆæœ¬å¸¦æ¥çš„é«˜æ€§èƒ½æå‡ä½¿å¾—æ‰€ä»¥ HTTP/3 éå¸¸å€¼å¾—å°è¯•ã€‚\n\n### 2.2. ä½¿ç”¨ CDN\n\nåœ¨ 1.1 èŠ‚ä¸­çš„è¡¨æ ¼å¯ä»¥çœ‹å‡ºï¼Œä¿¡å·ä¼ æ’­çš„æ—¶å»¶ä¸è·ç¦»æˆæ­£æ¯”ã€‚è‹¥æœåŠ¡å™¨ç¦»å®¢æˆ·ç«¯éå¸¸è¿œï¼Œé‚£ä¹ˆä¿¡å·ä¼ æ’­æ—¶å»¶æ— ç–‘ä¼šéå¸¸é«˜ã€‚è€Œ Contente Delivery Network æ­£æ˜¯ä¸ºäº†è§£å†³æ­¤é—®é¢˜è€Œç”Ÿçš„ã€‚CDN å°†å°±è¿‘ä¸ºç”¨æˆ·åˆ†é…èµ„æºæœåŠ¡å™¨ï¼Œä»¥ç¼©çŸ­ç”±äºè·ç¦»é€ æˆçš„ä¼ æ’­æ—¶å»¶è¿‡é•¿ã€‚å¹¶ä¸” CDN å·²ç»æœ‰éå¸¸æˆç†Ÿçš„æŠ€æœ¯å’Œæä¾›å•†ï¼Œå”¯ä¸€çš„é—®é¢˜å¯èƒ½å°±æ˜¯éœ€è¦æ”¯ä»˜ä¸€å®šçš„è´¹ç”¨ã€‚\n\n### 2.3. æé«˜ç½‘ç»œèµ„æºçš„å¹¶è¡Œæ•ˆç‡\n\nç”±äºæµè§ˆå™¨å¯¹äºåŒä¸€ä¸ªåŸŸåä¸‹çš„å¹¶è¡Œè¯·æ±‚æ•°é‡æœ‰é™åˆ¶ï¼Œé‚£ä¹ˆå½“ç½‘ç»œèµ„æºè¿‡å¤šæ—¶å¯ä»¥å°†å®ƒä»¬åˆ†åˆ«æ”¾ç½®åœ¨ä¸åŒçš„åŸŸåä¸‹ï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¼šä¸ºè¯¥é¡µé¢ä½¿ç”¨æ›´å¤šçš„å¹¶è¡Œè¿æ¥ã€‚\n\nå¦ä¸€æ–¹é¢ï¼Œå¯¹äºä¸€äº›ä½“ç§¯å¾ˆå°ä½†æ•°é‡å¾ˆå¤šçš„èµ„æºï¼Œä¾‹å¦‚å›¾æ ‡æ–‡ä»¶ã€‚è¦æƒ³åŠæ³•å°†è¿™äº›èµ„æºæ•´åˆèµ·æ¥å‡å°‘èµ„æºçš„æ•°é‡ã€‚å› ä¸ºæ— è®ºç½‘ç»œèµ„æºä½“ç§¯çš„å¤§å°æœ‰å¤šå¤§ï¼Œå»ºç«‹è¿æ¥å’Œ**ä¼ æ’­**æ¶ˆè€—çš„æ—¶é—´éƒ½æ˜¯ç›¸åŒçš„å¸¸æ•°æ—¶é—´ã€‚å½“èµ„æºä½“ç§¯è¾ƒå°æ—¶ï¼Œèµ„æºçš„**ä¼ è¾“**æ—¶é—´å æ®çš„ç›¸å¯¹æ¯”ä¾‹å°±ä¼šå˜å¾—å¾ˆå°ï¼Œæ•´ä¸ªç½‘ç»œçš„åˆ©ç”¨ç‡å°±ä¼šé™ä½ã€‚å¦ä¸€æ–¹é¢è¿™äº›æ•°é‡ä¼—å¤šçš„èµ„æºè¿˜ä¼šæ¶ˆè€—å¾ˆå¤šå¹¶è¡Œè¯·æ±‚ï¼Œä½¿å¾—å…¶ä»–èµ„æºçš„è¯·æ±‚ä¸å¾—ä¸è¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ã€‚è§£å†³è¯¥é—®é¢˜çš„ä¸€ä¸ªå¸¸è§çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨â€œé›ªç¢§å›¾â€æŠ€æœ¯æ‹¼æ¥ä¸€äº›å°ä½“ç§¯çš„å›¾ç‰‡ä»¥å‡å°‘è¯·æ±‚æ¬¡æ•°ã€‚\n\nä½†è¿˜è¦æ³¨æ„ï¼Œå½“æŸä¸ªèµ„æºä½“ç§¯è¿‡å¤§é€ æˆæ•°æ®çš„**ä¼ è¾“**æ—¶é—´å æ®è¿‡é«˜æ¯”é‡æ—¶ã€‚é‚£ä¹ˆå°±éœ€è¦å¯¹è¯¥èµ„æºè¿›è¡Œæ‹†åˆ†ï¼Œä»¥åˆ©ç”¨æµè§ˆå™¨çš„å¹¶è¡Œè¯·æ±‚åŠ å¿«å¯¹è¯¥èµ„æºçš„åŠ è½½ã€‚è¿™ç§æ€è·¯åœ¨å•é¡µé¢åº”ç”¨ä¸­æ¯”è¾ƒå¸¸è§ï¼Œç”±äºä¸»è¦çš„ JS æ–‡ä»¶èåˆè®¸å¤šä¾èµ–åº“å¯¼è‡´ä½“ç§¯è¿‡å¤§ï¼Œå½“è¯¥æ–‡ä»¶åŠ è½½å®Œæˆå‰é¡µé¢å¯èƒ½ä¼šé¢ä¸´ç™½å±çš„é£é™©ã€‚æ‰€ä»¥ä¸€äº›â€œæ‹†åŒ…â€æ’ä»¶åº”è¿è€Œç”Ÿã€‚\n\nä½†æ˜¯é—®é¢˜æ˜¯è¿›è¡Œæ‹†åŒ…æˆ–è€…èµ„æºåˆå¹¶è¿™ä¸¤ä¸ªçœ‹ä¼¼çŸ›ç›¾çš„ä¸¾æªä¹‹é—´çš„åˆ†ç•Œçº¿åœ¨å“ªé‡Œï¼Ÿä¹Ÿå°±æ˜¯è¯´å½“èµ„æºæ–‡ä»¶å¤šå°æ—¶è¦æ•´åˆï¼Œåˆå½“è¾¾åˆ°å¤šå¤§æ—¶è¦æ‹†åˆ†ï¼Ÿå¾ˆæ˜¾ç„¶è¿™ä¸ªé˜ˆå€¼å’Œç”¨æˆ·çš„ç½‘ç»œå¸¦å®½å’Œç½‘ç»œå»¶è¿Ÿæœ‰å…³ï¼Œå› æ­¤éœ€è¦å¯¹ç”¨æˆ·ç¾¤ä½“çš„ç½‘ç»œçŠ¶å†µè¿›è¡Œç»Ÿè®¡åˆ†æåæ‰æœ‰å¯èƒ½å¾—åˆ°æ•´ä½“è¾ƒä¼˜çš„é˜ˆå€¼ã€‚\n\n**ä½†æ˜¯**ï¼å½“ä½ ä½¿ç”¨äº† HTTP/2 æˆ– HTTP/3 ä¹‹åï¼Œä½ å°±æ— éœ€è€ƒè™‘è¿™äº›é—®é¢˜äº†ã€‚å› ä¸º HTTP/2 å’Œ HTTP/3 ä½¿ç”¨æ•°æ®åˆ†å¸§æŠ€æœ¯åªéœ€è¦å»ºç«‹ä¸€ä¸ªè¿æ¥å°±å¯ä»¥å¹¶è¡Œä¼ è¾“èµ„æºã€‚ç”šè‡³ä»¥ä¸Šçš„æ–¹æ³•å¯èƒ½äº§ç”Ÿè´Ÿä¼˜åŒ–çš„æ•ˆæœï¼Œä¾‹å¦‚å°†èµ„æºæ”¾åœ¨ä¸åŒçš„åŸŸååè€Œä¼šé¢å¤–å¢åŠ å»ºç«‹è¿æ¥çš„æ—¶é—´ã€‚å½“è¿™é‡Œçš„è´Ÿä¼˜åŒ–æ˜¯ç›¸å¯¹ HTTP/3 è‡ªèº«æ¥è¯´çš„ï¼Œç›¸å¯¹ä¸ HTTP/1.1 ä»ç„¶å…·æœ‰æ€§èƒ½çš„æå‡ã€‚\n\n### 2.4. æœåŠ¡ç«¯æ¸²æŸ“å’Œç¼“å­˜æ§åˆ¶\n\nä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“çš„å¯¹ç½‘ç»œæ€§èƒ½æå‡çš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œé‚£ä¾¿æ˜¯å‡å°‘å®¢æˆ·ç«¯ç½‘ç»œèµ„æºè¯·æ±‚çš„æ¬¡æ•°ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„èµ„æºéƒ½é€‚åˆæœåŠ¡ç«¯æ¸²æŸ“ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„ç›®çš„æ˜¯æé«˜ Web çš„å“åº”é€Ÿåº¦ï¼Œæ‰€ä»¥æœåŠ¡ç«¯æ¸²æŸ“æœ€å¥½ç”¨äºä¸€äº›é•¿æ—¶é—´æœ‰æ•ˆçš„é™æ€èµ„æºæˆ–è€…ç”¨æˆ·å…±äº«èµ„æºã€‚å¦åˆ™å¯èƒ½ä¼šç»™æœåŠ¡ç«¯é€ æˆè¿‡å¤§çš„å‹åŠ›ï¼Œå¯¼è‡´èµ„æºå“åº”è¿‡æ…¢åè€Œé™ä½äº†é¡µé¢çš„åŠ è½½é€Ÿåº¦ã€‚\n\nç¼“å­˜æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆä½†å´å¹¶ä¸ç®€å•çš„é—®é¢˜ï¼Œç½‘ä¸Šçš„ææ–™å¾ˆå¤šè¿™é‡Œä¸å†èµ˜è¿°ã€‚\n\n>There are only two hard things in Computer Science: cache invalidation and naming things.  -- Phil Karlton\n\n### 2.5. åˆç†çš„ç»„ç»‡ HTML\n\nåˆç†çš„ç»„ç»‡ HTML é¡µé¢åŒ…æ‹¬:\n\n* åˆç†æ”¾ç½®æ ·å¼æ–‡ä»¶å’Œè„šæœ¬æ–‡ä»¶çš„ä½ç½®\n* ä½¿ç”¨ script æ ‡ç­¾çš„ `async` å’Œ `defer` å±æ€§åŠ å¿«èµ„æºåŠ è½½\n* å°½å¯èƒ½ä½¿ç”¨ image æ ‡ç­¾æå‰å‘æµè§ˆå™¨æš´éœ²èµ„æºè¯·æ±‚ (è€Œä¸æ˜¯ä½¿ç”¨ `background-images` å±æ€§)\n* åˆç†ä½¿ç”¨ base64 ç¼–ç å‡å°‘èµ„æºè¯·æ±‚\n\nç­‰ã€‚ç”±äºè¿™äº›æ–¹æ³•å’Œ Web æ€§èƒ½ä¼˜åŒ–çš„å…¶ä»–æ–¹é¢äº§ç”Ÿé‡åˆï¼Œæœ¬æ–‡ä¸å†å±•å¼€ã€‚\n\n## 3. å°ç»“\n\næœ¬æ–‡å¯¹æœ€è¿‘å¯¹äº Web ç½‘ç»œæ€§èƒ½çš„å­¦ä¹ å’Œå®è·µåšäº†ä¸€ä¸ªå°çš„æ€»ç»“ï¼Œä¸»è¦çš„èµ„æ–™å’Œç»éªŒæ¥è‡ªäºã€Šè®¡ç®—æœºç½‘ç»œã€‹[<sup>[1]</sup>](#ref1)ã€ã€ŠWeb æ€§èƒ½æƒå¨æŒ‡å—ã€‹[<sup>[2]</sup>](#ref2)ã€å„å¤§å¼€å‘è€…ç¤¾åŒºåŠå¼€æ”¾æ–‡æ¡£ï¼Œä»¥åŠå¯¹ä¸ªäººé¡¹ç›® [hexo-theme-tranquility](https://github.com/hooozen/hexo-theme-tranquility) çš„ä¼˜åŒ–å®è·µã€‚æ­£å¦‚æ–‡ç« å¼€å¤´æ‰€è®² Web æ€§èƒ½æ˜¯ä¸€ä¸ªå¤æ‚ä½†é‡è¦çš„é—®é¢˜ï¼Œæ‰€ä»¥éš¾å…æœ‰æ‰€ç–æ¼ï¼Œæ³è¯·è¯»è€…æ‰¹è¯„ã€‚\n\n----\n*å‚è€ƒèµ„æ–™*\n\n<div id='ref1'></div>\n[1] è°¢å¸Œä». è®¡ç®—æœºç½‘ç»œ[M/OL]. 6 ç‰ˆ. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2013[2023-07-09].\n\n<div id='ref2'></div>\n[2] GRIGORIK I. Webæ€§èƒ½æƒå¨æŒ‡å—[M/OL]. ææ¾å³°, è¯‘. äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾, 2013[2023-07-09].\n\n[3] ç­‰\n","tags":["æ€§èƒ½ä¼˜åŒ–","è®¡ç®—æœºç½‘ç»œ"],"categories":["developer"]},{"title":"Hexo çš„å¤šä¸»é¢˜è‡ªåŠ¨åŒ–éƒ¨ç½²","url":"/archives/67/","content":"\nâ€œå¯¹é¡¹ç›®è¿›è¡Œé…ç½®åŒ–æ”¹é€ å¯ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œè®©å¼€å‘è€…å°†ç²¾åŠ›é›†ä¸­åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œå‡å°‘çç¢é‡å¤å·¥ä½œå¯¹å¿ƒæƒ…çš„å½±å“ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œé…ç½®åŒ–å¯ä»¥å‡å°‘å› äººå·¥æ“ä½œå¸¦æ¥çš„å¤±è¯¯ï¼Œå¹¶ä¸”åˆ©äºæ’æŸ¥é—®é¢˜ã€‚â€\n\n<!--more-->\n\nä¸Šé¢æ­£æ˜¯æˆ‘åœ¨å¯¹è‡ªå·±çš„é¡¹ç›®è¿›è¡Œæ”¹é€ åçš„æ„Ÿå—ã€‚æˆ‘ç»´æŠ¤äº†ä¸¤ä¸ª Hexo ä¸»é¢˜é¡¹ç›®ï¼Œ [hexo-theme-tranquility](https://github.com/hooozen/hexo-theme-tranquility) å’Œ [hexo-theme-academic](https://github.com/hooozen/hexo-theme-academic)ï¼ˆæœªæ­£å¼å‘å¸ƒï¼‰ã€‚ç”±äºä¸¤ä¸ªä¸»é¢˜çš„æµ‹è¯•ç”¨ä¾‹é‡åˆåº¦éå¸¸é«˜ï¼Œæ¯æ¬¡æ–°å¢æµ‹è¯•ç”¨ä¾‹éƒ½å¾—æ‰‹åŠ¨åœ¨ä¸¤ä¸ªä¸»é¢˜ä¸Šæµ‹è¯•ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚å¹¶ä¸”ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨å’ŒæŸ¥çœ‹ç¤ºä¾‹ï¼Œæˆ‘æƒ³æ„å»ºä¸€ä¸ªä¸“é—¨çš„æ¼”ç¤ºç½‘ç«™å¯¹ä¸¤ä¸ªä¸»é¢˜è¿›è¡Œå±•ç¤ºï¼Œå¹¶ä¸”å¸Œæœ›æ¯å½“æˆ‘æ›´æ–°æµ‹è¯•ç”¨çš„é¡¹ç›®æ—¶ï¼Œæ¼”ç¤ºç½‘ç«™çš„ä¸¤å¥—ä¸»é¢˜éƒ½ä¼šè‡ªåŠ¨æ›´æ–°éƒ¨ç½²ã€‚\n\näºæ˜¯è€ƒè™‘é€šè¿‡é…ç½®åŒ–åˆ©ç”¨ä¸€ä¸ªåšå®¢èµ„æºåŒæ—¶éƒ¨ç½²è‹¥å¹²ä¸»é¢˜ï¼Œå¹¶é€šè¿‡ Github Actions è®©ä¸¤ä¸ªä¸»é¢˜æ›´æ–°åéƒ½è‡ªåŠ¨éƒ¨ç½²ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹æ›´æ–°å†…å®¹å’Œæµ‹è¯•ç¤ºä¾‹ã€‚\n\næœ€ç»ˆå®ç°çš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼Œå»ºç«‹æµ‹è¯•é¡¹ç›® [hexo-theme-test](https://github.com/hooozen/hexo-theme-test)ã€‚æ¯å½“è¯¥é¡¹ç›®è¿›è¡Œæ¨é€æ—¶ï¼Œè‡ªåŠ¨åœ¨ç½‘å€ [theme.hozen.site/tranquility](https://theme.hozen.site/tranquility) å’Œ [theme.hozen.site/academic](https://theme.hozen.site/academic) éƒ¨ç½²ä½¿ç”¨äº†ä¸»é¢˜ [hexo-theme-tranquility](https://github.com/hooozen/hexo-theme-tranquility) å’Œ [hexo-theme-academic](https://github.com/hooozen/hexo-theme-academic) çš„ç½‘ç«™ã€‚\n\nç®€è¨€ä¹‹ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªå°±æ˜¯åŒä¸€ä¸ªåšå®¢èµ„æºéƒ¨ç½²å¤šä¸ªä¸»é¢˜ï¼Œå¦ä¸€ä¸ªæ˜¯ Github Actions çš„è‡ªåŠ¨éƒ¨ç½²ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»ã€‚\n\n## Hexo å¤šä¸»é¢˜éƒ¨ç½²\n\nHexo åœ¨ `themes/` ç›®å½•ä¸‹å¯ä»¥å­˜æ”¾å¤šä¸ªä¸»é¢˜æ–‡ä»¶ï¼Œä½†åªèƒ½é€šè¿‡ `_config.yml` æŒ‡å®šä¸€ä¸ªä¸»é¢˜è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶ä¸”éƒ¨ç½²åˆ°ç½‘ç«™æ ¹ç›®å½•ã€‚å½“ä¿®æ”¹ä¸»é¢˜åï¼Œä¹‹å‰ç”Ÿæˆçš„å†…å®¹ä¼šè¢«è¦†ç›–ã€‚æˆ‘å¸Œæœ› `themes/` ç›®å½•ä¸‹çš„ä¸»é¢˜éƒ½èƒ½éƒ¨ç½²ï¼Œå¹¶ä¸”äº’ä¸å½±å“ã€‚\n\néƒ¨ç½²å¤šä¸ªä¸»é¢˜çš„è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦é€šè¿‡æ›´æ”¹ `_config.yml` çš„é…ç½®ï¼Œä¿®æ”¹ä¸»é¢˜çš„è¾“å‡ºç›®å½•ï¼Œä½¿ä¸åŒçš„ä¸»é¢˜ä½¿ç”¨ä¸åŒçš„å­ç›®å½•å³å¯ã€‚ä¾‹å¦‚æˆ‘è¦éƒ¨ç½²ã€è‡´è¿œã€‘å’Œã€academicã€‘ä¸¤ä¸ªä¸»é¢˜æ—¶åˆ†åˆ«ä¿®æ”¹ `_config.yml` çš„ä»¥ä¸‹éƒ¨åˆ†ï¼š\n\n```yml è‡´è¿œä¸»é¢˜\nurl: http://theme.hozen.site/tranquility\npublic_dir: public/tranquility\ntheme: tranquility\n```\n\n```yml academic ä¸»é¢˜\nurl: http://theme.hozen.site/academic\npublic_dir: public/academic\ntheme: academic\n```\n\nè¿™æ ·åœ¨ä¸¤ä¸ª URL ä¸‹å°±è¾“å‡ºäº†ä½¿ç”¨ä¸åŒä¸»é¢˜æ¸²æŸ“çš„ç½‘ç«™äº†ã€‚\n\n### é…ç½®åˆ†ç¦»\n\né€šè¿‡ä»¥ä¸Šæ–¹æ³•è™½ç„¶è§£å†³äº†ä¸šåŠ¡éœ€æ±‚ï¼Œä½†æ˜¯ç”±äºæ¯æ¬¡éƒ¨ç½²ä¸»é¢˜éƒ½å¾—å»ä¿®æ”¹ `_config.yml` æ–‡ä»¶ã€‚å¹¶ä¸”ä¸‡ä¸€å¿˜è®°ä¿®æ”¹ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªä¸»é¢˜ç½‘ç«™å°±ä¼šè¢«å½“å‰çš„ä¸»é¢˜æ‰€è¦†ç›–ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚å› æ­¤è¿™é‡Œåˆ©ç”¨ Hexo çš„é…ç½®èåˆæœºåˆ¶ã€‚å°†ä¸¤ä¸ªä¸»é¢˜ä¸åŒçš„é…ç½®é¡¹åˆ†åˆ«æ”¾å…¥é…ç½®æ–‡ä»¶: `_build.tranquility.yml` å’Œ `_build.academic.yml` ä¸­ã€‚é€šç”¨çš„é…ç½®ä»ç„¶æ”¾åœ¨ `_config.yml`ã€‚\n\næœ€åç¼–å†™ä¸¤ä¸ª `scripts` å‘½ä»¤æ¥åŠ è½½ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼š\n\n```json package.json\n{\n  \"scritps\": {\n    ...\n    \"build-tranquility\": \"hexo generate --config _config.yml,_build.tranquility.yml\",\n    \"build-academic\": \"hexo generate --config _config.yml,_build.academic.yml\",\n    \"trqlt\": \"hexo server --config _config.yml,_build.tranquility.yml\",\n    \"acdmc\": \"hexo server --config _config.yml,_build.academic.yml\"\n  }\n  ...\n}\n```\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œ `npm run trqlt` å’Œ `npm run acdmc` æ¥åœ¨æœ¬åœ°è¿è¡Œä¸åŒçš„ä¸»é¢˜ï¼Œå¹¶é€šè¿‡æ‰§è¡Œ `build-tranquility` å’Œ `build-academic` æ¥æ„å»ºä¸åŒçš„ä¸»é¢˜äº†ã€‚å¹¶ä¸”ä¸¤ä¸ªä¸»é¢˜äº’ä¸å½±å“ï¼Œæ„å»ºåçš„æ–‡ä»¶åˆ†åˆ«æ”¾ç½®åœ¨ `public/tranquility` å’Œ `public/academic` ä¸‹ã€‚\n\n### ä½¿ç”¨å­æ¨¡å—ç®¡ç†ä¸¤ä¸ªä¸»é¢˜\n\néœ€è¦æ³¨æ„ï¼Œç”±äºè¿™ä¸ªåšå®¢ç½‘ç«™åªæ˜¯ä¸ºäº†æµ‹è¯•å’Œæ¼”ç¤ºï¼Œå…¶ä½¿ç”¨åˆ°çš„ä¸»é¢˜éƒ½æ˜¯å•ç‹¬çš„é¡¹ç›®ï¼Œå¹¶ä¸”ä»¥åå¯èƒ½åŠ å…¥å…¶ä»–ä¸»é¢˜ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ Git çš„å­æ¨¡å— submodule åŠŸèƒ½æ¥ç®¡ç†æ¨¡å—ã€‚å…·ä½“æ¥è¯´å°±æ˜¯åœ¨è¯¥ä»“åº“ä¸‹å°† [hooozen/hexo-theme-tranquility](https://github.com/hooozen/hexo-theme-tranquility) å’Œ [hooozen/hexo-theme-academic](https://github.com/hooozen/hexo-theme-academic) ä¸¤ä¸ªé¡¹ç›®ä½œä¸ºå­æ¨¡å—åˆ†åˆ«å¯¼å…¥åˆ° `themes/tranquility` å’Œ `themes/academic` ç›®å½•ä¸‹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥åœ¨è¯¥ä»“åº“ä¸‹ç›´æ¥å¯¹ä¸¤ä¸ªé¡¹ç›®è¿›è¡Œæ›´æ–°å’Œç»´æŠ¤ï¼ŒåŒæ—¶åˆä¿è¯äº†è¿™ä¸¤ä¸ªé¡¹ç›®çš„ç‹¬ç«‹æ€§ã€‚\n\næœ‰å…³ Git å­æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒ [Git å­æ¨¡å— submodule çš„ä½¿ç”¨](https://www.hozen.site/archives/23/)\n\n## è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™\n\nHexo å®˜ç½‘ç»™å‡ºäº†åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½²ç½‘ç«™çš„[ç¤ºä¾‹](https://hexo.io/zh-cn/docs/github-pages)ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ”¹è¿›ï¼š\n\n1. ç½‘é¡µçš„ç”Ÿæˆä¾èµ–åˆ°äº†ç¬¬ä¸‰æ–¹è½¯ä»¶ [pandoc](https://www.pandoc.org/)ï¼ŒGithub Actions çš„é»˜è®¤ç¯å¢ƒä¸­æ²¡æœ‰è¯¥è½¯ä»¶\n\n2. éœ€è¦éƒ¨ç½²ä¸¤ä¸ªä¸»é¢˜ç½‘ç«™åˆ°å­ç›®å½•ä¸‹\n\n3. éœ€è¦ç§»åŠ¨ CNAME æ–‡ä»¶åˆ°æ ¹ç›®å½•\n\nå¯¹äºç¬¬ 1 ä¸ªé—®é¢˜ï¼Œéœ€è¦åˆ©ç”¨ Docker æ¥è§£å†³ã€‚ç¬¬ 2 å’Œç¬¬ 3 ä¸ªé—®é¢˜å¢åŠ ç›¸åº”çš„æŒ‡ä»¤å³å¯ã€‚\n\n### åˆ›å»º Docker é•œåƒ\n\nåˆ›å»ºå…·å¤‡ Node å’Œ Pandoc ç¯å¢ƒçš„é•œåƒï¼Œå¯ä»¥ Node é•œåƒä¸ºåŸºç¡€åœ¨å…¶ä¸­å®‰è£… Pandoc è½¯ä»¶åŒ…ã€‚ç”±äºæŠŠé¡¹ç›®ç”Ÿæˆå’Œéƒ¨ç½²çš„æ“ä½œåœ¨ Github Actions ä¸­æ‰§è¡Œï¼Œå› æ­¤ Docker é•œåƒä¸­å¹¶ä¸æ”¾å…¥é¡¹ç›®ä»£ç ä¹Ÿä¸æ‰§è¡Œä»»ä½•é¡¹ç›®å‘½ä»¤ï¼Œåªæ˜¯åˆ›å»ºè¿è¡Œç¯å¢ƒã€‚æ‰€ä»¥ Dockerfile éå¸¸ç®€å•ï¼Œå¦‚ä¸‹ï¼š\n\n```Dockerfile\n# ä½¿ç”¨ä¸€ä¸ªåŒ…å« Node.js çš„åŸºç¡€é•œåƒ\nFROM node:18\n\n# è®¾ç½®å·¥ä½œç›®å½•\nWORKDIR /app\n\n# å®‰è£… Pandoc\nRUN apt-get update && apt-get install -y pandoc\n```\n\nä½¿ç”¨ä»¥ä¸Š Dockerfile åˆ›å»ºé•œåƒåï¼Œå°†è¯¥é•œåƒä¸Šä¼ åˆ° [Dockerhub](https://hub.docker.com/) å°±èƒ½åœ¨ Github Actions ä¸­æ‹‰å–é•œåƒå¹¶åˆ›å»ºå®¹å™¨äº†ã€‚\n\n### ç¼–å†™ workflows é…ç½®\n\nå‡†å¤‡å¥½é•œåƒåï¼Œåªéœ€è¦å­å•Š Github Actions ä¸­ä½¿ç”¨è¯¥é•œåƒåˆ›å»ºå®¹å™¨ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„é¡¹ç›®å‘½ä»¤å°±èƒ½æ„å»ºé¡¹ç›®ä»£ç äº†ï¼Œå¹¶ä½¿ç”¨ç›¸å…³çš„æ’ä»¶å®ç°ç½‘ç«™çš„è‡ªåŠ¨éƒ¨ç½²ã€‚\n\né¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `.github/workflows/pages.yml` æ–‡ä»¶ï¼Œç„¶åç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š\n\n```workflows\nname: Pages\n\non:\n  push:\n    branches:\n      - main # default branch\n\njobs:\n  pages:\n    runs-on: ubuntu-22.04\n    permissions:\n      contents: write\n    container:\n      image: docker://hooozen/node-pandoc:latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n        with:\n          submodules: recursive\n      - name: Cache NPM dependencies\n        uses: actions/cache@v3\n        with:\n          path: node_modules\n          key: ${{ runner.OS }}-npm-cache\n          restore-keys: |\n            ${{ runner.OS }}-npm-cache\n      - name: Install Dependencies\n        run: npm install\n      - name: Build tranquility\n        run: npm run build-tranquility\n      - name: Clean config\n        run: rm -f db.json\n      - name: Build academic\n        run: npm run build-academic\n      - name: Set CNAME\n        run: cp source/CNAME public/CNAME\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./public\n```\n\nåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­:\n\n* ä½¿ç”¨ `container` é¡¹æŒ‡å®šäº†ä¸Šæ–‡ä¸­åˆ›å»ºå¹¶ä¸Šä¼ çš„å…·å¤‡ Node å’Œ Pandoc çš„ Docker é•œåƒã€‚Github actions åœ¨æ‰§è¡Œæ—¶ä¼šä½¿ç”¨è¯¥é•œåƒåˆ›å»º Docker å®¹å™¨ï¼Œæ¥ä¸‹çš„æ“ä½œéƒ½ä¼šåœ¨è¯¥å®¹å™¨ä¸­è¿›è¡Œã€‚\n\n* ä½¿ç”¨ `actions/cache@v3` æ£€å‡ºé¡¹ç›®ä¸»åˆ†æ”¯ï¼Œç„¶åä½¿ç”¨ `actions/cache@v3` ç¼“å­˜ `node_modules` ç›®å½•ä»¥æé«˜æ„å»ºé€Ÿåº¦ã€‚\n\n* æ¥ä¸‹æ¥æ‰§è¡Œ `npm install` å®‰è£…ä¾èµ–ï¼Œç„¶åä¾æ¬¡è¿è¡Œ `npm run build-tranduility` å’Œ `npm run build-academic` æ¥ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„ä¸»é¢˜æ„å»ºé¡µé¢ã€‚æ³¨æ„ä¸¤ä¸ªæ„å»ºå‘½ä»¤ä¹‹é—´æ‰§è¡Œ `rm -f db.json` æ¥æ¸…é™¤ Hexo çš„ç¼“å­˜æ–‡ä»¶ã€‚\n\n* æ„å»ºå®Œæˆåï¼Œåœ¨ `public` æ–‡ä»¶å¤¹ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ªå­ç›®å½• `tranquility` å’Œ `academic` åˆ†åˆ«å­˜æ”¾äº†ä¸¤ä¸ªä¸»é¢˜çš„é¡µé¢ã€‚\n\n* ç”±äºæˆ‘ä½¿ç”¨äº†è‡ªå®šä¹‰åŸŸåï¼Œå› æ­¤ä½¿ç”¨ `mv` å‘½ä»¤å°† CNAME æ–‡ä»¶ç§»åŠ¨åˆ° `public` ç›®å½•ä¸‹ã€‚\n\n* æœ€åä½¿ç”¨ `peaceiris/actions-gh-pages@v3` æ¥å°† `public` ä¸‹æ‰€æœ‰çš„æ–‡ä»¶éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯ã€‚\n\nç»è¿‡ä»¥ä¸Šæ“ä½œï¼Œæ¯å½“æˆ‘åœ¨ `hexo-theme-test` é¡¹ç›®ä¸­æ¨é€ä»£ç æ—¶ï¼ŒGithub Actions éƒ½ä¼šè‡ªåŠ¨å°†æ›´æ–°å†…å®¹ä½¿ç”¨ä¸¤ä¸ªä¸»é¢˜åˆ†åˆ«éƒ¨ç½²åœ¨ [theme.hozen.site/tranquility](https://theme.hozen.site/tranquility) å’Œ [theme.hozen.site/academic](https://theme.hozen.site/academic) ä¸Šã€‚\n\n## æ€»ç»“\n\n* å¯¹äº Node é¡¹ç›®ä¸åŒç¯å¢ƒå’Œå­é¡¹ç›®çš„é…ç½®åŒ–ï¼Œå¯ä»¥é€šè¿‡ç¼–å†™ `scripts` å‘½ä»¤å’Œç¼–å†™ Node æˆ–è€… Bash è„šæœ¬æ¥è¯»å–é…ç½®æ–‡ä»¶å®ç°ã€‚\n* Github Actions æ˜¯å¯¹ Github ä»“åº“è¿›è¡Œè‡ªåŠ¨åŒ–é…ç½®çš„å¥½å·¥å…·ï¼Œæœ‰éå¸¸å¼ºå¤§çš„åŠŸèƒ½ã€‚\n* Docker çš„åº”ç”¨å¯¹äºè·¨å¹³å°çš„é¡¹ç›®è¿è¡Œå’Œéƒ¨ç½²éå¸¸æ–¹ä¾¿ã€‚\n","tags":["Git","Github Pages","é…ç½®åŒ–","Docker"],"categories":["developer"]},{"title":"æ•°å­¦è€å¸ˆ","url":"/archives/70/","content":"\nä¸Šå­¦æ—¶åšæš‘æœŸå…¼èŒï¼Œå¸¦å…­ä¸ªå¹´çº§çš„å°å­¦æ•°å­¦ã€‚ä»äºŒå¹´çº§åˆ°åˆä¸€çš„æ•°å­¦ï¼Œä¸€å¤©æ­£å¥½ä¸Šæ»¡å…­èŠ‚è¯¾ï¼Œä¸å¾—ä¼‘æ¯ã€‚åœ¨åŸä¸­æ‘ä¸­ï¼Œå·¥èµ„å¾ˆä½ï¼Œè€æ¿æ˜¯ä¸€å¯¹ä¸Šäº†å¹´çºªçš„å¤«å¦‡ï¼Œç­çº§å°±è®¾åœ¨ä»–ä»¬çš„ä¸¤å±‚æ¥¼æˆ¿é‡Œã€‚å­©å­å¤šæ¥è‡ªé™„è¿‘æ‘é‡Œï¼Œçˆ¶æ¯æ‰˜ç®¡è¿‡æ¥ï¼Œäº¤ä¸ªé¥­é’±ï¼Œä¸æ±‚å­¦åˆ°ä»€ä¹ˆï¼Œç›´æ¶ˆèƒ½æœ‰ä¸ªåœ°å„¿ç®¡æŸä¸‹å­©å­ï¼Œåƒé¡¿åˆé¥­ï¼Œä¸å½±å“è‡ªå·±ä¸Šç­ã€‚\n<!--more-->\n\næœ‰çš„å­©å­å¥½åƒçˆ±ä¸Šæˆ‘çš„è¯¾ï¼Œæˆ‘ä¹Ÿçˆ±æ•™ä»–ä»¬ï¼Œæˆ‘ä¸€ç›´ä»¥ä¸ºæˆ‘æ•™çš„ä¸é”™ï¼Œå­©å­ä»¬ä¼šå–œæ¬¢æˆ‘ã€‚ç›´åˆ°åæ¥åœ¨â€œåŠå…¬å®¤â€é‡Œå’Œå…¶ä»–è€å¸ˆèŠå¤©ï¼Œæ‰å‘ç°å­©å­ä»¬æœ€å®³æ€•ä¸Šæ•°å­¦è¯¾ï¼Œâ€œå› ä¸ºæ•°å­¦è€å¸ˆæœ€ä¸¥å‰â€ã€‚æˆ‘ç«Ÿä¸€ç›´ä¸è§‰ã€‚\n\næš‘æœŸç­å¿«ç»“æŸæ—¶ï¼Œä¸ƒå¹´çº§è¯­æ–‡è¯•å·çš„ä½œæ–‡é¢˜ç›®æ˜¯â€œæˆ‘çš„è€å¸ˆâ€ã€‚æœ‰ä¸€äº›å¤±è½ï¼Œå…¨ç­åªæœ‰ä¸€ä¸ªå­©å­å†™äº†æ•°å­¦è€å¸ˆã€‚é‚£æ˜¯ä¸€ä¸ªèƒ–èƒ–çš„ç”·å­©ï¼Œè€æ¿é˜¿å§¨åœ¨åˆé¥­æ—¶æ€»æ˜¯è°ƒä¾ƒä»–å¤ªèƒ½åƒï¼Œè®©ä»–å¤šäº¤é’±ï¼Œä»–åªå˜¿å˜¿ç¬‘ã€‚ä»–ä¸Šæ•°å­¦è¯¾æ—¶ååº”æ€»æ˜¯æ…¢åˆ«äººä¸€æ‹ï¼Œåšé¢˜å¾ˆæ…¢ï¼Œç­é‡Œçš„å¥³ç”Ÿä¸å–œæ¬¢ä»–ï¼Œç”šè‡³æ¶è¯­ç›¸å‘ï¼Œè¯´åˆ°æ€¥å¤„ä»–ä¹Ÿä¼šéª‚å›å»ã€‚æœ‰æ—¶ä¸Šè¯¾ä¼šèµ°ç¥ï¼Œåˆšè®²è¿‡çš„çŸ¥è¯†ç‚¹ä¹Ÿç­”ä¸å‡ºï¼Œæˆ‘å¸¸ç½šä»–ç«™ç€å¬è¯¾ã€‚æˆ‘æ²¡æƒ³åˆ°é€‰æˆ‘å†™è¿›ä½œæ–‡çš„æ˜¯è¿™ä¸ªå­©å­ã€‚æˆ‘çœ‹äº†ä»–çš„ä½œæ–‡ï¼Œå­—å†™å¾—å¾ˆå¤§ï¼Œæ¯ä¸ªéƒ½æŒ¤å‡ºäº†æ–¹æ ¼ã€‚ä»–è¯´ï¼Œä»–æœ€å–œæ¬¢æ•°å­¦è€å¸ˆï¼Œè™½ç„¶åˆ«çš„åŒå­¦éƒ½è§‰å¾—æ•°å­¦è€å¸ˆå¾ˆä¸¥å‰ï¼Œä½†åªæœ‰æ•°å­¦è€å¸ˆåœ¨è¯¾å ‚ä¸Šå½“ä»–æ²¡å¼„æ‡‚æ—¶ä¼šç­‰ç€ä»–ã€‚\n","tags":["æ•£æ–‡","éšç¬”"],"categories":["life"]},{"title":"è¯»ä¹¦","url":"/archives/66/","content":"\nèº«è¾¹ä¸€äº›æœ‹å‹å¼€å§‹è¯»ä¹¦ï¼Œæˆ‘æ€»ä¼šåŠè°ƒä¾ƒåœ°è¯´ï¼Œâ€œä½ æœ‰çƒ¦æ¼äº†ï¼Œæœ‰çƒ¦æ¼çš„äººæ‰ä¼šæƒ³è¯»ä¹¦â€ã€‚è¯»ä¹¦ä¸æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹ï¼Œç”šè‡³æ¯ç‡¥ã€‚ç”Ÿæ¥çˆ±è¯»ä¹¦çš„äººå°‘ä¹‹åˆå°‘ï¼Œæˆ‘ä¸æ˜¯ã€‚æˆ‘è®¤è¯†çš„äººé‡Œï¼Œæ²¡æœ‰ç¼˜ç”±çš„çˆ±è¯»ä¹¦çš„å¤§æ¦‚å±ˆæŒ‡å¯æ•°ã€‚è¿™æ˜¯ä¸€ç§æˆ‘æœªæœ‰å´èƒ½æ„Ÿå—åˆ°çš„å¤©åˆ†ã€‚\n<!--more-->\n\næœ‰äººè¯´ï¼Œäººåˆ°å››åå²è¿˜ä¸ä¿¡å‘½é‚£ä¹ˆè¿™ä¸ªäººæ‚Ÿæ€§å¤ªå·®ã€‚æˆ‘äºŒåå¤šå²çš„å¹´é¾„ä¾¿å¼€å§‹ä¿¡å‘½ï¼Œç¡®åˆ‡çš„è¯´æ˜¯ä»ä¸ç›¸ä¿¡åˆ°æ¥å—ã€‚å› ä¸ºæœ‰äº›äººæ˜¯ä¸å…³å¿ƒå‘½çš„ï¼Œä¾¿è°ˆä¸ä¸Šä¿¡ä¸ä¿¡ã€‚ä¿¡å‘½ä¸æ˜¯è¿·ä¿¡ï¼Œæƒ³å¾—æ€»å¯å¾—åˆ°æ‰æ˜¯è¿·ä¿¡ã€‚å¤å¤©å‡ºç”Ÿçš„è™«å­ï¼Œä¸çŸ¥å†°æ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯ä»–çš„å‘½ã€‚äººç”Ÿæ¥ä¾¿å¸¦ç€ä¸€äº›ç‰¹è´¨ï¼Œè¿™äº›ç‰¹è´¨æ˜¯å¼ºæ±‚ä¸æ¥ä¹Ÿèˆå¼ƒä¸æ‰çš„ã€‚è¿™æ˜¯ä¸€ä¸ªäººçš„å‘½ã€‚æˆ‘èƒ½åšçš„æ˜¯æ‰¾åˆ°è¿™äº›ç‰¹è´¨ï¼Œæ‰¾åˆ°æˆ‘çš„å‘½ã€‚\n\né˜¿åŸè¯´ï¼Œæ¯ä¸ªäººéƒ½ä¼šç¢°åˆ°ç»å¢ƒã€‚æˆ‘éå¸¸èµåŒï¼Œè‹¥ç”¨æ›´æŠ€æœ¯æ€§çš„è¯­å¥æ¥é˜è¿°ä¾¿æ˜¯ï¼Œå¤§æ¦‚ç‡æ¯ä¸ªäººéƒ½ä¼šç¢°åˆ°ç»å¢ƒï¼Œè‡³å°‘æ¯ä¸ªäººéƒ½æ— æ³•é¿å…åœ°å…·æœ‰ç¢°åˆ°ç»å¢ƒçš„å¯èƒ½ã€‚ä»¥æˆ‘çš„è§‚å¯Ÿï¼Œæ™®é€šäººå¾€å¾€åœ¨æˆå®¶ç«‹ä¸šåæ‰ä¼šç¢°åˆ°äººç”Ÿçš„ç»å¢ƒï¼Œå¤§æ¦‚ä¾¿æ˜¯å››åå²å‰åã€‚å¹´è½»çš„ï¼Œæ´»åŠ›çš„ï¼Œæ¿€æ‰¬çš„ï¼Œå¾€å¾€æœªæ›¾æ„Ÿå—åˆ°è¿‡ç»å¢ƒã€‚æ¯ä¸ªäººçš„ç»å¢ƒä¸å°½ç›¸åŒï¼Œä½†å¯¹äºæ²¡ç»å†è¿‡ç»å¢ƒçš„äººï¼Œæœ‰äº›äº‹æ˜¯ä¸å¯è¯´çš„ã€‚è¯´äº†ä¾¿æ˜¯æ— è¶£ã€‚\n\næ—¢å¦‚æ­¤ï¼Œå¦‚ä½•ç©¿è¶Šç»å¢ƒä¾¿æ˜¯äººç”Ÿä¸€ä¸ªé‡è¦çš„è¯¾é¢˜ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å¿ƒé‡Œï¼Œå¦‚ä½•ä»å¿ƒé‡Œæ‰¾å‡ºè¿™ä¸ªæ–¹æ³•ï¼Ÿæœ‰å¾ˆå¤šé€”å¾„ï¼Œä½†éƒ½è„±ä¸äº†å­¤ç‹¬ã€‚è¯»ä¹¦æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚\n","tags":["æ•£æ–‡","éšç¬”"],"categories":["life"]},{"title":"è®°ä½ä¸¤ä¸ªå‡½æ•°è½»æ¾å¤„ç† Go è¯­è¨€ OJ è¾“å…¥","url":"/archives/65/","content":"\nå¤„ç†æ“ä½œç³»ç»Ÿçš„æ ‡å‡†è¾“å…¥è¾“å‡ºåœ¨ Web é¡¹ç›®å¼€å‘ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œåƒ [LeetCode](https://leetcode.cn) ä¸€äº›ç°ä»£åˆ·é¢˜å¹³å°ä¹Ÿå–æ¶ˆäº†è¾“å…¥è¾“å‡ºçš„å¤„ç†ï¼Œè®©ç”¨æˆ·ä¸“æ³¨äºç®—æ³•çš„å®ç°ã€‚ä½†å¯¹äºä¼ ç»Ÿçš„ OJ å¹³å°å’Œç®—æ³•ç«èµ›ï¼Œå¾€å¾€éœ€è¦ç”¨æˆ·ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–æŒ‡å®šæ ¼å¼çš„æ•°æ®ï¼Œç„¶åä½¿ç”¨æ ‡å‡†è¾“å‡ºè¿”å›ç­”æ¡ˆã€‚å¦‚æœå¹³æ—¶æ²¡æœ‰ç»éªŒçš„è¯ï¼Œåœ¨æ¯”èµ›æˆ–ç¬”è¯•æ—¶å¯èƒ½ä¼šæµªè´¹ä¸å¿…è¦çš„æ—¶é—´ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Go è¯­è¨€çš„ `fmt.Scan` å’Œ `Scanner.Scan` å‡½æ•°æ¥åº”å¯¹å¸¸è§çš„ OJ è¾“å…¥ã€‚\n\n<!--more-->\n\n## ä¸¤ä¸ªå‡½æ•°\n\nå…ˆè€ƒè™‘å¸¸è§„çš„ OJ æ•°æ®æ ¼å¼ï¼šä½¿ç”¨ç©ºæ ¼åˆ†éš”æ•°æ®å…ƒç´ ï¼Œä½¿ç”¨æ¢è¡Œç¬¦åˆ†éš”ä¸åŒç»„æ•°æ®ã€‚\n\n### [`fmt.Scan`](https://pkg.go.dev/fmt@go1.20.2#Scan)\n\n```go\nfunc Scan(a ...any) (n int, err error)\n```\n\n> Scan scans text read from standard input, storing successive space-separated values into successive arguments. Newlines count as space. It returns the number of items successfully scanned. If that is less than the number of arguments, err will report why.\n\n`fmt.Scan` æ–¹æ³•ä¼šä»æ ‡å‡†è¾“å…¥ä¸­**è¿ç»­è¯»å…¥**ç”±ç©ºæ ¼ï¼ˆ**æˆ–æ¢è¡Œ**ï¼‰åˆ†éš”çš„å˜é‡åˆ°ä¼ å…¥çš„å‚æ•°ã€‚å½“è¯»å…¥çš„å˜é‡ä¸ªæ•°å°äºä¼ å…¥çš„å‚æ•°ä¸ªæ•°æ—¶ï¼Œ`err` ä¼šæŠ¥å‘Šé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`Scan` æ–¹æ³•ä¼šä¸€ç›´è¯»å–å˜é‡ç›´è‡³è¯»å–å®Œæ¯•æ‰€æœ‰è¾“å…¥ã€‚\n\næ ¹æ® `fmt.Scan` æ–¹æ³•çš„è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å¤„ç†ç©ºæ ¼å¯¹æ•°æ®çš„åˆ’åˆ†ï¼Œä½†ç”±äºæ¢è¡Œä¹Ÿè§†ä½œç©ºæ ¼ï¼Œå¯¼è‡´æ— æ³•åŒºåˆ†æ•°æ®ç»„ã€‚å› æ­¤ä½¿ç”¨è¯¥æ–¹æ³•è¯»å…¥æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦**æå‰çŸ¥é“æ¯ç»„æ•°æ®çš„é•¿åº¦**ï¼Œæ ¹æ®è¿™ä¸ªé•¿åº¦æ¥å¯¹æ•°æ®ç»„è¿›è¡Œåˆ’åˆ†å³å¯ã€‚å…·ä½“è§ä¸‹é¢ä¸¤ä¸ªä¾‹å­ã€‚\n\n#### ä¾‹ 1. [ä¸¤æ•°ä¹‹å’Œ](https://ac.nowcoder.com/acm/contest/5657/A)\n\n```bash è¾“å…¥æè¿°\nè¾“å…¥åŒ…æ‹¬ä¸¤ä¸ªæ­£æ•´æ•°a,b(1 <= a, b <= 1000),è¾“å…¥æ•°æ®åŒ…æ‹¬å¤šç»„ã€‚\n```\n\n```bash è¾“å‡ºæè¿°\nè¾“å‡ºa+bçš„ç»“æœã€‚\n```\n\n**ç¤ºä¾‹**\n\n```bash è¾“å…¥\n1 5\n10 20\n```\n\n```bash è¾“å‡º\n6\n30\n```\n\n**è§£ç­”**\n\nç”±äºæ¯ä¸ªç”¨ä¾‹å›ºå®šæœ‰ä¸¤ä¸ªæ•°æ®ï¼Œåªéœ€è¦ä¸¤ä¸ªä¸¤ä¸ªè¾“å…¥è¯»å…¥ï¼Œç„¶åè®¡ç®—ä¸¤æ•°ä¹‹å’Œå³å¯ï¼š\n\n```Go ä¸¤æ•°ä¹‹å’Œ\npackage main\n\nimport \"fmt\"\n\nfunc main() {\n    var a, b int\n    for {\n        _, err := fmt.Scan(&a, &b)  // ä¸¤ä¸ªä¸¤ä¸ªå˜é‡è¯»å…¥\n        if err != nil { break }  // è¯»åˆ°æœ«å°¾ç»“æŸå¾ªç¯\n        fmt.Println(a + b)\n    }\n}\n```\n\n#### ä¾‹ 2. [æ•°åˆ—ä¹‹å’Œ](https://ac.nowcoder.com/acm/contest/5657/F)\n\n```bash è¾“å…¥æè¿°\nè¾“å…¥æ•°æ®æœ‰å¤šç»„, æ¯è¡Œè¡¨ç¤ºä¸€ç»„è¾“å…¥æ•°æ®ã€‚\næ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•´æ•°ä¸ºæ•´æ•°çš„ä¸ªæ•°n(1 <= n <= 100)ã€‚\næ¥ä¸‹æ¥nä¸ªæ­£æ•´æ•°, å³éœ€è¦æ±‚å’Œçš„æ¯ä¸ªæ­£æ•´æ•°ã€‚\n```\n\n```bash è¾“å‡ºæè¿°\næ¯ç»„æ•°æ®è¾“å‡ºæ±‚å’Œçš„ç»“æœ\n```\n\n**ç¤ºä¾‹**\n\n```bash è¾“å…¥\n4 1 2 3 4\n5 1 2 3 4 5\n```\n\n```bash è¾“å‡º\n10\n15\n```\n\n**è§£ç­”**\n\nè¿™ä¸€é¢˜è¾“å…¥è™½ç„¶æ¯ç»„çš„å˜é‡æ•°ä¸å›ºå®šï¼Œä½†é€šè¿‡è¯»å…¥çš„ç¬¬ä¸€ä¸ªå˜é‡å¯ä»¥é¢„å…ˆçŸ¥é“æ¯ç»„çš„å˜é‡æ•°ï¼Œå› æ­¤é€šè¿‡å¾ªç¯æ§åˆ¶å³å¯å¯¹æ•°æ®æ­£ç¡®åˆ†ç»„ã€‚\n\n```go æ•°åˆ—ä¹‹å’Œ\npackage main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    var n int\n    for {\n        _, err := fmt.Scan(&n) // è·å–è¯¥ç»„æ•°æ®é•¿åº¦\n        if err != nil { break }\n        \n        sum := 0\n        // é€šè¿‡å¾ªç¯æ§åˆ¶æ¯ä¸€ç»„çš„æ•°æ®è¯»å…¥\n        for i := 0; i < n; i++ {\n            var v int\n            fmt.Scan(&v)\n            sum += v\n        }\n        \n        fmt.Println(sum)\n    }\n}\n```\n\n#### `fmt.Scan` å°ç»“\n\n`fmt.Scan` æ–¹æ³•ç®€å•æ˜“ç”¨ï¼Œæ— éœ€æå‰çŸ¥é“ç”¨ä¾‹çš„ç»„æ•°ï¼Œå¯ä»¥ä¸€ç›´ä»æ ‡å‡†è¾“å…¥è¯»å–ç”±ç©ºæ ¼ä»¥åŠæ¢è¡Œåˆ†éš”çš„æ•°æ®ç›´è‡³ç»“æŸã€‚ä½†éœ€è¦èƒ½å¤Ÿï¼ˆä»é¢˜ç›®è§„å®šæˆ–è¾“å…¥å˜é‡ï¼‰æå‰è·çŸ¥**æ¯ç»„æ•°ç»„çš„é•¿åº¦**ã€‚å› æ­¤å½“æ¯ç»„æ•°æ®é•¿åº¦æ— æ³•æå‰è·çŸ¥æ—¶ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨èµ·æ¥å°±ä¸æ–¹ä¾¿äº†ã€‚\n\n### [`bufio.Scanner`](https://pkg.go.dev/bufio@go1.20.2#Scanner)\n\né¦–å…ˆæŸ¥çœ‹ [`Scanner`](https://pkg.go.dev/bufio@go1.20.2#Scanner) çš„å®šä¹‰ï¼š\n\n```go\ntype Scanner struct {\n    // contains filtered or unexported fields\n}\n```\n\n> Scanner provides a convenient interface for reading data such as a file of newline-delimited lines of text. Successive calls to the Scan method will step through the 'tokens' of a file, skipping the bytes between the tokens. The specification of a token is defined by a split function of type SplitFunc; the default split function breaks the input into lines with line termination stripped. Split functions are defined in this package for scanning a file into lines, bytes, UTF-8-encoded runes, and space-delimited words. The client may instead provide a custom split function.  \n\nç®€è¨€ä¹‹ï¼ŒScanner æä¾›äº†**æ¯æ¬¡è¯»å…¥ä¸€è¡Œè¾“å…¥**çš„æ¥å£ã€‚\n\nç„¶åæŸ¥çœ‹ `Scanner` çš„ [`Scan`](https://pkg.go.dev/bufio@go1.20.2#Scanner.Scan) æ–¹æ³•\n\n```go\nfunc (s *Scanner) Scan() bool\n```\n\n> Scan advances the Scanner to the next token, which will then be available through the Bytes or Text method. It returns false when the scan stops, either by reaching the end of the input or an error. After Scan returns false, the Err method will return any error that occurred during scanning, except that if it was io.EOF, Err will return nil. Scan panics if the split function returns too many empty tokens without advancing the input. This is a common error mode for scanners.\n\n`Scanner` çš„ `Scan` æ–¹æ³•ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰å°† `Scanner` æ¨è¿›åˆ°ä¸‹ä¸€è¡Œï¼Œè¯»å–çš„è¯¥è¡Œæ•°æ®å¯ä»¥è¢« [`Text`](https://pkg.go.dev/bufio@go1.20.2#Scanner.Text) æ–¹æ³•ä½¿ç”¨ã€‚å½“æ‰«æç»“æŸæ—¶ï¼Œè¯¥æ–¹æ³•è¿”å› `false`ã€‚\n\nå…¶ä¸­ `Text` æ–¹æ³•å°†è¯»å–çš„è¯¥è¡Œè¾“å…¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¿”å›ï¼š\n\n```go\nfunc (s *Scanner) Text() string\n```\n\n> Text returns the most recent token generated by a call to Scan as a newly allocated string holding its bytes.\n\nå› æ­¤é€šè¿‡ä½¿ç”¨ `bufio.Scanner` æˆ‘ä»¬å¯ä»¥é€è¡Œè¯»å–è¾“å…¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œç„¶åé€šè¿‡ `strings.Split` æ–¹æ³•å°†æ¯è¡Œå­—ç¬¦ä¸²è½¬å˜ä¸ºæ•°ç»„ä¾¿æˆåŠŸè¯»å…¥äº†ä¸€ç»„æ•°æ®ã€‚\n\n`bufio.Scanner` åœ¨å…·ä½“ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„ä¸€äº›ç»†èŠ‚ï¼ŒåŒ…æ‹¬ä¼ å…¥æ ‡å‡†è¾“å…¥ï¼Œå­—ç¬¦ä¸²åˆ†éš”å’Œç±»å‹è½¬æ¢ç­‰ï¼Œå…·ä½“è§ä¸‹ä¾‹ï¼š\n\n#### ä¾‹ 4. [æ•°åˆ—æ±‚å’Œ](https://ac.nowcoder.com/acm/contest/5657/G)\n\n```bash è¾“å…¥æè¿°\nè¾“å…¥æ•°æ®æœ‰å¤šç»„, æ¯è¡Œè¡¨ç¤ºä¸€ç»„è¾“å…¥æ•°æ®ã€‚\n\næ¯è¡Œä¸å®šæœ‰nä¸ªæ•´æ•°ï¼Œç©ºæ ¼éš”å¼€ã€‚(1 <= n <= 100)ã€‚\n```\n\n```bash è¾“å‡ºæè¿°\næ¯ç»„æ•°æ®è¾“å‡ºæ±‚å’Œçš„ç»“æœ\n```\n\n**ç¤ºä¾‹**\n\n```bash è¾“å…¥\n1 2 3\n4 5\n0 0 0 0 0\n```\n\n```bash è¾“å‡º\n6\n9\n0\n```\n\n**è§£ç­”**\n\nè¯¥é¢˜å’Œä¾‹ 3 æ˜¯åŒä¸€ä¸ªé—®é¢˜ï¼Œä½†ç¼ºå°‘å¯¹æ¯ç»„æ•°æ®ä¸ªæ•°çš„è§„å®šï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ `fmt.Scan` æ–¹æ³•è¯»å–ï¼Œéœ€è¦ä½¿ç”¨ `bufio.Scanner` é€è¡Œè¯»å–æ•°æ®ï¼š\n\n```go æ•°åˆ—ä¹‹å’Œ\npackage main\n\nimport (\n    \"fmt\"\n    \"os\"\n    \"bufio\"\n    \"strings\"\n    \"strconv\"\n)\n\nfunc main() {\n    scanner := bufio.NewScanner(os.Stdin)\n    \n    for scanner.Scan() {\n        nums := strings.Split(scanner.Text(), \" \")\n        \n        sum := 0\n        for _, x := range nums {\n            v, _ := strconv.Atoi(x)\n            sum += v\n        }\n        fmt.Println(sum)\n    }\n}\n```\n\n## æ€»ç»“\n\nä»ä¸Šæ–‡ä»¥åŠä¾‹é¢˜ä¸­å¯ä»¥å‘ç°ï¼Œ`bufio.Scanner` çš„åº”ç”¨åœºæ™¯æ˜¯å¯ä»¥å®Œå…¨è¦†ç›– `fmt.Scan` çš„ï¼Œä½†å‰è€…ä½¿ç”¨èµ·æ¥éœ€è¦é…åˆå¾ˆå¤šå…¶ä»–çš„åº“ï¼Œæ¯”è¾ƒç¹çã€‚å› æ­¤å½“æ¯ç»„ç”¨ä¾‹çš„å˜é‡æ•°æ˜¯å¯çŸ¥çš„æƒ…å†µä¸‹ä¼˜å…ˆä½¿ç”¨ `fmt.Scan` æ–¹æ³•å³å¯ã€‚å½“ `fmt.Scan` æ–¹æ³•ä¸é€‚ç”¨æ—¶å†è€ƒè™‘ä½¿ç”¨ `bufio.Scanner`ã€‚\n\nå¦å¤–è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ`fmt.Scan` åªå¤„ç†ç©ºæ ¼åˆ†éš”çš„å˜é‡ï¼Œå› æ­¤å½“è¾“å…¥æ ¼å¼ç”±å…¶ä»–å­—ç¬¦åˆ†éš”å˜é‡æ—¶ï¼Œåˆ™è€ƒè™‘ä½¿ç”¨ `bufio.Scanner` è¯»å…¥åå†è°ƒç”¨ `strings.Split` è¿›è¡Œç›¸åº”çš„åˆ†éš”å³å¯ã€‚\n\nè¯»å– OJ å¸¸è§è¾“å…¥çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘æŸ¥é˜…ç›¸å…³æ–‡ç« åå‘ç°ä¸Šè¿°ä¸¤ç§æ–¹æ³•æœ€ç®€å•æ–¹ä¾¿ã€‚å¦‚æœæœ‰å…¶ä»–æ›´å¥½çš„æ–¹æ³•è¯·ç•™è¨€è®¨è®ºã€‚\n","tags":["Go","OJ","stdio"],"categories":["developer"]},{"title":"å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦çŸ¥é“çš„å­—ä½“çŸ¥è¯†","url":"/archives/64/","content":"\néšç€ç½‘é¡µä¸ªæ€§åŒ–è®¾è®¡å’Œå“ç‰Œç‰¹è‰²çš„éœ€è¦ï¼Œåœ¨ç½‘é¡µä¸­ä½¿ç”¨ç‰¹å®šçš„å­—ä½“å°†æˆä¸ºè¶Šæ¥è¶Šå¸¸è§çš„éœ€æ±‚ã€‚ç°ä»£å­—ä½“è®¾è®¡ç»å†äº†æ•°åå¹´çš„å‘å±•ï¼Œå·²ç»ç§¯ç´¯äº†æˆç†Ÿçš„æ ‡å‡†å’Œè§„èŒƒï¼Œä½†å¯¹äºè®¸å¤šå‰ç«¯å¼€å‘è€…æ¥è¯´å¯èƒ½å¯èƒ½è¿˜æ¯”è¾ƒé™Œç”Ÿï¼Œæœ¬æ–‡å°±å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„å­—ä½“çŸ¥è¯†åšä¸€ä¸ªæ¢³ç†å’Œä»‹ç»ã€‚\n\n<!--more-->\n\n## å­—ä½“åŸºç¡€\n\n### å­—ä½“æ ‡å‡†\n\nå­—ä½“çš„è®¾è®¡å’Œä½¿ç”¨å’Œå…¶ä»–ä»»ä½•å·¥ä¸šè®¾è®¡äº§å“ä¸€æ ·ï¼Œéœ€è¦ç»Ÿä¸€çš„æ ‡å‡†å’Œè§„èŒƒã€‚\n\næœ€åˆçš„è®¡ç®—æœºå­—ä½“æ˜¯ç‚¹é˜µå­—ä½“ï¼Œæ”¾å¤§åä¼šæœ‰æ˜æ˜¾çš„é©¬èµ›å…‹ã€‚ä¸ºäº†é«˜æ¸…æ‰“å°å’Œç¼©æ”¾çš„éœ€æ±‚ï¼ŒAdobe å…¬å¸äº 1984 å¹´å‘å¸ƒäº† [PostScript](https://www.adobe.com/cn/products/postscript.html) è¯­è¨€ï¼Œä½¿ç”¨ä¸‰æ¬¡è´å¡å°”æ›²çº¿æ¥ç»˜åˆ¶å­—ä½“ï¼Œæå¤§çš„æé«˜äº†å­—ä½“æ‰“å°å’Œå±å¹•æ˜¾ç¤ºè´¨é‡[<sup>[1]</sup>](#ref1)ã€‚å¾ˆå¿«è‹¹æœåˆæ¨å‡ºäº† [TrueType](https://developer.apple.com/fonts/TrueType-Reference-Manual/) å­—ä½“æ ‡å‡†ï¼Œé‡‡ç”¨äºŒæ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶å­—ä½“ï¼Œè¢«å¹¿æ³›åº”ç”¨äº macOS å’Œ Windows ç³»ç»Ÿä¸­[<sup>[2]</sup>](#ref2)ã€‚\n\n1996 å¹´å¾®è½¯è”åˆ Adobe åœ¨ TrueType çš„åŸºç¡€ä¸Šæ¨å‡ºäº† [OpenType](https://learn.microsoft.com/en-us/typography/opentype/) å­—ä½“æ ‡å‡†ï¼Œè¯¥æ ‡å‡†æ•´åˆäº† PostScript å­—ä½“å’Œ TrueType å­—ä½“çš„ç‰¹ç‚¹ï¼Œå¹¶æ–°å¢äº†è®¸å¤šæ–°çš„ç‰¹æ€§ã€‚OpenType é™†ç»­å¾—åˆ°è‹¹æœå’Œè°·æ­Œç­‰å…¬å¸çš„æ”¯æŒï¼Œåœ¨ä¸»æµè®¡ç®—æœºå¹³å°åº”ç”¨å¹¿æ³›ï¼Œç›®å‰å·²ç»æˆä¸ºå­—ä½“è®¾è®¡çš„ä¸»è¦å‘å±•è¶‹åŠ¿[<sup>[3]</sup>](#ref3)ã€‚\n\næ€»çš„æ¥è¯´ï¼Œå­—ä½“ï¼ˆè½®å»“å­—ä½“ [Outline fonts](https://en.wikipedia.org/wiki/Computer_font#Outline_fonts)ï¼‰æ ‡å‡†æ•´ä½“ä¸Šæœ‰ 3 ç§ï¼Œä½†å¯¹äºæ™®é€šç”¨æˆ·å’Œå¼€å‘è€…æ¥è¯´ TrueType å’Œ Opentype æ¯”è¾ƒå¸¸è§ã€‚\n\n### å­—ä½“æ–‡ä»¶\n\nå­—ä½“è®¾è®¡å®Œæˆåå°†æ‰“åŒ…æˆç‰¹å®šæ–‡ä»¶åˆ†å‘ç»™ç”¨æˆ·ï¼Œå­—ä½“æ–‡ä»¶æ ¹æ®æ ‡å‡†çš„ä¸åŒé‡‡ç”¨ä¸åŒçš„åç¼€åã€‚TrueType å­—ä½“ä»¥ `.ttf` ä½œä¸ºåç¼€åã€‚OpenType å­—ä½“æ ¹æ®ä¸åŒçš„æƒ…å†µé‡‡ç”¨ `.otf`, `.ttf`, `.otc` å’Œ `.ttc` ä¸ºåç¼€ï¼Œå…¶ä¸­ OTF ä¸€èˆ¬è¡¨ç¤ºåŸºäº PostScript æŠ€æœ¯ï¼Œå¯¹åº”åœ°ï¼ŒTTF è¡¨ç¤ºä½¿ç”¨ TrueType æŠ€æœ¯ã€‚è€Œ OTC å’Œ TTC åˆ™è¡¨ç¤ºå­—ä½“é›†åˆï¼ˆCollectionï¼‰ï¼Œå³ä¸€ä¸ªæ–‡ä»¶ä¸­åŒ…å«å¤šç§å­—ä½“ï¼ˆä¾‹å¦‚å¤šç§è¯­è¨€ï¼‰[<sup>[4]</sup>](#ref4)ã€‚è¿™ 4 ç§å­—ä½“æ–‡ä»¶åœ¨ä¸»æµæ“ä½œç³»ç»Ÿå’Œç½‘é¡µè®¾è®¡ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸“ç”¨äºç½‘é¡µçš„ç½‘é¡µå¼€æ”¾å­—ä½“ï¼ˆWeb Open Font Formatï¼‰æ ¼å¼ï¼Œå…¶è®¾è®¡æ ‡å‡†é€šå¸¸ä¸º OpenType æˆ– TureTypeï¼Œä½†åœ¨æ–‡ä»¶æ‰“åŒ…å’Œå‹ç¼©ä¸­ä¸“é—¨ä¸ºç½‘ç»œä¼ è¾“åšäº†ä¼˜åŒ–ã€‚WOFF å­—ä½“åœ¨ä¸»æµæµè§ˆå™¨ä¸­éƒ½å¾—åˆ°å¾ˆå¥½çš„æ”¯æŒï¼Œæ–‡ä»¶åç¼€åä¸º `.woff` ä»¥åŠ `.woff2`ã€‚\n\n### å­—ä½“ç±»å‹\n\nå¸¸è§çš„å­—ä½“å¯ä»¥åˆ†ä¸ºâ€œè¡¬çº¿ï¼ˆserifï¼‰â€ã€â€œæ— è¡¬çº¿ï¼ˆsans serifï¼‰â€ã€â€œç­‰å®½ï¼ˆmonospaceï¼‰â€ç­‰ç±»å‹ã€‚è¡¬çº¿æ˜¯æŒ‡åœ¨å­—ä½“ç¬”ç”»æœ«ç«¯æœ‰å°è£…é¥°ã€‚åœ¨è®ºæ–‡å†™ä½œä¸­å¸¸ç”¨çš„ Times New Roman å­—ä½“å’Œä¸­æ–‡å®‹ä½“ä¾¿æ˜¯è¡¬çº¿å­—ä½“ã€‚æ— è¡¬çº¿å­—ä½“çš„å­—ä½“çº¿æ¡åˆ™ç›¸å¯¹ç®€çº¦ï¼Œä¾‹å¦‚ Arial å’Œâ€œå¾®è½¯é›…é»‘â€ä»¥åŠâ€œè‹¹æ–¹â€ã€‚ç­‰å®½å­—ä½“åˆ™è¡¨ç¤ºæ¯ä¸ªå­—ç¬¦å æ®ç›¸ç­‰çš„å®½åº¦ï¼Œè¿™ä¸€ç‚¹è¡¬çº¿å’Œæ— è¡¬çº¿å­—ä½“æ˜¯æ— æ³•ä¿è¯çš„ï¼Œä¾‹å¦‚å°å†™å­—æ¯ `i` åœ¨éç­‰å®½å­—ä½“ä¸­å¾€å¾€å æ®è¾ƒå°çš„å­—å®½ã€‚\n\nç”±äºè¡¬çº¿å­—ä½“å…·æœ‰æ›´ä¸°å¯Œçš„ç»†èŠ‚ä¸”æ›´åŠ ç²¾è‡´ï¼Œæ‰€ä»¥å¤šç”¨äºå°åˆ·å’Œé«˜æ¸…æ˜¾ç¤ºã€‚æ— è¡¬çº¿å­—ä½“åœ¨å±å¹•æ˜¾ç¤ºä¸Šæ›´åŠ æ™®éï¼Œä¸»æµæµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿçš„é»˜è®¤å­—ä½“ä¸€èˆ¬éƒ½æ˜¯æ— è¡¬çº¿å­—ä½“ã€‚ä½†éšç€å±å¹•åˆ†è¾¨ç‡çš„æé«˜å’Œæ˜¾ç¤ºæŠ€æœ¯çš„æå‡ï¼Œåœ¨å±å¹•æ˜¾ç¤ºä¸­ä½¿ç”¨è¡¬çº¿å­—ä½“å¯ä»¥ä½¿æ–‡æœ¬é¡µé¢æ›´åŠ ç²¾è‡´å…·å¤‡è®¾è®¡æ„Ÿã€‚ä¾‹å¦‚[æˆ‘çš„ä¸»é¡µé¦–é¡µ](https://www.hozen.site)éƒ¨åˆ†å­—ä½“å°±ä½¿ç”¨äº†æ€æºå®‹ä½“ã€‚ç­‰å®½å­—ä½“ç”±äºå…·å¤‡å­—ç¬¦ç­‰å®½çš„ç‰¹ç‚¹å¾€å¾€è¢«ç”¨äºä»£ç çš„ç¼–è¾‘å’Œæ˜¾ç¤ºã€‚\n\n### å­—ä½“å®¶æ— Font Family\n\nå‰æ–‡æåˆ°çš„è¯¸å¦‚â€œTimes New Romanâ€œï¼Œâ€œå¾®è½¯é›…é»‘â€ç­‰å­—ä½“å…¶å®éƒ½æ˜¯å­—ä½“å®¶æ—çš„æ¦‚å¿µã€‚å­—ä½“å®¶æ—ä»£è¡¨äº†ç»Ÿä¸€çš„è®¾è®¡é£æ ¼ï¼Œä½†å­—ä½“å¾€å¾€éœ€è¦ä¸åŒçš„ç²—ç»†ï¼ˆå­—é‡ï¼‰å’Œæ ·å¼ï¼ˆæ–œä½“ã€å­—å®½ç­‰ï¼‰ã€‚å› æ­¤ä¸€ä¸ªå­—ä½“å®¶æ—å¯ä»¥åŒ…å«ä¸åŒçš„å­å­—ä½“æ¥å®ç°ä¸åŒçš„å­—ä½“æ ·å¼ã€‚å…·ä½“åœ°ï¼Œå­—ä½“æ ·å¼åŒ…æ‹¬å­—é‡ã€å­—å®½ã€å€¾æ–œå’Œè§†è§‰å°ºå¯¸ç­‰æ–¹é¢ï¼Œé€šè¿‡è¿™äº›æ ·å¼çš„ç»„åˆä¾¿äº§ç”Ÿä¸åŒçš„å­å­—ä½“ã€‚ä½†é™¤éç‰¹åˆ«éœ€è¦ï¼Œå¯¹äºå±å¹•æ˜¾ç¤ºæ¥è¯´å¸¸ç”¨çš„å­å­—ä½“æ ·å¼ä¸€èˆ¬åªåŒ…æ‹¬å­—é‡å’Œå€¾æ–œã€‚ä¾‹å¦‚ï¼Œè‹¹æ–¹å­—ä½“å®¶æ—å­—ä½“åŒ…æ‹¬å¸¸è§„ä½“ï¼ˆRegularï¼‰ã€æç»†ä½“ï¼ˆUltralightï¼‰ã€çº¤ç»†ä½“ï¼ˆThinï¼‰ã€ç»†ä½“ï¼ˆLightï¼‰ã€ä¸­é»‘ä½“ï¼ˆMediumï¼‰å’Œä¸­ç²—ä½“ï¼ˆSemiboldï¼‰6 ä¸ªå­å­—ä½“ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸€äº›å‘å¸ƒè¾ƒæ—©çš„å­—ä½“åªåŒ…å«ä¸€ç§æ ·å¼ï¼Œå³ä¸€ä¸ªå­—ä½“æ–‡ä»¶ã€‚\n\nå½“æˆ‘ä»¬ä½¿ç”¨æ–‡å­—å¤„ç†è½¯ä»¶æˆ–è€… CSS å±æ€§å¯¹å­—ä½“åº”ç”¨â€œåŠ ç²—â€å’Œâ€œå€¾æ–œâ€ç­‰æ ·å¼æ—¶ï¼Œç³»ç»Ÿä¼šæŸ¥æ‰¾å¯¹åº”æ ·å¼çš„å­å­—ä½“æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨åˆ™ä½¿ç”¨å¯¹åº”çš„å­å­—ä½“ï¼Œå¦åˆ™åˆ™é€šè¿‡è®¡ç®—å¯¹å­—ä½“è¿›è¡Œå¼ºåˆ¶çš„åŠ ç²—å’Œå€¾æ–œã€‚è™½ç„¶è¿™ä¸¤ç§æ–¹å¼æœ€ç»ˆéƒ½å°†å­—ä½“è¿›è¡Œäº†åŠ ç²—æˆ–å€¾æ–œï¼Œä½†æ•ˆæœæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚å­å­—ä½“ä¸åŒçš„æ ·å¼é€šè¿‡äº†ä¸¥æ ¼çš„è®¾è®¡ï¼Œä½¿å…¶å…·å¤‡ç»Ÿä¸€çš„ç¾æ„Ÿã€‚è€Œåè€…åªæ˜¯ç®€å•ç²—æš´çš„åŠ ç²—æˆ–å€¾æ–œï¼Œè§†è§‰æ•ˆæœå¾€å¾€æ¯”ä¸ä¸Šå‰è€…ã€‚ä¾‹å¦‚ï¼Œä¸‹å›¾ä¸­åˆ†åˆ«ä½¿ç”¨æ€æºå®‹ä½“çš„å¸¸è§„ä½“è¿›è¡Œè®¡ç®—åŠ ç²—ï¼ˆä¸Šï¼‰å’Œç›´æ¥ä½¿ç”¨æ€æºå®‹ä½“çš„ Bold å­—ä½“ï¼ˆä¸‹ï¼‰ï¼Œå¯ä»¥æ˜æ˜¾çœ‹å‡ºä¸Šé¢çš„æ–‡å­—åœ¨ç»†èŠ‚å’Œè§‚æ„Ÿä¸Šç›¸å»ç”šè¿œã€‚\n\n![è®¡ç®—åŠ ç²—å’Œå­å­—ä½“çš„æ•ˆæœå¯¹æ¯”](/assets/images/64-1.png)\n\n### å¯å˜å­—ä½“ï¼ˆVariable Fontï¼‰\n\nä¸€æ¬¾ä¼˜ç§€çš„å­—ä½“ä¼šæä¾›å¤šç§å­—é‡çš„å­å­—ä½“ï¼Œè¿™æ ·èƒ½ä¿è¯åœ¨ä½¿ç”¨ä¸åŒå­—é‡æ—¶èƒ½å¤Ÿä¿æŒä¼˜ç§€çš„è§‚æ„Ÿã€‚ä½†æ¯ä¸€æ¬¾å•ç‹¬çš„å­—é‡æˆ–æ ·å¼çš„å­—ä½“å¾€å¾€éœ€è¦å•ç‹¬çš„å­—ä½“æ–‡ä»¶ï¼Œè¿™å¯¼è‡´äº†å½“å­—ä½“æ ·å¼å˜å¤šæ—¶å­—ä½“æ–‡ä»¶æ•°é‡å¢åŠ ï¼Œå°¤å…¶å¯¹äºç½‘ç»œé¡µé¢æ¥è¯´ä¼šå¢åŠ è¯·æ±‚æ¬¡æ•°å’Œæµé‡è´Ÿæ‹…ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œåœ¨ OpenType è§„èŒƒçš„ä¸­ï¼ŒAdobeã€å¾®è½¯ã€è‹¹æœå’Œè°·æ­Œäº 2016 å¹´å…±åŒæ¨å‡ºäº†**å¯å˜å­—ä½“**ï¼ˆ[Variable font](https://learn.microsoft.com/en-us/typography/develop/font-variations)ï¼‰çš„æ ‡å‡†ï¼Œè¿™ä¸€æ ‡å‡†æ”¹å˜äº†å­—ä½“æ ·å¼çš„è®¾è®¡å’Œä½¿ç”¨[<sup>[5]</sup>](#ref5)ã€‚å°±å­—é‡æ¥è¯´ï¼Œä¸å†éœ€è¦å¤šä¸ªå­—é‡çš„å­—ä½“æ–‡ä»¶ï¼Œä¸€ä¸ªå­—ä½“æ–‡ä»¶å³å¯ä½¿ç”¨å¤šç§å­—é‡ã€‚å¹¶ä¸”ï¼Œå­—ä½“å­—é‡ä¸å†è¢«ç¦»æ•£çš„åˆ’åˆ†ä¸ºâ€œå¸¸è§„â€ï¼Œâ€œä¸­é»‘â€ç­‰æœ‰é™çš„ä¸ªæ•°ï¼Œè€Œæ˜¯èƒ½å¤Ÿé€šè¿‡è°ƒæ•´å­—é‡å‚æ•°è·å¾—ä»»æ„ç²—ç»†ï¼Œå®ç°å­—é‡çš„æ— çº§è°ƒèŠ‚ã€‚åƒä¸‹å›¾ä¸­ MIUI çš„åŠ¨æ€äº¤äº’æ•ˆæœåœ¨æ²¡æœ‰å¯å˜å­—ä½“æ—¶æ˜¯å¾ˆéš¾å®ç°çš„ã€‚\n\n![åŸºäºå°ç±³å…°äº­å¯å˜å­—ä½“å®ç°çš„å­—é‡æ— æåŠ¨æ€å˜åŒ–](/assets/images/64-2.gif)\n\nOpenType è¦æ±‚å¯å˜å­—ä½“æ–‡ä»¶éœ€è¦åœ¨å‘½åä½¿ç”¨ `VF`æ ‡æ³¨ï¼Œä¾‹å¦‚ `Selawik-VF.ttf`ã€‚å› æ­¤æˆ‘ä»¬ä»å­—ä½“æ–‡ä»¶åå¾€å¾€å¯ä»¥åˆ†è¾¨è¯¥å­—ä½“æ˜¯å¦æ˜¯å¯å˜å­—ä½“ã€‚\n\n## CSS å±æ€§\n\n### é»˜è®¤å­—ä½“åç§°\n\nCSS å±æ€§ `font-family` ç”¨äºæŒ‡å®šå­—ä½“ï¼Œå¹¶ä¸”è§„å®šäº† 5 ç§é»˜è®¤çš„å­—ä½“åç§°ï¼š`serif`, `sans-serif`, `monospace`, `cursive`, `fantasy`ï¼Œé™¤äº†å‰é¢æåˆ°çš„ 3 ç§å­—ä½“ï¼Œ`cursive` å’Œ `fantasy` åˆ†åˆ«è¡¨ç¤ºæ‰‹å†™å­—ä½“å’Œè£…é¥°å­—ä½“ã€‚å½“ä½¿ç”¨è¿™äº›é»˜è®¤å­—ä½“åç§°æ—¶ï¼Œå…·ä½“ä½¿ç”¨ä½•ç§å­—ä½“æ˜¯ç”±æµè§ˆå™¨å†³å®šçš„ï¼Œå¾€å¾€ä¹Ÿä¼šæ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸ç”¨æœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯äº”ç§é»˜è®¤å­—ä½“åœ¨å½“å‰æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š\n\n| `font-family` | æ˜¾ç¤ºæ•ˆæœ                                                                            |\n| ------------- | ----------------------------------------------------------------------------------- |\n| `serif`       | <span style=\"font-family: serif\">è¿™æ˜¯è¡¬çº¿å­—ä½“ This is serif font</span>             |\n| `sans-serif`  | <span style=\"font-family: sans-serif\">è¿™æ˜¯æ— è¡¬çº¿å­—ä½“ This is sans serif font</span> |\n| `monospace`   | <span style=\"font-family: monospace\">è¿™æ˜¯ç­‰å®½å­—ä½“ This is monospace font</span>     |\n| `cursive`     | <span style=\"font-family: cursive\">è¿™æ˜¯æ‰‹å†™å­—ä½“ This is cursive font</span>         |\n| `fantasy`     | <span style=\"font-family: fantasy\">è¿™æ˜¯è£…é¥°å­—ä½“ This is fantasy font</span>         |\n\nè™½ç„¶ä½¿ç”¨é»˜è®¤çš„å­—ä½“å±æ€§å¯èƒ½ä¼šé€ æˆè·¨å¹³å°å­—ä½“è¡¨ç°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†å¯¹äºå¤§å¤šæ•°åŠŸèƒ½æ€§ç½‘é¡µæ¥è¯´ä¸å¿…è¿‡åˆ†æ‹…å¿ƒï¼Œå› ä¸ºåœ¨ä¸»æµå¹³å°ä¸­å­—ä½“ç»è¿‡äº†ä¸¥æ ¼è®¾è®¡ï¼Œè§„èŒƒæ€§å’Œæ˜“ç”¨æ€§æ˜¯å®Œå…¨ç»å¾—ä½è€ƒéªŒçš„ã€‚\n\n### å­—ä½“æ ˆ\n\nä½¿ç”¨ `font-family` é™¤äº†ä¸Šè¿° 5 ç§é»˜è®¤å­—ä½“åç§°å¤–ï¼Œå¯ä»¥æŒ‡å®šå…·ä½“çš„å­—ä½“åç§°ï¼Œä¾‹å¦‚ `Times New Roman`ã€‚å½“æŒ‡å®šçš„å­—ä½“ä¸å¯ç”¨ï¼ˆç³»ç»Ÿæœªå®‰è£…è¯¥å­—ä½“æˆ–è¿œç¨‹å­—ä½“åŠ è½½å¤±è´¥ï¼‰æ—¶åˆ™ä¼šä½¿ç”¨æµè§ˆå™¨é»˜è®¤å­—ä½“ã€‚\n\nä¸ºäº†é˜²æ­¢å­—ä½“é€€åŒ–ä¸ºé»˜è®¤å­—ä½“ï¼Œå¯ä»¥ä¸º `font-family` æŒ‡å®šå¤šä¸ªå­—ä½“ï¼Œä¾‹å¦‚ `font-family: \"Times New Roman\", Times, serif`ã€‚æµè§ˆå™¨ä¼šæŒ‰ç…§å±æ€§åˆ—å‡ºçš„å…ˆåé¡ºåºæŸ¥æ‰¾å’Œä½¿ç”¨å­—ä½“ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ç”¨çš„å­—ä½“ï¼Œå½“å­—ä½“éƒ½ä¸å¯ç”¨æ—¶åˆ™ä½¿ç”¨æµè§ˆå™¨é»˜è®¤çš„å­—ä½“ã€‚\n\nåœ¨å­—ä½“æ ˆçš„æœ€åä½¿ç”¨ä¸€ä¸ªé»˜è®¤å­—ä½“åç§°æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œå› ä¸ºå³ä½¿æµè§ˆå™¨æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„å­—ä½“ä¹Ÿä¼šä½¿ç”¨ä¸€ä¸ªè¿˜ç®—åˆé€‚çš„å­—ä½“ã€‚å¦åˆ™ï¼Œå½“æ‰€æœ‰å­—ä½“éƒ½ä¸å¯ç”¨æ—¶ï¼Œä¸ºäº†å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Œç›¸åº”æ–‡å­—å°†è¢«èµ‹äºˆæµè§ˆå™¨çš„é»˜è®¤**è¡¬çº¿å­—ä½“** - é€šå¸¸æ˜¯ Time New Roman - è¿™å¯¹äº sans-serif å­—ä½“æ˜¯ä¸åˆ©çš„ï¼\n\n### ç½‘ç»œå®‰å…¨å­—ä½“\n\nå‰æ–‡æåˆ°ï¼Œåœ¨ä¸åŒçš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¸­ç½‘é¡µçš„é»˜è®¤å­—ä½“ä¼šæœ‰æ‰€ä¸åŒã€‚å½“å¯¹é¡µé¢æœ‰è·¨å¹³å°æ—¶ä¿æŒå­—ä½“ç»Ÿä¸€çš„è¦æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€œç½‘ç»œå®‰å…¨å­—ä½“â€œï¼Œå®‰å…¨å­—ä½“å³æŒ‘é€‰å‡ºåœ¨ä¸»æµå¹³å°éƒ½é»˜è®¤å®‰è£…çš„å­—ä½“ï¼Œæ¥ä¿è¯è·¨å¹³å°æ—¶å­—ä½“çš„å¯ç”¨æ€§ã€‚\n\nä»¥ä¸‹æ˜¯æ‹‰ä¸æ–‡å­—ä½“çš„ç½‘ç»œå®‰å…¨å­—ä½“ï¼š\n\n| å­—ä½“åç§°        | æ³›å‹       | æ³¨æ„                                             |\n| --------------- | ---------- | ------------------------------------------------ |\n| Arial           | sans-serif | ä½¿ç”¨ Helvetica ä½œä¸º Arial é¦–é€‰æ›¿ä»£               |\n| Georgia         | serif      |                                                  |\n| Times New Roman | serif      | ä½¿ç”¨ Times ä½œä¸º Times New Roman çš„é¦–é€‰æ›¿ä»£æ–¹æ¡ˆ   |\n| Courier New     | monospace  | ä½¿ç”¨ Courier ä½œä¸º Courier New çš„é¦–é€‰æ›¿ä»£æ–¹æ¡ˆ     |\n| Trebuchet MS    | sans-serif | åº”è¯¥å°å¿ƒä½¿ç”¨è¿™ç§å­—ä½“â€”â€”å®ƒåœ¨ç§»åŠ¨æ“ä½œç³»ç»Ÿä¸Šå¹¶ä¸å¹¿æ³› |\n| Verdana         | sans-serif |                                                  |\n\nå…¶ä¸­â€œé¦–é€‰æ›¿ä»£æ–¹æ¡ˆâ€å¾€å¾€æ˜¯å› ä¸ºåŒä¸€æ¬¾å­—ä½“çš„ä¸åŒç‰ˆæœ¬åœ¨æ–°æ—§æ“ä½œç³»ç»Ÿä¸Šå®‰è£…æƒ…å†µæˆ–åç§°ä¸ä¸€è‡´ï¼Œä½¿ç”¨å­—ä½“æ ˆåŒ…å«å„ç§å¯èƒ½çš„åç§°æ¥ä¿è¯å¯ç”¨æ€§ã€‚\n\n## CSS è‡ªå®šä¹‰å­—ä½“\n\nCSS3 å¼•å…¥ @font-face è§„åˆ™ï¼Œå¯ä»¥ä»è¿œç¨‹æœåŠ¡å™¨åŠ è½½å­—ä½“æ–‡ä»¶æˆ–ä½¿ç”¨æˆ·æœ¬å®‰è£…çš„å­—ä½“ã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—ç½‘é¡µè®¾è®¡ä¸å¿…å±€é™äºé»˜è®¤å­—ä½“æˆ–â€œç½‘ç»œå®‰å…¨å­—ä½“â€ï¼Œä½¿å¾—ç½‘é¡µè®¾è®¡æ›´å…·ä¸ªæ€§å’Œå“ç‰Œè¡¨è¾¾åŠ›ã€‚\n\nä¸€ä¸ªä½¿ç”¨ @font-face çš„åŠ è½½è¿œç¨‹å­—ä½“çš„å…¸å‹ä¾‹å­ï¼š\n\n<p class=\"codepen\" data-height=\"300\" data-default-tab=\"html,result\" data-slug-hash=\"LYJjwbG\" data-user=\"Hozen\" style=\"height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;\">\n  <span>See the Pen <a href=\"https://codepen.io/Hozen/pen/LYJjwbG\">\n  Untitled</a> by Hozen (<a href=\"https://codepen.io/Hozen\">@Hozen</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.</span>\n</p>\n<script async src=\"https://cpwebassets.codepen.io/assets/embed/ei.js\"></script>\n\n**ä½†æ˜¯ï¼Œè¯·æ³¨æ„**ï¼ä¸Šé¢ä¾‹å­ä¸­çš„æ–‡å­—å°†ä»¥â€œTimes New Romanâ€å­—ä½“å±•ç¤ºï¼Œè¿™æ˜¯å› ä¸º @font-face çš„è¿œç¨‹å­—ä½“æ–‡ä»¶åŠ è½½åŒæ ·éœ€è¦éµå¾ª**åŒæºç­–ç•¥**ï¼Œæˆ‘ä»¬åœ¨ codepen.io åŠ è½½ github.io çš„è·¨åŸŸèµ„æºå°†åŠ è½½å¤±è´¥ã€‚è¿˜è®°å¾—å‰æ–‡æåˆ°ï¼Œå½“å­—ä½“æ ˆä¸å¯ç”¨æ—¶ä¼šä½¿ç”¨æµè§ˆå™¨çš„é»˜è®¤è¡¬çº¿å­—ä½“ä½œä¸ºæé†’å—ï¼Ÿè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šä¾‹çš„æ–‡å­—æœ€ç»ˆä¼šä»¥â€œTimes New Romanâ€å­—ä½“å±•ç¤ºã€‚\n\n@font-face å¸¸ç”¨çš„å±æ€§æœ‰ï¼š\n\n* `font-family`ï¼ŒæŒ‡å®šå­—ä½“çš„åå­—ï¼Œå°†ä¼šè¢«ç”¨äº font æˆ– font-family å±æ€§\n\n* `src`ï¼Œè¿œç¨‹å­—ä½“æ–‡ä»¶ä½ç½®çš„ URL æˆ–è€…ç”¨æˆ·è®¡ç®—æœºä¸Šçš„å­—ä½“åç§°ï¼Œå¯ä»¥ä½¿ç”¨ `local` è¯­æ³•é€šè¿‡åç§°æŒ‡å®šç”¨æˆ·çš„æœ¬åœ°è®¡ç®—æœºä¸Šçš„å­—ä½“ ( i.e. `src: local('Arial');` )ã€‚å¦‚æœæ‰¾ä¸åˆ°è¯¥å­—ä½“ï¼Œå°†ä¼šå°è¯•å…¶ä»–æ¥æºï¼Œç›´åˆ°æ‰¾åˆ°å®ƒã€‚\n\n* `font-weight`ï¼Œå®šä¹‰è¯¥å­—ä½“çš„å­—é‡ï¼Œå¦‚æœæ‰€éœ€å­—ä½“ç¬¦åˆæè¿°ï¼Œåˆ™é‡‡ç”¨æœ¬ font-face æ‰€å®šä¹‰çš„å­—ä½“ã€‚\n\n* `font-style`ï¼Œå®šä¹‰è¯¥å­—ä½“çš„æ ·å¼ã€‚å¦‚æœæ‰€éœ€å­—ä½“ç¬¦åˆæè¿°ï¼Œåˆ™é‡‡ç”¨æœ¬ font-face æ‰€å®šä¹‰çš„å­—ä½“ã€‚\n\né™¤æ­¤ä¹‹å¤–è¿˜æœ‰ `font-variant`ï¼Œ`font-stretch` å’Œ `unicode-range` ç­‰å±æ€§ï¼Œå¯ä»¥å‚ç…§ [@font-face - CSSï¼šå±‚å æ ·å¼è¡¨ | MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face)ã€‚\n\n### @font-face å®šä¹‰å¤šå­—é‡å­—ä½“\n\nä¸Šæ–‡æåˆ°ï¼Œè™½ç„¶æµè§ˆå™¨å¯ä»¥å¯¹å¸¸è§„å­—ä½“è¿›è¡Œå¼ºåˆ¶åŠ ç²—ä½†è§†è§‰æ•ˆæœå¹¶ä¸ç†æƒ³ï¼Œä½†ä¸åŒçš„æ ·å¼åˆå¯¹åº”ä¸åŒçš„å­—ä½“æ–‡ä»¶ï¼Œå¦‚ä½•ä½¿ç”¨ @font-face åŠ è½½ä¸åŒæ ·å¼çš„å­å­—ä½“æ–‡ä»¶å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡å®šä¹‰ä¸åŒçš„å­—ä½“æ ·å¼æ¥åŠ è½½ä¸ç”¨çš„å­—ä½“æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š\n\n```html\n<html>\n  <head>\n    <style>\n      @font-face {\n        font-family: 'Source Han Serif';\n        src: url(/font/SourceHanSerifCN/regular.ttf);\n      }\n      @font-face {\n        font-family: 'Source Han Serif'; /* åŒä¸€ä¸ªå­—ä½“åç§° */\n        src: url(/font/SourceHanSerifCN/bold.ttf); /* ä½†ä¸åŒçš„å­—ä½“æ–‡ä»¶ */\n        font-weight: bold; /* æ ¹æ®å­—é‡åº”ç”¨ä¸åŒçš„æ–‡ä»¶ */\n      }\n\n      .regular{\n        font-family: \"Source Han Serif\";\n        font-size: 30px;\n        /* å¸¸è§„å­—ä½“ï¼Œåº”ç”¨ regular.ttf å­—ä½“æ–‡ä»¶ */\n      }\n      .bold {\n        font-family: \"Source Han Serif\";\n        font-size: 30px;\n        font-weight: bold;\n        /* åŠ ç²—å­—ä½“ï¼Œåº”ç”¨ bold.ttf å­—ä½“æ–‡ä»¶ */\n      }\n    </style>\n  </head>\n  <body>\n    <div class=\"regular\">æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»ã€‚</div>\n    <div class=\"bold\">æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»ã€‚</div>\n  </body>\n</html>\n```\n\næ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š\n<style>\n      @font-face {\n        font-family: 'Source Han Serif';\n        src: url(/font/SourceHanSerifCN/regular.ttf);\n      }\n      @font-face {\n        font-family: 'Source Han Serif';\n        src: url(/font/SourceHanSerifCN/bold.ttf); font-weight: bold;\n      }\n\n      #id64-regular{\n        font-family: \"Source Han Serif\";\n        font-size: 30px;\n        line-height: 40px;\n      }\n      #id64-bold {\n        font-family: \"Source Han Serif\";\n        font-size: 30px;\n        font-weight: bold;\n        line-height: 40px;\n      }\n</style>\n<div style=\"padding: 10px\">\n<div id=\"id64-regular\">æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»ã€‚</div>\n<div id=\"id64-bold\">æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»ã€‚</div>\n</div>\n\nç±»ä¼¼åœ°ï¼Œè¿˜å¯ä»¥ä¸ºæ–œä½“ç­‰å­—ä½“æ•ˆæœå•ç‹¬æŒ‡å®šå­—ä½“æ–‡ä»¶ã€‚\n\nå¦‚æœä½ ä½¿ç”¨çš„å­—ä½“æœ‰å¯å˜å­—ä½“ç‰ˆæœ¬ï¼Œé‚£ä¹ˆåªéœ€è¦åŠ è½½ä¸€ä¸ªå­—ä½“æ–‡ä»¶å°±å¯ä»¥æŠŠå…¨éƒ¨æ ·å¼æå®šäº†ï¼\n\n## å­—ä½“æå–å‹ç¼©\n\nå¯¹äºæ‹‰ä¸æ–‡è¯­è¨€æ¥è¯´ï¼Œä¸€ä¸ªå®Œæ•´çš„å­—ä½“æ–‡ä»¶é€šå¸¸ä¸è¿‡å‡ ç™¾ KBï¼Œå› ä¸ºåªéœ€è¦å¾ˆå°‘çš„ä¸€äº›å­—ç¬¦å°±èƒ½å®Œæ•´åœ°è¡¨è¾¾æ‰€æœ‰å•è¯å’Œå¥å­ã€‚ä½†å¯¹äºæ±‰å­—è¿™ç§è±¡å½¢æ–‡å­—æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½éœ€è¦å•ç‹¬çš„è®¾è®¡ï¼Œå› æ­¤å®Œæ•´çš„æ±‰å­—å­—ä½“åŒ…å¾€å¾€è¾¾åˆ°æ•°åå…†å¤§å°ã€‚è¿™å¯¹äºç½‘ç»œé¡µé¢åŠ è½½æ¥è¯´æ˜¯ååˆ†ä¸åˆ©çš„ã€‚\n\nå› æ­¤ï¼Œåœ¨é¡µé¢è®¾è®¡ä¸­å¦‚æ— å¿…è¦å¾€å¾€ä¸ä¼šå¯¹æ±‰å­—æ­£æ–‡å­—ä½“ä½¿ç”¨è‡ªå®šä¹‰çš„è¿œç¨‹å­—ä½“ã€‚ä½†åœ¨æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ºäº†é¡µé¢è®¾è®¡çš„ç¾è§‚å’Œå„ç§æ–‡æœ¬çš„åŒºåˆ†ï¼Œå¯èƒ½éœ€è¦å¯¹ä¸»é¡µæ ‡é¢˜æˆ–é‡è¦ä¿¡æ¯ä½¿ç”¨ç‰¹å®šè®¾è®¡çš„å­—ä½“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç‰¹æ®Šå­—ä½“çš„å­—ç¬¦æ•°å¾€å¾€å¾ˆå°‘ï¼Œå¦‚æœå› æ­¤å°±å¼•å…¥ä¸€ä¸ªæ•°åå…†çš„å­—ä½“æ–‡ä»¶æ˜¾ç„¶å¾—ä¸å¿å¤±ã€‚\n\nåº”å¯¹è¿™ç§æƒ…å†µï¼Œä½¿ç”¨åˆ‡å›¾å¯èƒ½æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ä½†åˆ‡å›¾ä¸åˆ©äº SEOï¼Œä¸”å½“å­—ä½“å†…å®¹é¢‘ç¹æ›´æ–°æ—¶éœ€è¦ä¾èµ–è®¾è®¡äººå‘˜ï¼Œååˆ†ä¸ä¾¿ã€‚æ­¤æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªåŠ¨åŒ–çš„è„šæœ¬å°†é¡µé¢ä¸­ä½¿ç”¨åˆ°ç‰¹æ®Šå­—ä½“çš„å­—ç¬¦è¿›è¡Œæå–ï¼Œç„¶åé‡æ–°å‹ç¼©æˆä¸€ä¸ªåªåŒ…å«ç‰¹å®šå­—ç¬¦çš„å­—ä½“åŒ…æ¥å–ä»£å®Œæ•´çš„å­—ä½“åŒ…ï¼Œè¿™å°†å¤§å¤§æé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\n\né¡µé¢å­—ä½“æå–å’Œå‹ç¼©å·²ç»æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“å¯ç”¨ï¼Œä¾‹å¦‚ [font-snake](https://github.com/ghost-axe/font-snake)ã€[fontmin](https://github.com/ecomfe/fontmin) å’Œ [font-spider](https://github.com/aui/font-spider) ç­‰ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸“é—¨é’ˆå¯¹å­—ä½“è®¾è®¡çš„ [opentype.js](https://github.com/opentypejs/opentype.js)ï¼Œè¯¥åº“ä¿æŒç§¯æçš„æ›´æ–°å’Œæ´»è·ƒçš„ç”¨æˆ·ç¾¤ä½“ï¼Œæˆ‘çš„ä¸»é¡µä¸»é¢˜ [hexo-theme-tranquility](https://github.com/hooozen/hexo-theme-tranquility) ä¾¿ä½¿ç”¨äº†è¯¥åº“è¿›è¡Œå­—ä½“å‹ç¼©ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œè¿™äº›åº“ç›®å‰éƒ½ä¸æ”¯æŒå¯å˜å­—ä½“çš„æå–ï¼Œæ‰€ä»¥å½“ä½ è¿›è¡Œå­—ä½“æå–æ—¶ä»ç„¶å¯èƒ½éœ€è¦åŠ è½½å¤šå­—é‡å­å­—ä½“æ–‡ä»¶ã€‚\n\n----\n*å‚è€ƒèµ„æ–™*\n\n<div id=\"ref1\"></div>\n[1]\tPostScript[EB/OL]//Wikipedia. (2023-02-06)[2023-03-08]. https://en.wikipedia.org/w/index.php?title=PostScript&oldid=1137755001.\n\n<div id=\"ref2\"></div>\n[2]\tTrueType[EB/OL]//Wikipedia. (2023-02-14)[2023-03-08]. https://en.wikipedia.org/w/index.php?title=TrueType&oldid=1139357629.\n\n<div id=\"ref3\"></div>\n[3]\tOpenType[EB/OL]//Wikipedia. (2023-02-12)[2023-03-08]. https://en.wikipedia.org/w/index.php?title=OpenType&oldid=1138857238.\n\n<div id=\"ref4\"></div>\n[4]\tPETERCON. Recommendations for OpenType Fonts (OpenType 1.9) - Typography[EB/OL]. (2021-12-09)[2023-03-08]. https://learn.microsoft.com/en-us/typography/opentype/spec/recom.\n\n<div id=\"ref5\"></div>\n[5]\tå¯å˜å­—ä½“[EB/OL]//ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦. (2021-08-19)[2023-03-08]. https://zh.wikipedia.org/w/index.php?title=%E5%8F%AF%E5%8F%98%E5%AD%97%E4%BD%93&oldid=67230919.\n\nç­‰\n\n\n","tags":["CSS","å­—ä½“","æ€§èƒ½ä¼˜åŒ–"],"categories":["developer"]},{"title":"Hexo ä¸»é¢˜ã€Œè‡´è¿œã€å‘å¸ƒ","url":"/archives/61/","content":"\næŸ¥çœ‹ <https://github.com/hooozen/hexo-theme-tranquility>\n","tags":["app"],"categories":["timeline"]},{"title":"ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬æ‰èƒ½å¤Ÿè¯´ä¸€ä¸ªé™ˆè¿°æ˜¯â€œæ˜¾ç„¶çš„â€ï¼Ÿ","url":"/archives/62/","content":"\næˆ‘ä»¬åœ¨è¯»æ•°å­¦æ•™ææˆ–è€…é¢˜ç›®è§£ææ—¶ç»å¸¸èƒ½çœ‹åˆ°â€œæ˜¾ç„¶â€ã€â€œä¸éš¾è¯â€ç­‰å­—çœ¼ï¼Œè¿™æ—¶å¾€å¾€ä»£è¡¨å…¶æ¨å¯¼è¿‡ç¨‹å¯¹äºè¯»è€…æ¥è¯´**åº”è¯¥**æ˜¯è¶³å¤Ÿç®€å•çš„ï¼Œå› æ­¤è¢«ç•¥æ‰äº†ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬è¯»åˆ°è¿™äº›å†…å®¹æˆ–è€…è‡ªå·±åšé¢˜æ—¶ï¼Œè¿™äº›ç»“è®ºçœŸçš„æ˜¯â€œæ˜¾ç„¶â€çš„å—ï¼Ÿå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™æˆ‘ä»¬æ‰èƒ½è¯´ä¸€ä¸ªå®šç†æˆ–è€…ç»“è®ºæ˜¯æ˜¾ç„¶çš„å‘¢ï¼Ÿ\n\n<!--more-->\n\næˆ‘çš„æ•°å­¦å¯è’™è€å¸ˆç»å¸¸æŒ‚åœ¨å˜´è¾¹çš„ä¸€å¥è¯å°±æ˜¯â€œæ•°å­¦æœ€æ€•æƒ³å½“ç„¶â€ï¼Œæˆ‘ç”¨äº†å¾ˆé•¿æ—¶é—´æ‰çœŸæ­£é¢†æ‚Ÿäº†è¿™å¥è¯ã€‚å¹¶ä¸”æˆ‘å‘ç°å¾ˆå¤šäººåœ¨å¯¹å¾…æ•°å­¦æ—¶å¾€å¾€æ˜¯â€œæƒ³å½“ç„¶çš„â€ï¼Œå› æ­¤æˆ‘æ€»æ˜¯é€¼é—®ä»–ä»¬â€œä¸ºä»€ä¹ˆè¿™é‡Œä½ å¯ä»¥åšè¿™æ ·çš„æ¨å¯¼ï¼Ÿâ€ï¼Œå½“å¯¹æ–¹å›ç­”â€œè¿™ä¸æ˜¯æ˜¾ç„¶çš„å—â€çš„æ—¶ï¼Œæˆ‘æ€»æ˜¯éš¾ä»¥æ‰¾åˆ°æœ‰åŠ›çš„åé©³ã€‚ç›´åˆ°æˆ‘åœ¨ä¸€æœ¬æ•°å­¦é€šè¯†ä¹¦[<sup>[1]</sup>](#ref1)ä¸­è¯»åˆ°äº†ä¸€å¥è¯ï¼Œè®©æˆ‘ç›´å‘¼é«˜æ˜ã€‚åœ¨å…¬å¸ƒè¿™å¥è¯ä¹‹å‰ï¼Œå…ˆè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\nè¯·ä½ æ€è€ƒä¸€ä¸‹ï¼Œâ€œ[è´¨æ•°](https://en.wikipedia.org/wiki/Prime_number)æœ‰æ— ç©·å¤šä¸ªâ€è¿™ä¸ªå‘½é¢˜å¯¹ä¸å¯¹ï¼Œå¦‚æœå¯¹ï¼ˆæˆ–è€…é”™ï¼‰é‚£ä¹ˆè¿™ä¸ªç»“è®ºæ˜¯ä¸æ˜¯æ˜¾ç„¶çš„ï¼Ÿæˆ‘æƒ³å¤§å¤šæ•°äººéƒ½ä¼šè®¤ä¸ºâ€œè´¨æ•°ç¡®å®æœ‰æ— ç©·å¤šä¸ªâ€ï¼Œå¹¶è§‰å¾—è¿™ä¸ªç»“è®ºæ˜¯æ˜¾ç„¶çš„ã€‚\n\né¦–å…ˆï¼Œè´¨æ•°ç¡®å®æœ‰æ— ç©·å¤šä¸ªï¼ˆè¿™ä¸€æ¬¡ä½ çš„ç›´è§‰åšå‡ºäº†æ­£ç¡®çš„é€‰æ‹©ï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªå®šç†çœŸçš„â€œæ˜¾ç„¶â€å—ï¼Ÿå¦‚æœæˆ‘ç°åœ¨è¦æ±‚ä½ è¯æ˜è¿™ä¸ªå®šç†ï¼Œä½ èƒ½å¦ç«‹åˆ»è¯æ˜å‡ºæ¥å‘¢ï¼Ÿ\n\n> å¦‚æœè„‘å­é‡Œç«‹åˆ»å°±æœ‰è¯æ˜ï¼Œé‚£ä¹ˆè¿™æ¡é™ˆè¿°æ‰æ˜¯æ˜¾ç„¶çš„[<sup>[1]</sup>](#ref1)ã€‚\n\næ­£æ˜¯è¿™å¥è¯è®©æˆ‘æ‹æ¡ˆå«ç»ã€‚å¦‚æœä½ è„‘æµ·é‡Œä¸èƒ½ç«‹åˆ»æµ®ç°è¯æ˜å®ƒçš„æ€è·¯ï¼Œé‚£ä¹ˆä½ å°±ä¸èƒ½è¯´â€œè´¨æ•°æœ‰æ— ç©·å¤šä¸ªâ€æ˜¯æ˜¾ç„¶æ­£ç¡®çš„ã€‚å®é™…ä¸Šè¿™æ¡å®šç†æ—©åœ¨ä¸¤åƒå¤šå¹´å‰å°±è¢«æ¬§å‡ é‡Œå¾—è¯æ˜äº†ï¼Œä½†æˆ‘é—®è¿‡å¤šä¸ªæœ‹å‹ï¼ˆå…¶ä¸­åŒ…æ‹¬ç¡•å£«ç”Ÿç”šè‡³åšå£«ç”Ÿï¼‰ä»–ä»¬éƒ½æ²¡èƒ½ç«‹åˆ»ç»™å‡ºè¯æ˜ï¼Œå¹¶ä¸”å¾ˆå¿«è¡¨ç¤ºäº†æ”¾å¼ƒã€‚å› æ­¤æˆ‘åº”è¯¥å¯ä»¥è¯´ï¼Œè¿™æ¡å®šç†ç¡®å®ä¸è¶³ä»¥ç§°å¾—ä¸Šâ€œæ˜¾ç„¶â€ã€‚\n\nä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¬§å‡ é‡Œå¾—æ˜¯æ€ä¹ˆè¯æ˜è¿™æ¡å®šç†çš„[<sup>[2]</sup>](#ref2)ï¼š\n\nä»»æ„åˆ—ä¸¾è‹¥å¹²æœ‰é™ä¸ªè´¨æ•°åˆ— $p_1,p_2,\\cdots,p_n$ï¼Œè®° $P = p_1p_2\\cdots p_n$ï¼Œ$q = P + 1$ã€‚åˆ™ $q$ è¦ä¹ˆæ˜¯è´¨æ•°è¦ä¹ˆä¸æ˜¯è´¨æ•°ã€‚\n\n* å¦‚æœ $q$ æ˜¯è´¨æ•°æ—¶ï¼Œæˆ‘ä»¬åˆ™åœ¨åŸè´¨æ•°åˆ—å¤–æ‰¾åˆ°äº†æ–°çš„è´¨æ•°ï¼Œå³ $q$ã€‚\n\n* å¦‚æœ $q$ ä¸æ˜¯è´¨æ•°ï¼Œåˆ™å­˜åœ¨ $q$ çš„è´¨å› å­å¯ä»¥æ•´é™¤ $q$ï¼Œä¸å¦¨è®°ä½œ $p$ã€‚è‹¥ $p$ åœ¨åŸè´¨æ•°åˆ— $p_1,p_2,\\cdots,p_n$ ä¸­ï¼Œåˆ™ $p$ ä¹Ÿå¯ä»¥æ•´é™¤ $P$ã€‚ç”±äº $P$ å’Œ $q$ éƒ½å¯ä»¥è¢« $p$ æ•´é™¤ï¼Œåˆ™åº”å¾— $P - q = 1$ ä¹Ÿå¯ä»¥è¢«è´¨æ•° $p$ æ•´é™¤ï¼Œä½†å¹¶ä¸å­˜åœ¨èƒ½å¤Ÿæ•´é™¤ $1$ çš„è´¨æ•°ï¼Œå› æ­¤ $p$ ä¸€å®šä¸åœ¨åŸè´¨æ•°åˆ—ä¸­ã€‚æ•…åœ¨åŸè´¨æ•°åˆ—å¤–åˆæ‰¾åˆ°äº†æ–°çš„è´¨æ•° $p$ã€‚\n\nç»¼ä¸Šï¼Œç»™å®šä»»æ„è´¨æ•°åˆ—ï¼Œæ€»å¯ä»¥æ‰¾åˆ°é¢å¤–çš„æ–°çš„è´¨æ•°ï¼Œæ•…è´¨æ•°æœ‰æ— ç©·å¤šä¸ªå¾—è¯ã€‚\n\nçœ‹å®Œæ¬§å‡ é‡Œå¾—çš„è¯æ˜ï¼Œæˆ‘åªæœ‰ä¸€ä¸ªæ„Ÿè§‰ï¼Œé‚£å°±æ˜¯â€œå¤©æ‰å°±æ˜¯å¤©æ‰â€ã€‚åˆ«è¯´â€œç«‹åˆ»å°±æœ‰è¯æ˜â€ï¼Œç»™æˆ‘ä¸‰å¹´æˆ‘éƒ½ä¸ä¸€å®šè¯å¾—å‡ºæ¥ã€‚å› æ­¤ï¼Œæˆ‘æ–­ä¸æ•¢è¨€è¿™ä¸ªå®šç†æ˜¯â€œæ˜¾ç„¶çš„â€ã€‚ä½†è‡³å°‘è¿™ä¸ªè¯æ˜åªéœ€è¦ä¸­å°å­¦æ•°å­¦çŸ¥è¯†å¹¶ç”¨çŸ­çŸ­å‡ å¥è¯å°±è¯´æ˜äº†ï¼Œè€Œåœ¨æˆ‘è¯»åˆ°é‚£å¥è¯çš„åé¢ï¼Œä½œè€…ç»™å‡ºçš„æ˜¯å¦å¤–ä¸‰ä¸ªçœ‹ä¼¼ååˆ†æ˜¾ç„¶å®åˆ™æ›´åŠ å¤æ‚çš„å®šç†ï¼Œè¶³ä»¥è®©æˆ‘æ„Ÿå—åˆ°è¿™å¥è¯çš„åˆ†é‡å’Œç²¾å¦™ã€‚\n\nè™½ç„¶ä»¥ä¸Šçš„ä¾‹å­æˆ‘ä»¬çš„ç›´è§‰åšå‡ºäº†æ­£ç¡®çš„é€‰æ‹©ï¼Œè‹¥æ€»æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ æˆ–è€ƒè¯•æ—¶å€’ä¹Ÿä¸å¿…â€œé”±é“¢å¿…è¾ƒâ€ã€‚ä½†å®é™…ä¸Šæ•°å­¦å¾ˆå¤šæ—¶å€™æ˜¯â€œåç›´è§‰â€çš„ï¼Œå½“æˆ‘ä»¬æˆ–è€…ä»–äººè„‘æµ·ä¸­æƒ³å½“ç„¶çš„â€œæ˜¾ç„¶æ€ªâ€å‡ºç°æ—¶ï¼Œè¯·åŠ¡å¿…è¿½é—®ä¸€ä¸‹â€œæˆ‘ï¼ˆä½ ï¼‰èƒ½ç«‹åˆ»è¯æ˜å®ƒå—ï¼Ÿâ€\n\n![æ¬§å‡ é‡Œå¾—](/assets/images/62-1.jpg)\n\n## å‚è€ƒèµ„æ–™\n\n<div id=\"ref1\"></div>\n[1] è’‚è«è¥¿â€¢é«˜å°”æ–¯. ç‰›æ´¥é€šè¯†è¯»æœ¬ï¼šæ•°å­¦ [Mathematics: A Very Short Introduction][M]. åˆ˜ç†™, è¯‘. è¯‘æ—å‡ºç‰ˆç¤¾, 2014[2022-12-21].\n\n<div id=\"ref2\"></div>\n[2] Euclidâ€™s theorem [EB/OL]//Wikipedia. [2022-12-19](2022-12-21). <https://en.wikipedia.org/w/index.php?title=Euclid%27s_theorem&oldid=1128360450>.\n","tags":["æ¬§å‡ é‡Œå¾—","è´¨æ•°","æ•°å­¦æ€ç»´"],"categories":["science"]},{"title":"å¤šå°‘å†¬å¤©","url":"/archives/57/","content":"\nå†¬å¤©ä¸€ä¸‹å­å°±æ¥äº†ã€‚ä¸€åœºé›¨ï¼Œä¸€å¤œé£ï¼Œå¿½ç„¶è½æ»¡è¡—å··çš„æ ‘å¶ã€‚\n<!--more-->\n\næˆ‘æ›¾è¯»è¿‡ä¸€ä¸ªå±±è„šä¸‹çš„å°å­¦ã€‚è¯´æ˜¯å±±è„šä¸‹ï¼Œå…¶å®æ ¡å›­å·²ç»å®Œå…¨å»ºåœ¨äº†å±±å¡ä¸Šï¼Œå­¦æ ¡å››å‘¨éƒ½æ˜¯è’é‡ï¼Œå‡ºäº†æ ¡é—¨ä¾¿æ˜¯ä¸€æ¡è¿‘ç™¾ç±³çš„é™¡å¡ã€‚ä»å¡ä¸‹è¿œè¿œåœ°çœ‹æ ¡å›­ï¼Œç«Ÿæœ‰äº›åº„ä¸¥å·å³¨ï¼Œå½“æ ¡å›­é‡Œç©ºæ— ä¸€äººæ—¶ï¼Œæ›´ä½¿äººä¸æ•¢é«˜å£°è¯­ã€‚æˆ‘åœ¨è¿™æ‰€å­¦æ ¡è¯»äº†ä¸¤å¹´ä¹¦ã€‚\n\nå†¬å¤©æ¥çš„æ—¶å€™ï¼Œå­¦æ ¡åå±±ä¸€ç¯‡è’èŠœï¼Œæ»¡ç›®çš„åœŸé»„è‰²ï¼Œå’Œå­¦æ ¡æ“åœºä¸€ä¸ªé¢œè‰²ã€‚æ°”æ¸©ä¼šåœ¨æŸå¤©çªç„¶é™ä½ï¼Œè¿™å¤©è€å¸ˆä»¬è´­å…¥ç…¤ç‚­ï¼Œç„¶åæ‰“å¼€æœ€è§’è½æ•™å®¤çš„é—¨ï¼ŒæŠŠç…¤ç‚­å­˜è¿›å»ï¼ŒæŠŠç¢³ç‚‰å’ŒçƒŸç­’å–å‡ºæ¥ã€‚æ¯ä¸ªç­çº§å„è‡ªé¢†ä¸€å¥—ï¼Œå®‰ç½®åœ¨è®²å°æ—å–æš–ã€‚è€å¸ˆæŒ‡å®šä¸€åç¦»å®¶è¿‘çš„â€œç‚‰é•¿â€ï¼Œè¿™ååŒå­¦æ¯å¤©å°±ä¼šå¸¦ç€è´£ä»»æ—©æ—©åœ°èµ¶åˆ°æ•™å®¤ï¼Œç”¨ä»è‡ªå·±å®¶å¸¦æ¥çš„æ£’ç“¤å­å¼•ç€ç‚‰å­ï¼Œå¹¶æ‹¥æœ‰æºå¸¦ç«æŸ´æˆ–ç«æœºçš„ç‰¹æƒã€‚ç­‰åˆ°æ™¨è¯»åŒå­¦ä»¬é™†é™†ç»­ç»­èµ¶åˆ°æ—¶ï¼Œæ•™å®¤é‡Œå·²ååˆ†æ¸©æš–äº†ã€‚ç‚‰å­ä¸Šé¢ä»€ä¹ˆä¹Ÿä¸ç…®ï¼Œç”¨ä¸€å±‚é’¢åœˆåŠ ä¸€å±‚é’¢ç›–ç›–ç€ã€‚ä¸€æŠŠç«é’©å’Œä¸€æŠŠç«é“²ï¼Œéœ€è¦åŠ ç…¤æ—¶ï¼Œé’©å¼€ç‚‰ç›–ï¼Œé“²ä¸€é“²ç…¤è¿›å»ã€‚ç‚‰å­é‡Œç…¤ç‚­é»˜é»˜åœ°ç‡ƒçƒ§ç€ï¼Œç‚‰å­å¤–è€å¸ˆä¸ç´§ä¸æ…¢åœ°ç»™æˆ‘ä»¬è®²è¯¾ã€‚â€œç«è¦ç©ºå¿ƒï¼Œäººè¦å®å¿ƒâ€ã€‚ç…¤ç‚­å¿«çƒ§å®Œæ—¶ï¼Œâ€œç‚‰é•¿â€å°±ä¼šæ‹¿ç€åƒåœ¾æ–—å»ä»“åº“é¢†ç…¤ï¼Œæœ‰æ—¶ç¡®å®ç´§æ€¥ä¾¿åˆè·å¾—åœ¨è¯¾å ‚ä¸Šå‡ºå…¥æ•™å®¤çš„ç‰¹æƒã€‚åˆ°æ”¾å­¦çš„æ—¶å€™ï¼Œç­‰å€¼æ—¥çš„åŒå­¦æ‰“æ‰«å®Œå«ç”Ÿï¼ŒæŠŠç‚‰ç®…ä¸€æŠ½ï¼Œæ²¡çƒ§å®Œçš„ç…¤ç‚­æ•£è½åˆ°ç‚‰ç°é‡Œï¼Œä¾¿é”é—¨ç¦»å»ã€‚è´Ÿè´£çœ‹ç®¡ç‚‰å­çš„æ˜¯æˆ‘ä»¬ç­é•¿ï¼Œæ˜¯æˆ‘çš„å¥½æœ‹å‹ï¼Œè€å¸ˆåŒå­¦éƒ½å–œæ¬¢ä»–ã€‚\n\næœ‰å¤©æ™šä¸Šä¸‹äº†ä¸€åœºå¤§é›ªï¼Œç¬¬äºŒå¤©æ—©ä¸Šè¿œè¿œè¿‘è¿‘çš„è€å¸ˆä»¬èµ¶äº†æ³¥æ³çš„é›ªè·¯é™†ç»­æŠµè¾¾å­¦æ ¡æ—¶ï¼Œå­¦ç”Ÿä»¬å·²ç»æ—©æ—©æ‰“äº†å‡ è½®é›ªä»—äº†ã€‚å½“æˆ‘èµ¶åˆ°æ•™å®¤æ—¶ï¼Œå‡ ä¸ªå¥½æœ‹å‹ç¥é‡‡å¥•å¥•ï¼Œå‘Šè¯‰æˆ‘ä»–ä»¬å¼„ç‚¸äº†ä¸€ä¸ªç‚‰ç›–ã€‚æˆ‘çœ‹ç€è£‚æˆä¸¤åŠçš„ç”Ÿé“ç‚‰ç›–ç¢ç‰‡ï¼Œå¾ˆæƒŠè®¶ã€‚ä»–ä»¬è¯´åº”è¯¥æ˜¯æ‰“é›ªä»—ä¸å°å¿ƒæ‰”ä¸Šé¢çš„é›ªçƒå¯¼è‡´çš„ã€‚æˆ‘å¾ˆå¥½å¥‡ï¼Œç­é•¿å»ä»“åº“é¢†æ¥äº†ä¸€ä¸ªæ–°çš„ç‚‰ç›–ï¼Œè¿™æ¬¡çš„ç‚‰ç›–çœ‹èµ·æ¥å¾ˆåšå®ã€‚ç­‰ç‚‰ç›–çƒ§çƒ­åï¼Œæˆ‘ä»¬æäº†ä¸€ä¸ªé›ªå—æ”¾åœ¨ç‚‰ç›–ä¸Šï¼Œä¼—ç›®ç½ç½ä¸‹ï¼Œéšç€é›ªå—æ»‹æ»‹çš„æ»‘åŠ¨ï¼Œç‚‰ç›–çªç„¶ç °çš„ä¸€å£°è£‚æˆäº†ä¸¤åŠã€‚æˆ‘ä»¬éƒ½æ»¡æ„çš„ç¬‘äº†ï¼Œç„¶åè¶ç€è€å¸ˆè¿˜æ²¡æ¥æ•™å®¤ï¼ŒæŠŠç‚‰ç›–ç¢ç‰‡æ‰”è¿›äº†æ•™å­¦æ¥¼åé¢çš„åƒåœ¾å †ï¼Œæ¢äº†ä¸ªåŒå­¦ç«Ÿç„¶åˆé¡ºåˆ©åœ°é¢†å›æ¥ä¸€ä¸ªæ–°çš„ç‚‰ç›–ã€‚\n\næ¯ä¸ªå­¦æœŸå¼€å­¦ï¼Œè€å¸ˆä»¬ä»é•‡ä¸Šé‡‡è´­ç‰©å“ï¼Œä¸ºæ¯ä¸ªæ•™å®¤é…å¤‡å«ç”Ÿç”¨å…·ï¼Œå‡ æŠŠå°æ‰«å¸šï¼Œå‡ ä¸ªåƒåœ¾æ–—ã€‚åˆ†é…äº†å®¤å¤–å«ç”ŸåŒºçš„ç­çº§ï¼Œè¿˜ä¼šé…å¤‡ä¸¤æŠŠå¤§ç¬¤å¸šã€‚å°æ‰«å¸šç”¨ä¸äº†å‡ ä¸ªæ˜ŸæœŸå°±å®Œå…¨ç£¨æŸå¾—ä¸èƒ½ç”¨äº†ï¼Œæ‰€ä»¥å€¼æ—¥ç”Ÿè¦è®°å¾—å€¼æ—¥çš„é‚£å¤©æŠŠå®¶çš„æ‰«å¸šå¸¦æ¥ï¼Œæ”¾å­¦æ—¶å†å¸¦èµ°ï¼Œä¹Ÿä¸ä¼šè€½è¯¯å®¶é‡Œç”¨ã€‚æˆ‘ä»¬ç­æœ‰ä¸€ä¸ªåŒå­¦ï¼Œä»–å¸¦çš„æ‰«å¸šå¾ˆç‰¹åˆ«ï¼Œä¸åŒäºæˆ‘ä»¬å¹³æ—¶ç”¨çš„é«˜ç²±æ‰çš„æ‰«å¸šï¼Œä»–çš„æ‰«å¸šæ˜¯èŠ’è‰æ‰çš„ã€‚æŸ”è½¯ç»†è…»ï¼Œæ‰“æ‰«æ—¶èƒ½æŠŠåƒåœ¾ç°å°˜æ‰“æ‰«çš„éå¸¸å¹²å‡€ã€‚ä»–å’Œæˆ‘ä»¬ç­æœ€æ¼‚äº®çš„å¥³ç”Ÿä¸€ä¸ªå«ç”Ÿå°ç»„ï¼Œæ”¾å­¦åä¸€èµ·ç©¿æ¢­åœ¨ä¸€æ’æ’è¯¾æ¡Œé—´æ‰“æ‰«æ•™å®¤ã€‚ä»–æ—¶å¸¸å¿˜è®°å€¼æ—¥åæŠŠæ‰«å¸šå¸¦å›å®¶ï¼Œå¤§æ¦‚æ˜¯ä»–çš„å¦ˆå¦ˆç‰¹æ„ä¸ºä»–ä¸Šå­¦å‡†å¤‡çš„æ‰«å¸šå§ï¼Œæ‰€ä»¥å¹¶ä¸ç€æ€¥ã€‚é‚£ä¸ªå¥³ç”Ÿä¾¿è¯¾é—´å¶å°”å€Ÿç”¨ä»–çš„æ‰«å¸šæ‰“æ‰«è‡ªå·±çš„åº§ä½ï¼Œä¹Ÿé¡ºä¾¿å¸®ä»–æ‰“æ‰«ã€‚æˆ‘çš„ä¸€ä¸ªå¥½æœ‹å‹ç»ˆäºçœ‹ä¸ä¸‹å»äº†ï¼Œä»–å’Œæˆ‘ä»¬å‡ ä¸ªè¯´ï¼Œâ€œæ”¾å‡çš„æ—¶å€™æˆ‘å¾—æä»–â€ã€‚ä»–è¯´æœä¹Ÿå–œæ¬¢é‚£ä½å¥³åŒå­¦çš„ç­é•¿ä¸€èµ·ï¼Œå¹¶è®©æˆ‘ä¹Ÿå‚ä¸ï¼Œé‚£ä¸ªåŒå­¦å¹³æ—¶ç¡®å®ä¼šå¯¹æˆ‘å‡ºè¨€ä¸é€Šï¼Œæˆ‘æ²¡æœ‰ç†ç”±æ‹’ç»ã€‚\n\nâ€‹æ”¾å‡é‚£å¤©ä¸­åˆï¼Œä»–ä»¬å‡ ä¸ªç‰¹æ„ç­‰åˆ°å¾ˆæ™šã€‚ç­‰äººéƒ½èµ°åï¼Œå«æ¥æˆ‘å»äº†æ•™å®¤ï¼Œæ‰“å¼€ç‚‰ç›–ï¼ŒæŠŠé‚£ä¸ªåŒå­¦çš„æ‰«å¸šæ‰”è¿›äº†ç‚‰å­ã€‚ç¡®å®æ˜¯ä¸€æŠŠå¥½æ‰«å¸šï¼Œæ‰”è¿›ç‚‰å­é‡Œç«ä¸€ä¸‹å­å°±é¡ºç€æ‰«å¸šç€èµ·æ¥ï¼Œç«åŠ¿å¾ˆæ—ºï¼Œç«è‹—éƒ½å¿«çªœåˆ°æˆ¿é¡¶äº†ã€‚çœ‹ç€ç‚‰ç«çƒ§æ–­æ†æ‰çš„ç»³å­ï¼Œç´§å®ç»†å¯†çš„æ‰«å¸šä¸€ä¸‹å­æ•£å¼€ï¼Œç«è‹—æ…¢æ…¢æŠŠå®ƒä»¬åå™¬ï¼Œæˆ‘è§‰å¾—æœ‰äº›å¯æƒœã€‚ä¸‹åˆæ”¾å­¦åï¼Œæˆ‘è·Ÿç€ä»–ä»¬ä¸€èµ·å‡ºäº†æ ¡é—¨ï¼Œæˆ‘çš„æœ‹å‹å«æ¥äº†é«˜å¹´çº§çš„åŒå­¦ï¼Œåœ¨ä¸‹å¡çš„æ‹å¼¯å¤„å›´ä½äº†ä»–ï¼Œé‚£ä½åŒå­¦å¹³æ—¶çš„ç¥æ°”å®Œå…¨ä¸è§äº†ï¼Œåœ¨æˆ‘çš„æœ‹å‹ä»¬çš„æ’•æ‰¯å’Œè¸¢è¸¹ä¸­å·¦å³æ‘‡æ™ƒä¹Ÿä¸è¿˜æ‰‹ã€‚æˆ‘åœ¨æ—è¾¹çœ‹ç€ï¼Œç«Ÿç„¶è§‰å¾—ä»–æœ‰ç‚¹å¯æ€œã€‚æˆ‘çš„é‚£ä¸ªæœ‹å‹å¯¹æˆ‘è¯´â€œè¸¹ä»–ä¸€è„šã€‚â€â€œåˆ«å®³æ€•ï¼Œä»–ä¸æ•¢è¿˜æ‰‹ã€‚â€æˆ‘æ²¡æœ‰åŠ¨ä¹Ÿæ²¡æœ‰è¯´è¯ï¼Œæˆ‘çªç„¶å¿˜è®°æˆ‘ä¸ºä»€ä¹ˆè®¨åŒè¿™ä¸ªåŒå­¦äº†ã€‚åæ¥ä»–ä»¬å„è‡ªå›å®¶äº†ï¼Œå¤©å¾ˆå¿«é»‘äº†ï¼Œæˆ‘ä¹Ÿå›å®¶äº†ã€‚\n\nåæ¥ä¸Šäº†å››å¹´çº§ï¼Œæˆ‘ä»¬å‡ ä¸ªè¿˜æ˜¯å¥½æœ‹å‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸å–œæ¬¢é‚£ä¸ªåŒå­¦ã€‚å†åæ¥æˆ‘è½¬å­¦äº†ï¼Œè®¸å¤šäº‹æˆ‘å·²ç»è®°ä¸æ¸…æ¥šã€‚å¤šå°‘å†¬å¤©è¿‡å»ï¼Œæˆ‘å†ä¹Ÿæ²¡å›åˆ°è¿‡é‚£æ‰€å±±è„šä¸‹çš„å­¦æ ¡ã€‚\n\n![57-1](/assets/images/57-1.jpg)\n","tags":["æ•£æ–‡"],"categories":["life"]},{"title":"Wallpaper Enginner åˆ›æ„å·¥åŠæ›´æ–°","url":"/archives/60/","content":"\n## [release v2.0.2](https://github.com/hooozen/WE-theme-Timer/releases)\n\næœ‰äº†â€œæ˜¼å¤œæ¨¡å¼â€å°±å¯ä»¥åœ¨ç™½å¤©å’Œæ™šä¸Šä½¿ç”¨ä¸¤å¥—ä¸åŒäº®åº¦æˆ–é£æ ¼çš„å£çº¸äº†ï¼\n\n- å‹¾é€‰ã€æ˜¼å¤œæ¨¡å¼ã€‘åè‡ªå®šä¹‰æ˜äº®å’Œæ·±è‰²ä¸¤å¥—èƒŒæ™¯å›¾ç‰‡\n- æ ¹æ®æ‰€åœ¨åœ°å’Œä¸ªäººä¹ æƒ¯è®¾ç½®â€œæ—¥å‡ºæ—¶é—´â€å’Œâ€œæ—¥è½æ—¶é—´â€\n- è®¾ç½®â€œæ˜äº®ä¸»é¢˜ç›®å½•â€å’Œâ€œæ·±è‰²ä¸»é¢˜ç›®å½•â€ï¼Œå£çº¸å°±ä¼šæ ¹æ®æ—¶é—´åº”ç”¨ä¸åŒçš„ç›®å½•\n\n<https://steamcommunity.com/sharedfiles/filedetails/?id=2222111958>\n\ngithub: <https://github.com/hooozen/WE-theme-Timer>\n","tags":["app"],"categories":["timeline"]},{"title":"JSæ¢å¹½â€”â€”ç§»ä½è¿ç®—ç¬¦ <<ï¼Œ>> å’Œ >>> ","url":"/archives/56/","content":"\nç§»ä½è¿ç®—ç¬¦åœ¨æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸­æœ‰ç€é‡è¦çš„ä½œç”¨ï¼Œå¾ˆå¤šæ—¶å€™å¯ä»¥å¤§å¤§æé«˜ç®—æ³•æ€§èƒ½ï¼Œç®€åŒ–é—®é¢˜æ±‚è§£ã€‚åŒæ—¶ä¹Ÿæ˜¯é«˜çº§è¯­è¨€è¿æ¥è®¡ç®—æœºæœºå™¨ç çš„å·¥å…·ã€‚æœ¬æ–‡ä»‹ç»äº† JavaScript ä¸­ç§»ä½è¿ç®—ç¬¦ <<ï¼Œ>> å’Œ >>> çš„è§„èŒƒå’Œè¡¨ç°ã€‚\n\n<!--more-->\n\n## å‰è¨€\n\nå¯èƒ½å¾ˆå¤šå‰ç«¯å¼€å‘è€…å¯¹ä½è¿ç®—å¹¶ä¸æ„Ÿå†’ï¼Œè§‰å¾—è¿‡äºæ¥è¿‘äº Cã€C++ ç­‰è¯­è¨€çš„é£æ ¼ä»¥è‡³äºä¸ JavaScript ç®€å•æ˜“ç”¨çš„é£æ ¼æ‰€ä¸ç¬¦ã€‚äº‹å®ç¡®å®å¦‚æ­¤ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä½è¿ç®—éƒ½å¯ä»¥ç”¨æ™®é€šçš„æ•°å€¼æ“ä½œç¬¦æ›¿ä»£å®ç°ï¼Œå¹¶ä¸”å‰ç«¯å¼€å‘è€…å¯¹äºæ¥è¿‘äºåº•å±‚çš„æ€§èƒ½ä¼˜åŒ–å¹¶ä¸æ•æ„Ÿã€‚è¯¸å¤šæœ‰å…³ä½è¿ç®—çš„ä¼˜åŒ–ç®—æ³•åˆè¿‡äºæ™¦æ¶©[<sup>1</sup>](#ref1)ï¼Œæ·±å…¥äº†è§£åˆä¸å…è¿‡äºæ¶ˆè€—ç²¾åŠ›ã€‚ä½†æœ‰æ—¶ç¨èŠ±è´¹ä¸€ç‚¹æ—¶é—´äº†è§£ä¸€äº›å¸¸ç”¨çš„ä½æ“ä½œæŠ€å·§ï¼Œèƒ½å¤Ÿæå‡ç¼–ç çš„æ•ˆç‡å’Œæ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨ JavaScript ä¸­æ±‚ä¸¤æ•°ä¸­é—´çš„æ•´æ•°ï¼Œå³å¯ä½¿ç”¨ç§»ä½æ“ä½œç®€åŒ–ä»£ç ï¼š\n\n```javascript\nlet a = 0, b = 11, mid\n\nmid = Math.floor((a + b) / 2)  // ä½¿ç”¨å››åˆ™è¿ç®—å¹¶è°ƒç”¨å‡½æ•°\nmid = (a + b) >> 1  // æ±‚å’Œåç›´æ¥å‘å³ç§»ä½\n```\n\næ—¢ç„¶è¦ç”¨ï¼Œé‚£ä¹ˆå°±è¦å¯¹å…¶è§„èŒƒå’Œè¡¨ç°æœ‰ä¸€ä¸ªå‡†ç¡®çš„äº†è§£ï¼Œä½¿ç”¨æ—¶é‡åˆ°æ„å¤–çš„è¡¨ç°ä¹Ÿå¯å¿«é€Ÿå®šä½é—®é¢˜ã€‚\n\n## å¼•ä¾‹\n\nç…§ä¾‹ï¼Œåœ¨é˜…è¯»æœ¬æ–‡å‰è¯·æ€è€ƒä¸‹é¢çš„ä»£ç ï¼Œè€ƒè™‘å®ƒä»¬çš„é¢„æœŸå¤„ç†ç»“æœæ˜¯ä»€ä¹ˆã€‚å¦‚æœä½ èƒ½å®Œå…¨é¢„æ–™å’Œç†è§£è¿™ç§è¡¨ç°ï¼Œé‚£ä¹ˆæ— éœ€æ‹¨å†—é˜…è¯»æœ¬æ–‡äº†ã€‚å¦‚æœä¸€äº›è¡¨ç°ä½¿ä½ ç–‘æƒ‘ï¼Œä¹Ÿè®¸èƒ½ä»æœ¬æ–‡å¾—åˆ°ç­”æ¡ˆã€‚\n\n```javaScript\n/*-- part 1 --*/\n1 << 31 === 2 << 30 // true\n1 << 32 === 2 << 31 // false\n\n1 << 30 === Math.pow(2, 30)  // true\n1 << 31 === Math.pow(2, 31)  // false\n\n2 << 29 === Math.pow(2, 30)  // true\n2 << 30 === Math.pow(2, 31)  // false\n\n\n/*-- part 2 --*/\n1 >> 31 === 0 // true\n1 >> 32 === 1 // true\n1 >> 33 === 0 // true\n2 >> 31 === 0 // true\n2 >> 32 === 2 // true\n\n/*-- part 4 --*/\n-1 >> 1 === -1 // true\n-1 >> 2 === -1 // true\n-1 >> 32 === -1 // true\n\n-2 >> 1 === -1 // true\n-2 >> 31 === -1 // true\n-2 >> 32 === -2 // true\n-2 >> 33 === -1 // true\n\n/*-- part 5 --*/\n\n-1 >>> 1 === 2147483647 // true\n\n```\n\n## JS çš„ç§»ä½è¿ç®—ç¬¦\n\nå…¶å®å¼•ä¾‹ä¸­çš„è¡¨ç°å‡å¯ç”¨ä»¥ä¸‹å‡ ä¸ªè§„åˆ™æ¥è§£é‡Šï¼š\n\n1. ä½è¿ç®—ç¬¦å°†è¢«æ“ä½œæ•°è§†ä½œç”± 0 å’Œ 1 æ„æˆ 32 ä½çš„äºŒè¿›åˆ¶æ•°ä¸²[<sup>2</sup>](#ref2)\n2. æŒ‰ç…§ç¬¬ä¸€æ¡è§„åˆ™è½¬æ¢æ•°å­—æ—¶ä½¿ç”¨ 32 ä½äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤º\n3. ç§»ä½æ“ä½œçš„ç§»åŠ¨ä½æ•°ä¸ºå³æ“ä½œæ•°å¯¹ 32 å–æ¨¡åçš„å€¼ï¼Œä¾‹å¦‚ `a << 33 === a << 1`ï¼Œ`a << -31 === a << 1`\n\næ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼Œå†ç»“åˆ `<<` `>>` å’Œ `>>>` 3 ç§è¿ç®—ç¬¦çš„å…·ä½“è§„åˆ™[<sup>2</sup>](#ref2)ï¼š\n\n* `<<` å·¦ç§»ä½è¿ç®—ç¬¦ï¼Œå°†å·¦æ“ä½œæ•°çš„ 32 ä½è¡¥ç æ¯ä¸ªæ•°ä½çš„æ•°éƒ½å‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå·¦æº¢å‡ºçš„æ•°å­—èˆå¼ƒï¼Œå³ä¾§è¡¥ `0`\n* `>>` æœ‰ç¬¦å·å³ç§»ä½è¿ç®—ç¬¦ï¼Œå°†å·¦æ“ä½œæ•°çš„ 32 ä½è¡¥ç æ¯ä¸ªæ•°ä½çš„æ•°éƒ½å‘å³ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå³æº¢å‡ºçš„æ•°å­—èˆå¼ƒï¼Œå·¦ä¾§æ ¹æ®åŸæ“ä½œæ•°çš„æœ€é«˜ä½è¡¥ `0` æˆ– `1`\n* `>>>` æ— ç¬¦å·å³ç§»ä½è¿ç®—ç¬¦ï¼Œå°†å·¦æ“ä½œæ•°çš„ 32 ä½è¡¥ç æ¯ä¸ªæ•°ä½çš„æ•°éƒ½å‘å³ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå³æº¢å‡ºçš„æ•°å­—èˆå¼ƒï¼Œå·¦ä¾§è¡¥ `0`\n\næœ‰äº†ä»¥ä¸Šè§„åˆ™ï¼ŒJavaScript çš„ç§»ä½æ“ä½œç¬¦çš„è¿ç®—ç»“æœå°±éƒ½èƒ½æ­£ç¡®åˆ¤æ–­äº†ã€‚è‡³æ­¤æ–‡ç« çš„æ ¸å¿ƒå†…ä¾¿å·²ç»ç»“æŸï¼Œå¦‚æœä½ å·²ç»ç†Ÿæ‚‰å…¶å®ƒè¯­è¨€çš„ç§»ä½è¿ç®—ï¼Œé‚£ä¹ˆåªéœ€è¦å‚è€ƒä»¥ä¸Šè§„åˆ™å³å¯ã€‚ä¸‹é¢ç»“åˆå…·ä½“ä¾‹å­è¿›è¡Œè§£é‡Šã€‚\n\n### è®¡ç®—æœºçš„è¡¥ç \n\nåœ¨å¼€å§‹ä»‹ç»å…·ä½“çš„è¿ç®—ç¬¦å‰ï¼Œå…ˆç®€å•å›é¡¾ä¸‹è®¡ç®—æœºçš„è¡¥ç ã€‚è®¡ç®—æœºçš„è¡¥ç æ˜¯ä¸ºäº†ç®€åŒ–æ•´æ•°é—´çš„å‡æ³•è¿ç®—è€Œè®¾è®¡çš„ä¸€ç§éå¸¸å·§å¦™åœ°ç¼–ç æ–¹å¼ï¼Œè¿™é‡Œåªç®€å•çš„ä»‹ç»è¡¥ç çš„ç¼–ç è§„åˆ™ï¼Œä»¥å¤‡åç”¨ã€‚\n\nå¯¹äº 32 ä½æ•´æ•°æ¥è¯´ï¼Œæ­£æ•°çš„è¡¥ç ä¸åŸç ä¸€è‡´ï¼Œç”±äºæœ€é«˜ä½ä¸ºç¬¦å·ä½å›ºå®šä¸º `0` è¡¨ç¤ºæ­£æ•°ï¼Œæ•… 32 ä¸ªæ•°ä½æ‰€èƒ½è¡¨ç¤ºçš„æ­£æ•´æ•°èŒƒå›´ä¸º $[1, 2^{31} - 1]$ã€‚æ•°å­— `0` çš„è¡¥ç åˆ™è¡¨ç¤ºä¸º 32 ä¸ª `0`ã€‚å¯¹äºè´Ÿæ•°æ¥è¯´ï¼Œé¦–å…ˆæœ€é«˜ä½å›ºå®šä¸º `1` è¡¨ç¤ºè´Ÿæ•°ï¼Œå‰©ä½™æ•°ä½åˆ™åœ¨å…¶åŸç çš„åŸºç¡€ä¸Šâ€œå–ååŠ 1â€ã€‚ä¾‹å¦‚ `-1` çš„åŸç ä¸º `10000000000000000000000000000001`ï¼Œåˆ™å…ˆå¯¹å…¶éç¬¦å·ä½å–åå¾—åˆ° `11111111111111111111111111111110`ï¼Œç„¶åå†åŠ  1ï¼Œå¾—åˆ° `-1` çš„è¡¥ç ä¸º `11111111111111111111111111111111`ã€‚å®¹æ˜“éªŒè¯â€œ-0â€çš„åŸç åœ¨è¡¥ç ä¸‹è¡¨ç¤º $-2^{31}$ï¼Œæ•…è´Ÿæ•´æ•°çš„å–å€¼èŒƒå›´ä¸º $[-2^{31}, -1]$ã€‚\n\n### `<<` è¿ç®—ç¬¦\n\næ ¹æ®è§„å®šï¼Œå·¦ç§»ä½è¿ç®—ç¬¦æ— éå°±æ˜¯å°†æ‰€æœ‰æ•°ä½å·¦ç§»ï¼Œå¹¶åœ¨å³ä¾§è¡¥é›¶ã€‚å¯¹äºæ­£æ•´æ•°æ¥è¯´ï¼Œå·¦ç§»å‡ ä½å°±æ˜¯åœ¨åŸæ¥çš„æ•°ä¹˜ä¸Š 2 çš„å‡ æ¬¡ï¼ˆå¯¹ 32 å–æ¨¡åï¼‰å¹‚ï¼š\n\n```js\nnum << n === num * Math.pow(2, n mod 32)\n```\n\nå½“ç„¶ï¼Œä¸Šè¿°å…¬å¼åŸºäºæ‰€æœ‰æ•°å€¼å¯¹äº 32 ä½æ•´æ•°æ¥è¯´æ²¡æœ‰æº¢å‡ºã€‚å½“æº¢å‡ºæ—¶ï¼Œå°†æŒ‰ç…§ 32 ä½è¡¥ç æº¢å‡ºå¤„ç†ã€‚ä¾‹å¦‚å¼•ä¾‹ä¸­ `2 << 31`ï¼Œå³å°†äºŒè¿›åˆ¶ `10` æ‰€æœ‰æ•°ä½å‘å·¦ç§»åŠ¨ 31 ä½ï¼Œæ˜¾ç„¶ç¬¬ 2 ä½çš„ `1` æœ€ç»ˆä¼šç§»è‡³ï¼ˆä»å³åˆ°å·¦æ•°ï¼‰ç¬¬ â€œ33â€ ä½ï¼Œå¯¼è‡´æº¢å‡ºè¢«èˆå¼ƒï¼Œæœ€ç»ˆæ‰€æœ‰æ•°ä½çš†ä¸º `0`ï¼Œå› æ­¤ `2 << 31 === 0`ã€‚è€Œå¯¹äº `1 << 32`ï¼Œç”±äºå³æ“ä½œæ•°å¯¹ 32 å–æ¨¡åä¸º 0ï¼Œæ•…å¹¶ä¸ç§»ä½ `1 << 32 === 1`ã€‚\n\nåŒç†ï¼Œå½“å·¦æ“ä½œæ•°å¯¹äº 32 ä½æ•´æ•°æº¢å‡ºæ—¶ï¼Œä»ç„¶å…ˆå¤„ç†æº¢å‡ºååœ¨è¿›è¡Œç§»ä½æ“ä½œã€‚æ­¤å¤„ï¼Œä»…ä¸¾ä¾‹ï¼š`(Math.pow(2,32) + 1) << 1 === 2`ã€‚\n\nå¦å¤–éœ€æ³¨æ„ï¼Œå·¦ç§»æ“ä½œæ—¶è™½ç„¶é™åˆ¶äº†å³æ“ä½œæ•°å¯¹ 32 å–æ¨¡ï¼Œä½†ä»æ— æ³•é¿å…å·¦ä¾§æº¢å‡ºæ•°ä½è¢«èˆå¼ƒã€‚è¿™å°±å¯èƒ½å¯¼è‡´å½“æ“ä½œæ•°è¾ƒå¤§æ—¶ï¼Œæ­£æ•°å·¦ç§»ä½åå˜ä¸ºè´Ÿæ•°ã€‚ä¾‹å¦‚ï¼Œ`2 << 30 === -2147483648  // -2^31`ã€‚\n\n### `>>` è¿ç®—ç¬¦\n\nå³ç§»ä½è¿ç®—ç¬¦å’Œ `<<` å·¦ç§»ä½è¿ç®—ç¬¦å¯¹äºæº¢å‡ºå’Œå–æ¨¡çš„å¤„ç†ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚ä½† `>>` åœ¨è¡¥ä½çš„å¤„ç†ä¸Šç•¥æœ‰ä¸åŒï¼Œ`<<` è¿ç®—ç¬¦åœ¨å³ä¾§ç›´æ¥è¡¥ `0`ã€‚è€Œ `>>` è¿ç®—ç¬¦è§†è¢«æ“ä½œæ•°çš„æœ€é«˜ä½é€‰æ‹©è¡¥ `0` æˆ– `1`ã€‚å…·ä½“åœ°ï¼Œå½“è¢«æ“ä½œæ•°æœ€é«˜ä½ä¸º `0`ï¼ˆå³ä¸ºæ­£æ•°æˆ–é›¶ï¼‰åˆ™è¡¥ `0`ï¼Œåä¹‹è¡¥ `1`ã€‚ä¹Ÿå°±è¯´å³ç§»è¿ç®—ç¬¦ä¿è¯äº†æ“ä½œå‰åçš„ç¬¦å·ã€‚å¹¶ä¸”ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå¯¹äº `-1 >> n` æ— è®º `n` ä¸ºå¤šå°‘ç»“æœéƒ½ä¸º `-1`ã€‚å› ä¸º `-1` çš„è¡¥ç åœ¨å„ä¸ªæ•°ä½ä¸Šä¸º `1`ï¼Œåˆ™å³ä¾§è¢«ç§»é™¤å¤šå°‘ä¸ª `1`ï¼Œå·¦ä¾§å°±ä¼šè¢«è¡¥è¿›æ¥å¤šå°‘ä¸ª `1`ï¼Œæ•…å¹¶ä¸æ”¹å˜æ•°å€¼å¤§å°ã€‚\n\n### `>>>` è¿ç®—ç¬¦\n\nä»‹ç»å®Œå‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼Œæ— ç¬¦å·çš„å³ç§»è¿ç®—ç¬¦å°±ä¸€ç›®äº†ç„¶äº†ã€‚è¯¥è¿ç®—ç¬¦ä¸ `<<` é™¤äº†åœ¨ç§»åŠ¨æ–¹å‘ä¸Šä¸åŒå¤–ï¼Œå…¶ä½™æº¢å‡ºã€è¡¥é›¶ç­‰è§„åˆ™éƒ½ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚ä»…è§£é‡Šå¼•ä¾‹ä¸­ `-1 >>> 1 === 2147483647`ã€‚ç”±äº `-1` çš„è¡¥ç ä¸º `111...111`ï¼Œæ•…å³ç§»ä¸€ä½åï¼Œå³ä¾§è¢«èˆå¼ƒä¸€ä¸ª 1ï¼Œå·¦ä¾§æœ€é«˜ä½è¡¥ 0ï¼Œåˆ™å˜ä¸º `0111...111`ï¼Œæ˜¾ç„¶è¯¥å€¼ä¸º $2^{31-1}$ã€‚ä¸ `<<` è¿ç®—ç¬¦ä¸€è‡´ï¼Œ`>>>` ä¹Ÿå¯èƒ½ä½¿æ“ä½œæ•°å‘ç”Ÿç¬¦å·å˜åŒ–ã€‚\n\n------\n\n*æœ‰å…³å¯¹äº 32 å–æ¨¡çš„è§„åˆ™æœªæ‰¾åˆ°å®˜æ–¹æ–‡æ¡£æ”¯æŒï¼Œä»…å®éªŒæ¨æ–­ï¼Œå¹¶ä¸”æœªå‘ç°åä¾‹ï¼Œè¯»è€…å¯è‡ªæµ‹ã€‚*\n\n## *å‚è€ƒèµ„æ–™*\n\n<div id=\"ref1\"></div>\n\n[1] HENRY S. WARREN J. ç®—æ³•å¿ƒå¾—ï¼šé«˜æ•ˆç®—æ³•çš„å¥¥ç§˜ï¼ˆåŸä¹¦ç¬¬2ç‰ˆï¼‰[M/OL]. çˆ±é£ç¿”, è¯‘. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2014[2022-09-09]. <https://book.douban.com/subject/25837031/>.\n\n<div id=\"ref2\"></div>\n\n[2] Expressions and operators - JavaScript | MDN[EB/OL]. [2022-09-09]. <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#bitwise_operators>.\n","tags":["ECMAScript","JSæ¢å¹½","ç§»ä½è¿ç®—ç¬¦"],"categories":["developer"]},{"title":"JSæ¢å¹½â€”â€”ä»æ•°æ®ç±»å‹åˆ°åŒ…è£…å™¨å¯¹è±¡","url":"/archives/55/","content":"\næœ¬æ–‡ä»‹ç»äº† JavaScript çš„æ•°æ®ç±»å‹ã€åŸºæœ¬æ•°æ®ç±»çš„åŒ…è£…å™¨å¯¹è±¡ï¼Œä»¥åŠå¯¹åº”çš„â€œè£…ç®±â€æœºåˆ¶ï¼Œå¯¹ä¸€äº›è¿åç›´è§‰çš„è¯­è¨€è¡¨ç°è¿›è¡Œäº†è§£é‡Šå’ŒæŸ¥è¯ã€‚\n\n<!--more-->\n\nåœ¨é˜…è¯»æœ¬æ–‡å‰æ€è€ƒä¸‹é¢çš„ä»£ç ï¼Œè€ƒè™‘å®ƒä»¬çš„é¢„æœŸå¤„ç†ç»“æœæ˜¯ä»€ä¹ˆã€‚å¦‚æœä½ èƒ½å®Œå…¨é¢„æ–™å’Œç†è§£è¿™ç§è¡¨ç°ï¼Œé‚£ä¹ˆæ— éœ€æ‹¨å†—é˜…è¯»æœ¬æ–‡äº†ã€‚å¦‚æœä¸€äº›è¡¨ç°ä½¿ä½ ç–‘æƒ‘ï¼Œä¹Ÿè®¸èƒ½ä»æœ¬æ–‡å¾—åˆ°ç­”æ¡ˆã€‚\n\n```javaScript\nconst v1 = 'a'\nconst v2 = String('a')\nconst v3 = new String('a')\n\n/*-- part 1 --*/\n\nconsole.log(v1) // 'a'\nconsole.log(v2) // 'a'\nconsole.log(v3) // String {'a'}\n\ntypeof v1 // 'string'\ntypeof v2 // 'string'\ntypeof v3 // 'object'\n\nv1 instanceof String // false\nv2 instanceof String // false\nv3 instanceof String // true\n\nv1 === v2 // true\nv1 === v3 // false\n\n/*---------------*/\n\n/*-- part 2 --*/\n\nv1 == v2 // true\nv1 == v3 // true\n\nv1.__proto__ === String.prototype // true\nv2.__proto__ === String.prototype // true\nv3.__proto__ === String.prototype // true\n\nv1[1] = 'b'\nconsole.log(v1[1]) // undefined\nv2[1] = 'b'\nconsole.log(v2[1]) // undefined\nv3[1] = 'b'\nconsole.log(v3[1]) // 'b'\n```\n\nå¯¹äºæ•°å­—ç±»å‹ï¼ˆNumberï¼‰å’Œå¸ƒå°”ç±»å‹ï¼ˆBooleanï¼‰æœ‰ä»¥ä¸Šç±»ä¼¼çš„è¡¨ç°ã€‚\n\n## 8 ç§æ•°æ®ç±»å‹\n\næ ¹æ®æœ€æ–°çš„ ECMAScript æ ‡å‡†ï¼Œå®šä¹‰äº† 8 ç§æ•°æ®ç±»å‹ï¼š\n\n* 7 ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive valueï¼‰\n  * å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ï¼Œæœ‰ä¸¤ä¸ªå€¼åˆ†åˆ«æ˜¯ï¼š`true` å’Œ `false`  \n  * nullï¼Œä¸€ä¸ªè¡¨æ˜ null å€¼çš„ç‰¹æ®Šå…³é”®å­—\n  * undefinedï¼Œè¡¨ç¤ºå˜é‡æœªèµ‹å€¼ï¼ŒåŒæ ·æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—\n  * æ•°å­—ï¼ˆNumberï¼‰ï¼Œè¡¨ç¤ºæ•´æ•°æˆ–æµ®ç‚¹æ•°ã€‚ä½¿ç”¨åŒç²¾åº¦æµ®ç‚¹ç±»å‹\n  * ä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼ˆBigIntï¼‰ï¼Œç”¨äºå¤§æ•´æ•°çš„è®¡ç®—ã€‚ æ—¥å‰å·²ç»æˆä¸º ES çš„æ­£å¼æ ‡å‡†è¢«ä¸»æµæµè§ˆå™¨å®ç°\n  * å­—ç¬¦ä¸²ï¼ˆStringï¼‰\n  * ä»£è¡¨ï¼ˆSymbolï¼‰ï¼ŒES6 ä¸­æ–°å¢çš„ç±»å‹ã€‚ä¸€èˆ¬ç”¨ä»¥è·å–ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦\n* å¯¹è±¡ï¼ˆObjectï¼‰\n\næ ‡å‡†ä¸­æ²¡åˆ—å‡ºæ•°ç»„ã€å‡½æ•°ç­‰å…¶ä»–æ•°æ®ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬éƒ½è¢«è§†ä¸ºå¯¹è±¡ç±»å‹ã€‚ä½œä¸º Javascript å¼€å‘è€…ä¸€å®šå¬è¿‡å¹¿ä¸ºæµä¼ çš„â€œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡â€è¿™å¥è¯ï¼Œæ˜¯å¦æ„å‘³ç€ 7 ç§åŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿæ˜¯å¯¹è±¡å‘¢ï¼Ÿè‹¥å¦‚æ­¤ï¼Œæ ‡å‡†ä¸­ä¸ºä½•è¦å°†ä»–ä»¬åœ¨å¯¹è±¡ç±»å‹å¤–å•ç‹¬åˆ—å‡ºå‘¢ï¼Ÿè‹¥ä¸æ˜¯ï¼Œä¸ºä½•å¯ä»¥è°ƒç”¨å­—ç¬¦ä¸²çš„ `length` å±æ€§å’Œ `toLocaleLowerCase()` `toLocaleUpperCase()` ç­‰æ–¹æ³•ï¼Ÿå†…ç½®çš„ `Number` `String` `Boolean` å¯¹è±¡åˆæ˜¯ä½•ç”¨å‘¢ï¼Ÿ\n\næš‚ä¸”ä¸ç®¡â€œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡â€è¿™å¥è¯åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½†éœ€è¦æ˜ç¡®çš„æ˜¯ **7 ç§åŸºæœ¬ç±»å‹æ—¢ä¸æ˜¯å¯¹è±¡ä¹Ÿæ²¡æœ‰å±æ€§å’Œæ–¹æ³•**[<sup>1</sup>](#ref1)ï¼é‚£å¦‚ä½•è§£é‡Š `'a'.length` ç­‰å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ–¹æ³•å’Œå±æ€§çš„è°ƒç”¨ï¼Ÿè¿™å°±æ¶‰åŠåˆ°äº† JS çš„åŸºæœ¬ç±»å‹åŒ…è£…å™¨å¯¹è±¡å’Œâ€œè‡ªåŠ¨è£…ç®±â€æœºåˆ¶ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¼„æ˜ç™½æ–‡ç« å¼€å¤´ä¾‹å­é‡Œå‡ ç§å˜é‡çš„å£°æ˜æ–¹å¼ï¼Œä»¥åŠä»–ä»¬åˆ†åˆ«ç”Ÿæˆäº†ä»€ä¹ˆç±»å‹çš„å˜é‡ã€‚\n\n## å˜é‡çš„å£°æ˜\n\nä¸Šæ–‡åªæ˜¯æŠ½è±¡åœ°æŒ‡å‡ºäº†å“ªäº›æ•°æ®ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ²¡æœ‰ç»™å‡ºå…·ä½“çš„å£°æ˜è¯­æ³•ã€‚\n\nå¯¹äºæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç±»å‹ä»¥åŠ `undefined` å’Œ `null`ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­—é¢é‡ï¼ˆLiteralsï¼‰å£°æ˜ã€‚ä¾‹å¦‚ `val1 = 1`ï¼Œ`val2 = 'a'`ï¼Œ`val3 = true`ã€‚å…¶ä¸­ `1`ã€`'a'`ã€`true` åˆ†åˆ«ä¸ºæ•°å­—å­—é¢é‡ã€å­—ç¬¦ä¸²å­—é¢é‡å’Œå¸ƒå°”å­—é¢é‡ï¼Œç”±ä»–ä»¬æ‰€èµ‹å€¼çš„å˜é‡ `val1`ã€`val2`ã€`val3` å³ä¸ºæ•°å­—å‹ã€å­—ç¬¦ä¸²å‹ã€å¸ƒå°”å‹ï¼Œå±äºåŸºæœ¬æ•°æ®ç±»å‹ã€‚å¯¹äº BigInt ç±»å‹ï¼Œå¯ä»¥åœ¨æ•°å­—æœ«å°¾åŠ ä¸Š `n` æ¥ä½¿ç”¨å­—é¢é‡èµ‹å€¼ï¼š`const theBiggestInt = 9007199254740991n`ã€‚\n\nå¯¹äº Symbol ç±»å‹æ²¡æœ‰å¯¹åº”çš„å­—é¢é‡è¯­æ³•ï¼Œåˆ™ä½¿ç”¨ `Symbol()` å‡½æ•°è¿”å›ä¸€ä¸ª Symbol ç±»å‹çš„å€¼ï¼Œä¾‹å¦‚ `const symbol1 = Symbol()`ã€‚åŒæ ·åœ°ï¼Œæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ã€BigInt ç±»å‹çš„å€¼ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨å‡½æ•° `Number()`ã€`String()`ã€`Boolean()`ã€`BigInt()` æ¥è·å–ã€‚\n\nä»¥ä¸Šä¸¤ç§æ–¹æ³•æ‰€ä¸¾ä¾‹å­ä¸­æ‰€å£°æ˜çš„å˜é‡å‡ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ã€‚è€Œæœ¬æ–‡å¼€å¤´çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œè¿˜ä½¿ç”¨äº† `new` å…³é”®å­— + æ„é€ å‡½æ•°ç”Ÿæˆçš„å˜é‡çš„è¯­æ³•ã€‚åœ¨è¿™ç§è¯­æ³•ä¸‹æ‰€ç”Ÿæˆçš„å˜é‡åˆ™ä¸ºå¯¹è±¡ç±»å‹ã€‚ä¾‹å¦‚ `new Number(1)` è¯­æ³•èµ‹å€¼çš„å˜é‡å³ä¸º `Number` å¯¹è±¡ï¼Œå±äºå¯¹è±¡æ•°æ®ç±»å‹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ç”Ÿæˆçš„å¯¹è±¡ä¹Ÿç›¸åº”çš„è¢«ç§°ä¸ºå¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹çš„**åŒ…è£…å™¨å¯¹è±¡**ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ ES æ ‡å‡†ä¸­å·²ä¸å…è®¸å›´ç»•åŸºæœ¬æ•°æ®ç±»å‹**æ˜¾æ€§åœ°**ç”ŸæˆåŒ…è£…å™¨å¯¹è±¡ã€‚ä¾‹å¦‚ `new BigInt()` å’Œ `new Symbol()` ä¼šæŠ¥é”™ `Uncaught TypeError: Symbol/BigInt is not a constructor`ã€‚è€Œ `new Number()`ã€`new String()` å’Œ `new Boolean()` çš„è¯­æ³•ç”±äºå†å²åŸå› è¢«ä¿ç•™ä¸‹æ¥[<sup>2</sup>](#ref2)ã€‚ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ç§è¯­æ³•éƒ½æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚(*`Symbol` å’Œ `BigInt` çš„åŒ…è£…å™¨å¯¹è±¡ä»å¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•æ‰‹åŠ¨ç”Ÿæˆï¼ŒæŸ¥çœ‹å‚è€ƒèµ„æ–™ [2] [<sup>2</sup>](#ref2)*ã€‚)\n\nè‡³æ­¤ï¼Œä¾¿å¯ä»¥è§£é‡Šç¤ºä¾‹ä»£ç ä¸­ part 1 çš„è¡¨ç°äº†ã€‚å‰ä¸¤ç§å£°æ˜æ–¹å¼ç”Ÿæˆäº†åŸºæœ¬æ•°æ®ç±»å‹â€”â€”å­—ç¬¦ä¸²ç±»å‹ï¼Œç¬¬ä¸‰ç§å£°æ˜æ–¹å¼ç”Ÿæˆäº†åŒ…è£…å™¨å¯¹è±¡ã€‚å› æ­¤æ‰ä¼šæœ‰å‰ä¸¤è€…çš„ç±»å‹ä¸º `sting` è€Œåè€…ä¸º `Object`ï¼›åŒæ—¶å‰ä¸¤è€…æ—¢ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨ `instanceof` æ‰¾ä¸åˆ°ä»»ä½•æ„é€ å‡½æ•°ï¼›æœ€ååŸºæœ¬æ•°æ®ç±»å‹å®Œå…¨åˆ¤ç­‰æ—¶åªæ¯”è¾ƒå€¼ï¼Œæ•…æœ‰å‰ä¸¤è€…å®Œå…¨ç›¸ç­‰ï¼Œè€Œä¸ç­‰äºç¬¬ä¸‰è€…ã€‚\n\n## åŒ…è£…å™¨å¯¹è±¡å’Œâ€œè£…ç®±â€\n\nä¸Šæ–‡ä»‹ç»äº†åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…å™¨å¯¹è±¡ï¼Œå³å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œâ€œåŒ…è£…â€ç”Ÿæˆå¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼Œä»¥èµ‹äºˆå…¶ç‰¹å®šçš„å±æ€§å’Œæ–¹æ³•ã€‚é™¤äº† undefined å’Œ null å¤–ï¼Œæ‰€æœ‰çš„åŸºæœ¬ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…å™¨å¯¹è±¡ï¼š\n\n* Boolean\n* Number\n* String\n* Symbol\n* BigInt\n\nä½¿ç”¨åŒ…è£…å¯¹è±¡çš„ `valueOf()` æ–¹æ³•åˆ™è¿”å›è¯¥åŒ…è£…å¯¹è±¡çš„åŸå§‹åŸºæœ¬ç±»å‹å€¼ã€‚\n\nä½¿ç”¨ `new` å…³é”®è¯å¯ä»¥æ˜¾æ€§åœ°æ„é€ åŒ…è£…å™¨å¯¹è±¡ï¼Œä½†åœ¨å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œæ“ä½œæ—¶åŒ…è£…å™¨å¯¹è±¡å¸¸å¸¸è¢«éšæ€§åœ°æ„é€ ã€‚\n\nä¾‹å¦‚åœ¨å°è¯•å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡è¿›è¡Œå±æ€§è¯»å–å’Œæ–¹æ³•è°ƒç”¨æ—¶ï¼Œåˆ™é¦–å…ˆå°†è¯¥å­—ç¬¦ä¸²åŒ…è£…æˆä¸€ä¸ª String å¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚è€Œè¯¥å¯¹è±¡åœ¨è¢«è°ƒç”¨å®Œæˆåå³è¢«é”€æ¯ï¼Œå› æ­¤åŸæ¥åŸºæœ¬ç±»å‹å˜é‡çš„å€¼å¹¶ä¸å—å½±å“ã€‚è¿™å°±è§£é‡Šäº†ä¸ºä½•åœ¨è®¾ç½® `v1[1] = 'b'` å `v1` çš„å€¼ä»ä¸º `'a'`ã€‚ä»¥åŠè°ƒç”¨ `v1.__proto__` ä»èƒ½å¾—åˆ° `String.prototype`ã€‚\n\nè¿™ç§åœ¨å¿…è¦æ—¶å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œâ€œåŒ…è£…â€ç”Ÿæˆå¯¹è±¡çš„æœºåˆ¶å¸¸è¢«æˆä¸ºâ€œè£…ç®±â€ã€‚åŒæ ·åœ°ï¼Œå½“è¯•å›¾å¯¹åŒ…è£…å¯¹è±¡è¿›è¡ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ“ä½œæ—¶ï¼ŒåŒ…è£…å™¨çš„ `valueOf()` æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œç”¨å…¶è¿”å›çš„åŸºæœ¬ç±»å‹å€¼è¿›è¡Œè¿ç®—ã€‚è¿™ç§æœºåˆ¶æœ‰äººç§°ä¹‹ä¸ºâ€œè§£ç®±â€ã€‚\n\nç¤ºä¾‹ä»£ç ä¸­ `v1 == v3` ä¹‹æ‰€ä»¥ä¸º `true`ï¼Œå³æ˜¯å› ä¸ºåœ¨éä¸¥æ ¼åˆ¤ç­‰æ—¶ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œè°ƒç”¨äº†å¯¹è±¡ `v3` çš„ `valueOf()` æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ[<sup>3</sup>](#ref3)ã€‚\n\n**æ€è€ƒ**\n\nä»¥ä¸‹ä»£ç æœ‰å¦‚ä½•è¡¨ç°å‘¢ï¼Ÿ\n\n```js\nconst obj1 = {\n  valueOf() { return 1 },\n  toString() { return '2' }\n}\nconst obj2 = {\n  toString() { return '2' }\n}\nconst val1 = 1\nconst val2 = 2\nconst val3 = '2'\n\nobj1 == val1\nobj1 == val2\nobj1 == val3\n\nobj2 == val2\nobj2 == val3\n```\n\né‚£ä¹ˆâ€œä¸€åˆ‡çš†æ˜¯å¯¹è±¡â€æ˜¯ä¸æ˜¯è¯´ JavaScript ä¸­çš„ä¸€åˆ‡å˜é‡éƒ½å¯ä»¥çœ‹ä½œå¯¹è±¡æ¥ä½¿ç”¨å‘¢ï¼Ÿæˆ–è€…è¯´ä¸€åˆ‡å®ç°å›´ç»•å¯¹è±¡è¿›è¡Œå‘¢ï¼Ÿ\n\n*å‚è€ƒèµ„æ–™*\n\n<div id=\"ref1\"></div>\n\n[1] Primitive - MDN Web Docs Glossary: Definitions of Web-related terms | MDN[EB/OL]. [2022-09-06]. <https://developer.mozilla.org/en-US/docs/Glossary/Primitive>.\n\n<div id=\"ref2\"></div>\n\n[2] Symbol - JavaScript | MDN[EB/OL]. [2022-09-06]. <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#description>.\n\n<div id=\"ref3\"></div>\n\n[3] Equality comparisons and sameness - JavaScript | MDN[EB/OL]. [2022-09-06]. <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#loose_equality_using>\n","tags":["ECMAScript","JSæ¢å¹½","åŒ…è£…å™¨å¯¹è±¡"],"categories":["developer"]},{"title":"å¦‚ä½•ä»é›¶å¼€å‘ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åº","url":"/archives/54/","content":"\næœ€è¿‘å¼€å‘äº†ä¸€æ¬¾å°ç¨‹åºï¼Œæœ¬æ–‡å°†ä»‹ç»è¿™æ¬¾å°ç¨‹åºåœ¨ä¸¤å‘¨ä¹‹å†…ä»ç«‹é¡¹åˆ°ä¸Šçº¿çš„å…¨éƒ¨æµç¨‹ï¼Œä¸ºä¸ªäººå¼€å‘è€…å¼€å‘è‡ªå·±çš„ç¬¬ä¸€æ¬¾å¾®ä¿¡å°ç¨‹åºç®€å•æŒ‡å—ã€‚\n\n<!--more-->\n\n## èƒŒæ™¯ä»‹ç»\n\nå‰ä¸¤å‘¨åœ¨å’Œæœ‹å‹æ‰“å®Œçƒåè®¨è®ºç¯®çƒè§„åˆ™æ—¶ï¼Œäº’ç›¸æé—®äº†ä¸€äº›è£åˆ¤å‘˜çš„æ‰‹åŠ¿ï¼Œå‘ç°æŒºæœ‰æ„æ€ã€‚äºæ˜¯æƒ³å¯ä»¥å¼€å‘ä¸€æ¬¾å°ç¨‹åºæ¥è€ƒéªŒçƒè¿·å¯¹æ ‡å‡†ç¯®çƒè£åˆ¤æ‰‹åŠ¿çš„è¯†åˆ«èƒ½åŠ›ï¼Œäºæ˜¯å»FIBAå®˜ç½‘æ‰¾äº†è£åˆ¤æ‰‹å†Œï¼Œå¼€å§‹äº†ä¸¤å‘¨å¼€å‘ä¸€æ¬¾å°ç¨‹åºçš„å†ç¨‹ã€‚\n\nç°åœ¨å°ç¨‹åºå·²ç»ä¸Šçº¿ï¼Œæ•…æ•´ç†ä¸€ä¸‹è¿™ä¸¤å‘¨æ¥çš„æµç¨‹å’Œç»éªŒï¼Œä¾›å¤§å®¶å‚è€ƒã€‚å°ç¨‹åºåä¸ºã€Œç¯®çƒè£åˆ¤æ‰‹åŠ¿æŒ‘æˆ˜ã€ï¼Œå¯ä»¥æ‰«ç ä½“éªŒã€‚\n\n![æœç´¢ã€Œç¯®çƒè£åˆ¤æ‰‹åŠ¿æŒ‘æˆ˜ã€](/assets/images/54-1.jpg)\n\n## å¼€å‘æµç¨‹\n\nä¸€æ¬¾è½¯ä»¶çš„ç ”å‘å’Œç»´æŠ¤æµç¨‹æ¶‰åŠéœ€æ±‚åˆ†æã€äº§å“è®¾è®¡ã€åŸå‹è®¾è®¡ã€UIå’Œäº¤äº’è®¾è®¡ã€ç³»ç»Ÿè®¾è®¡ã€å®¢æœç«¯å’ŒæœåŠ¡ç«¯ç¼–ç å®ç°ã€è½¯ä»¶æµ‹è¯•ã€è¿è¡Œç»´æŠ¤ã€å®£ä¼ è¿è¥ã€æ•°æ®åˆ†æç­‰ç­‰ä¸€ç³»åˆ—å·¥ä½œã€‚ä½†å¦‚æœæ•´ä¸ªé¡¹ç›®åªæœ‰ä½ è‡ªå·±ä¸€ä¸ªäººï¼Œå…¶å®å¾ˆå¤šå·¥ä½œæ˜¯å¯ä»¥ç®€åŒ–å’Œæé«˜æ•ˆç‡çš„ï¼Œæˆ–è€…è¯´æ˜¯æ²¡æœ‰å¿…è¦èŠ±è´¹ç²¾åŠ›å»åšçš„ã€‚ä¾‹å¦‚éœ€æ±‚åˆ†æåˆ°UIè®¾è®¡çš„æ­¥éª¤å®Œå…¨å¯ä»¥åˆå¹¶åˆ°ä¸€èµ·ï¼Œå‰åç«¯å¼€å‘çš„ä¹Ÿæ²¡å¿…è¦èŠ±æ—¶é—´å»æŒ‡å®šè¯¦ç»†çš„æ¥å£è®¾è®¡æ–‡æ¡£ï¼Œæµ‹è¯•å’Œç ”å‘ä¹Ÿå¯ä»¥éšæ—¶äº¤å‰è¿›è¡Œã€‚æ¯•ç«Ÿè‡ªå·±æçš„éœ€æ±‚è‡ªå·±æ”¹ï¼Œè‡ªå·±çš„BUGè‡ªå·±æµ‹ã€‚\nç”±äºä¸€ä¸ªäººå¼€å‘è‡ªå·±çš„å°ç¨‹åºï¼Œæ²¡æœ‰è´£ä»»å’Œå‹åŠ›ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æ”¾å¼ƒï¼Œè¿™é‡Œåˆ†äº«ä¸€ä¸‹è‡ªå·±çš„ä¸€ä¸ªç»éªŒã€‚é‚£å°±æ˜¯è¦è·³å‡ºè‡ªå·±å¼€å‘è€…çš„å®šä½ï¼Œè€Œæ›´åº”è¯¥æŠŠè‡ªå·±çœ‹ä½œé¡¹ç›®ç»ç†çš„è§’è‰²ã€‚å…·ä½“æ¥è®²ï¼ŒæŠ€æœ¯çš„ç»†èŠ‚ï¼ˆæˆ–äº§å“çš„è®¾è®¡ï¼‰è¦è®©æ­¥äºé¡¹ç›®æ•´ä½“çš„è§„åˆ’ï¼Œä¸ç„¶å®¹æ˜“çº ç»“äºä¸æ–­çš„ä¼˜åŒ–ä»£ç å’Œè®¾è®¡è€Œå¯¼è‡´è¿›åº¦ç¼“æ…¢ï¼Œæœ€ç»ˆæ”¾å¼ƒã€‚æ—¶åˆ»æé†’è‡ªå·±ï¼Œå…ˆæŠŠäº‹åšå®Œï¼Œå†æŠŠäº‹åšå®Œç¾ã€‚\n\n### æŠ€èƒ½å’Œå·¥å…·\n\nä¸ªäººå¼€å‘è½¯ä»¶ï¼Œéœ€è¦å…·å¤‡ä¸€å®šçš„è®¾è®¡å’Œç¼–ç¨‹èƒ½åŠ›ï¼Œä½†æœ€é‡è¦çš„æ˜¯æœ‰è€å¿ƒã€‚\næˆ‘é€‰æ‹©äº†åŸç”Ÿå°ç¨‹åºå¼€å‘å’Œå¾®ä¿¡äº‘å¼€å‘çš„ç»„åˆï¼Œä¸»è¦æ¶‰åŠçš„å·¥å…·å¦‚ä¸‹ã€‚\n\n* **[å¾®ä¿¡å°ç¨‹åº](https://mp.weixin.qq.com/)**ï¼Œå®˜ç½‘ç”³è¯·æ³¨å†Œå¾®ä¿¡å°ç¨‹åºï¼ŒæŒ‰ç…§æµç¨‹æ¥å¾ˆå¿«å°±èƒ½ç”³è¯·åˆ°ã€‚\n\n* **[Pixso](https://pixso.cn/)**ï¼Œä¸€æ¬¾å›½äº§â€œè®¾è®¡åä½œå·¥å…·â€ï¼Œå¯ä»¥å®ç°åŸå‹å’ŒUIçš„è®¾è®¡ï¼Œå…è´¹ä¸”ä¸Šæ‰‹å®¹æ˜“ã€‚\n\n* **[å¾®ä¿¡å°ç¨‹åºå¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)**ï¼Œå¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹æ–‡æ¡£ï¼Œæ•´ä½“æ¥è¯´å†™çš„ä¸é”™ï¼Œæœ‰ç¼–ç¨‹åŸºç¡€çš„å¾ˆå®¹æ˜“ä¸Šæ‰‹ã€‚\n\n* **[å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…å·¥å…·](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)**ï¼Œå¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åºã€å°æ¸¸æˆçš„å®˜æ–¹å¼€å‘å·¥å…·ã€‚\n\n* **[äº‘å¼€å‘](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)** å®ç°å°ç¨‹åºæœåŠ¡ç«¯çš„å¼€å‘ã€‚æˆ‘ä½¿ç”¨äº†å¾®ä¿¡äº‘å¼€å‘ï¼Œä¼˜ç‚¹æ˜¯å’Œå°ç¨‹åºçš„æ— ç¼è¡”æ¥ï¼Œç¼ºç‚¹æ˜¯**æ”¶è´¹å¤ªé«˜**ï¼å¯é€‰é˜¿é‡Œäº‘å¼€å‘ï¼Œå…è´¹ã€‚\n\n* **PS**ï¼Œä¸»è¦ç”¨æ¥å¤„ç†èµ„æºå›¾ç‰‡å’Œè®¾è®¡æ¸²æŸ“å®£ä¼ å›¾ã€‚\n\n* **Git åŠè¿œç¨‹ä»“åº“**ï¼Œï¼ˆéå¿…é¡»ï¼‰ä»£ç ç‰ˆæœ¬ç®¡ç†å’Œå¤‡ä»½ã€‚\n\nå¦‚æœä½ æ˜¯Vueé€‰æ‰‹ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ **[uni-app](https://uniapp.dcloud.net.cn/)** è¿›è¡Œå¼€å‘ï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆä¸€ä»½ä»£ç å¤šç«¯ç¼–è¯‘ï¼ˆç½‘é¡µï¼Œå¾®ä¿¡å°ç¨‹åºã€å®‰å“ã€iOSï¼‰ã€‚åŒæ—¶è¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿å°±æ˜¯å¯ä»¥æ— ç¼æ­é… **[uniCloud](https://uniapp.dcloud.net.cn/uniCloud/)**ï¼Œä½¿ç”¨**å…è´¹**çš„é˜¿é‡Œäº‘å¼€å‘æœåŠ¡ï¼ä½†ç¼ºç‚¹æ˜¯æ–‡æ¡£å†™å¾—ä¸å¦‚å¾®ä¿¡ã€‚\n\n### äº§å“è®¾è®¡\n\næˆ‘æ—¢ç„¶æƒ³å¼€å‘ä¸€æ¬¾è€ƒéªŒçƒè¿·å¯¹ç¯®çƒè£åˆ¤æ‰‹åŠ¿è¯†åˆ«èƒ½åŠ›çš„å°ç¨‹åºï¼Œé‚£ä¹ˆæœ€å¥½çš„é€‰æ‹©å°±æ˜¯åšæˆç­”é¢˜ç±»çš„å½¢å¼ï¼Œè¿™æ ·æ—¢æœ‰è¶£å‘³æ€§ä¹Ÿç›¸å¯¹ç®€å•ã€‚äºæ˜¯åœ¨ç®€å•è¿›è¡Œè½¯ä»¶æµç¨‹çš„è®¾è®¡åï¼Œæˆ‘ç€æ‰‹è¿›è¡Œäº†UIè®¾è®¡ã€‚\n\næœ‰äº›å¼€å‘è€…å¯èƒ½è§‰å¾—è‡ªå·±å¼€å‘è½¯ä»¶è¿˜è¿›è¡Œ UI è®¾è®¡æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Œéšç€ç°åœ¨ UI è®¾è®¡å·¥å…·çš„å­¦ä¹ é—¨æ§›è¶Šæ¥è¶Šä½ï¼Œä¸“é—¨è¿›è¡Œ UI è®¾è®¡è‡³å°‘æœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š\n\n* åœ¨ä¸“é—¨çš„å·¥å…·ä¸Š UI çš„ä¿®æ”¹æˆæœ¬æ˜¯æ¯”å¼€å‘æ—¶è°ƒè¯•ä¿®æ”¹çš„æˆæœ¬è¦ä½ï¼ŒUI è®¾è®¡è™½ç„¶å¢åŠ äº†å·¥ä½œæ­¥éª¤ï¼Œä½†å®é™…ä¸Šå‡å°‘äº†å·¥ä½œé‡ï¼Œæé«˜äº†æ•ˆç‡ã€‚\n* UI è®¾è®¡è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¯¹äº§å“åŠŸèƒ½æµç¨‹è®¾è®¡çš„æ£€éªŒï¼Œä¸€äº›ä¸åˆç†æˆ–ä¸ç¬¦åˆç”¨æˆ·ä¹ æƒ¯çš„æµç¨‹è®¾è®¡ä¼šè¢«æå‰å‘ç°å’Œä¿®æ”¹ã€‚\n* UI è®¾è®¡å¯ä»¥ä¿è¯ç”¨æˆ·ç•Œé¢çš„ä¸€è‡´æ€§ï¼Œä½“ç°è‰¯å¥½çš„é¡µé¢å®¡ç¾ã€‚\n* è€ƒè™‘åˆ°è½¯ä»¶ UI å…¨å±€çš„ä¸€è‡´æ€§ï¼Œå¯èƒ½ä¼šå¯¹å·²è®¾è®¡å¥½çš„é¡µé¢è¿›è¡Œè°ƒæ•´ï¼Œæ‰€ä»¥å½“æå‰è®¾è®¡å¥½æ‰€æœ‰ UI æ—¶ï¼Œå¼€å‘è¿‡ç¨‹ä¸­é’ˆå¯¹ UI çš„ä¿®æ”¹å°†å¤§å¤§å‡å°‘ã€‚\n* åæœŸå‡ºå®£ä¼ å›¾æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ UI è®¾è®¡ç¨¿ï¼Œæ›´åŠ çµæ´»ã€‚\n\nç”±äºç­”é¢˜ç±»ç«èµ›åå‘æ¸¸æˆç±»è½¯ä»¶ï¼Œä¸å¯é¿å…çš„æœ‰è®¡æ—¶ã€åŠ¨ç”»ã€è®¡åˆ†ã€å¥–åŠ±ç­‰è®¾è®¡ï¼Œé€»è¾‘ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå¾ˆå®¹æ˜“å‡ºBUGã€‚æ‰€ä»¥æœ€å¥½çš„æ–¹å¼å°±æ˜¯å‚è€ƒå’Œæ¨¡ä»¿æˆç†Ÿçš„åŒç±»è½¯ä»¶ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å¿«é€Ÿè®¾è®¡å‡ºæˆç†Ÿçš„äº¤äº’é€»è¾‘ï¼Œå¹¶ä¸”æ¸…æ¥šçŸ¥é“ç°æœ‰æŠ€æœ¯æ¡†æ¶ä¸‹å“ªäº›åŠŸèƒ½æ˜¯å¯ä»¥å®ç°çš„ã€‚\n\n![UIè®¾è®¡ç¨¿](/assets/images/54-2.png)\n\n### ç¼–ç å®ç°\n\nUI å›¾ç¨¿æœ‰äº†è¿›è¡Œå‰ç«¯çš„ç¼–ç å®ç°å°±å˜å¾—æ¯”è¾ƒè½»æ¾äº†ï¼Œè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œæœ‰ä¸€äº›ç»éªŒåˆ†äº«ç»™å°ç¨‹åºå¼€å‘æ–°æ‰‹ï¼š\n\n* å¤šè¯»[å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)ï¼Œåˆšå¼€å§‹åªéœ€è¦è¯»ä¸€ä¸‹å‰å‡ ç« ï¼Œå¯¼å…¥æ¼”ç¤ºé¡¹ç›®ï¼ŒæŠŠå°ç¨‹åºå¼€å‘çš„é€»è¾‘ææ¸…æ¥šå°±å¯ä»¥äº†ã€‚\n\n* éœ€è¦å“ªéƒ¨åˆ†åŠŸèƒ½å°±å»å•ç‹¬è¯»æ–‡æ¡£é‡Œçš„ç›¸å…³éƒ¨åˆ†ï¼Œå¾®ä¿¡å°ç¨‹åºçš„æ–‡æ¡£å†™å¾—ç®—ä¸é”™çš„äº†ï¼Œä¸€èˆ¬éƒ½èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚\n\n* é‡åˆ°é—®é¢˜çš„è¯ï¼Œå¯ä»¥å»[å¾®ä¿¡å¼€æ”¾ç¤¾åŒº](https://developers.weixin.qq.com/community/develop/question)æœç´¢å’Œæé—®ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç»éªŒä¸°å¯Œçš„è€å“¥æ´»è·ƒã€‚\n\n* å®åœ¨æä¸æ‡‚çš„æ¥å£å’ŒåŠŸèƒ½ï¼Œä¸€èˆ¬æ–‡æ¡£éƒ½é™„æœ‰æ¼”ç¤ºé¡¹ç›®ï¼Œå¯¼å…¥æœ¬åœ°å»è°ƒè¯•ã€‚\n\næœåŠ¡ç«¯çš„å¼€å‘æˆ‘ä½¿ç”¨äº†[å¾®ä¿¡äº‘å¼€å‘](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)ï¼Œéå¸¸æ–¹ä¾¿ï¼Œç›´æ¥ç ¸å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å°±å¯ä»¥è°ƒè¯•å’Œéƒ¨ç½²ã€‚å’Œç°åœ¨å¸‚é¢ä¸Šå¾ˆå¤š serverless æœåŠ¡ä¸€æ ·ï¼Œå¾®ä¿¡äº‘å¼€å‘æ”¯æŒ `node.js`ï¼ˆä»…æ”¯æŒï¼‰ï¼Œä½¿ç”¨ NoSQL æ•°æ®åº“ï¼Œå¯¹äºå‰ç«¯å¼€å‘éå¸¸å‹å¥½ï¼Œå‡ ä¹æ²¡æœ‰ä¸Šæ‰‹éš¾åº¦ã€‚å¹¶ä¸”æ–‡æ¡£å†™å¾—ä¹Ÿä¸é”™ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£ç›´æ¥ä¸Šæ‰‹ã€‚\n\n![å¾®ä¿¡äº‘å¼€å‘æ§åˆ¶å°](/assets/images/54-3.png)\n\né™¤äº†å°ç¨‹åºä¸šåŠ¡éœ€æ±‚çš„å¼€å‘ï¼ŒåŒæ—¶æ³¨æ„åŸ‹ç‚¹å’Œæ•°æ®ç»Ÿè®¡ï¼Œè¿™æ ·æœ‰åˆ©äºåæœŸäº§å“çš„ä¼˜åŒ–å’Œè¿è¥ã€‚ä¾‹å¦‚æˆ‘çš„ç­”é¢˜å°ç¨‹åºï¼Œç”±äºä¸€å¼€å§‹æ¯é“é¢˜çš„é€‰é¡¹é™¤äº†æ­£ç¡®ç­”æ¡ˆå¤–å…¶ä»–é€‰é¡¹éƒ½æ˜¯éšæœºçš„ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæœ‰äº›é¢˜å¾ˆç®€å•ã€‚äºæ˜¯æˆ‘é‡‡é›†äº†æ¯é“é¢˜çš„å„ä¸ªé€‰é¡¹å‡ºç°çš„æ¬¡æ•°å’Œé”™è¯¯æ¬¡æ•°ï¼Œæ¯å¤©å‡Œæ™¨éƒ½ä¼šè‡ªåŠ¨æ›´æ–°é¢˜ç›®çš„é€‰é¡¹ï¼ˆæ–‡æ¡£æŒ‡å—ï¼š[å®šæ—¶è§¦å‘å™¨](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html)ï¼‰ï¼Œè®©é”™è¯¯ç‡é«˜çš„é€‰é¡¹æœ‰æ›´é«˜çš„å¯èƒ½æ€§è¢«é€‰ä¸­ã€‚\n\nè¦æ³¨æ„ï¼Œå¾®ä¿¡äº‘æœåŠ¡é¦–æœˆæä¾›äº†é…é¢éå¸¸å°‘çš„å…è´¹ç¯å¢ƒï¼Œæœ‰æ—¶å€™è¿å¼€å‘æµ‹è¯•éƒ½ä¼šè¶…å‡ºé¢åº¦ã€‚æ‰€ä»¥é¡¹ç›®ä¸Šçº¿å¿…é¡»è¦å¢åŠ é¢åº¦ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦é…ç½®æµ‹è¯•ç¯å¢ƒç­‰å¤šä¸ªç¯å¢ƒï¼Œåˆæ˜¯ä¸€ç¬”å¼€é”€ã€‚è´¹ç”¨ç›¸è¾ƒå¸‚é¢çš„å¹³å‡æ°´å¹³æ¯”è¾ƒé«˜ï¼Œå¦‚æœä½ ä¸€å¼€å§‹å°±å¯¹è…¾è®¯äº‘æœåŠ¡çš„ä»·æ ¼ä¸æ»¡æ„ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ [uni-app](https://uniapp.dcloud.net.cn/) + [uniCloud](https://uniapp.dcloud.net.cn/uniCloud/) çš„å¼€å‘æ¨¡å¼ï¼Œé¿å…åæœŸè¿ç§»çš„æˆæœ¬ã€‚\n\n### æµ‹è¯•å’Œå‘å¸ƒ\n\nå¯¹ä¸ªäººå¼€å‘è€…æ¥è¯´ï¼Œæµ‹è¯•æ˜¯ä¸€ä¸ªå®¹æ˜“å¿½è§†çš„å…³é”®æµç¨‹ï¼Œå› ä¸ºâ€œä½ æ°¸è¿œä¹Ÿä¸çŸ¥é“ç”¨æˆ·å°†å¦‚ä½•ä½¿ç”¨ä½ çš„è½¯ä»¶â€ã€‚å¦‚æœä½ æ²¡æ¥è§¦è¿‡è½¯ä»¶æµ‹è¯•çš„è¯å¾ˆå®¹æ˜“æ¼æ‰æµ‹è¯•åœºæ™¯ã€‚æ‰€ä»¥æˆ‘å»ºè®®å¼€å‘å®Œæˆåï¼ŒåŠ¡å¿…è¿›è¡Œç³»ç»Ÿçš„æµ‹è¯•ã€‚æµ‹è¯•å‰ç”¨è„‘å›¾è½¯ä»¶æˆ–æµç¨‹å›¾è½¯ä»¶ï¼Œå†™å¥½æµ‹è¯•ç”¨ä¾‹ï¼Œå°½å¯èƒ½æ¶µç›–æ¯ä¸€ç§æƒ…å†µã€‚å¦‚æœè½¯ä»¶ç¼–ç å®Œæˆåæ²¡æµ‹å‡ºæ¥ä»»ä½• Bugï¼Œä¸èƒ½è¯´æ˜ä»£ç å†™å¾—å¥½ï¼Œåªèƒ½è¯´æ˜æµ‹è¯•åšå¾—å·®ã€‚\n\nä¸€ä¸ªäººæ—¢ç¼–ç åˆæµ‹è¯•æœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œè¦æ³¨æ„æ‰¬é•¿é¿çŸ­ã€‚ä¼˜ç‚¹å°±æ˜¯ä½ æ¸…æ¥šçš„çŸ¥é“æ¯ä¸ªåœºæ™¯çš„è§¦å‘æ¡ä»¶å’Œè¾¹ç•Œæƒ…å†µï¼Œæ‰€ä»¥å¯ä»¥æ›´å¥½çš„æ¢³ç†æµ‹è¯•ç”¨ä¾‹ï¼Œä¸è‡³äºé—æ¼ã€‚åŒç†ï¼Œç”±äºä½ çŸ¥é“ä»£ç çš„é€»è¾‘ï¼Œæ‰€ä»¥å®¹æ˜“æƒ³å½“ç„¶çš„å¿½ç•¥ç®€å•åœºæ™¯ä¸‹çš„æµ‹è¯•ï¼Œè€Œè¿™å°±å¾€å¾€å®¹æ˜“å¿½ç•¥Bugã€‚æ‰€ä»¥æå‰æ¢³ç†æµ‹è¯•ç”¨ä¾‹ï¼Œä¸æ¼æ‰ä»»ä½•ç®€å•åœºæ™¯çš„åšæµ‹è¯•æ˜¯å¿…è¦çš„ã€‚\n\nå¾®ä¿¡å°ç¨‹åºçš„ç‰ˆæœ¬ç®¡ç†åˆ†ä¸ºä½“éªŒç‰ˆã€å®¡æ ¸ç‰ˆå’Œæ­£å¼ç‰ˆã€‚æµ‹è¯•è¦åœ¨ä½“éªŒç‰ˆä¸Šè¿›è¡Œï¼Œé™¤äº†éœ€è¦æƒé™æ‰èƒ½è®¿é—®å¤–ï¼Œä½“éªŒç‰ˆå’Œæ­£å¼ç‰ˆå¯¹äºç”¨æˆ·æ¥è¯´æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚è€Œå®¡æ ¸ç‰ˆå°±æ˜¯å‡†å¤‡å‘å¸ƒçš„ä½“éªŒç‰ˆç»è¿‡å¾®ä¿¡äººå·¥å®¡æ ¸åé€šè¿‡çš„ç‰ˆæœ¬ï¼Œå®¡æ ¸é€šè¿‡çš„å®¡æ ¸ç‰ˆå°±å¯ä»¥ç›´æ¥å‘å¸ƒæˆä¸ºæ­£å¼ç‰ˆäº†ã€‚\n\nå‘å¸ƒå‰æ³¨æ„è¦æƒ³å¥½å°ç¨‹åºçš„åç§°ï¼Œè®¾è®¡å¥½ logoï¼Œå› ä¸ºä¸€æ—¦å‘å¸ƒå†å»ä¿®æ”¹å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚å°ç¨‹åºæ‰€æœ‰çš„å®¡æ ¸æ—¶é—´éƒ½æ˜¯ 1-7 ä¸ªå·¥ä½œæ—¥ï¼Œæˆ‘ä½“éªŒä¸‹æ¥æ•´ä¸ªæµç¨‹éƒ½å¾ˆå¿«ï¼Œé™¤äº†å°ç¨‹åºåç§°å¼€å§‹ç”³è¯·çš„æ¶‰åŠä»–äººå•†æ ‡è¢«é©³å›å¤–ï¼Œå…¶ä½™çš„éƒ½åœ¨ 2 å¤©ä¹‹å†…é€šè¿‡ã€‚å› ä¸ºå°ç¨‹åºåç§°çš„å®¡æ ¸æ˜¯æœ€ä¸¥æ ¼çš„ï¼Œæ‰€ä»¥è¦æ³¨æ„å¦‚æœåç§°æ¶‰åŠå•†æ ‡ï¼Œè¦å‡†å¤‡å¥½å•†æ ‡æˆæƒä¹¦ï¼Œå¦åˆ™å°±å°½é‡é¿å…ï¼Œä»¥å…è€½è¯¯æ—¶é—´ã€‚\n\n### è¿è¥å’Œç»´æŠ¤\n\né¼“åŠ±ç”¨æˆ·åˆ†äº«æ˜¯ä¸€ä¸ªæé«˜å°ç¨‹åºè®¿é—®é‡çš„å¥½æ–¹æ³•ï¼Œè¿™å°±éœ€è¦è®¾ç½®ä¸€äº›å¥–åŠ±æœºåˆ¶ï¼Œä»¥åŠè¶³å¤Ÿæœ‰å¸å¼•åŠ›çš„æ–‡æ¡ˆå’Œå›¾ç‰‡ã€‚åŒæ ·çš„å¯ä»¥å€Ÿé‰´å…¶ä»–å°æ¸¸æˆçš„æœºåˆ¶å’Œè®¾è®¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ ¹æ®åå°æ•°æ®æ¥è°ƒæ•´çš„æ–‡æ¡ˆå’Œå›¾ç‰‡ã€‚çº¿ä¸‹å®£ä¼ æ˜¯å‰æœŸç§¯ç´¯ç¬¬ä¸€æ‰¹ç”¨æˆ·çš„æœ‰æ•ˆåŠæ³•ï¼Œå°¤å…¶å¯¹äºæœ‰ç‰¹å®šç›®æ ‡äººç¾¤çš„è½¯ä»¶ï¼Œçº¿ä¸‹å®£ä¼ åšçš„å¥½äº‹åŠåŠŸå€ã€‚æ¯”å¦‚æˆ‘å·²ç»åˆ¶ä½œå¥½äº†å®£ä¼ æµ·æŠ¥ï¼Œå‡†å¤‡å¾€ç¯®çƒåœºä¸Šè´´ï¼Œä½†ç”±äºå‘ç°äº‘æœåŠ¡æœ‰ç‚¹è´µï¼Œå°ç¨‹åºåˆæ²¡æœ‰ä»»ä½•ç›ˆåˆ©ç›®çš„å’Œè§„åˆ’ï¼Œæ‰€ä»¥å…ˆæš‚æ—¶ä½œç½¢ã€‚å¦å¤–ï¼Œå¾®ä¿¡å®˜æ–¹æä¾›æœ‰å¹¿å‘Šæ¥å…¥åŠŸèƒ½ï¼Œå¯è‡ªè¡ŒæŸ¥é˜…ã€‚\n\n![å‡†å¤‡å¥½çš„å®£ä¼ æµ·æŠ¥](/assets/images/54-4.jpg)\n","tags":["ä¸ªäººé¡¹ç›®","å¾®ä¿¡å°ç¨‹åº","å…¨æ ˆ"],"categories":["developer"]},{"title":"ã€Œç¯®çƒè£åˆ¤æ‰‹åŠ¿æŒ‘æˆ˜ã€å°ç¨‹åºå‘å¸ƒ","url":"/archives/59/","content":"![ã€Œç¯®çƒè£åˆ¤æ‰‹åŠ¿æŒ‘æˆ˜ã€](/assets/images/54-4.jpg)\n","tags":["app"],"categories":["timeline"]},{"title":"ä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡ UMVUE çš„æ±‚æ³•å½’çº³","url":"/archives/45/","content":"\nä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡ä¼°è®¡ UMVUE æ˜¯å‚æ•°ä¼°è®¡ä¸­çš„é‡éš¾ç‚¹å†…å®¹ï¼Œä¹Ÿæ˜¯å¾ˆå¤šé«˜æ ¡è€ƒç ”ä¸“ä¸šè¯¾å–œæ¬¢è€ƒå¯Ÿçš„é—®é¢˜. ä½†åœ¨å¾ˆå¤šæ•™æä¸­çš„ä»‹ç»å¹¶ä¸å…¨é¢ï¼Œä¸»è¦é—®é¢˜åœ¨äºæœ¬ç§‘ç”Ÿæ•™ææµ…å°è¾„æ­¢ï¼Œç ”ç©¶ç”Ÿæ•™ææœ‰äº›æ™¦æ¶©ï¼Œæ‰€ä»¥æˆ‘å½’çº³æ•´ç†äº†æ±‚è§£ UMVUE çš„èƒŒæ™¯çŸ¥è¯†å’Œå¸¸ç”¨è§£æ³•ï¼Œä¾›å¤§å®¶å‚é˜…æ‰¹è¯„.\n<!--more-->\n\n**è½¬è½½æ³¨æ˜å‡ºå¤„ï¼**\n\n## 1 ä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡ï¼ˆUMVUEï¼‰\n\n### 1.1 å‡æ–¹è¯¯å·®\n\nåœ¨å‚æ•°çš„ç‚¹ä¼°è®¡ä¸­ï¼Œéœ€è¦å¯¹å„ä¸ªä¼°è®¡é‡çš„å¥½åè¿›è¡Œè¯„ä»·. **å‡æ–¹è¯¯å·® (Mean Squared Error)** æ˜¯åœ¨å°æ ·æœ¬é‡ä¸‹å¯¹ç‚¹ä¼°è®¡è¿›è¡Œè¯„ä»·çš„å¸¸ç”¨æ ‡å‡†ï¼Œå®šä¹‰ä¸º $\\text{MSE}(\\hat\\theta) = E(\\hat\\theta - \\theta)^2$ï¼Œå…¶ä¸­ $\\hat\\theta$ ä»£è¡¨å¯¹å‚æ•°çœŸå€¼ $\\theta$ çš„ç‚¹ä¼°è®¡é‡. æ˜¾ç„¶ï¼Œä¼°è®¡çš„ MSE è¶Šå°è¶Šå¥½.\n\nå¯¹äºæ— åä¼°è®¡é‡ $E(\\hat\\theta)=\\theta$ï¼Œæœ‰\n\n$$\\begin{aligned}\n\\text{MSE}(\\hat\\theta) & = E[(\\hat\\theta - E\\hat\\theta)+(E\\hat\\theta-\\theta)]^2 \\\\\n           & = E(\\hat\\theta-E\\hat\\theta)^2 + E(E\\hat\\theta-\\theta)^2 + 2E[(\\hat\\theta-E\\hat\\theta)(E\\hat\\theta-\\theta)] \\\\\n           & = \\text{Var}(\\hat\\theta)\n\\end{aligned}$$\n\nå³ï¼Œæ— åä¼°è®¡çš„å‡æ–¹è¯¯å·®å³ä¸ºå…¶æ–¹å·®.\n\n### 1.2 ä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡\n\n**å®šä¹‰1**  è®¾æœ‰æ ·æœ¬ $X_1,X_2,\\cdots,X_n$ï¼Œå¯¹å¾…ä¼°å‚æ•° $\\theta$ï¼Œæœ‰ä¸€ä¸ªä¼°è®¡ç±»ï¼Œç§° $\\hat\\theta(X_1,X_2,\\cdots,X_n)$ æ˜¯è¯¥ä¼°è®¡ç±»ä¸­ $\\theta$ çš„**ä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡**ï¼Œå¦‚æœå¯¹è¯¥ä¼°è®¡ç±»ä¸­å¦å¤–ä»»æ„ä¸€ä¸ª $\\theta$ çš„ä¼°è®¡ $\\widetilde\\theta$ï¼Œåœ¨å‚æ•°ç©ºé—´ $\\Theta$ ä¸Šéƒ½æœ‰$\\text{MSE}_\\theta(\\hat\\theta)\\leqslant\\text{MSE}_\\theta(\\widetilde\\theta)$\n\nä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡é€šå¸¸åœ¨ä¸€ä¸ªç¡®å®šçš„ä¼°è®¡ç±»ä¸­è€ƒè™‘ï¼Œè‹¥ä¸åŠ é™åˆ¶ï¼Œä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡é€šå¸¸æ˜¯ä¸å­˜åœ¨çš„ï¼ˆ[1]287ï¼‰.\n\n### 1.3 ä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡\n\nå½“åœ¨å‚æ•° $\\theta$ çš„æ— åä¼°è®¡ç±»ä¸­è€ƒè™‘ä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡æ—¶ï¼Œç”±ï¼ˆ1ï¼‰å¼çŸ¥ï¼Œä¸€è‡´æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡å˜ä¸ºä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡.\n\n**å®šä¹‰2**  å¯¹å‚æ•°ä¼°è®¡é—®é¢˜ï¼Œè®¾ $\\hat\\theta$ æ˜¯ $\\theta$ çš„ä¸€ä¸ªæ— åä¼°è®¡ï¼Œå¦‚æœå¯¹å¦å¤–ä»»æ„ä¸€ä¸ª $\\theta$ çš„æ— åä¼°è®¡ $\\widetilde\\theta$ï¼Œåœ¨å‚æ•°ç©ºé—´ $\\Theta$ ä¸Šéƒ½æœ‰ $\\text{Var}_\\theta(\\hat\\theta)\\leqslant\\text{Var}(\\widetilde\\theta)$ï¼Œåˆ™ç§° $\\hat\\theta$ æ˜¯ $\\theta$ çš„**ä¸€è‡´æœ€å°æ–¹å·®æ— åä¼°è®¡ (Uniform Minimum-Variance Unbiased Estimator)**ï¼Œè®°ä¸º **UMVUE**.\n\n**å®šç†1** è®¾ $X=(x_1,x_2,\\cdots,x_n)$ æ˜¯æ¥è‡ªæ€»ä½“æ ·æœ¬çš„ä¸€ä¸ªæ ·æœ¬ï¼Œ$\\hat\\theta=\\hat\\theta(\\mathbf X)$ æ˜¯ $\\theta$ çš„ä¸€ä¸ªæ— åä¼°è®¡ï¼Œ$\\text{Var}(\\hat\\theta) < \\infty$. åˆ™ $\\hat\\theta$ æ˜¯ $\\theta$ çš„ UMVUE çš„å……è¦æ¡ä»¶æ˜¯ï¼Œå¯¹ä»»æ„ä¸€ä¸ªæ»¡è¶³ $E(\\varphi(\\mathbf X))=0$ å’Œ $\\text{Var}(\\varphi(\\mathbf X))<\\infty$ çš„ $\\varphi(\\mathbf X)$ï¼Œéƒ½æœ‰ $\\text{Cov}_\\theta(\\hat\\theta,\\varphi)=0, \\forall \\theta \\in \\Theta.$\n\n **è¯æ˜** å……åˆ†æ€§ï¼šå¯¹äº $\\theta$ çš„ä»»æ„ä¸€ä¸ªæ— åä¼°è®¡ $\\widetilde\\theta$ï¼Œä»¤ $\\varphi = \\widetilde\\theta - \\hat\\theta$ï¼Œåˆ™ $E(\\varphi)=0$.  äºæ˜¯\n\n$$\\begin{aligned}\n\\text{Var}(\\widetilde \\theta) &= E(\\widetilde\\theta - \\theta)^2 \\\\\n         &= E[(\\widetilde\\theta - \\hat\\theta) + (\\hat\\theta - \\theta)]^2 \\\\\n         &= E(\\varphi^2) + \\text{Var}(\\hat\\theta)+2\\text{Cov}(\\varphi, \\hat\\theta) \\\\\n         &\\geqslant \\text{Var}(\\hat\\theta)\n\\end{aligned}$$\n\nå¾—è¯ $\\hat\\theta$ ä¸º $\\theta$ çš„ UMVUE. å¿…è¦æ€§è¯æ˜è§å‚è€ƒæ–‡çŒ®[1]ç¬¬288é¡µ.\n\n## 2 å……åˆ†å®Œå¤‡ç»Ÿè®¡é‡\n\n### 2.1 å……åˆ†ç»Ÿè®¡é‡\n\n**å®šä¹‰3** è®¾æ ·æœ¬ $\\mathbf{X}$ çš„åˆ†å¸ƒæ—ä¸º $\\{f(\\boldsymbol\\theta,x), \\boldsymbol\\theta \\in \\Theta\\}$ï¼Œ$\\Theta$ æ˜¯å‚æ•°ç©ºé—´.   å¯¹äºç»Ÿè®¡é‡ $\\boldsymbol T(\\boldsymbol X)$ ï¼Œè‹¥åœ¨å·²çŸ¥ $\\boldsymbol T$ çš„æ¡ä»¶ä¸‹ï¼Œæ ·æœ¬ $\\mathbf X$ çš„æ¡ä»¶åˆ†å¸ƒä¸å‚æ•° $\\boldsymbol\\theta$ æ— å…³ï¼Œåˆ™ç§° $\\boldsymbol T$ ä¸º $\\boldsymbol\\theta$ çš„**å……åˆ†ç»Ÿè®¡é‡ (Sufficient Statistic)**.\n\n**å®šç†2 (å› å­åˆ†è§£å®šç†)**  è®¾ $\\boldsymbol{X} = (X_1,X_2,\\cdots,X_n)$ æ˜¯éšæœºå‘é‡ï¼Œ$\\boldsymbol T(\\boldsymbol x)$ æ˜¯å·²çŸ¥å‡½æ•°. åˆ™ $T = T(\\boldsymbol X)$ ä¸ºå……åˆ†ç»Ÿè®¡é‡çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ï¼šå­˜åœ¨ä¸¤ä¸ªå‡½æ•° $g\\left(\\boldsymbol T(\\boldsymbol{\\boldsymbol x}),\\boldsymbol \\theta \\right)$ å’Œ $h(\\boldsymbol{x})$ ä½¿å¾—å¯¹ä»»æ„çš„ $\\boldsymbol\\theta$ å’Œä»»ä¸€ç»„è§‚æµ‹å€¼ $\\boldsymbol{x}$ï¼Œæœ‰è”åˆæ¦‚ç‡å‡½æ•° (ç®€ä¾¿èµ·è§ï¼Œå°†è¿ç»­å˜é‡çš„æ¦‚ç‡å¯†åº¦å‡½æ•°å’Œç¦»æ•£å˜é‡çš„æ¦‚ç‡åˆ†å¸ƒåˆ—ç»Ÿç§°ä¸ºæ¦‚ç‡å‡½æ•°ï¼Œä¸‹åŒ)\n$$\nf(\\boldsymbol{x},\\boldsymbol\\theta) = g\\big(\\boldsymbol T(\\boldsymbol{x}),\\boldsymbol\\theta\\big)h(\\boldsymbol{x})\n$$\nå…¶ä¸­ $g(\\boldsymbol t,\\boldsymbol\\theta)$ æ˜¯ $\\boldsymbol  t,\\boldsymbol \\theta$ çš„å‡½æ•°ï¼Œ$\\boldsymbol T(\\boldsymbol x)=(T_1(\\boldsymbol x), T_2(\\boldsymbol x),\\cdots,T_m(\\boldsymbol x))$ å’Œ $h(\\boldsymbol x)$ æ˜¯ $\\boldsymbol x = (x_1,x_2,\\cdots,x_n)$ çš„å‡½æ•°.\n\n**ä¾‹1** è®¾ $X_1,\\cdots,X_n$ ä¸ºæ¥è‡ªæ­£æ€æ€»ä½“ $N(\\mu,\\sigma^2)$ çš„ i.i.d æ ·æœ¬ï¼Œæ±‚ $\\mu, \\sigma^2$ çš„å……åˆ†ç»Ÿè®¡é‡.\n\n**è§£** æ ·æœ¬çš„è”åˆæ¦‚ç‡å‡½æ•°ä¸º $f(\\boldsymbol{x},\\mu,\\sigma^2) = (\\sqrt{2\\pi}\\sigma)^{-n}\\mathrm{exp}\\left[-\\frac{\\sum\\limits_{i=1}^n(x_i - \\mu)^2}{2\\sigma^2}\\right]$ï¼Œæ•´ç†å¯å¾—\n$$\nf(\\boldsymbol{x},\\mu,\\sigma^2)=(\\sqrt{2\\pi}\\sigma)^{-n}\\mathrm{exp}\\left[-\\frac{\\sum\\limits_{i=1}^nx_i^2-2\\mu\\sum\\limits_{i=1}^nx_i + n\\mu^2}{2\\sigma^2}\\right]\n$$\nç”±å› å­åˆ†è§£å®šç† $\\boldsymbol T = (\\sum\\limits_{i=1}^n X_i, \\sum\\limits_{i=1}^n X_i^2)$ æ˜¯å‚æ•° $(\\mu, \\sigma^2)$ çš„å……åˆ†ç»Ÿè®¡é‡. è¿›ä¸€æ­¥æ•´ç†å¾—\n$$\nf(\\boldsymbol{x},\\mu,\\sigma^2)=(\\sqrt{2\\pi}\\sigma)^{-n}\\mathrm{exp}\\left[\\frac{n(\\bar x - \\mu)^2 + (n-1)s^2}{2\\sigma^2}\\right]\n$$\nè¯´æ˜ $(\\bar X,S^2)$ ä¹Ÿæ˜¯å‚æ•° $(\\mu, \\sigma^2)$ å¾—å……åˆ†ç»Ÿè®¡é‡. äº‹å®ä¸Š $(\\sum\\limits_{i=1}^n X_i, \\sum\\limits_{i=1}^n X_i^2)$ ä¸ $(\\bar X,S^2)$ æ˜¯ä¸€ä¸€å¯¹åº”çš„.\n\n**å®šç†2 Raoâ€“Blackwell å®šç†**ï¼šå‡è®¾ $g(\\boldsymbol X)$ æ˜¯ $\\theta$ çš„ä¸€ä¸ªä»»æ„ä¼°è®¡ï¼Œ$T(\\boldsymbol{X})$ æ˜¯ä¸€ä¸ªå……åˆ†ç»Ÿè®¡é‡ï¼›é‚£ä¹ˆ $g(\\boldsymbol{X})$ ç›¸å¯¹äºç»™å®š $T(\\boldsymbol X)$ çš„æ¡ä»¶æœŸæœ› $\\widetilde{g}=E\\big(g(\\boldsymbol{X})|T\\big)$ æ˜¯ä¸€ä¸ªæ¯” $g(\\boldsymbol X)$ æ›´å¥½çš„ä¼°è®¡é‡ï¼ˆè‡³å°‘ä¸å·®äºï¼‰ï¼Œå³ $\\mathrm{Var}(\\widetilde{g})\\leqslant\\mathrm{Var}(g)$.\n\n**è¯æ˜** ç”±å®šä¹‰3çŸ¥ $\\widetilde{g}=E\\big(g(\\boldsymbol{X})|T\\big)$ ä¸å‚æ•° $\\theta$ æ— å…³ï¼Œæ•… $\\widetilde{g}$ å¯ä½œä¸º $\\theta$ çš„ä¼°è®¡é‡ï¼Œå¹¶å¯è¡¨ç¤ºä¸ºå……åˆ†ç»Ÿè®¡é‡ $T$ çš„å‡½æ•°ï¼Œè®°ä¸º $\\widetilde{g} = \\widetilde{g}(T)$. ç”±é‡æœŸæœ›å…¬å¼å¾— $E(\\widetilde{g}) =E(g)$ï¼Œä¸å¦¨è®°ä¸º $\\theta_0$. $\\mathrm{Var}(g) = E\\left[(g-\\widetilde g)+(\\widetilde{g}-\\theta_0)\\right]^2=E(g-\\widetilde{g})^2+E(\\widetilde{g}-\\theta_0)^2+2E\\left[(g-\\widetilde{g})(\\widetilde{g}-\\theta_0)\\right]$ï¼Œå…¶ä¸­\n\n$$\\begin{aligned}\nE\\left[(g-\\tilde g)(\\tilde g - \\theta_0)\\right]\n&= E\\left\\{E\\left[(g-\\tilde g)(\\tilde g - \\theta_0)|T\\right]\\right\\} \\\\\n&= E\\left\\{(\\tilde g-\\theta_0)E\\left[(g-\\tilde g)|T\\right]\\right\\} \\\\\n& = E\\left\\{(\\tilde g-\\theta_0)\n\\left[E(g|T)-E(\\tilde g|T)\\right]\n\\right\\} \\\\\n& = E\\left[(\\tilde g-\\theta_0)\n(\\tilde g-\\tilde g)\n\\right] \\\\\n&=0\n\\end{aligned}$$\n\næ•… $\\mathrm{Var}(g) = E(g-\\widetilde{g})^2 + \\mathrm{Var}(\\widetilde{g})$, åˆ™ $\\mathrm{Var}(\\widetilde{g}) \\leqslant \\mathrm{Var}(g)$.\n\nç”± Raoâ€“Blackwell å®šç†å¯çŸ¥ï¼Œè‹¥å‚æ•°å¾— UMVUE å­˜åœ¨ï¼Œåˆ™ä¸€å®šæ˜¯å……åˆ†ç»Ÿè®¡é‡æˆ–å……åˆ†ç»Ÿè®¡é‡çš„å‡½æ•°.\n\n### 2.2 å®Œå¤‡ç»Ÿè®¡é‡\n\n**å®šä¹‰4** è®¾æ€»ä½“ $X$ çš„åˆ†å¸ƒå‡½æ•°æ˜¯ $F(x;\\theta)$ï¼Œ$\\Theta$ æ˜¯å‚æ•°ç©ºé—´ï¼Œ$\\mathbf T=\\mathbf T(\\mathbf X)$ æ˜¯åŸºäº $X$ çš„æ ·æœ¬ $X_1, X_2, \\cdots, X_n$ çš„ç»Ÿè®¡é‡. å¦‚æœå¯¹äºä»»ä½•å‡½æ•° $g(\\mathbf t)$ï¼Œæ¡ä»¶\n$$\nE_\\theta g(\\boldsymbol T) = 0,\\forall \\boldsymbol\\theta \\in \\Theta\n$$\nè•´æ¶µ $P_\\theta(g(\\mathbf T))=0) = 1(\\forall \\boldsymbol\\theta \\in \\Theta)$ï¼Œåˆ™ç§° $\\mathbf T(\\mathbf X)$ æ˜¯**å®Œå…¨ç»Ÿè®¡é‡**æˆ–**å®Œå¤‡ç»Ÿè®¡é‡ (Complete Statistic)**.\n\næ—¢æ˜¯å……åˆ†çš„åˆæ˜¯å®Œå¤‡çš„ç»Ÿè®¡é‡ç§°ä¸º**å……åˆ†å®Œå¤‡ç»Ÿè®¡é‡**.\n\n## 3 æŒ‡æ•°å‹åˆ†å¸ƒæ—\n\n### 3.1 æŒ‡æ•°åˆ†å¸ƒæ—\n\n**å®šä¹‰5** è®¾ $\\boldsymbol X = (X_1, X_2, \\cdots, X_n)$ æ˜¯éšæœºå‘é‡ï¼Œ$h(\\boldsymbol x), T_i(\\boldsymbol x)$ æ˜¯ $\\boldsymbol x = (x_1, x_2, \\cdots, x_n)$ çš„å®å€¼å‡½æ•°ï¼Œ$C(\\boldsymbol \\theta), Q_i(\\boldsymbol \\theta)$ æ˜¯ $\\boldsymbol \\theta$ çš„å‡½æ•°. å¦‚æœ $\\boldsymbol X$ æœ‰è”åˆæ¦‚ç‡å‡½æ•°\n$$\nf(x,\\boldsymbol\\theta) = C(\\boldsymbol\\theta)\\mathrm{exp}\\left[\\sum\\limits_{i=1}^mQ_i(\\boldsymbol\\theta)T_i(\\boldsymbol x)\\right]h(\\boldsymbol x),\\boldsymbol\\theta\\in\\Theta\n$$\nåˆ™ç§° $\\boldsymbol X$ æœä»**æŒ‡æ•°æ—åˆ†å¸ƒ**ï¼Œå…¶åˆ†å¸ƒæ—ç§°ä¸º**æŒ‡æ•°å‹åˆ†å¸ƒæ—**.\n\n### 3.2 è‡ªç„¶å½¢å¼\n\n**å®šä¹‰6** å¯¹äºä¸Šè¿°æŒ‡æ•°å‹åˆ†å¸ƒæ—ï¼Œå¼•å…¥æ–°å‚æ•°\n$$\n\\eta_i = Q_i(\\boldsymbol\\theta), i = 1,2,\\cdots,m.\n$$\nå¦‚æœèƒ½ä» $(18)$ ä¸­è§£å‡ºå”¯ä¸€ $\\theta_i = h_i(\\boldsymbol\\eta)(1\\leqslant i \\leqslant m)$ï¼Œå…¶ä¸­ $\\boldsymbol \\eta = (\\eta_1, \\eta_2,\\cdots,\\eta_m)$ï¼Œåˆ™æœ‰ $C(\\boldsymbol \\theta) = \\widetilde C(\\boldsymbol \\eta)$ï¼Œè¿™å°±å¾—åˆ°æŒ‡æ•°æ—åˆ†å¸ƒçš„è‡ªç„¶å½¢å¼\n$$\n\\tilde C(\\boldsymbol\\eta)\\mathrm{exp}\\left[\\sum_{i=1}^m\\eta_iT_i(\\boldsymbol x)\\right]h(\\boldsymbol x)\n$$\nåˆ™ç§° $(19)$ ä¸º**è‡ªç„¶æŒ‡æ•°æ—**æˆ–**æ ‡å‡†æŒ‡æ•°æ—**ï¼Œç§°\n$$\n\\widetilde{\\Theta} = \\{\\boldsymbol{\\eta}|\\boldsymbol{\\eta} = \\big(Q_1(\\boldsymbol\\theta),Q_2(\\boldsymbol{\\theta}),\\cdots,Q_m(\\boldsymbol{\\theta})\\big), \\boldsymbol{\\theta}\\in\\Theta\\}\n$$\nä¸º**è‡ªç„¶å‚æ•°ç©ºé—´**æˆ–**æ ‡å‡†å‚æ•°ç©ºé—´**.\n\n**ä¾‹2** è¯æ˜ $\\mathrm{Ga}(\\alpha, \\lambda)$ çš„æ ·æœ¬åˆ†å¸ƒæœä»æŒ‡æ•°å‹åˆ†å¸ƒï¼Œå¹¶å†™å‡ºå…¶è‡ªç„¶å½¢å¼.\n\n**è§£** è®° $\\boldsymbol\\Theta = (\\theta_1, \\theta_2) = (\\alpha, \\lambda)$ï¼Œåˆ™æ ·æœ¬éšæœºå˜é‡ $X=(X_1,X_2,\\cdots, X_n)$ çš„è”åˆå¯†åº¦ä¸º\n\n$$\\begin{aligned}\nf(\\boldsymbol x,\\boldsymbol{\\Theta}) &= \\frac{\\lambda^{n\\alpha}}{\\Gamma^n(\\alpha)}\\mathrm{exp}\\left[(\\alpha-1)\\sum_{i=1}^n\\ln x_i-\\lambda\\sum_{i=1}^nx_i\\right] \\\\\n& = C(\\boldsymbol\\Theta)\\mathrm{exp}\\left[Q_1(\\boldsymbol\\theta)T_1(\\boldsymbol{x}) + Q_2(\\boldsymbol{\\theta})T_2(\\boldsymbol{x})\\right]h(\\boldsymbol{x})\n\\end{aligned}$$\n\nå…¶ä¸­ $C(\\Theta) = \\frac{\\theta_2^{n\\theta_1}}{\\Gamma^n(\\theta_1)},\nQ_1(\\boldsymbol{\\theta})  = \\theta_1 - 1,\nQ_2(\\boldsymbol{\\theta}) = -\\theta_2,\nh(\\boldsymbol{x}) = 1.$ $(\\theta_1, \\theta_2)$çš„å‚æ•°ç©ºé—´æ˜¯\n$$\n\\Theta = \\left\\{\\boldsymbol{\\theta}=(\\theta_1,\\theta_2)|\\theta_1>0,\\theta_2>0 \\right\\}.\n$$\næ‰€ä»¥ $\\boldsymbol{X}$ æœä»æŒ‡æ•°åˆ†å¸ƒ. ä¸‹é¢å– $\\eta_1 = Q_1(\\boldsymbol{\\theta})  = \\theta_1 - 1, \\eta_2 = Q_2(\\boldsymbol{\\theta}) = -\\theta_2$ï¼Œåˆ™å”¯ä¸€è§£å‡º\n$$\n\\theta_1 = \\eta_1 + 1, \\theta_2 = -\\eta_2, \\widetilde{C}(\\boldsymbol{\\eta}) = \\frac{(-\\eta_2)^{n(\\eta_1 + 1)}}{\\Gamma^n(\\eta_1 + 1)}\n$$\næ‰€ä»¥ $X$ åˆ†å¸ƒçš„è‡ªç„¶å½¢å¼ä¸º\n$$\n\\tilde C(\\boldsymbol\\eta)\\mathrm{exp}\\left[\\eta_1T_1(\\boldsymbol{x})+\\eta_2T_2(\\boldsymbol{x})\\right]h(\\boldsymbol x)\n$$\nä¸”è‡ªç„¶å‚æ•°ç©ºé—´ä¸º\n$$\n\\widetilde{\\Theta} = \\left\\{\\boldsymbol{\\eta}=(\\eta_1,\\eta_2) | \\eta_1>-1, \\eta_2<0\\right\\},\n$$\n**å®šç†3** å¦‚æœ $\\boldsymbol X$ çš„æ¦‚ç‡åˆ†å¸ƒæ—èƒ½å†™æˆæŒ‡æ•°åˆ†å¸ƒçš„è‡ªç„¶å½¢å¼ $(19)$ï¼Œä¸”è‡ªç„¶å‚æ•°ç©ºé—´ $\\widetilde\\Theta$ æœ‰å†…ç‚¹ï¼Œåˆ™\n$$\n\\boldsymbol T(\\boldsymbol{X}) = \\big(T_1(\\boldsymbol{X}),T_2(\\boldsymbol{X}),\\cdots, T_m(\\boldsymbol{X})\\big)\n$$\næ˜¯ $\\boldsymbol\\theta$ å’Œ $\\boldsymbol\\eta$ å……åˆ†å®Œå¤‡ç»Ÿè®¡é‡.\n\n**è¯æ˜** ç”±å› å­åˆ†è§£å®šç†æ˜“è¯ $T(\\boldsymbol{X})$ ä¸ºå……åˆ†ç»Ÿè®¡é‡ï¼Œå®Œå…¨æ€§çš„è¯æ˜å‚è§å‚è€ƒèµ„æ–™[2]ç¬¬ 80 é¡µ.\n\n**ä¾‹3** å¯¹äºæ­£æ€åˆ†å¸ƒ $\\{N(0,\\sigma^2):\\sigma\\in \\mathbb R^+ \\}$ï¼Œè¯æ˜ç»Ÿè®¡é‡ $X_1$ ä¸æ˜¯å®Œå¤‡ç»Ÿè®¡é‡ï¼Œè€Œ $T=\\sum\\limits_{i=1}^n X_i^2$ æ˜¯å®Œå¤‡ç»Ÿè®¡é‡.\n\n**è§£** $E_\\sigma(X_1) = 0$ è€Œ $P_\\sigma(X_1 = 0) = 0\\not=1(\\forall \\sigma\\in\\mathbb R^+)$ï¼Œæ•… $X_1$ ä¸æ˜¯å®Œå¤‡ç»Ÿè®¡é‡.\n\n$X_i / \\sigma \\sim N(0,1)$ï¼Œæ•… $T/\\sigma^2 \\sim Ga(\\frac n 2,\\frac 1 2)$ï¼Œå› æ­¤ $T \\sim Ga(\\frac n2, \\frac 1{2\\sigma^2})$ï¼Œç”±ä¾‹1çŸ¥ï¼Œ$\\boldsymbol X$ æœä»æŒ‡æ•°å‹åˆ†å¸ƒæ—ï¼Œä¸”å…¶è‡ªç„¶å‚æ•°ç©ºé—´æœ‰å†…ç‚¹ï¼Œæ•…ç”±å®šç†3ï¼Œ$T$ ä¸ºå……åˆ†å®Œå¤‡ç»Ÿè®¡é‡ï¼Œè¯å¿….\n\n## 4 Lehmannâ€“ScheffÃ© å®šç†\n\n**å®šç†4 Lehmannâ€“ScheffÃ© å®šç†** è®¾ $\\boldsymbol T = \\boldsymbol T(\\boldsymbol{X})$ æ˜¯å……åˆ†å®Œå¤‡ç»Ÿè®¡é‡ï¼Œè‹¥ $\\hat g(\\boldsymbol X)$ æ˜¯ $h(\\boldsymbol\\theta)$ çš„æ–¹å·®æœ‰é™çš„æ— åä¼°è®¡ï¼Œå³\n$$\nE_\\theta\\hat g(\\boldsymbol{X}) = h(\\boldsymbol{\\theta}), \\mathrm{Var}_\\theta(\\hat g(\\boldsymbol{X}))<\\infty, \\forall \\boldsymbol{\\theta} \\in \\Theta,\n$$\nåˆ™æ¡ä»¶æ•°å­¦æœŸæœ›\n$$\n\\eta(\\boldsymbol{T}) = E\\left[\\hat g(\\boldsymbol{X})|T\\right]\n$$\næ˜¯ $h(\\boldsymbol{\\theta})$ çš„å”¯ä¸€çš„ UMVUE. è¯æ˜è§å‚è€ƒæ–‡çŒ®[3]103é¡µ\n\n## 5 Cramer-Rao ä¸ç­‰å¼\n\n**å®šç†5 Cramer-Rao ä¸ç­‰å¼** è®¾æ€»ä½“åˆ†å¸ƒ $f(x,\\theta)$ï¼Œ$X_1,\\cdots,X_n$ æ˜¯æ¥è‡ªè¯¥æ€»ä½“çš„ç®€å•æ ·æœ¬ï¼Œ$T=T(X_1,\\cdots,X_n)$ æ˜¯ $g(\\theta)$ çš„ä»»ä¸€ä¸ªæ— åä¼°è®¡ï¼Œ$g'(\\theta) = \\frac{\\partial g(\\theta)}{\\partial\\theta}$ å­˜åœ¨ï¼Œä¸”å¯¹ $\\Theta$ ä¸­ä¸€åˆ‡ $\\theta$ï¼Œå¯¹\n$$\ng'(\\theta) = \\int_{-\\infty}^\\infty\\cdots\\int_{-\\infty}^\\infty T(x_1,\\cdots,x_n)\\prod_{i=1}^np(x_i,\\theta)\\mathrm dx_1\\cdots\\mathrm dx_n,\n$$\nçš„å¾®å•†å¯åœ¨ç§¯åˆ†å·ä¸‹è¿›è¡Œï¼Œå³\n$$\ng'(\\theta) =  \\int_{-\\infty}^\\infty\\cdots\\int_{-\\infty}^\\infty T(x_1,\\cdots,x_n)\\frac\\partial{\\partial\\theta}\\left(\\prod_{i=1}^np(x_i,\\theta)\\right)\\mathrm dx_1\\cdots\\mathrm dx_n.\n$$\nåˆ™æœ‰\n$$\n\\mathrm{Var}(T) \\geqslant \\frac{[g'(\\theta)]^2}{nI(\\theta)}\n$$\nå…¶ä¸­ $I(\\theta) = E\\left[\\frac\\partial{\\partial\\theta}\\ln f(x,\\theta)\\right]^2$ ä¸ºè´¹å¸Œå°”ä¿¡æ¯é‡ï¼Œ$\\frac{[g'(\\theta)]^2}{nI(\\theta)}$ ç§°ä¸ºå‚æ•°ä¼°è®¡çš„ C-R ä¸‹é™. è¯æ˜è¯¦è§å‚è€ƒæ–‡çŒ®[1]291é¡µ.\n\n$(31)$ å¼ä¸­è‹¥ç­‰å·æˆç«‹åˆ™ç§° $T$ æ˜¯ $g(\\theta)$ çš„æœ‰æ•ˆä¼°è®¡ï¼Œæœ‰æ•ˆä¼°è®¡ä¸€å®šæ˜¯ UMVUE.\n\n## 6 UMVUE çš„æ±‚æ³•\n\næ ¹æ® Raoâ€“Blackwell å®šç† ï¼ŒUMVUE è‹¥å­˜åœ¨ä¸€å®šæ˜¯åŸºäºå……åˆ†ç»Ÿè®¡é‡çš„ä¼°è®¡. æ•…å¯»æ‰¾ UMVUE å¯ä»¥åˆ©ç”¨å› å­åˆ†è§£å®šç†å¯»æ‰¾å……åˆ†ç»Ÿè®¡é‡ï¼Œç„¶åå¯¹å……åˆ†ç»Ÿè®¡é‡è¿›è¡Œæ— åä¿®æ­£ï¼Œå¾—åˆ°å¯èƒ½çš„ UMUVEï¼Œæœ€åå¯ä»¥åˆ©ç”¨ UMVUE çš„å……è¦æ¡ä»¶ (å®šç†1)ã€Lehmannâ€“ScheffÃ© å®šç†ã€Cramer-Rao ä¸ç­‰å¼ç­‰æ–¹æ³•è¯´æ˜å…¶æ–¹å·®ä¸€è‡´æœ€å°.\n\nä¸‹é¢é€šè¿‡ä¾‹é¢˜è¯´æ˜æ±‚ UMVUE çš„å…·ä½“æ€è·¯.\n\n**ä¾‹4**  è®¾ $X_1,\\cdots,X_n$ ä¸ºæ¥è‡ªæ­£æ€æ€»ä½“ $N(\\mu,\\sigma^2)$ çš„ i.i.d æ ·æœ¬ï¼Œæ±‚ $\\mu, \\sigma^2$ çš„ UMVUE.\n\n**è§£æ³•1** ç”±ä¾‹1çŸ¥ï¼Œ$(\\bar X, S^2)$ æ˜¯ $(\\mu, \\sigma^2)$ çš„å……åˆ†ç»Ÿè®¡é‡. $E(\\bar X) = \\mu, E(S^2)=\\sigma^2$ å‡ä¸ºæ— åä¼°è®¡ï¼Œä¸”ä¸ºå……åˆ†ç»Ÿè®¡é‡çš„å‡½æ•°. ä»¤ $E(\\varphi(\\boldsymbol{X})) = 0$ï¼Œå³\n\n$$\\int_{-\\infty}^\\infty\\cdots\\int_{-\\infty}^\\infty\\varphi(x_1,\\cdots,x_n)\\frac1{(2\\pi\\sigma^2)^{n/2}}\\mathrm{exp}\\{-\\frac1{2\\sigma^2}\\sum_{i=1}^n(x_i-\\mu)^2\\}\\mathrm{d}x_1\\cdots\\mathrm{d}x_n = 0$$\n\nä¸¤è¾¹å¯¹ $\\mu$ æ±‚å¯¼ï¼Œå¾—\n\n$$\\begin{aligned}\n\\int_{-\\infty}^\\infty\\cdots\\int_{-\\infty}^\\infty\\varphi(x_1,\\cdots,x_n)\\sum_{i=1}^n(x_i-\\mu)\\mathrm{exp}\\{-\\frac1{2\\sigma^2}\\sum_{i=1}^n(x_i-\\mu)^2\\}\\mathrm{d}x_1\\cdots\\mathrm{d}x_n &= 0 \\\\\n\\int_{-\\infty}^\\infty\\cdots\\int_{-\\infty}^\\infty\\varphi(x_1,\\cdots,x_n)\\bar xf(\\boldsymbol{x},\\theta,\\sigma^2)\\mathrm{d}x_1\\cdots\\mathrm{d}x_n &= 0 \\\\\n\\mathrm{Cov}(\\varphi, \\bar X) &= 0\n\\end{aligned}$$\n\nç”±å®šç†1çŸ¥ï¼Œ$\\bar X$ æ˜¯ $\\mu$ çš„ UMVUE.\n\nåŒç†ï¼Œå¼ $(32)$ ä¿©è¾¹å¯¹ $\\sigma^2$ æ±‚å¯¼ï¼Œå¾—åˆ° $\\mathrm{Cov}(\\varphi, S^2) = 0$ï¼Œè¯å¾— $S^2$ æ˜¯ $\\sigma^2$ çš„UMVUE.\n\n**è§£æ³•2** è®° $\\boldsymbol{T} =(T_1(\\boldsymbol{X}), T_2(\\boldsymbol{X})) = (\\sum\\limits_{i=1}^nX_i, \\sum_{i=1}^n X_i^2)$ æ ·æœ¬çš„è”åˆå¯†åº¦å‡½æ•°ä¸º\n\n$$\\begin{aligned}\nf(\\boldsymbol{x},\\theta,\\sigma^2) &= \\frac1{(2\\pi\\sigma^2)^{n/2}}\\mathrm{exp}\\left[-\\frac1{2\\sigma^2}\\sum_{i=1}^n(x_i-\\mu)^2\\right] \\\\\n& = \\frac1{(2\\pi\\sigma^2)^{n/2}}\\mathrm{exp}\\left(-\\frac{n\\mu^2}{2\\sigma^2}\\right)\\mathrm{exp}\\left[\\frac{\\mu T_1(\\boldsymbol{x})}{\\sigma^2}-\\frac{T_2(\\boldsymbol{x})}{2\\sigma^2}\\right] \\\\\n& = C(\\boldsymbol{\\Theta})\\mathrm{exp}\\left[Q_1(\\boldsymbol{\\theta})T_1(\\boldsymbol{x}) + Q_2(\\boldsymbol{\\theta})T_2(\\boldsymbol{x})\\right]h(\\boldsymbol{x})\n\\end{aligned}$$\n\nå…¶ä¸­ï¼Œ$\\boldsymbol{\\theta} = (\\theta_1, \\theta_2) = (\\mu,\\sigma^2), h(\\boldsymbol{x})=1$.\n\nå– $\\eta_1 = Q_1(\\boldsymbol{\\theta}) = \\frac{\\theta_1}{\\theta_2}, \\eta_2 = Q_2(\\boldsymbol{\\theta}) = \\frac{-1}{2\\theta_2}$ï¼Œå”¯ä¸€è§£å‡º $\\theta_1=\\frac{-\\eta_1}{2\\eta_2}, \\theta_2=\\frac{-1}{2\\eta_2}$ï¼Œå¸¦å…¥ $C(\\boldsymbol{\\theta})$ å¾—åˆ° $\\widetilde{C}(\\boldsymbol{\\eta})$. æ‰€ä»¥ $\\boldsymbol{X}$ çš„åˆ†å¸ƒæ—ä¸ºæŒ‡æ•°å‹åˆ†å¸ƒæ—ä¸”æœ‰è‡ªç„¶å½¢å¼ï¼Œè‡ªç„¶å‚æ•°ç©ºé—´ä¸º\n$$\n\\widetilde{\\Theta} = \\left\\{\\boldsymbol{\\eta}=(\\eta_1,\\eta_2)|\\eta_1\\in(-\\infty,\\infty),\\eta_2<0\\right\\}\n$$\n\nç”±å®šç†3çŸ¥ï¼Œ$\\boldsymbol{T} = (\\sum\\limits_{i=1}^nX_i, \\sum_{i=1}^n X_i^2)$ æ˜¯ $\\boldsymbol{\\Theta}=(\\mu, \\sigma^2)$ çš„å……åˆ†å®Œå¤‡ç»Ÿè®¡é‡ï¼ŒåŸºäºè¯¥ç»Ÿè®¡é‡æ„é€  $\\mu, \\sigma^2$ çš„æ— åä¼°è®¡ $\\bar X, S^2$. æ˜¾ç„¶ $\\bar X, S^2$ éƒ½å¯ä»¥è¡¨ç¤ºä¸º $\\boldsymbol{T}$ çš„å‡½æ•°ï¼Œæ•…ç”±Lehmannâ€“ScheffÃ© å®šç† $\\bar X = E(\\bar X|\\boldsymbol{T})$ å’Œ $S^2=E(S^2|\\boldsymbol{T})$ åˆ†åˆ«ä¸º $\\mu$ å’Œ $\\sigma^2$ çš„ UMVUE.\n\nä¸Šä¾‹ä¸­ï¼Œåˆ†å¸ƒæ—ä¸ºæŒ‡æ•°å‹åˆ†å¸ƒæ—ï¼Œä½¿ç”¨å®šç†3ç¡®å®šå……åˆ†å®Œå¤‡ç»Ÿè®¡é‡æ˜¯æ–¹ä¾¿çš„ï¼Œç„¶åä½¿ç”¨ Lehmannâ€“ScheffÃ© å®šç†è¯´æ˜ UMVUE. å¯¹äºéæŒ‡æ•°æ—åˆ†å¸ƒï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å› å­åˆ†è§£å®šç†å’Œå®šä¹‰4è¯´æ˜å……åˆ†æ€§å’Œå®Œå¤‡æ€§.\n\n**ä¾‹5** è®¾ $X_1,\\cdots,X_n$ ä¸ºæ¥è‡ªå‡åŒ€æ ·æœ¬åˆ†å¸ƒ $U(0, \\theta), \\theta>0$ çš„ i.i.d æ ·æœ¬ï¼Œæ±‚ $\\theta$ çš„UMVUE.\n\n**è§£** æ ·æœ¬çš„è”åˆæ¦‚ç‡åˆ†å¸ƒä¸º $f(\\boldsymbol{x},\\theta)=\\frac1{\\theta^n}I_{\\{0<x_{(n)}<\\theta\\}}$ï¼Œå…¶ä¸­ $X_{(n)}=\\max\\{\\boldsymbol{X}\\}$ ä¸ºæ¬¡åºç»Ÿè®¡é‡. æ ¹æ®å› å­åˆ†è§£å®šç†ï¼Œ$T=X_{(n)}$ ä¸ºå……åˆ†ç»Ÿè®¡é‡. $T$ çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º $f(t,\\theta)=n\\frac{t^{n-1}}{\\theta^n} I_{\\{0<x_{(n)}<\\theta\\}}$. åˆ™ $E(T) = \\frac{n}{n+1}\\theta$ï¼Œå¯å¾— $\\frac{n+1}nT$ ä¸º $\\theta$ çš„æ— åä¼°è®¡ï¼Œè®°ä¸º $\\hat\\theta(T)$. è®¾ $E(g(T)) = 0$ï¼Œå³\n\n$$\\begin{aligned}\n\\int_0^\\theta g(T)n\\frac{t^{n-1}}{\\theta^n}\\mathrm{d}t &= 0 \\\\\n\\int_0^\\theta g(T)t^{n-1}\\mathrm{d}t &= 0 \\\\\n\\end{aligned}$$\n\nä¸¤è¾¹å¯¹ $\\theta$ æ±‚å¯¼ï¼Œå¾— $g(\\theta) = 0$ï¼Œç”±å®šä¹‰4çŸ¥ $T$ ä¸ºå®Œå¤‡ç»Ÿè®¡é‡. $\\hat\\theta(T) = E(\\hat\\theta(T)|T)$, ç”± Lehmannâ€“ScheffÃ© å®šç†ï¼Œ$\\hat\\theta = \\frac{n+1}nX_{(n)}$ ä¸º $\\theta$ çš„ UMVUE.\n\nç›¸å¯¹äºä»¥ä¸Šè§£æ³•ï¼Œä¼°è®¡çš„ C-R ä¸‹é™çš„è®¡ç®—æ˜¯ç®€å•è€Œç›´æ¥çš„ï¼Œæ‰€ä»¥å¯¹äºæŸä¼°è®¡æˆ‘ä»¬å¯ä»¥å…ˆéªŒè¯å®ƒçš„æ–¹å·®æ˜¯å¦è¾¾åˆ° C-R ä¸‹é™ï¼Œä¸€æ—¦è¾¾åˆ° C-R ä¸‹é™åˆ™ç«‹å³è¯´æ˜è¯¥ä¼°è®¡ä¸º UMVUE.\n\n**ä¾‹6** è®¾æ€»ä½“ä¸ºæŒ‡æ•°åˆ†å¸ƒ $Exp(1/\\theta)$ï¼Œæ±‚å‚æ•° $\\theta$ UMVUE.\n\n**è§£** å…ˆè®¡ç®—è´¹å¸Œå°”ä¿¡æ¯é‡ $I(\\theta) = E\\left[\\frac\\partial{\\partial\\theta}\\ln f(x,\\theta)\\right]^2 = \\frac1{\\theta^2}$ï¼Œåˆ™ $\\theta$ çš„ C-R ä¸‹é™ä¸º $\\frac{1}{nI(\\theta)} = \\frac{\\theta^2}n$. å¯¹äº $\\theta$ çš„æ— åä¼°è®¡é‡ $\\bar X = \\frac1n\\sum\\limits_{i=1}^n X_i$ï¼Œå…¶æ–¹å·®ä¸º $\\mathrm{Var}(\\bar X) = \\frac{\\theta^2}n$ è¾¾åˆ° C-R ä¸‹é™ï¼Œæ•…ä¸ºæœ‰æ•ˆä¼°è®¡ï¼Œåˆ™ä¸º UMVUE.\n\né€šè¿‡ä»¥ä¸Šä¾‹é¢˜ï¼Œæ€»ç»“ UMVUE çš„æ±‚æ³•æ€è·¯.\n\n1. é¦–å…ˆåº”æ˜ç¡®ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å‚æ•°éƒ½æœ‰ UMVUE.\n\n2. æ ¹æ® Raoâ€“Blackwell å®šç†ï¼Œè‹¥ UMVUE å­˜åœ¨åˆ™ä¸€å®šæ˜¯åŸºäºå……åˆ†ç»Ÿè®¡é‡çš„ï¼Œæ•…åº”å…ˆå¯»æ‰¾å‚æ•°çš„å……åˆ†ç»Ÿè®¡é‡.\n\n3. ç¡®å®šå¾…è¯æ˜çš„ç»Ÿè®¡é‡ï¼Œä¸€èˆ¬åŸºäºå……åˆ†ç»Ÿè®¡é‡æ„é€ ï¼Œç„¶åè¿›è¡Œæ— åä¿®æ­£.\n\n4. è¯æ˜é€‰æ‹©çš„ç»Ÿè®¡é‡ä¸º UMVE. å…·ä½“åœ°ï¼Œ\n   1. é¦–å…ˆè€ƒè™‘ C-R ä¸‹é™ï¼Œå› ä¸ºè¯¥æ–¹æ³•è®¡ç®—ç›¸å¯¹ç®€å•ï¼Œä¸€æ—¦ä¼°è®¡çš„æ–¹å·®è¾¾åˆ°ä¸‹é™ï¼Œåˆ™ç«‹å³è¯´æ˜å…¶ä¸º UMVUE. ä½†åº”æ³¨æ„æ–¹å·®è¾¾åˆ° C-R ä¸‹é™æ˜¯ UMVUE çš„å……åˆ†ä¸å¿…è¦æ¡ä»¶.\n   2. ç”±äºæŒ‡æ•°æ—åˆ†å¸ƒçš„ä¼˜è‰¯æ€§è´¨ï¼Œæ•´ç†è”åˆæ¦‚ç‡å‡½æ•°ï¼Œè¯æ˜å…¶ä¸ºæŒ‡æ•°æ—åˆ†å¸ƒä¸”æœ‰è‡ªç„¶å½¢å¼ï¼Œå¹¶å†™å‡ºè‡ªç„¶å‚æ•°ç©ºé—´ï¼Œä½¿ç”¨å®šç†3è¯´æ˜ UMVUE.\n   3. è‹¥åˆ†å¸ƒæ—ä¸æ˜¯æŒ‡æ•°æ—åˆ†å¸ƒï¼Œåˆ™è€ƒè™‘ä½¿ç”¨å®Œå¤‡ç»Ÿè®¡é‡çš„å®šä¹‰è¯´æ˜å®Œå¤‡æ€§(ä¾‹5)ï¼Œç„¶ååˆ©ç”¨ Lehmannâ€“ScheffÃ© å®šç†è¯´æ˜ UMVUE.\n   4. ä½¿ç”¨ UMVUE çš„å……åˆ†å¿…è¦æ¡ä»¶ (å®šç†1)ï¼Œå¯¹ $E(\\varphi) = 0$ ä¸¤è¾¹æ±‚å¯¼ï¼Œæ•´ç†å¾—åˆ° $\\mathrm{Cov}(\\varphi, T) = 0$ æ¥è¯æ˜.\n   5. å¯¹äºæŸäº›ç‰¹æ®Šçš„æƒ…å†µå¯ä»¥ä½¿ç”¨å®šä¹‰æ³•ç›´æ¥è¯´æ˜å…¶æ–¹å·®ä¸€è‡´æœ€å°ï¼Œä½†ä¸€èˆ¬æ¯”è¾ƒå›°éš¾.\n   6. è‹¥ä»¥ä¸Šæ–¹æ³•å‡æ— æ³•è¯æ˜ï¼Œåˆ™è€ƒè™‘æ›´æ¢ä¼°è®¡é‡ï¼Œæˆ–è€…ä¼°è®¡çš„ UMVUE ä¸å­˜åœ¨.\n\n## å‚è€ƒæ–‡çŒ®\n\n[1] èŒ†è¯—æ¾, ç¨‹ä¾æ˜, æ¿®æ™“é¾™. æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡æ•™ç¨‹. 3ç‰ˆ. åŒ—äº¬: é«˜ç­‰æ•™è‚²å‡ºç‰ˆç¤¾, 2019.\n\n[2] é™ˆå¸Œå­º. æ•°ç†ç»Ÿè®¡å¼•è®º. åŒ—äº¬ï¼šç§‘å­¦å‡ºç‰ˆç¤¾, 1981.\n\n[3] éŸ¦æ¥ç”Ÿ, æ•°ç†ç»Ÿè®¡. åŒ—äº¬: ç§‘å­¦å‡ºç‰ˆç¤¾, 2015.\n\n[4] å‘¨ä¼Ÿè, å…³äºä¸€ç›´æœ€å°æ–¹å·®æ— åä¼°è®¡çš„æ•™å­¦æ€è€ƒ, é«˜å¸ˆç†ç§‘å­¦åˆŠ, 2013,33(06)\n\n[5] Charles Elkan, Rao-Blackwell Theorem: Intuition, Lemmas and Start of Proof\n","tags":["æ•°ç†ç»Ÿè®¡","UMVUE"],"categories":["science"]},{"title":"ä½¿ç”¨ Web å‰ç«¯æŠ€æœ¯å¼€å‘ä¸€ä¸ª Wallpaper Engine å£çº¸","url":"/archives/44/","content":"\næœ¬æ–‡åŸºäºå®ä¾‹ä»‹ç»ä½¿ç”¨ Web æŠ€æœ¯å¼€å‘ä¸€ä¸ªå®ç”¨çš„ Wallpaper Engine å£çº¸.\n\n<!--more-->\n\n### Wallpaper Engine ç®€ä»‹\n\nWallpaper Engine æ˜¯ Steam ä¸Šçš„ä¸€æ¬¾æ”¶è´¹ä¹°æ–­è½¯ä»¶ï¼Œæä¾›ä¸ªæ€§åŒ–çš„æ¡Œé¢å£çº¸ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºç‚«é…·çš„åŠ¨æ•ˆã€éŸ³è§†é¢‘åŠå®ç”¨åŠŸèƒ½ï¼Œå…·ä½“å¯æŸ¥çœ‹å•†åº—åœ°å€ï¼š[Wallpaper Engineï¼šå£çº¸å¼•æ“](https://store.steampowered.com/app/431960/Wallpaper_Engine/).\n\nç½‘ç»œä¸Šä¹Ÿæä¾›æœ‰ç›—ç‰ˆè½¯ä»¶ï¼Œä¸ªäººæƒ…æ„Ÿä¸Šä¸æ¨èä½¿ç”¨.\n\n### ä¸€ä¸ªå®ä¾‹\n\nWallpaper Engine åŸºäº [CEF](https://bitbucket.org/chromiumembedded/cef) æŠ€æœ¯å¯ä»¥ä½¿å¼€å‘è€…æ–¹ä¾¿åœ°ä½¿ç”¨ Web å¼€å‘æŠ€æœ¯å¿«é€Ÿå¼€å‘å±äºè‡ªå·±çš„å£çº¸.\n\næˆ‘åœ¨å»å¹´ç®€å•å¼€å‘äº†ä¸€æ¬¾å€’è®¡æ—¶å£çº¸ï¼Œä¸»è¦æœ‰èƒŒæ™¯è½®æ’­ã€åè¨€è­¦å¥è½®æ’­ã€æˆªæ­¢æ—¥æœŸå€’è®¡æ—¶çš„åŠŸèƒ½ï¼Œåæ¥é™†ç»­æ·»åŠ äº†ä¸€äº›è‡ªå®šä¹‰åŠŸèƒ½ï¼Œæ˜¯ä¸€æ¬¾å®ç”¨å£çº¸.\n\n![å€’è®¡æ—¶å£çº¸](/assets/images/44-1.jpg)\n\n[å£çº¸ Steam åœ°å€](https://steamcommunity.com/sharedfiles/filedetails/?id=2222111958)\n\n[å£çº¸ Github æºç ](https://github.com/hooozen/WE-theme-Timer)\n\n---\n\nç”±äºä½¿ç”¨äº† CEFï¼Œæ‰€ä»¥åŠŸèƒ½ä¸Šçš„å¼€å‘åŸºæœ¬ç”± Web å‰ç«¯æŠ€æœ¯å®ç°ï¼Œæ‰€ä»¥å‰æœŸå®Œå…¨å¯ä»¥åœ¨æœ¬åœ°æµè§ˆå™¨ä¸Šå¼€å‘è°ƒè¯•. ä½†è¦æ³¨æ„ï¼Œç”±äºäº§å“æœ€ç»ˆæ˜¯å£çº¸å½¢æ€ï¼Œæ‰€ä»¥ä¸æ”¯æŒé¡µé¢ç‚¹å‡»ç­‰äº¤äº’æ–¹å¼.\n\nWeb å‰ç«¯æŠ€æœ¯çš„å†…å®¹ä¸èµ˜è¿°ï¼Œè¦æƒ³å¼€å‘ç®€å•çš„å£çº¸å¤§å­¦ç½‘é¡µè®¾è®¡è¯¾å­¦çš„å†…å®¹å°±å¤Ÿç”¨ï¼Œå³ä½¿é›¶åŸºç¡€å¯ä»¥é¢å‘ç™¾åº¦ç¼–ç¨‹å¾ˆå¿«ä¸Šæ‰‹ï¼Œä¸‹é¢ä¸»è¦è®²ä¸€ä¸‹ Wallpaper Engine æä¾›çš„æ¥å£ï¼Œä»¥åŠæˆ‘å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜.\n\n### Wallpaper Engine å¼€å‘æµç¨‹\n\nå¯¹äº Wallpaper Engine çš„å¼€å‘æµç¨‹ï¼Œ[å®˜æ–¹æ–‡æ¡£](https://docs.wallpaperengine.io/en/web/overview.html)æä¾›äº†è¾ƒä¸ºè¯¦ç»†å’Œæ˜ç¡®çš„å†…å®¹ï¼Œä¸‹é¢æçº²æŒˆé¢†çš„ä»‹ç»ä¸€ä¸‹ï¼Œä»¥æ±‚å¯¹æ•´ä¸ªæµç¨‹æœ‰ä¸ªæ¦‚è§ˆ.\n\n#### æ–°å»ºå£çº¸\n\nä½¿ç”¨ Wallpaper Engine çš„ã€å£çº¸ç¼–è¾‘å™¨ã€‘ï¼Œå¯ä»¥æ–°å»ºå’Œå¯¼å…¥å£çº¸é¡¹ç›®. è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½ å¯¼å…¥æ–‡ä»¶åï¼Œæºæ–‡ä»¶ä¼šè¢«å¤åˆ¶åˆ° steam çš„ç‰¹å®šç›®å½•ä¸‹ä½¿ç”¨ï¼Œæ‰€ä»¥ä¿®æ”¹åŸæ¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸èƒ½å®æ—¶ç”Ÿæ•ˆ.\n\nWallpaper Engine åœ¨é¡¹ç›®æ ¹ç›®å½•æä¾› `project.json` ç”¨ä»¥é…ç½®å£çº¸çš„ä¸€äº›ä¿¡æ¯ï¼Œè¯¸å¦‚åç§°ã€ç®€ä»‹ã€å’Œç”¨æˆ·è‡ªå®šä¹‰é¡¹ç­‰.\n\n#### è‡ªå®šä¹‰å±æ€§\n\næµè§ˆæ–‡æ¡£å¯ä»¥å‘ç°ï¼ŒWallpaper Engine ä¸»è¦é€šè¿‡æ¥å£æä¾›äº†**é…ç½®èƒ½åŠ›**ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ•°å€¼ã€é¢œè‰²ã€å›¾ç‰‡æ–‡ä»¶ã€éŸ³è§†é¢‘æ–‡ä»¶ç­‰é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹å¯ä»¥é€šè¿‡ `project.json` æ–‡ä»¶é…ç½®ä¹Ÿå¯ä»¥åœ¨ã€å£çº¸ç¼–è¾‘å™¨ã€‘ä¸­çš„â€œç¼–è¾‘â€->â€œæ›´æ”¹é¡¹ç›®é…ç½®â€çš„å›¾å½¢ç•Œé¢ä¸­é…ç½®. [æ–‡æ¡£è¯¦æƒ…](https://docs.wallpaperengine.io/en/web/customization/properties.html)\n\n```json\n/* project.json */\n{\n  \"contentrating\": \"Everyone\",\n  \"description\": \"some text\",\n  \"file\": \"index.html\",\n  \"general\": {\n    \"properties\": {\n      \"deadline\": {\n        \"index\": 1,\n        \"order\": 101,\n        \"text\": \"æˆªæ­¢æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰\",\n        \"type\": \"textinput\",\n        \"value\": \"\"\n      },\n      \"externalImages\": {\n        \"index\": 3,\n        \"mode\": \"fetchall\",\n        \"order\": 103,\n        \"text\": \"è‡ªå®šä¹‰èƒŒæ™¯\",\n        \"type\": \"directory\",\n        \"value\": \"\"\n      },\n      \"title\": {\n        \"index\": 0,\n        \"order\": 100,\n        \"text\": \"æ ‡é¢˜\",\n        \"type\": \"textinput\",\n        \"value\": \"\"\n      }\n      // ...\n    }\n  },\n  \"preview\": \"preview.jpg\",\n  \"tags\": [\n    \"Landscape\"\n  ],\n  \"title\": \"å€’è®¡æ—¶ â€”â€” åŠ±å¿—è¯­å¥ï¼ˆè‡ªå®šä¹‰/è€ƒç ”/å…¬è€ƒ/é«˜è€ƒ/ä¸­è€ƒ/å¹´æœ«ï¼‰\",\n  \"type\": \"web\",\n  \"version\": 7,\n  \"visibility\": \"public\",\n  \"workshopid\": \"2222111958\",\n  \"workshopurl\": \"steam://url/CommunityFilePage/2222111958\"\n}\n```\n\né€šè¿‡ `window.wallpaperPropertyListener` ä¸­ `applyUserProperties` æ–¹æ³•ç›‘å¬ç”¨æˆ·å±æ€§çš„å˜åŒ–. æ¯æ¬¡ç”¨æˆ·é…ç½®è‡ªå®šä¹‰å±æ€§æ—¶ï¼Œè¯¥æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨æ¥å®Œæˆç‰¹å®šçš„äº¤äº’é€»è¾‘ï¼š\n\n```js\nwindow.wallpaperPropertyListener = {\n  applyUserProperties: function (properties) {\n    if (properties.title) {\n      if (properties.title.value)\n        $('#targetYear').innerText = properties.title.value\n    }\n    if (properties.deadline) {\n      if (properties.deadline.value)\n        window.GOLOBAL.deadline.date = new Date(properties.deadline.value)\n    }\n    // ...\n  },\n}\n```\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘é€šè¿‡ `title` å’Œ `deadline` å±æ€§æ¥æ¥æ”¶ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡é¢˜å’Œæˆªæ­¢æ—¥æœŸ.\n\nå¯¹äºç›®å½•å±æ€§ï¼Œæœ‰ä¸¤ç§è·å–æ¨¡å¼ï¼ˆ[æ–‡æ¡£è¯¦æƒ…](https://docs.wallpaperengine.io/en/web/customization/properties.html#directory-property)ï¼‰ï¼š\n\nä¸€ç§æ˜¯ `ondemand`ï¼Œè¯¥æ¨¡å¼åœ¨éœ€è¦æ—¶å¯ä»¥é€šè¿‡è°ƒç”¨ `window.wallpaperRequestRandomFileForProperty(propertyName, callback)` ä»é€‰å®šçš„è·¯å¾„ä¸­éšæœºè·å–ä¸€ä¸ªæ–‡ä»¶è·¯å¾„.\n\nç¬¬äºŒç§æ˜¯ `fecthall` æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸å…¶ä»–æ‰€æœ‰å±æ€§ä¸åŒï¼Œéœ€è¦é€šè¿‡ç‰¹æœ‰çš„æ–¹æ³• `userDirectoryFilesAddedOrChanged` å’Œ `userDirectoryFilesRemoved` æ¥åˆ†åˆ«ç›‘å¬ï¼š\n\n```js\nwindow.wallpaperPropertyListener = {\n  userDirectoryFilesAddedOrChanged: function (propertyName, changedFiles) {\n    // propertyName is the name of the property that triggered the event.\n    // changedFiles contains all added (or modified) file paths\n    GOLOBAL.batchImportImages(changedFiles)\n  },\n  userDirectoryFilesRemoved: function (propertyName, removedFiles) {\n    // propertyName is the name of the property that triggered the event.\n    // removedFiles contains all removed file paths\n    GOLOBAL.batchImportImages([])\n  },\n\n  applyUserProperties: function (properties) {\n    // listner normal properties\n  },\n}\n```\n\nåœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œé€šè¿‡ç›‘å¬ç›®å½•å˜åŒ–æ¥è°ƒç”¨æˆ‘çš„ `batchImportImages` æ–¹æ³•å®ç°ç”¨æˆ·è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡. ï¼ˆè¿™é‡Œç”±äºæˆ‘åªå®šä¹‰äº†ä¸€ä¸ªç›®å½•å±æ€§ï¼Œæ‰€ä»¥ç•¥å»äº†å±æ€§åçš„åˆ¤æ–­ï¼Œå½“ä½¿ç”¨äº†å¤šä¸ªç›®å½•å±æ€§æ—¶è¦å¯¹å…¶è¿›è¡ŒåŒºåˆ†ï¼‰\n\n#### è°ƒè¯•å’Œå‘å¸ƒ\n\nåœ¨ Wallpaper Engine çš„è®¾ç½®ç•Œé¢ï¼Œé€šè¿‡é…ç½®â€œå¸¸è§„â€->â€œå¼€å‘äººå‘˜â€->â€œCEF å¼€å‘å·¥å…·ç«¯å£â€ï¼Œä¾¿å¯åœ¨ Chrome æµè§ˆå™¨ï¼ˆä»»æ„ Chromium å†…æ ¸æµè§ˆå™¨ï¼‰ä¸­è¾“å…¥ `localhost:[port]` è¿›è¡Œè°ƒè¯•. [æ–‡æ¡£è¯¦æƒ…](https://docs.wallpaperengine.io/en/web/debug/debug.html)\n\nå¼€å‘å®Œæˆåå°±å¯ä»¥å‘å¸ƒåˆ° Steam åˆ›æ„å·¥åŠäº†ï¼Œåœ¨ã€å£çº¸ç¼–è¾‘å™¨ã€‘ä¸­ç‚¹å‡»â€œåˆ›æ„å·¥åŠâ€->â€œåœ¨åˆ›æ„å·¥åŠä¸Šåˆ†äº«å£çº¸â€ï¼Œç„¶ååœ¨å¼¹å‡ºæ¡†å¯¹é¡¹ç›®è¿›è¡Œç®€å•çš„è¯´æ˜å³å¯å‘å¸ƒ. è¿™äº›é¡¹ç›®è¯´æ˜çš„å†…å®¹ä¿å­˜åœ¨ `project.json` ä¸­.\n\n#### ä¸€ä¸ªå° Trick\n\nWallpaper Engine åªæä¾›äº†åª’ä½“æ–‡ä»¶ï¼ˆå›¾ç‰‡/éŸ³/è§†é¢‘ï¼‰çš„ç›®å½•å±æ€§ï¼Œæ— æ³•å¯¼å…¥æ–‡æœ¬æ–‡ä»¶. å¯ä»¥é€šè¿‡ä¿®æ”¹åç¼€åå’Œ JSONP çš„æ–¹æ³•å®ç°æ–‡æœ¬æ–‡ä»¶çš„å¯¼å…¥ï¼Œè¿™é‡Œç»™å‡ºæ€è·¯ï¼Œå…·ä½“çš„å®ç°ä¸èµ˜è¿°äº†.\n\n### å…¶ä»–é—®é¢˜\n\nå‰æ–‡æåˆ°æ–°å»ºæˆ–å¯¼å…¥å£çº¸æ—¶ï¼Œæºæ–‡ä»¶ä¼šè¢«å¤åˆ¶åä½¿ç”¨ï¼Œè¿™å°±éœ€è¦ä½ æ¯æ¬¡æ›´æ”¹æºæ–‡ä»¶åé‡æ–°å¯¼å…¥ï¼Œè¿™æ ·å¼€å‘å’Œè°ƒè¯•å¾ˆä¸æ–¹ä¾¿. æ‰€ä»¥æˆ‘çš„åšæ³•æ˜¯ï¼Œç›´æ¥æ‰“å¼€å¯¼å…¥åçš„ç›®å½•è¿›è¡Œå¼€å‘ï¼Œè¿™æ ·å³ä½¿ä¸æ‰“å¼€å£çº¸ç¼–è¾‘å™¨ï¼Œåªéœ€è¦åˆ‡æ¢ä¸€ä¸‹å£çº¸å°±èƒ½å³ä½¿çƒ­æ›´æ–°å’Œè°ƒè¯•.\n\n`project.json` ä¸­çš„ `workshopid` æ˜¯ä½ çš„é¡¹ç›®åœ¨åˆ›æ„å·¥åŠçš„å”¯ä¸€æ ‡è¯†ï¼Œè¿™å°±æ„å‘³ç€ä½ æ¯æ¬¡æ›´æ–°æ—¶ï¼Œä¼šæ ¹æ® `worksopid` æ¥é€‰æ‹©æ›´æ–°åˆ°å“ªä¸€ä¸ªé¡¹ç›®ï¼Œè¿™åœ¨å¼€å‘å¤šä¸ªå£çº¸å’Œå¤‡ä»½æ¢å¤æ—¶éœ€è¦æ³¨æ„.\n","tags":["ä¸ªäººé¡¹ç›®","Wallpaper Engine"],"categories":["developer"]},{"title":"å¤š Git ä»“åº“çš„ SSH-key é…ç½®","url":"/archives/43/","content":"\næœ¬æ–‡ä»‹ç»äº†åœ¨ä¸€ä¸ªè®¾å¤‡ä¸Šé…ç½®å¤šä¸ª SSH-key ä»¥ç”¨äºä¸åŒçš„è¿œç¨‹ Git ä»“åº“çš„æ–¹æ³•.\n\n<!--more-->\n\n### é—®é¢˜èƒŒæ™¯\n\nå½“æˆ‘ä»¬ä½¿ç”¨è¯¸å¦‚ [GitHub](https://github.com/)ã€[ç äº‘](https://gitee.com/)ç­‰è¿œç¨‹ Git æ‰˜ç®¡å¹³å°æ—¶ï¼Œå¾€å¾€ä¼šé…ç½®è´¦å·ä¸­çš„ SSH-key æ¥æ–¹ä¾¿è¿›è¡Œæ‹‰å–å’Œæ¨é€ä»“åº“.\n\nå…¸å‹çš„åšæ³•æ˜¯ä½¿ç”¨ [`ssh-keygen -t rsa -c \"someCommentLikeEmail\"`](https://www.ssh.com/academy/ssh/keygen) å‘½ä»¤åŠå…¶é»˜è®¤é…ç½®ç”Ÿæˆåœ¨è·¯å¾„ `~/.ssh` ä¸‹çš„ RSA å…¬é’¥å’Œç§é’¥æ–‡ä»¶ï¼š`id_rsa` å’Œ `id_rsa.pub`. ç„¶ååªéœ€è¦æŠŠå…¬é’¥æ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°æ‰˜ç®¡å¹³å°ç›¸åº”çš„ä½ç½®å³å¯. è¿™æ ·ä¸€å°è®¾å¤‡çš„ä¸€ä¸ªé»˜è®¤ RSA å¯†é’¥å°±èƒ½åœ¨å¤šä¸ªä¸åŒçš„æ‰˜ç®¡å¹³å°ä¸Šä½¿ç”¨äº†.\n\nä½†å½“æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ª Github è´¦å·æ—¶ï¼ˆä¾‹å¦‚ä¸€ä¸ªç”¨äºå…¬å¸é¡¹ç›®ï¼Œä¸€ä¸ªç”¨äºä¸ªäººé¡¹ç›®ï¼‰ï¼Œä¾¿ä¸å¾—ä¸é…ç½®å¦ä¸€ä¸ªå¯†é’¥ï¼Œå› ä¸ºåœ¨ä¸åŒè´¦å·ä¸­é…ç½®ç›¸åŒçš„ RSA å…¬é’¥æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![GitHub ä¸å…è®¸åœ¨ä¸åŒè´¦å·ä¸‹é…ç½®åŒä¸€ä¸ª SSH key ](/assets/images/43-1.png)\n\n### é…ç½®å¤š SSH key\n\n#### 1. æ·»åŠ  RSA key\n\nä»ç„¶ä½¿ç”¨å‘½ä»¤\n\n```bash\nssh-keygen -t rsa -c \"your@email.com\"\n```\n\nç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼Œä½†åœ¨æ¥ä¸‹æ¥çš„é€‰é¡¹ä¸­æŒ‡å®šä¸€ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼š\n\n```bash\nEnter file in which to save the key (/Users/userName/.ssh/id_rsa): /Users/userName/.ssh/new_rsa\n```\n\nè¿™æ ·å°±åœ¨ `~/.ssh` ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€å¯¹æ–°çš„ RSA å¯†é’¥ï¼š`new_rsa` å’Œ `new_rsa.pub`.\n\n#### 2. å¯†é’¥é…ç½®\n\nç”Ÿæˆäº†æ–°çš„å¯†é’¥åï¼Œä¾¿å¯å°†æ–°å¯†é’¥æˆåŠŸæ·»åŠ åˆ°ç¬¬äºŒä¸ª GitHub è´¦å·. ä½†æ­¤æ—¶å‘ç¬¬äºŒä¸ª Github ä»“åº“æ¨é€æ›´æ–°ä»ç„¶ä¼šæ˜¾ç¤ºæ— æƒé™ï¼Œå› ä¸ºè‹¥ä¸ç»é…ç½®ç³»ç»Ÿé»˜è®¤ä»ä½¿ç”¨é»˜è®¤çš„å¯†é’¥å¯¹ `id_rsa`.\n\néœ€è¦å¦‚ä¸‹é…ç½®ï¼š\n\nåœ¨å¯†é’¥ç›®å½• `~/.ssh/` ä¸‹ç¼–è¾‘æˆ–æ–°å»ºé…ç½®æ–‡ä»¶ `config`ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\n\n```bash\nHost github.com\n  HostName github.com\n  IdentityFile ~/.ssh/id_rsa\n  User git\n\n\nHost alias\n  HostName github.com\n  IdentityFile ~/.ssh/new_rsa\n  User git\n```\n\nç†è§£å…¶ä¸­é…ç½®é¡¹å°±å¯ä»¥çµæ´»é…ç½®æ›´å¤šçš„ SSH key äº†ï¼š\n\n* `Host` æ˜¯æˆ‘ä»¬**è‡ªå·±å®šä¹‰**çš„ä¸€ä¸ªåˆ«åï¼Œç”¨æ¥æ›´æ–¹ä¾¿åœ°æŒ‡ä»£ `HostName`.\n* `HostName` æ˜¯è¿œç¨‹åœ°å€çš„åŸŸåï¼Œéœ€è¦æ­£ç¡®é…ç½®.\n* `IdentityFile` æŒ‡å®šä½¿ç”¨è¯¥é…ç½®é¡¹ä¸­çš„åŸŸåï¼ˆæˆ–åˆ«åï¼‰æ—¶æ‰€ä½¿ç”¨çš„å¯†é’¥æ–‡ä»¶.\n* `User` ä½¿ç”¨ SSH æ—¶çš„ç”¨æˆ·åï¼Œå¯¹äºè¿œç¨‹ Git ä»“åº“æ¥è¯´ä¸€èˆ¬ä½¿ç”¨ `git`.\n\nä»¥ä¸Šç¬¬ä¸€ä¸ªé…ç½®é¡¹ï¼Œä½¿åŸŸåä¸º `github.com` çš„ä»“åº“é»˜è®¤ä½¿ç”¨ `id_rsa` å¯†é’¥å¯¹ï¼Œç¬¬äºŒä¸ªé…ç½®é¡¹ä¸ºåœ°å€ä¸­ä½¿ç”¨äº†åˆ«å `alias` çš„ä»“åº“ä½¿ç”¨ `new_rsa` å¯†é’¥å¯¹\n\n#### 3. ä½¿ç”¨åˆ«åé…ç½®ä»“åº“çš„è¿œç¨‹åœ°å€\n\né…ç½®å®Œä»¥ä¸Šå†…å®¹åï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ `alias` ä½œä¸ºç™»é™†åœ°å€æ—¶ä¼šä½¿ç”¨æŒ‡å®šçš„ `new_rsa` å¯†é’¥ï¼Œå¦åˆ™ä»é»˜è®¤ä½¿ç”¨ `id_rsa` å¯†é’¥ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹æƒ³è¦ä½¿ç”¨ `new_rsa` å¯†é’¥çš„ä»“åº“åœ°å€åšä¿®æ”¹. ä¾‹å¦‚ï¼š\n\nå¯¹äºä»“åº“åœ°å€ä¸º\n\n```bash\ngit@github.com:user_name/repository_name.git\n```\n\nçš„ GitHub è¿œç¨‹ä»“åº“ï¼Œæˆ‘ä»¬æ¨é€æ›´æ–°æ—¶ç³»ç»Ÿä»é»˜è®¤ä½¿ç”¨ `id_rsa` å¯†é’¥ï¼Œè‹¥æƒ³ä½¿ç”¨ `new_rsa` å¯†é’¥åˆ™éœ€ä¿®æ”¹åœ°å€ä¸ºï¼š\n\n```bash\ngit@alias:user_name/repository_name.git\n```\n\n### å…¶ä»–\n\n* å¯¹äº Windows ç”¨æˆ·éœ€è¦æ³¨æ„ `.ssh` ç›®å½•çš„è·¯å¾„\n* config ä¸ç”Ÿæ•ˆçš„è¯æ£€æŸ¥è¯­æ³•æˆ–å°è¯•é‡å¯ç»ˆç«¯æˆ–è®¾å¤‡åé‡è¯•\n* å¯¹äºæ›´å¤šçš„å¯†é’¥é…ç½®åœ¨ `~/.ssh/config` æ–‡ä»¶ä¸­åŒç†è¿½åŠ æ›´å¤šé…ç½®é¡¹å³å¯\n","tags":["Tools","Git"],"categories":["developer"]},{"title":"ç†µä¸ä¿¡æ¯é‡","url":"/archives/42/","content":"\næœ¬æ–‡ä¸»è¦ç»“åˆå…¬å¼å’Œå®šä¹‰è§£é‡Šäº†ä¿¡æ¯ç†µï¼ˆEntropyï¼‰å’Œä¿¡æ¯é‡ï¼ˆQuantities of informationï¼‰çš„å«ä¹‰å’Œè”ç³».\n\n<!--more-->\n\n### èƒŒæ™¯\n\nä¿¡æ¯ç†µæ˜¯ç”±ä¿¡æ¯è®ºä¹‹çˆ¶ï¼Œå…‹åŠ³å¾·Â·è‰¾å°”ä¼å¾·Â·é¦™å†œï¼ˆClaude Elwood Shannonï¼‰äº 1948 å¹´å‘è¡¨çš„è®ºæ–‡ã€Šé€šä¿¡çš„æ•°å­¦ç†è®ºã€‹ï¼ˆ[A Mathematical Theory of Communication](https://web.archive.org/web/19980715013250/http://cm.bell-labs.com/cm/ms/what/shannonday/shannon1948.pdf)ï¼‰ä¸­æå‡º.\n\nç†µè¿™ä¸ªè¯æ˜¯é¦™å†œä»çƒ­åŠ›å­¦ä¸­å€Ÿç”¨çš„ï¼šçƒ­åŠ›å­¦ä¸­çš„çƒ­ç†µæ˜¯è¡¨ç¤ºåˆ†å­çŠ¶æ€çš„æ··ä¹±ç¨‹åº¦çš„ç‰©ç†é‡ï¼Œé¦™å†œåˆ™ä½¿ç”¨ä¿¡æ¯ç†µæ¥æè¿°ä¿¡æºçš„**ä¸ç¡®å®šåº¦**.\n\n**ä¿¡æ¯ç†µçš„æå‡ºè§£å†³äº†å¯¹ä¿¡æ¯çš„é‡åŒ–åº¦é‡é—®é¢˜**.ï¼ˆåº”æ³¨æ„ï¼Œä¿¡æ¯é‡ä¸ç­‰åŒäºä¿¡æ¯ç†µï¼‰\n\n### å®šä¹‰\n\n**ç†µ**ï¼ˆEntropyï¼‰ï¼šå¯¹äºç»™å®šçš„ç¦»æ•£éšæœºå˜é‡ $X$ï¼Œä»¥å¯èƒ½æ€§ $P(x_1), \\cdots, P(x_n)$ å–å€¼ä¸º $x_1, \\cdots, x_n$ï¼Œåˆ™ $X$ çš„ç†µä¸ºï¼š\n\n$$ H(X) = -\\sum_{i=1}^nP(x_i)\\log_2 P(x_i) $$\n\nä¸Šè¿°å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œç†µæ˜¯å¯¹äºéšæœºå˜é‡è€Œè¨€çš„ï¼Œé‚£ä¹ˆåˆæ˜¯å¦‚ä½•ä¸ä¿¡æ¯é‡è”ç³»èµ·æ¥çš„å‘¢ï¼Ÿ\n\n### ç†µä¸ä¿¡æ¯é‡\n\nè™½ç„¶æˆ‘ä»¬æœ‰äº†ä¿¡æ¯ç†µçš„å…¬å¼ï¼Œä½†æŠ½è±¡ä¸”ä¸å®¹æ˜“ç†è§£. åº”è¯¥å¦‚ä½•ç†è§£ä¿¡æ¯ç†µå‘¢ï¼Ÿä¸‹é¢æ˜¯ç»´åŸºç™¾ç§‘ä¸­ç»™å‡ºçš„ä¸€å¥è§£é‡Šï¼š\n\n>In information theory, the entropy of a random variable is the average level of \"information\", \"surprise\", or \"uncertainty\" inherent in the variable's possible outcomes.\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªéšæœºå˜é‡çš„ç†µæ˜¯æŒ‡è¯¥å˜é‡å¯èƒ½çš„ç»“æœæ‰€è•´å«çš„**ä¸ç¡®å®šæ€§**çš„å¹³å‡æ°´å¹³.\n\nä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€æšä¸å‡è¡¡çš„ç¡¬å¸ï¼ŒæŠ›æ·å®ƒæ—¶ä»¥æ¦‚ç‡ $p$ æ­£é¢æœä¸Šï¼Œä»¥æ¦‚ç‡ $1-p$ åé¢æœä¸Š. åˆ™å®¹æ˜“ç†è§£ï¼Œå½“ $p=1/2$ æ—¶ï¼ŒæŠ›å‡ºä¸€æšç¡¬å¸çš„ä¸ç¡®å®šæ€§æœ€å¤§ï¼Œå³å¾ˆéš¾åˆ¤æ–­æŠ›å‡ºåå“ªä¸€é¢æœä¸Šï¼›å½“ $p$ æ¥è¿‘ $1$ï¼ˆæˆ– $0$ï¼‰æ—¶ï¼Œè¿™ç§ä¸ç¡®å®šæ€§å‡å°ï¼Œç›´åˆ° $p=1$ï¼ˆæˆ– $p=0$ï¼‰æ—¶ä¸ç¡®å®šæ€§æœ€å°ï¼Œè¿™æ—¶å³ä½¿ä¸æŠ›è¯¥ç¡¬å¸ï¼Œæˆ‘ä»¬ä¹Ÿç¡®å®šçš„çŸ¥é“å“ªä¸€é¢æœä¸Š.\n\næˆ‘ä»¬å°±ç”¨ç†µæ¥å®šé‡è¡¡é‡è¿™ç§éšæœºäº‹ä»¶çš„ä¸ç¡®å®šæ€§ï¼Œè‡³äºå¦‚ä½•å®šé‡å…ˆä¸è®¨è®ºï¼Œå…ˆæ¥çœ‹çœ‹ç†µä¸ä¿¡æ¯é‡æœ‰ä»€ä¹ˆè”ç³».\n\nä¿¡æ¯è®ºä¸­æœ‰ä¸€å¥å¸¸è§çš„å£è¯€ï¼šâ€œä¸ç¡®å®šæ€§è¶Šå¤šï¼ˆæ¦‚ç‡è¶Šä½ï¼‰ï¼Œä¿¡æ¯é‡è¶Šå¤§ï¼›ä¸ç¡®å®šæ€§è¶Šä½ï¼ˆæ¦‚ç‡è¶Šé«˜ï¼‰ï¼Œä¿¡æ¯é‡è¶Šå°â€œï¼Œä¹Ÿå°±æ˜¯å¯¹ä¿¡æºæ¥è¯´ï¼Œæ‰€å‘å‡ºçš„ä¿¡å·å¯¹äºæ¥å—è€…å¯ä»¥çœ‹ä½œéšæœºå˜é‡ï¼Œæ¥å—è€…åœ¨æ¥å—å‰å¯¹è¯¥å˜é‡çš„ä¸ç¡®å®šæ€§è¶Šå¤§ï¼Œåˆ™æ¥æ”¶åˆ°åæ‰€â€œæ¶ˆé™¤â€çš„ä¸ç¡®å®šè¶Šå¤§ï¼Œåˆ™è·å¾—çš„ä¿¡æ¯é‡è¶Šå¤§.\n\nä¸¾ä¸ªä¾‹å­ï¼šä½ **çŸ¥é“**ä½ æ¯å¤©èµ·åºŠåä½ å¦ˆ**ä¸€å®š**ä¼šå¯¹ä½ è¯´ï¼šâ€œä½ çœ‹ä½ åƒçŒªä¸€æ ·èµ·è¿™ä¹ˆæ™šï¼â€ï¼Œè¿™å¥è¯å¯¹ä½ æ¥è¯´æ²¡æœ‰ä»»ä½•ä¸ç¡®å®šæ€§ï¼ˆæ¦‚ç‡ä¸º $1$ï¼‰ï¼Œé‚£ä¹ˆä½ å¬åˆ°è¿™å¥è¯åä¹Ÿå°±ä¸ä¼šæ¶ˆé™¤ä»»ä½•ä¸ç¡®å®šæ€§ï¼Œä¹Ÿå³æ²¡æœ‰è·å¾—ä¿¡æ¯é‡. ç„¶åä½ è¿˜çŸ¥é“ï¼Œä½ å¦ˆæ¥ä¸‹æ¥ä¼šå‘Šè¯‰ä½ æ—©é¤åƒä»€ä¹ˆï¼Œè™½ç„¶ä¸æ˜¯åŒ…å­å°±æ˜¯æ²¹æ¡. è¿™æ—¶ä½ å¦ˆå¼€å£äº†ï¼šâ€œè¿˜ä¸å¿«ç‚¹èµ·ï¼ŒåŒ…å­éƒ½å‡‰äº†ï¼â€ï¼Œåœ¨ä½ å¬åˆ°è¿™å¥è¯å‰å¯¹äºä½ å¦ˆè¿™å¥è¯è¯´ä»€ä¹ˆæ˜¯æœ‰ä¸ç¡®å®šæ€§çš„ï¼Œä½ ä¸çŸ¥é“æ˜¯â€œåŒ…å­éƒ½å‡‰äº†â€è¿˜æ˜¯â€œæ²¹æ¡éƒ½è½¯äº†â€ï¼Œå› æ­¤ä½ å¦ˆçš„è¿™å¥è¯æ¶ˆé™¤äº†ä½ å¯¹äºåƒåŒ…å­è¿˜æ˜¯åƒæ²¹æ¡çš„ä¸ç¡®å®šæ€§ï¼Œä½ å› æ­¤è·å¾—äº†ä¸€å®šçš„ä¿¡æ¯é‡.\n\nä»¥ä¸Šé€šä¿—çš„è§£é‡Šäº†â€œç†µâ€ã€â€œä¿¡æ¯é‡â€çš„æ¦‚å¿µï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ä¿¡æ¯ç†µä¸ç­‰åŒäºä¿¡æ¯é‡ï¼Œä½†å®ƒä»¬åœ¨é‡ä¸Šæ˜¯ç›¸ç­‰çš„. å³ï¼Œâ€œç†µâ€åº¦é‡äº†ä¸ç¡®å®šæ€§ï¼Œè€Œæ¥å—ä¿¡æ¯åæ‰€æ¶ˆé™¤çš„ä¸ç¡®å®šæ€§å³ä¸ºè¯¥ä¿¡æ¯çš„â€œé‡â€.\n\nä¿¡æ¯é‡å’Œç†µéƒ½æ˜¯ç›¸å¯¹äºæŸä¸€ä¸»ä½“æ¥è¯´çš„ï¼Œå³åŒä¸€ä¸ªä¿¡æ¯å¯¹äºä¸åŒçš„äººè€Œè¨€ä¿¡æ¯é‡ä¸åŒï¼ŒåŒä¸€ä»¶ä¸ç¡®å®šçš„äº‹æƒ…å¯¹äºä¸åŒçš„äººæ‰€è•´å«çš„ç†µä¹Ÿä¸åŒ.\n\n### å®šé‡\n\nä»¥ä¸Šå®šæ€§çš„è§£é‡Šäº†â€œç†µâ€çš„å«ä¹‰ï¼Œé‚£ä¹ˆå…¬å¼ä¸­ç†µçš„å€¼æ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢ï¼Ÿ\n\nç±»ä¼¼äºè´¨é‡ã€é•¿åº¦ç­‰ç‰©ç†é‡ï¼Œä¿¡æ¯ç†µåŒæ ·ä½œä¸ºç‰©ç†é‡ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªåŸºæœ¬åº¦é‡å•ä½. ç±»ä¼¼äºå…‰å¹´ä½œä¸ºé•¿åº¦å•ä½è¢«å®šä¹‰ä¸ºå…‰è¡Œé©¶ä¸€å¹´çš„é•¿åº¦ï¼Œç†µçš„åŸºæœ¬å•ä½è¢«å®šä¹‰ä¸ºç­‰æ¦‚ç‡ $0-1$ åˆ†å¸ƒéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§ï¼Œè®°ä½œ $1\\mathrm{bit}$. ä¹Ÿå°±æ˜¯è¯´æŠ›ä¸€æšå‡åŒ€çš„ç¡¬å¸ï¼Œå¯¹äºå“ªé¢æœä¸Šè¿™ä¸€äº‹ä»¶åŒ…å«çš„ä¸ç¡®å®šæ€§çš„é‡æ˜¯ $1\\ \\mathrm{bit}$ ç†µ.\n\næœ‰äº†åŸºæœ¬å•ä½ï¼Œè¡¡é‡å…¶ä»–éšæœºå˜é‡çš„ç†µå°±æœ‰äº†åŸºå‡†ï¼Œç±»ä¼¼äºå…‰è¡Œé©¶ $3$ å¹´çš„è·ç¦»ä¸º $3$ å…‰å¹´ï¼Œé‚£ä¹ˆæŠ›æ· $2$ å‡åŒ€æšç¡¬å¸ç»“æœçš„ä¸ç¡®å®šæ€§å³ä¸º $2\\ \\mathrm{bit}$. å®¹æ˜“ç†è§£ï¼Œå¯¹äºæŠ›æ· $n$ æšç¡¬å¸è€Œè¨€ï¼Œå…¶ç†µä¸º $n\\ \\mathrm{bit}$. å› æ­¤ï¼Œæ‰€æœ‰ä¸æŠ›æ·ç¡¬å¸åˆ†å¸ƒç›¸åŒçš„éšæœºå˜é‡å…¶ç†µéƒ½å¯ä»¥è¢«ç±»ä¼¼çš„è®¡ç®—.\n\nå¯¹äºç­‰æ¦‚ç‡äº‹ä»¶ä»å¯ä»¥ç±»ä¼¼é‡åŒ–ï¼Œæ¯”å¦‚å¯¹äºçŒœä¸€é“æœ‰å››ä¸ªé€‰é¡¹çš„é€‰æ‹©é¢˜çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆå››ä¸ªç­”æ¡ˆçš„æ¦‚ç‡å‡ç­‰åˆ†å¸ƒï¼Œä¸å…ˆåæ·ä¸¤æšç¡¬å¸çš„åˆ†å¸ƒæ˜¯ç­‰åŒçš„ï¼Œå› æ­¤å…¶ç†µä¸º $2\\ \\mathrm{bit}$. ç±»ä¼¼åœ°ï¼Œå¯¹äºæœ‰ $8 = 2^3$ ä¸ªç­‰å¯èƒ½ç»“æœçš„åˆ†å¸ƒï¼Œä¸æ· $3$ æšç¡¬å¸ç­‰åŒï¼Œå…¶ç†µä¸º $\\log_2 8 = 3\\ \\mathrm{bit}$. å°†å…¶**æ¨å¹¿**è‡³æœ‰ $n$ ä¸ªç­‰å¯èƒ½ç»“æœçš„æ¦‚ç‡åˆ†å¸ƒï¼Œå…¶ç†µä¸º\n\n$$\n\\log_2n = \\log_2\\frac1{p} \\ \\mathrm{bit}\n$$\n\nå…¶ä¸­ $p = \\frac 1n$ ä¸ºæ¯ä¸ªç»“æœå‘ç”Ÿçš„æ¦‚ç‡.\n\nè‡³æ­¤ï¼Œå·²ç»è§£å†³äº†ç­‰æ¦‚ç‡åˆ†å¸ƒçš„éšæœºå˜é‡çš„ç†µçš„è®¡ç®—ï¼Œé‚£ä¹ˆå¯¹äºä¸ç­‰æ¦‚ç‡çš„åˆ†å¸ƒå°†å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿå…¬å¼ä¸­å±•ç¤ºå‡ºäº†åŠ æƒçš„æ€æƒ³ï¼Œå³æŠŠæ¯ä¸€ä¸ªç»“æœéƒ½çœ‹ä½œç­‰å¯èƒ½äº‹ä»¶ä¸­çš„ä¸€ä¸ªç»“æœï¼ŒæŒ‰ç…§å…¶å‘ç”Ÿçš„æ¦‚ç‡åŠ æƒæ±‚å’Œ.\n\nä¾‹å¦‚ï¼Œé€šè¿‡æŸäº›â€œæ‰‹æ®µâ€ç­”é¢˜äººå¾—çŸ¥é€‰é¡¹ Aã€Bã€Cã€D ä¸ºæ­£ç¡®ç­”æ¡ˆçš„æ¦‚ç‡åˆ†åˆ«ä¸º $\\frac12,\\frac14,\\frac18,\\frac18$ï¼Œé‚£ä¹ˆæ­¤æ—¶å¦‚ä½•æ±‚ç†µå‘¢ï¼Ÿé¦–å…ˆæŠŠ A é€‰é¡¹çœ‹ä½œæŠ•æ·ä¸€æšç¡¬å¸æŸä¸€é¢æœä¸Šï¼Œå¯¹åº”çš„ç†µä¸º $1\\ \\mathrm{bit}$ï¼Œä½† A ä¸ºæ­£ç¡®ç­”æ¡ˆçš„å¯èƒ½æ€§åªæœ‰ $\\frac 12$ï¼Œå› æ­¤å°† $\\frac12$ ä½œä¸º $1\\ \\mathrm{bit}$ çš„æƒå€¼. ç±»ä¼¼åœ°ï¼Œå¾—åˆ° Bã€Cã€D å¯¹åº”çš„æ•°å€¼é¡¹ï¼š$\\frac14 \\log_24$ï¼Œ$\\frac18\\log_2 8$ï¼Œ$\\frac18\\log_28$. å°†ä»¥ä¸Šå„é¡¹ç›¸åŠ å°±å¾—åˆ°æ­¤æ—¶æ­£ç¡®ç­”æ¡ˆ $X$ çš„ç†µï¼š\n\n$$ \\begin{aligned}\nH(X) &= \\frac12\\log_2 2 + \\frac14\\log_24+\\frac18\\log_28 + \\frac18\\log_28 \\\\\n& = -\\frac12\\log_2\\frac12 - \\frac14\\log_2\\frac14- \\frac18\\log_2\\frac18 - \\frac18\\log_2\\frac18 \\\\\n& = -\\sum_{i=1}^4P(x_i)\\log_2P(x_i)\n\\end{aligned}\n$$\n\nè‡³æ­¤ï¼Œä¾¿å¾—åˆ°äº†ç†µçš„å®šä¹‰ä¸­çš„å…¬å¼å½¢å¼.\n\n$$\n\\begin{aligned}\nH(X) & = \\sum_{i=1}^nP(x_i)\\log_2\\frac1{P(x_i)} \\\\\n&= -\\sum_{i=1}^nP(x_i)\\log_2 P(x_i)\n\\end{aligned}\n$$\n\n### æ€§è´¨\n\né¦™å†œæ€»ç»“å‡ºäº†ä¿¡æ¯ç†µçš„ä¸‰æ¡æ€§è´¨ï¼š\n\n1. å•è°ƒæ€§ï¼Œå³å‘ç”Ÿæ¦‚ç‡è¶Šé«˜çš„äº‹ä»¶ï¼Œå…¶æ‰€æºå¸¦çš„ä¿¡æ¯ç†µè¶Šä½.\n2. éè´Ÿæ€§ï¼Œå³ä¿¡æ¯ç†µä¸èƒ½ä¸ºè´Ÿ.\n3. ç´¯åŠ æ€§ï¼Œå³å¤šéšæœºäº‹ä»¶åŒæ—¶å‘ç”Ÿçš„çš„æ€»ä¸ç¡®å®šæ€§çš„åº¦é‡å¯ä»¥è¡¨ç¤ºä¸ºå„äº‹ä»¶ä¸ç¡®å®šæ€§çš„åº¦é‡çš„å’Œï¼Œä¹Ÿå³ï¼š\n\n  å¯¹äºç›¸äº’ç‹¬ç«‹çš„éšæœºå˜é‡ $X,Y$ï¼š\n  $$ P(X=A, Y=B) = P(X=A)\\cdot P(Y=B) $$\n  æœ‰:\n  $$ H(XY) = H(X) + H(Y) $$\n\né¦™å†œä»æ•°å­¦ä¸Šï¼Œä¸¥æ ¼è¯æ˜äº†æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶çš„éšæœºå˜é‡ä¸ç¡®å®šåº¦é‡å…·æœ‰å”¯ä¸€çš„å½¢å¼ï¼š\n\n$$ H(X) = -C\\sum_{x\\in \\mathcal{X}} P(x)\\log_2P(x) $$\n\n### ä¿¡æ¯é‡ï¼ˆQuantities of informationï¼‰\n\nä¿¡æ¯é‡æ˜¯è¡¡é‡ä¿¡æ¯å¤šå°‘çš„åº¦é‡ï¼Œå…¶å€¼ç­‰äºè·å¾—è¯¥ä¿¡æ¯åå‡å°‘çš„éšæœºå˜é‡ä¸ç¡®å®šæ€§é‡.\n\nä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªæœ‰å››ä¸ªé€‰é¡¹çš„é€‰æ‹©é¢˜ï¼Œæˆ‘æ ¹æœ¬ä¸ä¼šåšï¼Œåˆ™æ­£ç¡®ç­”æ¡ˆå¯¹åº”çš„éšæœºå˜é‡ $X$ çš„ç†µ $H_1(X)$ ä¸º\n\n$$\n-\\sum_{i=1}^4 P(x_i)\\log_2P(x_i) = -4\\times\\frac14\\times \\log_2\\frac14 = 2\\ \\mathrm{bit}\n$$\n\nè‹¥æ­¤æ—¶è€å¸ˆè¯´ A é€‰é¡¹æ˜¯é”™çš„ï¼Œä¸é€‰ï¼Œæ ¹æ®å…¬å¼åˆ™æœ‰\n$$\nH_2(X) = -3\\times\\frac13\\times\\log_2\\frac13 \\approx 1.5850\\ \\mathrm{bit}\n$$\n\né‚£ä¹ˆè€å¸ˆè¿™å¥è¯å¸¦ç»™æˆ‘çš„ä¿¡æ¯é‡åˆ™ä¸º:\n\n$$H_1(X) - H_2(X) \\approx 0.4150\\ \\mathrm{bit}$$\n\nå¦‚æœæˆ‘çš„åŒæ¡Œå°å†œä¸€å¼€å§‹å°±çŸ¥é“è¿™é¢˜é€‰ Dï¼Œé‚£ä¹ˆå…³äºè¿™é“é¢˜ç­”æ¡ˆçš„ç†µå¯¹äºä»–æ¥è¯´å³ä¸º $0$ï¼Œè€å¸ˆçš„è¯å¯¹äºä»–æ¥è¯´ä¿¡æ¯é‡ä¸º $0$. ï¼ˆå½“ç„¶è¿™é‡Œè®¨è®ºçš„å‡è®¾å¿…é¡»éƒ½æ˜¯å®¢è§‚çš„ï¼šå°å†œæ˜¯çœŸæ­£çš„çŸ¥é“æ­£ç¡®ç­”æ¡ˆï¼Œè€Œä¸æ˜¯é”™è¯¯çš„çŸ¥é“â€œæ­£ç¡®ç­”æ¡ˆâ€ï¼Œå³ç†µå’Œä¿¡æ¯é‡ä½œä¸ºç‰©ç†é‡è™½ç„¶ç›¸å¯¹äºä¸»å®¢ä½“çš„ä¸åŒè€Œä¸åŒï¼Œä½†å…·æœ‰ä¸ä»¥ä¸»è§‚æ„å¿—è½¬ç§»çš„å®¢è§‚æ€§ï¼‰\n\n---\n\n#### *å‚è€ƒèµ„æ–™*\n\n* [Entropy (information theory), wikipedia.org](https://en.wikipedia.org/wiki/Entropy_(information_theory))\n\n* [Quantities of information, wikipedia.org](https://en.wikipedia.org/wiki/Quantities_of_information)\n\n* [ä¿¡æ¯ç†µ, ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E7%86%B5/7302318?fr=aladdin)\n  \n* [â€œä¿¡æ¯ç†µæ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼ŒçŸ¥ä¹](https://www.zhihu.com/question/22178202)\n","tags":["ä¿¡æ¯ç†µ","ä¿¡æ¯é‡"],"categories":["science"]},{"title":"Swift å‡½æ•°ä½œä¸ºå‚æ•°çš„å†™æ³•","url":"/archives/41/","content":"\næœ¬æ–‡ä¸»è¦ä»‹ç» Swift ä¸­å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’çš„å‡ ç§å†™æ³•.\n\n<!--more-->\n\nSwift ä½œä¸ºä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œå…¶è¯­æ³•å´æœ‰éå¸¸çµæ´»çš„å†™æ³•. ç±»ä¼¼äº JavaScrip ç­‰ç°ä»£è¯­è¨€ï¼ŒSwift ä¹Ÿå…·å¤‡é—­åŒ…ï¼ˆclosureï¼‰çš„æœºåˆ¶ï¼Œå¹¶ä¸”å‡½æ•°ä½œä¸ºä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›®æ ‡å‡½æ•°.\n\nä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­å¯¹äºè¿™ç§æƒ…å†µçš„å‡ ç§å†™æ³•åšä¸€ä¸‹è®°å½•.\n\nå‡½æ•° `hasAnyMatches` æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ¥å—ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œæ£€æŸ¥æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè‹¥æœ‰ä»»æ„ä¸€ä¸ªå…ƒç´ é€šè¿‡å‚æ•° 2 å‡½æ•°çš„æ£€æŸ¥ï¼Œåˆ™è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`.\n\n```swift\nfunc hasAnyMatches(list: [Int], condition: (Int)->Bool) -> Bool {\n  for item in list {\n    if condition(item) {\n      return true\n    }\n  }\n  return false\n}\n```\n\næˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°ç”¨ä»¥æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦æœ‰å°äº 10 çš„æ•°ï¼Œæœ‰ä»¥ä¸‹å‡ ç§å†™æ³•\n\n1. æœ‰åå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’\n\n    ```swift\n    func lessThanTen(number: Int) -> Bool {\n      number < 10  // å•è¡Œä»£ç å¯çœç•¥ returnï¼Œè®¤ä¸ºè¿”å›è¯¥è¡Œçš„å€¼\n    }\n\n    hasAnyMatches(list: numbers, condition: lessThanTen)\n    ```\n\n2. å†…æ•›åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°\n\n    ä½¿ç”¨ `{}` åŒ…è£¹åŒ¿åå‡½æ•°ï¼Œå¹¶ä½¿ç”¨ `in` åˆ†éš”è¿”å›ç±»å‹å’Œå‡½æ•°é¢˜ï¼š\n\n    ```swift\n    hasAnyMatches(list: numbers, condition: {(number: Int) -> Bool in\n        number < 10\n    })\n    ```\n\n3. å†…è”å†™æ³•çš„çœç•¥å½¢å¼\n\n    å½“å‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†åŒ¿åå‡½æ•°æ‹¿åˆ°è°ƒç”¨å‡½æ•°çš„å°æ‹¬å·å¤–ï¼š\n\n    ```swift\n    hasAnyMatches(list: numbers) {(number: Int) -> Bool in\n        number < 10\n    }\n    ```\n\n4. å†…æ•›å†™æ³•çš„è¿›ä¸€æ­¥çœç•¥\n\n    Swift è™½ä¸ºå¼ºç±»å‹è¯­è¨€ï¼Œå•å½“ç±»å‹å¯ä»¥è¢«æ¨æ–­æ—¶ï¼Œåˆ™å¯çœç•¥å…³äºç±»å‹çš„å£°æ˜ï¼š\n\n    ```swift\n    hasAnyMatches(list: numbers) {number in\n        return number < 10\n    }\n    ```\n\n*å‚è€ƒ*\n\n[A Swift Tour](https://docs.swift.org/swift-book/GuidedTour/GuidedTour.html)\n","tags":["swift"],"categories":["developer"]},{"title":"æ•°æ®ç»“æ„åŸºç¡€ï¼ˆ4ï¼‰çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„â€”â€”é¡ºåºè¡¨","url":"/archives/39/","content":"\næœ¬æ–‡ä¸»è¦ä»‹ç»äº†çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„ï¼Œä»¥åŠåŸºäº C++ çš„å…·ä½“å®ç°.\n\n<!--more-->\n\n***ç›®å½•ï¼ˆæ›´æ–°ä¸­ï¼‰***\n\n* ç¬¬ä¸€ç«  ç»ªè®º\n\n    [(1) æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ](https://www.hozen.site/archives/36/)\n\n    [(2) ç®—æ³•åŠç®—æ³•åˆ†æ](https://www.hozen.site/archives/37/)\n\n* ç¬¬äºŒç«  çº¿æ€§è¡¨\n\n    [(3) çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„](https://www.hozen.site/archives/38/)\n\n    **(4) çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„â€”â€”é¡ºåºè¡¨**\n\n*å‚è€ƒèµ„æ–™*\n\n[1] ç‹çº¢æ¢…ç¼–è‘—. æ•°æ®ç»“æ„ï¼ˆC++ç‰ˆæœ¬ï¼‰ï¼ˆç¬¬2ç‰ˆï¼‰. åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2011.\n\n[2] é’±èƒ½è‘—. C++ ç¨‹åºè®¾è®¡æ•™ç¨‹ï¼ˆç¬¬äºŒç‰ˆï¼‰. åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2005.\n\n***\n\n### é¡ºåºè¡¨ï¼ˆsequential listï¼‰\n\n**çº¿æ€§è¡¨**çš„é¡ºåºå­˜å‚¨ç»“æ„ç§°ä¸º**é¡ºåºè¡¨**.\n\néœ€è¦è¾¨æçš„æ˜¯ï¼Œçº¿æ€§è¡¨çš„é“¾æ¥å­˜å‚¨ç»“æ„è¢«ç§°ä¸º**é“¾è¡¨**ï¼Œé“¾è¡¨åˆåˆ†ä¸º**å•é“¾è¡¨**ã€**å¾ªç¯é“¾è¡¨**ã€**åŒé“¾è¡¨**ç­‰ï¼Œä»–ä»¬éƒ½æ˜¯**çº¿æ€§è¡¨**å±äº**çº¿æ€§ç»“æ„**çš„åˆ†ç±». æœ¬æ–‡è®¨è®ºçš„æ˜¯é¡ºåºè¡¨.\n\n![å›¾ 4-1 æ•°æ®ç»“æ„çš„åˆ†ç±»](/assets/images/39-1-n.png)\n\né¡ºåºè¡¨æ˜¯ç”¨ä¸€æ®µ**åœ°å€è¿ç»­**çš„å­˜å‚¨å•å…ƒä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ .  ç”±äºçº¿æ€§è¡¨ä¸­æ¯ä¸ªæ•°æ®å…ƒç´ çš„ç±»å‹ç›¸åŒï¼Œé€šå¸¸ç”¨ä¸€ç»´æ•°ç»„æ¥å®ç°é¡ºåºè¡¨ï¼Œä¹Ÿå°±æ˜¯æŠŠçº¿æ€§è¡¨ä¸­ç›¸é‚»çš„å…ƒç´ å­˜å‚¨åœ¨æ•°ç»„ä¸­ç›¸é‚»çš„ä½ç½®.\n\n### é¡ºåºè¡¨çš„å®ç°\n\nå°†çº¿æ€§è¡¨çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰ç”¨ C++ çš„ç±»å®ç°ï¼Œç”±äºçº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ç±»å‹ä¸ç¡®å®šï¼Œæ‰€ä»¥é‡‡ç”¨ C++ çš„**æ¨¡æ¿æœºåˆ¶**.\n\nè¿™é‡Œæˆ‘ä»¬è§„å®šé¡ºåºè¡¨åºå·ä» $1$ å¼€å§‹ï¼Œå› æ­¤ä¸æ•°ç»„çš„ä¸‹æ ‡ç›¸å·® $1$.\n\n```C++\nconst int MaxSize = 100;\n\ntemplate <typename DataType>\nclass SeqList {\n public:\n  SeqList();\n  SeqList(DataType a[], int n);\n  ~SeqList(){};\n  int getLength();\n  DataType get(int i);\n  int locate(DataType x);\n  void insert(int i, DataType x);\n  DataType remove(int i);\n  void printList();\n\n private:\n  DataType data[MaxSize];\n  int length = 0;\n};\n```\n\nä¸‹é¢å®ç°æˆå‘˜å‡½æ•°ï¼š\n\n#### æ„é€ å‡½æ•°\n\n* æ— å‚æ„é€ å‡½æ•° `SeqList()`\n\n    åˆ›å»ºä¸€ä¸ªç©ºé¡ºåºè¡¨.\n\n    ```C++\n    template <typename DataType>\n    SeqList<DataType>::SeqList() {\n        length = 0;\n    }\n    ```\n\n* æœ‰å‚æ„é€ å‡½æ•° `Seqlist(DataType a[], int n)`\n\n    ä½¿ç”¨ä¼ å…¥çš„æ•°ç»„æ„é€ é¡ºåºè¡¨ï¼Œå¹¶æŒ‡å®šé¡ºåºè¡¨é•¿åº¦.\n\n    ```C++\n    template <typename DataType>\n    SeqList<DataType>::SeqList(DataType a[], int n) {\n        if (n > MaxSize) throw \"å‚æ•°éæ³•\";\n\n        for (int i = 0; i < n; i++)\n        data[i] = a[i];\n\n        length = n;\n    }\n    ```\n\n#### æ±‚çº¿æ€§è¡¨çš„é•¿åº¦\n\n```C++\ntemplate <typename DataType>\nint SeqList<DataType>::getLength() {\n    return length;\n}\n```\n\n#### æŸ¥æ‰¾æ“ä½œ\n\n* æŒ‰ä½æŸ¥æ‰¾ `get(int i)`\n\n    ç”±äºä½¿ç”¨æ•°ç»„å­˜å‚¨æ•°æ®ï¼Œåˆ™æŸ¥æ‰¾ç¬¬ `i` ä¸ªå…ƒç´ ç›´æ¥è¿”å›æ•°ç»„ `data[]` ä¸­çš„ç¬¬ `i - 1` ä¸ªå…ƒç´ . æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$.\n\n    ```C++\n    template <typename DataType>\n    DataType SeqList<DataType>::get(int i) {\n      if (i < 1 && i > length)\n        throw \"æŸ¥æ‰¾ä½ç½®éæ³•\";\n      return data[i - 1];\n    }\n    ```\n\n* æŒ‰å€¼æŸ¥æ‰¾ `locate(DataType x)`\n\n    å¯¹é¡ºåºè¡¨è¿›è¡Œéå†ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ çš„åºå·ï¼ˆæ³¨æ„ä¸æ˜¯æ•°ç»„ä¸‹æ ‡ï¼‰ï¼›å¦‚æœæŸ¥æ‰¾ä¸åˆ°è¯¥å€¼åˆ™è¿”å›å¤±è´¥çš„æ ‡å¿— `0`.\n\n    ```C++\n    template <typename DataType>\n    int SeqList<DataType>::locate(DataType x) {\n      for (int i = 0; i < length; i++)\n        if (data[i] == x) return i + 1;\n      return 0;\n    }\n    ```\n\n    å¹³å‡æƒ…å†µä¸‹ï¼Œå‡è®¾æ•°æ®å¹³å‡åˆ†å¸ƒï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$.\n\n#### æ’å…¥æ“ä½œ\n\næ³¨æ„æ’å…¥ä½ç½®çš„åˆæ³•æ€§. åŒæ—¶ç”±äºæ’å…¥åå…ƒç´ çš„é€»è¾‘å…³ç³»å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥åº”ç”±å­˜å‚¨å…³ç³»ååº”è¿™ä¸€å˜åŒ–ï¼Œå³è°ƒæ•´ç›¸åº”å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®.\n\n```C++\ntemplate <typename DataType>\nvoid SeqList<DataType>::insert(int i, DataType x) {\n    if (length > MaxSize - 1)\n    throw \"é¡ºåºè¡¨å·²æ»¡ï¼Œæ— æ³•æ’å…¥\";\n    if (i < 1 || i > length + 1)\n    throw \"éæ³•ä½ç½®\";\n\n    for (int j = length; j > i - 1; j--)\n    data[j] = data[j - 1];\n\n    length++;\n    data[i - 1] = x;\n}\n```\n\nåŒç†è€ƒè™‘æ—¶é—´å¤æ‚åº¦ï¼Œä¸º $O(n)$.\n\n#### åˆ é™¤æ“ä½œ\n\nåŒç†è€ƒè™‘ä½ç½®çš„åˆç†æ€§ï¼Œå¹¶ä¸”é€šè¿‡è°ƒæ•´å­˜å‚¨å…³ç³»æ¥åæ˜ é€»è¾‘å…³ç³»çš„å˜åŒ–.\n\næ—¶é—´å¤æ‚åº¦ä¸º $O(n)$.\n\n```C++\ntemplate <typename DataType>\nDataType SeqList<DataType>::remove(int i) {\n    if (i < 1 || i > length)\n    throw \"éæ³•ä½ç½®\";\n\n    DataType temp = data[i - 1];\n\n    for (int j = i - 1; j < length; j++)\n    data[j] = data[j + 1];\n\n    length--;\n    return temp;\n}\n```\n\n#### éå†æ“ä½œ\n\næŒ‰é¡ºåºæ‰“å°é¡ºåºè¡¨ä¸­çš„å…ƒç´ . ä»¥å¯ç›´æ¥æ‰“å°çš„æ•°æ®ç±»å‹ä¸ºä¾‹.\n\n```C++\ntemplate <typename DataType>\nvoid SeqList<DataType>::printList() {\n    for (int i = 0; i < length; i++)\n    std::cout << data[i] << \" --> \";\n\n    std::cout << \"end\";\n}\n```\n\næ˜¾ç„¶æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$\n","tags":["æ•°æ®ç»“æ„","çº¿æ€§è¡¨","é¡ºåºè¡¨","C++"],"categories":["developer"]},{"title":"æ•°æ®ç»“æ„åŸºç¡€ï¼ˆ3ï¼‰çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„","url":"/archives/38/","content":"\næœ¬æ–‡ä¸»è¦ä»‹ç»äº†çº¿æ€§ç»“æ„çš„å…¸å‹ä»£è¡¨â€”â€”çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„å’ŒæŠ½è±¡æ•°æ®ç»“æ„.\n\n<!--more-->\n\n***ç›®å½•ï¼ˆæ›´æ–°ä¸­ï¼‰***\n\n* ç¬¬ä¸€ç«  ç»ªè®º\n\n    [(1) æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ](https://www.hozen.site/archives/36/)\n\n    [(2) ç®—æ³•åŠç®—æ³•åˆ†æ](https://www.hozen.site/archives/37/)\n\n* ç¬¬äºŒç«  çº¿æ€§è¡¨\n\n    **(3) çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„**\n\n    [(4) çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„â€”â€”é¡ºåºè¡¨](https://www.hozen.site/archives/39/)\n\n*å‚è€ƒèµ„æ–™*\n\n[1] ç‹çº¢æ¢…ç¼–è‘—. æ•°æ®ç»“æ„ï¼ˆC++ç‰ˆæœ¬ï¼‰ï¼ˆç¬¬2ç‰ˆï¼‰. åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2011.\n\n[2] å¼ é“­. [coursera-æ•°æ®ç»“æ„åŸºç¡€](https://www.coursera.org/learn/shuju-jiegou-suanfa). coursera.\n\n***\n\n### çº¿æ€§ç»“æ„\n\næ ¹æ®å‰æ–‡çš„è®¨è®ºï¼Œæ•°æ®ç»“æ„ä¸»è¦æœ‰é›†åˆã€çº¿æ€§ç»“æ„ã€æ ‘ç»“æ„ã€å›¾ç»“æ„å››å¤§ç±»ï¼Œæœ¬æ–‡è¦è®¨è®ºçš„**çº¿æ€§è¡¨**æ­£æ˜¯çº¿æ€§ç»“æ„çš„å…¸å‹ä»£è¡¨.\n\né™¤çº¿æ€§è¡¨å¤–ï¼Œçº¿æ€§ç»“æ„ç”¨å¯æ ¹æ®ä¸åŒæ ‡å‡†åˆ†ä¸ºè®¸å¤šç±»å‹ï¼š\n\n**æŒ‰å¤æ‚ç¨‹åº¦åˆ’åˆ†**\n\n* ç®€å•çš„ï¼šçº¿æ€§è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ•£åˆ—è¡¨\n* é«˜çº§çš„ï¼šå¹¿ä¹‰è¡¨ã€å¤šç»´æ•°ç»„ã€æ–‡ä»¶â€¦â€¦\n\n**æŒ‰è®¿é—®æ–¹å¼åˆ’åˆ†**\n\n* ç›´æ¥è®¿é—®å‹ï¼ˆdirect access)\n* é¡ºåºè®¿é—®å‹ï¼ˆsequential accessï¼‰\n* ç›®å½•ç´¢å¼•å‹ï¼ˆdirectory accessï¼‰\n\n**æŒ‰æ“ä½œåˆ’åˆ†**\n\n* çº¿æ€§è¡¨\n* æ ˆ\n* é˜Ÿåˆ—\n\næœ¬æ–‡è®¨è®ºçš„**çº¿æ€§è¡¨**æ˜¯**çº¿æ€§ç»“æ„**çš„**å…¸å‹ä»£è¡¨**.\n\n![å›¾ 3-1 æ•°æ®ç»“æ„çš„åˆ†ç±»](/assets/images/39-1-n.png)\n\n### çº¿æ€§è¡¨çš„å®šä¹‰\n\n**çº¿æ€§è¡¨**ï¼ˆlinear listï¼‰ç®€ç§°è¡¨ï¼Œæ˜¯ $n(n\\geqslant 0)$ ä¸ªå…·æœ‰ç›¸åŒç±»å‹çš„æ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ï¼Œçº¿æ€§è¡¨ä¸­æ•°æ®å…ƒç´ çš„ä¸ªæ•°ç§°ä¸ºçº¿æ€§è¡¨çš„**é•¿åº¦**. é•¿åº¦ç­‰äºé›¶æ—¶ç§°ä¸ºç©ºè¡¨ï¼Œä¸€ä¸ªéç©ºè¡¨é€šå¸¸è®°ä¸ºï¼š\n\n$$ L=(a_1, a_2, \\cdots, a_n) $$\n\n![å›¾ 3-2 çº¿æ€§è¡¨ç¤ºæ„å›¾](/assets/images/38-2.jpg)\n\nå…¶ä¸­ï¼Œ$a_i(1\\leqslant i \\leqslant n)$ ç§°ä¸ºæ•°æ®å…ƒç´ ï¼Œå°è„šæ ‡ $i$ è¡¨ç¤ºè¯¥å…ƒç´ åœ¨çº¿æ€§è¡¨ä¸­çš„ä½ç½®æˆ–åºå·.  ä»»æ„ä¸€å †ç›¸é‚»çš„æ•°æ®å…ƒç´  $a_{i-1}$ å’Œ $a_i(1<i\\leqslant n)$ ä¹‹é—´å­˜åœ¨**åºå¶å…³ç³»** $<a_{i-1}, a_i>$ ï¼Œä¸” $a_{i-1}$ ç§°ä¸º $a_i$ çš„**å‰é©±**ï¼Œ $a_i$ ç§°ä¸º $a_{i-1}$ çš„**åç»§**.\n\nçº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ å…·æœ‰æŠ½è±¡ï¼ˆå³ä¸ç¡®å®šï¼‰çš„æ•°æ®ç±»å‹ï¼Œåœ¨å…·ä½“çš„åº”ç”¨ç¨‹åºä¸­è¢«å…·ä½“çš„æ•°æ®ç±»å‹æ‰€æ›¿ä»£.\n\nå…·ä½“åœ°ï¼Œçº¿æ€§è¡¨å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\n1. **å‡åŒ€æ€§**ï¼šè™½ç„¶ä¸åŒçº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ å¯ä»¥æ˜¯å„ç§å„æ ·çš„ï¼Œä½†å¯¹äºåŒä¸€çº¿æ€§è¡¨çš„å„æ•°æ®å…ƒç´ å¿…å®šå…·æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹å’Œé•¿åº¦.\n\n2. **æœ‰åºæ€§**ï¼šå„æ•°æ®å…ƒç´ åœ¨çº¿æ€§è¡¨ä¸­éƒ½æœ‰è‡ªå·±çš„ä½ç½®ï¼Œä¸”æ•°æ®å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹ä½ç½®æ˜¯çº¿æ€§çš„.\n\n### çº¿æ€§è¡¨çš„æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰\n\nçº¿æ€§è¡¨åº”å½“æ»¡è¶³å­˜å–è®¿é—®ã€æ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œ. å¯å°†å…¶æŠ½è±¡æ•°æ®ç±»å‹å®šä¹‰å¦‚ä¸‹ï¼š\n\n```adt\n\nADT List\n  Data\n    çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼Œç›¸é‚»å…ƒç´ å…·æœ‰å‰é©±å’Œåç»§å…³ç³».\n\n  Operation\n\n    InitList\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å­˜åœ¨\n      è¾“å…¥ï¼šæ— \n      åŠŸèƒ½ï¼šçº¿æ€§è¡¨çš„åˆå§‹åŒ–\n      è¾“å‡ºï¼šæ— \n      åç½®æ¡ä»¶ï¼šä¸€ä¸ªç©ºçš„çº¿æ€§è¡¨\n\n    DestoryList\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ— \n      åŠŸèƒ½ï¼šé”€æ¯çº¿æ€§è¡¨\n      è¾“å‡ºï¼šæ— \n      åç½®æ¡ä»¶ï¼šé‡Šæ”¾çº¿æ€§è¡¨æ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´\n\n    Length\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ— \n      åŠŸèƒ½ï¼šæ±‚çº¿æ€§è¡¨çš„é•¿åº¦\n      è¾“å‡ºï¼šçº¿æ€§è¡¨ä¸­æ•°æ®å…ƒç´ çš„ä¸ªæ•°\n      åç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å˜\n\n    Get\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šå…ƒç´ çš„åºå· i\n      åŠŸèƒ½ï¼šæŒ‰ä½æŸ¥æ‰¾ï¼Œåœ¨çº¿æ€§è¡¨ä¸­æŸ¥æ‰¾åºå·ä¸º i çš„æ•°æ®å…ƒç´ \n      è¾“å‡ºï¼šè‹¥åºå·åˆæ³•ï¼Œè¿”å›åºå·ä¸º i çš„å…ƒç´ å€¼ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸\n      åç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å˜\n\n    Locate\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ•°æ®å…ƒç´  x\n      åŠŸèƒ½ï¼šæŒ‰å€¼æŸ¥æ‰¾ï¼Œåœ¨çº¿æ€§è¡¨ä¸­æŸ¥æ‰¾å€¼ç­‰äº x çš„å…ƒç´ \n      è¾“å‡ºï¼šè‹¥æŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›å…ƒç´  x åœ¨è¡¨ä¸­çš„åºå·ï¼Œå¦åˆ™è¿”å› 0\n      åç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å˜\n\n    Insert\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ’å…¥ä½ç½® iï¼›å¾…æ’å…ƒç´  x\n      åŠŸèƒ½ï¼šæ’å…¥æ“ä½œï¼Œåœ¨çº¿æ€§è¡¨çš„ç¬¬ i ä¸ªä½ç½®æ’å…¥ä¸€ä¸ªæ–°å…ƒç´  x\n      è¾“å‡ºï¼šè‹¥æ’å…¥ä¸æˆåŠŸï¼ŒæŠ›å‡ºå¼‚å¸¸\n      åç½®æ¡ä»¶ï¼šè‹¥æ’å…¥æˆåŠŸï¼Œè¡¨ä¸­å¢åŠ äº†ä¸€ä¸ªæ–°å…ƒç´ \n\n    Delete\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šåˆ é™¤ä½ç½® i\n      åŠŸèƒ½ï¼šåˆ é™¤æ“ä½œï¼Œåˆ é™¤çº¿æ€§è¡¨ä¸­çš„ç¬¬ i ä¸ªå…ƒç´ \n      è¾“å‡ºï¼šè‹¥åˆ é™¤æˆåŠŸï¼Œåˆ™è¿”å›è¢«åˆ å…ƒç´ ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸\n      åç½®æ¡ä»¶ï¼šè‹¥åˆ é™¤æˆåŠŸï¼Œè¡¨ä¸­å‡å°‘è¢«åˆ å…ƒç´ \n\n    IsEmpty\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ— \n      åŠŸèƒ½ï¼šåˆ¤ç©ºæ“ä½œï¼Œåˆ¤æ–­çº¿æ€§è¡¨æ˜¯å¦ä¸ºç©º\n      è¾“å‡ºï¼šè‹¥æ˜¯ç©ºè¡¨ï¼Œè¿”å› 1ï¼Œå¦åˆ™è¿”å› 0\n      åç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å˜\n\n    PritList\n      å‰ç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨å·²å­˜åœ¨\n      è¾“å…¥ï¼šæ— \n      åŠŸèƒ½ï¼šéå†æ“ä½œï¼ŒæŒ‰åºå·ä¾æ¬¡è¾“å‡ºçº¿æ€§è¡¨ä¸­çš„å…ƒç´ \n      è¾“å‡ºï¼šçº¿æ€§è¡¨ä¸­çš„å„ä¸ªæ•°æ®å…ƒç´ \n      åç½®æ¡ä»¶ï¼šçº¿æ€§è¡¨ä¸å˜\n\nendADT\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\n\n1. å¯¹äºä¸åŒçš„åº”ç”¨ï¼Œçº¿æ€§è¡¨åŒ…å«çš„åŸºæœ¬æ“ä½œå¯èƒ½ä¸åŒï¼ŒåŒåæ“ä½œçš„å®ç°ç»†èŠ‚å¯èƒ½ä¸èƒ½.\n\n2. å¯¹äºå®é™…é—®é¢˜ä¸­æ›´å¤æ‚çš„æ“ä½œï¼Œå¯ä»¥ç”¨è¿™äº›åŸºæœ¬æ“ä½œçš„ç»„åˆæ¥å®ç°. å¦‚æŒ‰å€¼åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡ä¸Šè¿°å®šä¹‰çš„ `Locate` å’Œ `Deleta` æ“ä½œçš„ç»„åˆå®ç°.\n","tags":["æ•°æ®ç»“æ„","çº¿æ€§è¡¨"],"categories":["developer"]},{"title":"æ•°æ®ç»“æ„åŸºç¡€ï¼ˆ2ï¼‰ç®—æ³•åŠç®—æ³•åˆ†æ","url":"/archives/37/","content":"\næœ¬æ–‡ä¸»è¦è®²è¿°äº†ç®—æ³•çš„åŸºæœ¬æ¦‚å¿µå’Œç®—æ³•çš„åˆ†ææ–¹æ³•ï¼Œä¸»è¦åŒ…æ‹¬ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åˆ†æ.\n\n<!--more-->\n\n***ç›®å½•ï¼ˆæ›´æ–°ä¸­ï¼‰***\n\n* ç¬¬ä¸€ç« ç»ªè®º\n\n    [(1) æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ](https://www.hozen.site/archives/36/)\n\n    **(2) ç®—æ³•åŠç®—æ³•åˆ†æ**\n\n* ç¬¬äºŒç«  çº¿æ€§è¡¨\n\n    [(3) çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„](https://www.hozen.site/archives/38/)\n\n    [(4) çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„â€”â€”é¡ºåºè¡¨](https://www.hozen.site/archives/39/)\n\n*å‚è€ƒèµ„æ–™*\n\n[1] ç‹çº¢æ¢…ç¼–è‘—. æ•°æ®ç»“æ„ï¼ˆC++ç‰ˆæœ¬ï¼‰ï¼ˆç¬¬2ç‰ˆï¼‰. åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2011.\n\n[2] å¼ é“­. [coursera-æ•°æ®ç»“æ„åŸºç¡€](https://www.coursera.org/learn/shuju-jiegou-suanfa). coursera.\n\n***\n\n### ç®—æ³•ï¼ˆAlgorithmï¼‰\n\n#### æ¦‚è¿°\n\nç®—æ³•è¢«å…¬è®¤ä¸ºæ˜¯è®¡ç®—æœºç§‘å­¦çš„åŸºçŸ³.\n\né€šä¿—åœ°è®²ï¼Œç®—æ³•æ˜¯è§£å†³é—®é¢˜çš„æ–¹æ³•. ç°å®ç”Ÿæ´»ä¸­ç®—æ³•çš„å®ä¾‹ä¸èƒœæšä¸¾ï¼Œå¦‚ä¸€é“èœè°±ã€ä¸€ä¸ªå®‰è£…è½¬ç§»çš„æ“ä½œæŒ‡å—ç­‰.\n\nä¸¥æ ¼åœ°è¯´ï¼Œç®—æ³•æ˜¯å¯¹ç‰¹å®šé—®é¢˜æ±‚è§£æ­¥éª¤çš„ä¸€ç§æè¿°ï¼Œæ˜¯æŒ‡ä»¤çš„æœ‰é™åºåˆ—.\n\né€šå¸¸ä¸€ä¸ªé—®é¢˜å¯ä»¥æœ‰å¤šç§ç®—æ³•ï¼Œä¸€ä¸ªç®—æ³•å¯ä»¥è§£å†³æŸä¸ªç‰¹å®šçš„é—®é¢˜.\n\nç®—æ³•å¿…é¡»æ»¡è¶³ä»¥ä¸‹ 5 ä¸ªé‡è¦ç‰¹æ€§ï¼š\n\n1. **è¾“å…¥**ï¼šä¸€ä¸ªç®—æ³•æœ‰é›¶ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œè¿™äº›è¾“å…¥é€šå¸¸å–è‡ªäºæŸä¸ªç‰¹å®šçš„å¯¹è±¡é›†åˆ.\n\n2. **è¾“å‡º**ï¼šä¸€ä¸ªæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºï¼Œé€šå¸¸è¾“å‡ºä¸è¾“å…¥ä¹‹é—´æœ‰ç€æŸç§ç‰¹å®šçš„å…³ç³».\n\n3. **æœ‰ç©·æ€§**ï¼šä¸€ä¸ªç®—æ³•å¿…é¡»æ€»æ˜¯ï¼ˆå¯¹ä»»ä½•åˆæ³•çš„è¾“å…¥ï¼‰åœ¨æ‰§è¡Œæœ‰ç©·æ­¥ä¹‹åç»“æŸï¼Œä¸”æ¯ä¸€æ­¥éƒ½åœ¨æœ‰ç©·æ—¶é—´å†…å®Œæˆ.\n\n4. **ç¡®å®šæ€§**ï¼šç®—æ³•ä¸­æ¯ä¸€æ¡æŒ‡ä»¤å¿…é¡»æœ‰ç¡®åˆ‡çš„å«ä¹‰ï¼Œä¸å­˜åœ¨äºŒä¹‰æ€§ã€‚å¹¶ä¸”ï¼Œåœ¨ä»»ä½•æ¡ä»¶ä¸‹ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥åªèƒ½å¾—åˆ°ç›¸åŒçš„è¾“å‡º.\n\n5. **å¯è¡Œæ€§**ï¼šç®—æ³•æè¿°çš„æ“ä½œè¿‡ç¨‹å¯ä»¥é€šè¿‡å·²ç»å®ç°çš„åŸºæœ¬æ“ä½œæ‰§è¡Œæœ‰é™æ¬¡æ¥å®ç°.\n\nç®—æ³•å’Œç¨‹åºä¸åŒ. åŸåˆ™ä¸Šï¼Œç®—æ³•å¯ä»¥ç”¨ä»»ä½•ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€å®ç°.\n\nç®—æ³•çš„æœ‰ç©·æ€§æ„å‘³ç€å¹¶ä¸æ˜¯æ‰€æœ‰çš„è®¡ç®—æœºç¨‹åºéƒ½æ˜¯ç®—æ³•ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªåœ¨æ— é™å¾ªç¯ä¸­æ‰§è¡Œçš„ç¨‹åºè€Œä¸æ˜¯ä¸€ä¸ªç®—æ³•. ç„¶è€Œæˆ‘ä»¬å¯ä»¥æŠŠæ“ä½œç³»ç»Ÿçš„å„ä¸ªä»»åŠ¡çœ‹æˆæ˜¯ä¸€ä¸ªå•ç‹¬çš„é—®é¢˜ï¼Œæ¯ä¸€ä¸ªé—®é¢˜ç”±æ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªå­ç¨‹åºé€šè¿‡ç‰¹å®šçš„ç®—æ³•æ¥å®ç°ï¼Œå¾—åˆ°è¾“å‡ºç»“æœåä¾¿ç»ˆæ­¢.\n\n#### ä¼˜è‰¯æ€§\n\nä¸€ä¸ªâ€œå¥½\"ç®—æ³•é¦–å…ˆè¦æ»¡è¶³ç®—æ³•çš„äº”å¤§ç‰¹æ€§ï¼Œæ­¤å¤–è¿˜è¦å…·å¤‡ä¸‹åˆ—ç‰¹æ€§.\n\n1. **æ­£ç¡®æ€§**ï¼šå¯¹äºä»»ä½•åˆæ³•çš„è¾“å…¥ï¼Œç®—æ³•éƒ½ä¼šå¾—å‡ºæ­£ç¡®çš„ç»“æœ.\n\n2. **é²æ£’æ€§**ï¼šä¹Ÿç§°å¥å£®æ€§ï¼Œç®—æ³•å¯¹éæ³•è¾“å…¥çš„æŠµæŠ—èƒ½åŠ›ï¼Œå³å¯¹äºé”™è¯¯çš„è¾“å…¥ï¼Œç®—æ³•åº”èƒ½æ˜¯è¢«å¹¶åšå¤„ç†ï¼Œè€Œä¸æ˜¯äº§ç”Ÿé”™è¯¯åŠ¨ä½œæˆ–é™·å…¥ç˜«ç—ª.\n\n3. **ç®€å•æ€§**ï¼šç®—æ³•å®¹æ˜“ç†è§£å’Œå®ç°.\n\n4. **æŠ½è±¡åˆ†çº§**ï¼šä¸ºäº†æ—¶ç®—æ³•ä¾¿äºé˜…è¯»ã€ç†è§£ã€ä½¿ç”¨å’Œä¿®æ”¹ï¼Œåº”ä½¿ç”¨æŠ½è±¡åˆ†çº§æ¥ç»„ç»‡ç®—æ³•è¡¨è¾¾çš„æ€æƒ³. æ¢è¨€ä¹‹ï¼Œç®—æ³•ä¸­çš„æ¯ä¸€æ¡é€»è¾‘æ­¥éª¤å¯ä»¥æ˜¯ä¸€æ¡ç®€å•çš„æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œé€šè¿‡æ¨¡å—è°ƒç”¨å®Œæˆç›¸åº”åŠŸèƒ½. æ¯ä¸ªæ¨¡å—è¡¨ç¤ºä¸€ç§æŠ½è±¡ï¼Œæ¨¡å—çš„å†…éƒ¨æè¿°äº†æ€æ ·å®ç°æŠ½è±¡ï¼Œè€Œæ¨¡å—çš„åç§°æè¿°äº†æ¨¡å—çš„åŠŸèƒ½.\n\n5. **é«˜æ•ˆæ€§**ï¼šç®—æ³•çš„æ•ˆç‡åŒ…æ‹¬æ—¶é—´æ•ˆç‡å’Œç©ºé—´æ•ˆç‡.\n\n#### æè¿°æ–¹æ³•\n\nå¸¸ç”¨çš„æè¿°ç®—æ³•çš„æ–¹æ³•æœ‰ï¼š\n\n* è‡ªç„¶è¯­è¨€ï¼šå®¹æ˜“ç†è§£ï¼›ä½†å‡†ç¡®æ€§ä¸ä½³ï¼Œå®¹æ˜“å‡ºç°äºŒä¹‰æ€§.\n\n* æµç¨‹å›¾ï¼šç›´è§‚æ˜“æ‡‚ï¼›ä½†ä¸¥å¯†æ€§å’Œçµæ´»æ€§æ¬ ä½³ï¼Œåœ¨æè¿°å¤æ‚ç®—æ³•æ—¶æä¸æ–¹ä¾¿.\n\n* ç¨‹åºè®¾è®¡è¯­è¨€ï¼šèƒ½ç›´æ¥ç”±è®¡ç®—æœºæ‰§è¡Œï¼›ä½†æŠ½è±¡æ€§å·®ï¼Œå¾€å¾€æ‹˜æ³¥äºæè¿°ç®—æ³•çš„å…·ä½“ç»†èŠ‚ï¼Œå®¹æ˜“å¤±å»ç®—æ³•çš„æ•´ä½“è§‚ï¼Œè¿˜è¦æ±‚ç®—æ³•è®¾è®¡è€…ç†Ÿç»ƒæŒæ¡ç¨‹åºè®¾è®¡è¯­è¨€åŠå…¶ç¼–ç¨‹æŠ€å·§.\n\n* **ä¼ªä»£ç **ï¼šè¡¨è¾¾èƒ½åŠ›ä¸Šç±»ä¼¼äºç¼–ç¨‹è¯­è¨€ï¼ŒåŒæ—¶æå°åŒ–äº†æè¿°ç®—æ³•æ‰€ä¸å¿…è¦çš„æŠ€æœ¯ç»†èŠ‚ï¼Œæ¯”è¾ƒé€‚åˆæè¿°ç®—æ³•ï¼Œè¢«ç§°ä¸ºâ€œ**ç®—æ³•è¯­è¨€**â€æˆ–â€œ**ç¬¬ä¸€è¯­è¨€**â€.\n\nä¼ªä»£ç ï¼ˆpseudo-codeï¼‰æ˜¯ä»‹äºè‡ªç„¶è¯­è¨€å’Œç¨‹åºè®¾è®¡è¯­è¨€ä¹‹é—´çš„æ–¹æ³•ï¼Œå®ƒé‡‡ç”¨æŸä¸€ç¨‹åºè®¾è®¡è¯­è¨€çš„åŸºæœ¬è¯­æ³•ï¼Œæ“ä½œæŒ‡ä»¤å¯ä»¥ç»“åˆè‡ªç„¶è¯­è¨€æ¥è®¾è®¡. è‡³äºç®—æ³•ä¸­è‡ªç„¶è¯­è¨€çš„æˆåˆ†æœ‰å¤šå°‘ï¼Œå–å†³äºç®—æ³•çš„æŠ½è±¡çº§åˆ«ï¼šå¾€å¾€æŠ½è±¡çº§åˆ«è¶Šé«˜è‡ªç„¶è¯­è¨€ä½¿ç”¨å¾—è¶Šå¤š.\n\n### ç®—æ³•åˆ†æ\n\n#### æ—¶é—´å¤æ‚åº¦\n\næ˜¾ç„¶ï¼Œäº‹åç»Ÿè®¡çš„æ–¹æ³•å¯ä»¥å‡†ç¡®çš„è®¡ç®—ä¸€ä¸ªç®—æ³•çš„æ•ˆç‡. ä½†è¯¥æ–¹æ³•è‡³å°‘æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š\n\n1. ç¼–å†™ç¨‹åºå®ç°ç®—æ³•å°†èŠ±è´¹è¾ƒå¤šæ—¶é—´å’Œç²¾åŠ›ï¼Œè‹¥äº‹åç»Ÿè®¡å‘ç°ç®—æ³•æ•ˆç‡å¹¶ä¸ç†æƒ³ï¼Œåˆ™ç¼–å†™ç¨‹åºçš„æˆåˆ†ç™½ç™½æµªè´¹.\n\n2. æ‰€çš„å®éªŒç»“æœä¾èµ–äºè®¡ç®—æœºçš„è½¯ç¡¬ä»¶ç­‰å®¢è§‚ç¯å¢ƒï¼Œæœ‰æ—¶å®¹æ˜“æ©ç›–ç®—æ³•æœ¬èº«çš„ä¼˜åŠ£.\n\nå› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨äº‹å‰åˆ†æä¼°ç®—çš„æ–¹æ³•â€”â€”**æ¸è¿›å¤æ‚åº¦**ï¼ˆ**symptotic complexity**ï¼‰.\n\n### ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\næ’‡å¼€ä¸è®¡ç®—æœºè½¯ç¡¬ä»¶æœ‰å…³çš„å› ç´ ï¼Œå½±å“ç®—æ³•æ—¶é—´ä»£ä»·çš„æœ€ä¸»è¦å› ç´ æ˜¯é—®é¢˜è§„æ¨¡. é—®é¢˜è§„æ¨¡ï¼ˆproblem scopeï¼‰æ˜¯æŒ‡è¾“å…¥é‡çš„å¤šå°‘ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå®ƒå¯ä»¥ä»é—®é¢˜æè¿°ä¸­å¾—åˆ°.\n\næ˜¾ç„¶ï¼Œç®—æ³•è¿è¡Œçš„æ—¶é—´ $T$ æ˜¯é—®é¢˜è§„æ¨¡ $n$ çš„å‡½æ•°ï¼Œè®°ä½œ T(n).\n\nè¦ç²¾ç¡®è¡¨ç¤ºç®—æ³•çš„è¿è¡Œæ—¶é—´å‡½æ•°æ˜¯å¾ˆå›°éš¾çš„ï¼Œä¸”å³ä½¿èƒ½å¤Ÿç»™å‡ºå¾€å¾€ä¹Ÿæ˜¯ä¸ªç›¸å½“å¤æ‚çš„å‡½æ•°ï¼Œè¿™ä¸æˆ‘ä»¬æ‘’å¼ƒâ€œäº‹åç»Ÿè®¡â€çš„æ–¹æ³•ï¼Œå¸Œæœ›é€šè¿‡â€œä¼°ç®—â€æ¥èŠ‚çº¦æˆæœ¬çš„åŸåˆ™è¿èƒŒ. åœ¨å‡†ç¡®åº¦ä¸æ•ˆç‡ä¹‹é—´ï¼Œâ€œæ¸è¿›æ—¶é—´å¤æ‚åº¦â€å–å¾—äº†ä¸€ä¸ªè‰¯å¥½çš„å¹³è¡¡.\n\næ¸è¿›æ—¶é—´å¤æ‚åº¦é€šè¿‡è¡¡é‡ç®—æ³•ä¸­**åŸºæœ¬è¯­å¥**ï¼ˆbasic statementï¼‰æ‰§è¡Œçš„æ¬¡æ•°ï¼Œå¹¶ä¸”åªå…³å¿ƒå…¶ä¸­éšç€é—®é¢˜è§„æ¨¡å¢å¤§å¯¹æ—¶é—´æˆæœ¬è´¡çŒ®æœ€å¤§çš„éƒ¨åˆ†. ç±»ä¼¼äºé«˜æ•°ä¸­å¯¹äºä¸€ä¸ªç”±å¤šé¡¹å¼ç»™å‡ºçš„æ— ç©·å¤§ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨å…¶ä¸­æœ€é«˜é˜¶æ— ç©·å¤§é¡¹å³å¯.\n\n*é«˜æ•°ä¸­ï¼Œå¯¹äºæé™ $\\lim\\limits_{x\\to+\\infty}(x^4 + 100 x^3 + 1)$ï¼Œæˆ‘ä»¬çŸ¥é“éšç€ $x$ çš„å¢å¤§ï¼Œç¬¬äºŒé¡¹ $100x^3$ å¯¹äºæ•´ä¸ªå¤šé¡¹å¼å¢å¤§çš„è´¡çŒ®é€æ¸å°äº $x^4$ï¼Œç›´è‡³å¯ä»¥å¿½ç•¥.*\n\nç”±ä»¥ä¸Šè®¨è®ºï¼Œæˆ‘ä»¬ç»™å‡ºæ¸è¿‘æ—¶é—´å¤æ‚åº¦åˆ†æçš„å¸¸ç”¨æ–¹æ³•ï¼š\n\n1. **å¤§ $O$ è¡¨ç¤ºæ³•**ï¼šè‹¥å­˜åœ¨å¸¸æ•° $c,N > 0$ï¼Œå¯¹äºä»»æ„ $n\\geqslant N$ æ—¶ï¼Œéƒ½æœ‰ $T(n)\\leqslant c\\times f(n)$ï¼Œåˆ™ç§° $T(n)=O(f(n))$ï¼Œæˆ–ç§° $T(n)$ åœ¨ $O(f(n))$ ä¸­.\n\n2. **å¤§ $\\Omega$ è¡¨ç¤ºæ³•**ï¼šè‹¥å­˜åœ¨å¸¸æ•° $c,N > 0$ï¼Œå¯¹äºä»»æ„ $n\\geqslant N$ æ—¶ï¼Œéƒ½æœ‰ $T(n)\\geqslant c\\times f(n)$ï¼Œåˆ™ç§° $T(n)=\\Omega(f(n))$ï¼Œæˆ–ç§° $T(n)$ åœ¨ $\\Omega(f(n))$ ä¸­.\n\n3. **å¤§ $\\Theta$ è¡¨ç¤ºæ³•**ï¼šè‹¥ $T(n)$ æ—¢åœ¨ $O(f(n))$ ä¸­ï¼Œåˆåœ¨ $\\Omega(n)$ ä¸­ï¼Œåˆ™ç§° $T(n)$ åœ¨ $\\Theta(n)$ ä¸­. æ›´å…·ä½“åœ°ï¼Œè‹¥å­˜åœ¨å¸¸æ•° $c_1, c_2, N >0$ï¼Œå¯¹äºä»»æ„ $n\\geqslant N$ æ—¶ï¼Œéƒ½æœ‰ $c_1f(n) \\leqslant T(n) \\leqslant c_2f(n)$ï¼Œåˆ™ç§° $T(n)=\\Theta(f(n))$ï¼Œæˆ–ç§° $T(n)$ åœ¨ $\\Theta(f(n))$ ä¸­.\n\nä¸éš¾ç†è§£ï¼š\n\n* å¤§ $O$ è¡¨ç¤ºæ³•ç»™å‡ºç®—æ³•æ—¶é—´å¤æ‚åº¦çš„æ¸è¿‘ä¸Šé™ï¼Œå¤§ $\\Omega$ è¡¨ç¤ºæ³•ç»™å‡ºæ¸è¿‘ä¸‹é™.\n* å¤§ $O$ å’Œå¤§ $\\Omega$ è¡¨ç¤ºæ³•å¾€å¾€æ˜¯ä¸å”¯ä¸€çš„. ä¸ºäº†å°½å¯èƒ½ç²¾ç¡®ï¼Œå¾€å¾€é€‰æ‹©ä¸Šï¼ˆä¸‹ï¼‰é™ä¸­æœ€â€œç´§â€çš„é‚£ä¸ª.\n* å½“ $T(n) = O(f(n)) = \\Omega(f(n))$ æ—¶ï¼Œæœ‰ $T(n)=\\Theta(f(n))$.\n\nå…¶ä¸­å¤§ $O$ è¡¨ç¤ºæ³•æœ€ä¸ºå¸¸ç”¨ï¼Œä¸”å¾€å¾€é€‰æ‹©æœ€â€œç´§â€çš„é‚£ä¸ªä¸Šé™ï¼Œå³é€‰æ‹©æ‰€æœ‰ä¸Šé™ä¸­æœ€å°çš„.\n\nå¯¹äºå¤§ $O$ è¡¨ç¤ºæ³•ï¼Œå®¹æ˜“å¾—åˆ°å¦‚ä¸‹è§„åˆ™ï¼š\n\n1. **åŠ æ³•è§„åˆ™**\n$$T_1(n)+T_2(n) = O\\left(\\max\\{T_1(n), T_2(n)\\}\\right) $$\n\n2. **ä¹˜æ³•è§„åˆ™**\n$$T_1(n)\\cdot T_2(n) = O\\left(T_1(n)\\cdot T_2(n)\\right) $$\n\n#### æœ€å¥½ã€æœ€åå’Œå¹³å‡æƒ…å†µ\n\nå¯¹äºæŸäº›ç®—æ³•ï¼Œå³ä½¿é—®é¢˜è§„æ¨¡ç›¸åŒï¼Œå¦‚æœè¾“å…¥æ•°æ®ä¸åŒï¼Œå…¶æ—¶é—´å¼€é”€ä¹Ÿä¸åŒ.\n\nä¾‹å¦‚ï¼Œåœ¨ä¸€ç»´æ•´å‹æ•°ç»„ $A[n]$ ä¸­é¡ºåºæŸ¥æ‰¾ä¸ç»™å®šå€¼ $k$ ç›¸ç­‰çš„å…ƒç´ ï¼š\n\n```c++\n/**\n * @param int[] å¾…æŸ¥æ•°ç»„\n * @param int æ•°ç»„é•¿åº¦\n * @returns å…ƒç´  k çš„ä¸‹æ ‡ï¼Œè¿”å› n æ—¶è¡¨ç¤ºæŸ¥æ‰¾å¤±è´¥\n */\nint Find(int A[], int n) {\n  for (i = 0; i < n; i++)\n    if (A[i] == k) break;\n  return i;\n}\n```\n\nå¯¹äºè¾“å…¥çš„æ•°ç»„ $A[]$ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ°å¥½ç­‰äº $k$ï¼Œç®—æ³•åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡ï¼Œè¿™æ˜¯**æœ€å¥½çš„æƒ…å†µ**ï¼›å¦‚æœç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ æ‰ç­‰äº $k$ï¼Œåˆ™ç®—æ³•éœ€è¦æ¯”è¾ƒ $n$ æ¬¡ï¼Œè¿™æ˜¯**æœ€åæƒ…å†µ**.\n\næ˜¾ç„¶ç›´æ¥ä½¿ç”¨**æœ€å¥½æƒ…å†µ**æ¥ä¼°è®¡ç®—æ³•æ€§èƒ½æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºå®ƒå‘ç”Ÿçš„æ¦‚ç‡å¾€å¾€æ˜¯å¾ˆå°çš„ï¼Œå¾—åˆ°çš„ç»“æœå°†è¿‡äºä¹è§‚äº†ï¼›å½“ç„¶**æœ€åæƒ…å†µ**å‘ç”Ÿçš„æ¦‚ç‡å¾€å¾€ä¹Ÿå¾ˆå°ï¼Œä½†ä¼°è®¡æœ€åæƒ…å†µä¸‹çš„ç®—æ³•æ€§èƒ½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå³æ®æ­¤æ¥ä¿è¯æŸäº›ç³»ç»Ÿçš„å¯é æ€§.\n\nç®—æ³•å¾€å¾€æ˜¯å¯¹ä¸åŒæ•°æ®è¿›è¡Œå¤šæ­¤æ‰§è¡Œçš„ï¼Œå› æ­¤è€ƒè™‘**å¹³å‡æƒ…å†µ**æ˜¯æœ‰å¿…è¦çš„. ä»æ¦‚ç‡ç»Ÿè®¡çš„è§’åº¦æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¾“å…¥æ•°æ®çš„åˆ†å¸ƒæƒ…å†µï¼Œä»¥æ­¤ä¼°è®¡ç®—æ³•æ€§èƒ½çš„â€œå‡å€¼â€.\n\næ¯”å¦‚ï¼Œä¸Šä¾‹ä¸­ï¼Œå½“æˆ‘ä»¬çŸ¥é“ $k$ æå¤§æ¦‚ç‡å‡ºç°åœ¨ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®æ—¶ï¼Œä½¿ç”¨**æœ€å¥½æƒ…å†µ**ä¼°ç®—æ€§èƒ½æ˜¯åˆç†çš„. å½“æˆ‘ä»¬å¯¹æ•°æ®çš„åˆ†å¸ƒä¸€æ— æ‰€çŸ¥æ—¶ï¼Œé‡‡ç”¨â€œç­‰åŒæ— çŸ¥â€åŸåˆ™ï¼Œè®¤ä¸ºå„æ•°æ®å…ƒç´ æ˜¯ç­‰æ¦‚ç‡åˆ†å¸ƒçš„ï¼Œåˆ™ä¸Šä¾‹ä¸­å¹³å‡è¦æ¯”è¾ƒ $\\frac n2$ ä¸ªå…ƒç´ .\n\n#### ç©ºé—´å¤æ‚åº¦ï¼ˆspace complexityï¼‰\n\nç®—æ³•çš„ç©ºé—´å¤æ‚åº¦æ˜¯æŒ‡åœ¨ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦çš„è¾…åŠ©ç©ºé—´æ•°é‡ï¼Œå³é™¤ç®—æ³•æœ¬èº«å’Œè¾“å…¥è¾“å‡ºæ•°æ®æ‰€å æ®çš„ç©ºé—´å¤–ï¼Œç®—æ³•ä¸´æ—¶å¼€è¾Ÿçš„å­˜å‚¨ç©ºé—´ï¼Œé€šå¸¸è®°ä½œï¼š\n\n$$ S(n) = O(f(n)) $$\n\nå…¶ä¸­ï¼Œ$n$ ä¸ºé—®é¢˜è§„æ¨¡ï¼Œåˆ†ææ–¹æ³•ä¸ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ç±»ä¼¼.\n","tags":["æ•°æ®ç»“æ„","æ—¶é—´å¤æ‚åº¦"],"categories":["developer"]},{"title":"æ•°æ®ç»“æ„åŸºç¡€ï¼ˆ1ï¼‰æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ","url":"/archives/36/","content":"\næœ¬æ–‡ä¸»è¦è®²è¿°äº†æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µåŠç›¸å…³çš„ç†è®ºåŸºç¡€ï¼Œæ˜¯â€œç”±è¿œåŠè¿‘â€è®¤è¯†æ•°æ®ç»“æ„çš„ç®€è¦æµè§ˆ.\n\n<!--more-->\n***ç›®å½•ï¼ˆæ›´æ–°ä¸­ï¼‰***\n\n* ç¬¬ä¸€ç«  ç»ªè®º\n\n    **(1) æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ**\n\n    [(2) ç®—æ³•åŠç®—æ³•åˆ†æ](https://www.hozen.site/archives/37/)\n\n* ç¬¬äºŒç«  çº¿æ€§è¡¨\n\n    [(3) çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„](https://www.hozen.site/archives/38/)\n\n    [(4) çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„â€”â€”é¡ºåºè¡¨](https://www.hozen.site/archives/39/)\n\n*å‚è€ƒèµ„æ–™*\n\n[1] ç‹çº¢æ¢…ç¼–è‘—. æ•°æ®ç»“æ„ï¼ˆC++ç‰ˆæœ¬ï¼‰ï¼ˆç¬¬2ç‰ˆï¼‰. åŒ—äº¬ï¼šæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2011.\n\n***\n\n## ç¨‹åºè®¾è®¡ä¸æ•°æ®ç»“æ„\n\nè®¡ç®—æœºä¸èƒ½åˆ†æé—®é¢˜å¹¶äº§ç”Ÿè§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œå¿…é¡»ç”±äººï¼ˆç¨‹åºè®¾è®¡è€…ï¼‰åˆ†æé—®é¢˜ï¼Œç¡®å®šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œç¼–å†™ç¨‹åºï¼Œè®©è®¡ç®—æœºæ‰§è¡Œä»è€Œè·å¾—é—®é¢˜çš„è§£. ä»é—®é¢˜çš„ç»™å‡ºåˆ°è®¡ç®—æœºç¨‹åºçš„ç¼–å†™æ‰§è¡Œï¼Œä¾¿æ˜¯ç¨‹åºè®¾è®¡çš„ä¸€èˆ¬è¿‡ç¨‹.\n\nåˆ†æé—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æŠ½è±¡å‡ºå…·ä½“çš„æ•°æ®æ¨¡å‹ï¼ˆå¾…å¤„ç†çš„æ•°æ®ä»¥åŠæ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œå³æ•°æ®ç»“æ„ï¼‰ï¼Œå½¢æˆé—®é¢˜æ±‚è§£çš„åŸºæœ¬æ€è·¯.\n\n$$ æ•°æ®ç»“æ„ + ç®—æ³• = ç¨‹åº $$\n\nè¿™ä¸ªç”±å›¾çµå¥–è·å¾—è€…æ²ƒæ€ç»™å‡ºçš„ï¼Œå¹¿ä¸ºæµä¼ çš„å…¬å¼ï¼Œè¯´æ˜äº†ç¨‹åºè®¾è®¡çš„æ ¸å¿ƒ.\n\nå…·ä½“æ¥è®²ï¼Œæ•°æ®ç»“æ„åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä½•ä»é—®é¢˜ä¸­æŠ½è±¡å‘¢ï¼Ÿ\n\n### éæ•°å€¼é—®é¢˜\n\nè®¡ç®—æœºèƒ½å¤Ÿæ±‚è§£çš„é—®é¢˜ä¸€èˆ¬å¯åˆ†ä¸ºæ•°å€¼å’Œéæ•°å€¼é—®é¢˜.\n\næ•°å€¼é—®é¢˜æŠ½è±¡å‡ºçš„æ•°æ®æ¨¡å‹é€šå¸¸æ˜¯æ•°å­¦æ–¹ç¨‹ï¼Œè¿™ä¸€è¿‡ç¨‹å¯¹äºåšè¿‡æ•°å­¦åº”ç”¨é¢˜çš„äººæ¥è®²éƒ½æ˜¯å®¹æ˜“ç†è§£çš„ï¼Œå¦‚å°å­¦ç”¨æ–¹ç¨‹ç»„è§£â€œé¸¡å…”åŒç¬¼â€é—®é¢˜ï¼Œå…¶ä¸­çº¿æ€§æ–¹ç¨‹ç»„ä¾¿æ˜¯å¯¹é—®é¢˜ä¸­æ•°æ®çš„æŠ½è±¡æ¨¡å‹.\n\néæ•°å€¼é—®é¢˜æŠ½è±¡å‡ºçš„æ•°æ®æ¨¡å‹é€šå¸¸æ˜¯**çº¿æ€§è¡¨**ã€**æ ‘**ã€**å›¾**ç­‰æ•°æ®ç»“æ„ï¼Œå…¶æŠ½è±¡è¿‡ç¨‹è™½ç„¶ä»ç„¶æœ‰å…¶æ•°å­¦ç†è®ºåŸºç¡€ï¼Œä½†å¯¹å¤§å¤šæ•°äººæ¥è¯´å¹¶ä¸äº†è§£ã€æˆ–æœ‰éš¾åº¦ï¼Œæ•…ä¸€èˆ¬è€Œè¨€ï¼Œæ•°æ®ç»“æ„æ•™ç¨‹é€šå¸¸ç€é‡äºåˆ†æå’Œè§£å†³**éæ•°å€¼é—®é¢˜**ï¼Œå³é‡ç‚¹åœ¨äºçº¿æ€§è¡¨ã€æ ‘å’Œå›¾è¿™ä¸‰ç§æ•°æ®ç»“æ„. ä¾‹å¦‚å­¦ç±ç®¡ç†ã€äººæœºå¯¹å¼ˆã€æ•™å­¦è®¡åˆ’ç¼–æ’é—®é¢˜å¯ä»¥åˆ†åˆ«æŠ½è±¡å‡ºçº¿æ€§ç»“æ„ã€æ ‘ç»“æ„ã€å›¾ç»“æ„.\n\n## æ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µ\n\n### æ•°æ®ç»“æ„\n\n**æ•°æ®**ï¼ˆdata) æ˜¯ä¿¡æ¯çš„è½½ä½“ï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­æ˜¯æŒ‡æ‰€æœ‰èƒ½è¾“å…¥åˆ°è®¡ç®—æœºä¸­å¹¶èƒ½è¢«è®¡ç®—æœºç¨‹åºè¯†åˆ«å’Œå¤„ç†çš„ç¬¦å·é›†åˆ.\n\n**æ•°æ®å…ƒç´ **ï¼ˆdata elementï¼‰æ˜¯æ•°æ®çš„åŸºæœ¬å•ä½.\n\n**æ•°æ®ç»“æ„**ï¼ˆdata structureï¼‰æ˜¯æŒ‡ç›¸äº’ä¹‹é—´å­˜åœ¨ä¸€å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆ.\n\næŒ‰ç…§è§†ç‚¹ä¸åŒï¼Œæ•°æ®ç»“æ„åˆ†ä¸ºé€»è¾‘ç»“æ„å’Œå­˜å‚¨ç»“æ„.\n\n#### æ•°æ®çš„é€»è¾‘ç»“æ„ï¼ˆlogical structrue)\n\næ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯æŒ‡æ•°æ®å…ƒç´ ä¹‹é—´é€»è¾‘å…³ç³»çš„**æ•´ä½“**ã€‚æ•°æ®çš„é€»è¾‘ç»“æ„åœ¨å½¢å¼ä¸Šå¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ª[äºŒå…ƒç»„](https://baike.baidu.com/item/%E5%A4%9A%E5%85%83%E7%BB%84)([2-tuple](https://en.wikipedia.org/wiki/Tuple))ï¼š\n\n$$ Data\\_Structure = (D, R) $$\n\nå…¶ä¸­ $D$ æ˜¯æ•°æ®å…ƒç´ çš„æœ‰é™é›†åˆï¼Œ$R$ æ˜¯ $D$ ä¸Šå…³ç³»çš„é›†åˆ.\n\næ ¹æ®æ•°æ®å…ƒç´ ä¹‹é—´é€»è¾‘å…³ç³»çš„ä¸åŒï¼Œæ•°æ®ç»“æ„åˆ†ä¸ºä»¥ä¸‹å››ç±»ï¼š\n\n1. é›†åˆï¼šæ•°æ®å…ƒç´ ä¹‹é—´å°±æ˜¯â€œå±äºåŒä¸€ä¸ªé›†åˆâ€ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œ**æ²¡æœ‰ä»»ä½•å…³ç³»**.\n2. çº¿æ€§ç»“æ„ï¼šæ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨ç€**ä¸€å¯¹ä¸€**çš„çº¿æ€§å…³ç³».\n3. æ ‘ç»“æ„ï¼šæ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨ç€**ä¸€å¯¹å¤š**çš„å±‚æ¬¡å…³ç³».\n4. å›¾ç»“æ„ï¼šæ•°æ®ä¹‹é—´å­˜åœ¨ç€**å¤šå¯¹å¤š**çš„ä»»æ„å…³ç³».\n\næ ‘ç»“æ„å’Œå›¾ç»“æ„ä¹Ÿç§°ä¸ºéçº¿æ€§ç»“æ„.\n\næ•°æ®çš„é€»è¾‘ç»“æ„å¸¸ç”¨é€»è¾‘å…³ç³»å›¾æ¥æè¿°ï¼š\n\n1. å°†æ¯ä¸€ä¸ªæ•°æ®å…ƒç´ çœ‹ä½œä¸€ä¸ªç»“ç‚¹ï¼Œç”¨åœ†åœˆè¡¨ç¤ºï¼›\n2. å…ƒç´ é—´çš„é€»è¾‘å…³ç³»ç”¨ç»“ç‚¹ä¹‹é—´çš„è¿çº¿è¡¨ç¤º;\n3. å¦‚æœå¼ºè°ƒå…³ç³»çš„æ–¹å‘æ€§ï¼Œåˆ™ç”¨å¸¦ç®­å¤´çš„è¿çº¿è¡¨ç¤º.\n\n![å›¾ 1-1 æ•°æ®ç»“æ„çš„é€»è¾‘å…³ç³»å›¾](/assets/images/36-1.jpg)\n\n#### æ•°æ®çš„å­˜å‚¨ç»“æ„ï¼ˆstorage structureï¼‰\n\næ•°æ®çš„å­˜å‚¨ç»“æ„åˆç§°ä¸ºç‰©ç†ç»“æ„ï¼Œæ˜¯æ•°æ®åŠå…¶é€»è¾‘ç»“æ„åœ¨è®¡ç®—æœºä¸­çš„è¡¨ç¤º. å­˜å‚¨ç»“æ„é™¤äº†å­˜å‚¨æ•°æ®å…ƒç´ å¤–ï¼Œå¿…é¡»éšå¼æˆ–æ˜¾å¼çš„å­˜å‚¨æ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³».\n\né€šå¸¸æœ‰ä¸¤ç§å­˜å‚¨ç»“æ„ï¼šé¡ºåºå­˜å‚¨ç»“æ„å’Œé“¾æ¥å­˜å‚¨ç»“æ„.\n\né¡ºåºå­˜å‚¨ç»“æ„ï¼šç”¨ä¸€ç»„**è¿ç»­**çš„å­˜å‚¨å•å…ƒ**ä¾æ¬¡**å­˜å‚¨æ•°æ®å…ƒç´ ï¼Œæ•°æ®æºä¹‹é—´çš„é€»è¾‘å…³ç³»ç”±å…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ˆéšå¼ï¼‰è¡¨ç¤º.\n\né“¾æ¥å­˜å‚¨ç»“æ„ï¼šç”¨ä¸€ç»„**ä»»æ„**çš„å­˜å‚¨å•å…ƒå­˜å‚¨æ•°æ®å…ƒç´ ï¼Œæ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»ç”¨æŒ‡é’ˆï¼ˆæ˜¾å¼ï¼‰æ¥è¡¨ç¤º.\n\nä¾‹å¦‚ï¼Œåˆ†åˆ«ä½¿ç”¨é¡ºåºå’Œé“¾æ¥å­˜å‚¨ç»“æ„å­˜å‚¨çº¿æ€§è¡¨ $(bat, cat, eat)$ï¼š\n\n![å›¾ 1-2 çº¿æ€§è¡¨çš„ä¸¤ç§å­˜å‚¨ç»“æ„ç¤ºæ„å›¾](/assets/images/36-2.jpg)\n\n#### å†è°ˆæ•°æ®çš„é€»è¾‘ç»“æ„å’Œå­˜å‚¨ç»“æ„\n\næ•°æ®çš„é€»è¾‘ç»“æ„æ˜¯ä»å…·ä½“é—®é¢˜æŠ½è±¡å‡ºæ¥çš„æ•°æ®æ¨¡å‹ï¼Œæ˜¯**é¢å‘é—®é¢˜**çš„ï¼Œåæ˜ äº†æ•°æ®å…ƒç´ ä¹‹é—´çš„å…³è”æ–¹å¼æˆ–é‚»æ¥å…³ç³»ã€‚\n\næ•°æ®çš„å­˜å‚¨ç»“æ„æ˜¯**é¢å‘è®¡ç®—æœºçš„**ï¼Œå…¶åŸºæœ¬ç›®æ ‡æ˜¯å°†æ•°æ®åŠå…¶é€»è¾‘å…³ç³»å­˜å‚¨åˆ°è®¡ç®—æœºçš„å†…å­˜ä¸­ã€‚\n\nå› æ­¤ï¼Œæœ‰å¿…è¦å¼ºè°ƒï¼Œé™¤éåŒæ—¶æåˆ°æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„ï¼Œä¸€èˆ¬çš„æƒ…å†µä¸‹â€œæ•°æ®ç»“æ„â€æŒ‡çš„å³æ˜¯æ•°æ®çš„**é€»è¾‘ç»“æ„**ã€‚å¦‚â€œçº¿æ€§è¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„â€ï¼Œå³æŒ‡çº¿æ€§è¡¨æ˜¯ä¸€ç§é€»è¾‘ç»“æ„â€”â€”æ— è®ºå®ƒé‡‡ç”¨äº†ä½•ç§å­˜å‚¨ç»“æ„ï¼ˆé¡ºåºæˆ–é“¾æ¥ï¼‰.\n\n### æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆAbstract Data Type)\n\n#### æ•°æ®ç±»å‹ï¼ˆData Typeï¼‰\n\næ•°æ®ç±»å‹æ˜¯ä¸€ç»„å€¼çš„é›†åˆä»¥åŠå®šä¹‰åœ¨è¿™ä¸ªé›†åˆä¸Šçš„ä¸€ç»„æ“ä½œçš„æ€»ç§°.\n\näºæ˜¯æ•°æ®ç±»å‹è§„å®šäº†è¯¥ç±»å‹æ•°æ®çš„å–å€¼èŒƒå›´å’Œå¯¹è¿™äº›æ•°æ®æ‰€èƒ½é‡‡å–çš„æ“ä½œ.\n\nä¾‹å¦‚ï¼ŒC++ è¯­è¨€ä¸­æ•´å‹æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œåˆ™è§„å®šäº†æ•´å‹å˜é‡åªèƒ½å–è®¡ç®—æœºæ‰€èƒ½è¡¨ç¤ºçš„æœ€å°è´Ÿæ•´æ•°å’Œæœ€å¤§æ­£æ•´æ•°ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªæ•´æ•°ï¼Œå¹¶åªå…è®¸è¿›è¡Œç®—æœ¯è¿ç®—ã€å…³ç³»è¿ç®—å’Œé€»è¾‘è¿ç®—ç­‰.\n\n#### æŠ½è±¡ï¼ˆAbstractï¼‰\n\næ‰€è°“æŠ½è±¡å°±æ˜¯æŠ½å‡ºé—®é¢˜æœ¬è´¨çš„ç‰¹å¾è€Œå¿½ç•¥éæœ¬è´¨çš„ç»†èŠ‚ï¼Œæ˜¯å¯¹å…·ä½“äº‹ç‰©çš„ä¸€ä¸ªæ¦‚æ‹¬.  \n\næ¯”å¦‚åœ°å›¾æ˜¯å¯¹å®ƒæ‰€æè¿°åœ°åŸŸçš„ä¸€ç§æŠ½è±¡ï¼Œç‰©ä½“å—åŠ›åˆ†æå›¾æ˜¯å¯¹çœŸå®ä¸–ç•Œä¸­æŸå…·ä½“ç‰©ä½“çš„æŠ½è±¡.\n\nå¾ˆæ˜¾ç„¶ï¼Œä½¿ç”¨æ•°å­¦çŸ¥è¯†è§£å†³å®é™…é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬æå–å…³é”®å› ç´ ï¼Œå¿½ç•¥éå…³é”®çš„å› ç´ ï¼Œæ¥å»ºç«‹å¯¹åº”çš„æ•°å­¦æ¨¡å‹ï¼Œè¿™æ˜¯å…¸å‹çš„æŠ½è±¡è¿‡ç¨‹.\n\næŠ½è±¡çš„åŸå› åœ¨äºï¼šä¸€æ—¦ä¸€ä¸ªæŠ½è±¡çš„é—®é¢˜å¾—åˆ°è§£å†³ï¼Œåˆ™å¾ˆå¤šåŒç±»çš„å…·ä½“é—®é¢˜ä¾¿å¯è¿åˆƒè€Œè§£.\n\nç®—æ³•çš„è®¾è®¡éœ€è¦æŠ½è±¡ï¼ŒåŒæ—¶åœ¨ç¼–ç¨‹è¯­è¨€å±‚é¢ï¼ŒæŠ½è±¡çš„æ€æƒ³ä»ç„¶å‘æŒ¥ä½œç”¨ï¼šå®ç°å°è£…å’Œä¿¡æ¯çš„éšè—.\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸¸æŠŠèƒ½å¤Ÿå®ŒæˆæŸç§åŠŸèƒ½å¹¶å¯é‡å¤æ‰§è¡Œçš„ä¸€æ®µä»£ç æŠ½è±¡ä¸ºå‡½æ•°ï¼Œåœ¨éœ€è¦æ‰§è¡Œè¿™ç§åŠŸèƒ½æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä»è€Œå°†â€œåšä»€ä¹ˆâ€æŠ½è±¡å‡ºæ¥ï¼Œä¸â€œæ€ä¹ˆåšâ€ç›¸åˆ†ç¦»ï¼Œå®ç°äº†ç®—æ³•ç»†èŠ‚å’Œæ•°æ®å†…éƒ¨ç»“æ„çš„éšè—.\n\n#### æŠ½è±¡æ•°æ®ç±»å‹\n\næŠ½è±¡æ•°æ®ç±»å‹ç®€ç§° ADTï¼Œæ˜¯ä¸€ä¸ª**æ•°æ®ç»“æ„**ä»¥åŠå®šä¹‰åœ¨è¯¥ç»“æ„ä¸Šçš„**ä¸€ç»„æ“ä½œ**çš„æ€»ç§°.\n\nADT å¯ç†è§£ä¸ºå¯¹ç¼–ç¨‹è¯­è¨€æœ¬èº«æä¾›çš„åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œçš„è¿›ä¸€æ­¥æŠ½è±¡ï¼Œå› æ­¤ ADT å’Œæ•°æ®ç±»å‹çš„åŒºåˆ«ä»…åœ¨äºï¼šæ•°æ®ç±»å‹æ˜¯é«˜çº§ç¼–ç¨‹è¯­è¨€æ”¯æŒçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œ ADT æŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹.\n\nåœ¨è®¾è®¡ ADT æ—¶ï¼ŒæŠŠ ADT çš„å®šä¹‰å’Œå®ç°åˆ†å¼€. å®šä¹‰éƒ¨åˆ†åªåŒ…å«æ•°æ®çš„é€»è¾‘ç»“æ„å’Œæ‰€å…è®¸çš„æ“ä½œé›†åˆï¼šä¸€æ–¹é¢ï¼Œä½¿ç”¨è€…ä¾æ®è¿™äº›å®šä¹‰æ¥ä½¿ç”¨ ADTï¼›å¦ä¸€æ–¹é¢ï¼Œå®ç°è€…ä¾æ®è¿™äº›å®šä¹‰å®Œæˆè¯¥ ADT çš„å„ç§æ“ä½œçš„å…·ä½“å®ç°.\n\nADT æä¾›äº†å®šä¹‰å’Œå®ç°çš„ä¸åŒè¯•å›¾ï¼Œå®ç°äº†å°è£…å’Œä¿¡æ¯éšè—. ä¾‹å¦‚å„ç§è¯­è¨€éƒ½æä¾›äº†æ•´æ•°ç±»å‹å’Œå…·ä½“å®ç°ï¼Œå°½ç®¡å®ƒä»¬çš„å®ç°æ–¹æ³•å„æœ‰ä¸åŒï¼Œä½†ç”±äºå…¶ ADT ç›¸åŒï¼Œåœ¨ç”¨æˆ·çœ‹æ¥éƒ½æ˜¯ç›¸åŒçš„.\n\nä¸€ä¸ª ADT çš„å®šä¹‰ä¸æ¶‰åŠå®ç°ç»†èŠ‚ï¼Œå½¢å¼ä¸Šå¯ç®€å¯ç¹. å¦‚ä¸‹ä¾‹ä¸­å¯¹ ADT çš„å®šä¹‰åŒ…æ‹¬æŠ½è±¡æ•°æ®ç±»å‹åã€æ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»çš„å®šä¹‰ã€æ¯ç§åŸºæœ¬æ“ä½œçš„æ¥å£ï¼š\n\n```ADT\nADT æŠ½è±¡æ•°æ®ç±»å‹å\nData\n  æ•°æ®å…ƒç´ ä¹‹é—´é€»è¾‘å…³ç³»çš„å®šä¹‰\n\nOperation\n  Operation_1\n    å‰ç½®æ¡ä»¶ï¼šæ‰§è¡Œè¯¥æ“ä½œå‰æ•°æ®æ‰€å¿…éœ€çš„çŠ¶æ€\n    è¾“å…¥ï¼šæ‰§è¡Œè¯¥æ“ä½œéœ€è¦çš„è¾“å…¥\n    åŠŸèƒ½ï¼šè¯¥æ“ä½œå°†å®Œæˆçš„åŠŸèƒ½\n    è¾“å‡ºï¼šæ‰§è¡Œè¯¥æ“ä½œåäº§ç”Ÿçš„è¾“å‡º\n    åç½®æ¡ä»¶ï¼šæ‰§è¡Œè¯¥æ“ä½œåæ•°æ®çš„çŠ¶æ€\n  \n  Operation_2\n    ... ...\n\n  ... ...\n\n  Operation_n\n    ... ...\n\nendADT\n```\n\nä»¥ä¸Šå®šä¹‰ä½“ç°äº†**å¥‘çº¦å¼ç¼–ç¨‹**çš„æ€æƒ³.\n\nå®¹æ˜“ä½“ä¼šï¼Œé¢å‘å¯¹è±¡è¯­è¨€çš„â€œç±»â€ä½“ç°äº†æŠ½è±¡æ•°æ®ç±»å‹çš„æ€æƒ³.\n","tags":["æ•°æ®ç»“æ„"],"categories":["developer"]},{"title":"å†¬å¤©","url":"/archives/35/","content":"\n\nåˆ—è½¦ä»å—å›½ç¼“ç¼“é©¶å…¥å®¶ä¹¡æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡å¾—ä»¥çªç„¶è¿›å…¥åŒ—å›½çš„å†¬å¤©ã€‚å½“çª—å¤–é•¿é’çš„æ ‘æœ¨å’Œçºµæ¨ªçš„æ°´é“å˜ä¸ºå¶™å³‹çš„æ¨æ ‘å’Œè‹èŒ«çš„é»„åœŸåœ°ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ä»Šå¹´çš„å†¬å¤©æ­¤åˆ»æ–¹è‡³ã€‚\n\n<!--more-->\n\nåªéœ€å‡ åœºå‡›å†½çš„å¯’é£ï¼ŒåŒ—å›½çš„å†¬å¤©ä¾¿å°†å¤©åœ°é—´çš„ä¸€åˆ‡ç²‰é¥°å¸­å·å¹²å‡€ã€‚æ­£å¦‚åƒä¸‡å¹´æ¥ä¸€æ ·ï¼Œå†¬å¤©äº˜å¤ä¸å˜åœ°è€ƒéªŒç€å¤§åœ°ä¸Šçš„ç”Ÿå‘½ï¼Œä¸€åˆ‡æ— å…³ç”Ÿå­˜çš„é™„å±å“è¢«æ¯«ä¸åå•¬çš„ä¸¢å¼ƒã€‚åœŸåœ°éœœå†»ï¼Œç§å­æ·±åŸ‹åœ°åº•ï¼›æ²³æµå†°å°ï¼Œé±¼èŸ¹æ½œåº•ï¼›æ¯å¶ç»†æå‡‹é›¶ï¼Œé¸Ÿè™«å™¤å£°åŒ¿è¿¹ã€‚å°±è¿æ—·é‡ä¸Šç¨€è½çš„ä½æ°‘ä¹Ÿå…³é—¨é—­æˆ·ï¼Œä¸€åˆ‡éƒ½å†·é™è€Œè‚ƒç©†ï¼Œç”Ÿå‘½å°±è¿™æ ·è¢«æ­éœ²æ— é—ã€‚\n\nè¡Œé©¶çš„åˆ—è½¦åœ¨è¿™å¹…è‹èŒ«çš„èƒŒæ™¯å›¾ä¸­åŒ†åŒ†ç¦»å»ï¼Œä¸€å¤´æ‰è¿›é’¢é“æ—ç«‹çš„åŸå¸‚ã€‚\n\nä¸‹äº†ç«è½¦ï¼Œæ¸…å†·çš„ç©ºæ°”å¸å…¥èº«ä½“ï¼Œç™½è‰²çš„æ°´æ±½ä»å£ä¸­é¼»ä¸­å–·è–„è€Œå‡ºï¼Œåˆ†æ˜åœ°æ ‡å¿—ç€ä¸€ä¸ªç”Ÿå‘½çš„å­˜æ´»ã€‚æ—è¾¹ä¸€ä¸ªç»ˆäºä¸‹è½¦çš„å­©å­å…´å¥‹åœ°è¯´ç€è¯ï¼Œç™½æ°”ä¸åœåœ°è¦ç»•åœ¨ä»–çš„å£è¾¹ï¼Œè±¡å¾ç€ä»–ç”Ÿå‘½çš„æ´»åŠ›å’Œå¯¹å†¬å¤©çš„æ— æ„ã€‚å¦ˆå¦ˆç»™ä»–ç´§äº†ç´§åˆšç©¿ä¸Šçš„åšå¤§æ£‰è¡£å’Œå›´å·¾ï¼Œåˆç»™ä»–æˆ´ä¸Šå¸½å­ï¼Œç‰µç€ä»–ç¦»å¼€äº†ã€‚æˆ‘æƒ³èµ·äº†é‚£äº›å·²ç»ç¦»æˆ‘å¾ˆè¿œçš„å†¬å¤©ã€‚\n\næˆ‘å¯¹ç«¥å¹´çš„å†¬å¤©å¹¶æ²¡æœ‰å¤šå°‘å¯’å†·çš„å°è±¡ï¼Œåªè®°å¾—æˆ‘çš„æ‰‹è„šå’Œè€³æœµç»å¸¸å†»ä¼¤ã€‚æˆ‘è®°èµ·ç‡ƒç€ç‚‰å­çš„å¤œæ™šï¼Œå¦ˆå¦ˆæŠŠçƒ§å¼€çš„çƒ­æ°´å€’å…¥è„¸ç›†ï¼Œç¨ä¸€å†·å´åå°±æ²¾ç€æ´—æ‰‹ï¼Œæ…¢æ…¢çš„æ°´åˆå‡‰äº†äº›æ—¶å°±è®©æˆ‘ä¹Ÿä¸€èµ·æ´—ã€‚æ°´ä»ç„¶å¾ˆçƒ«ï¼ŒæŠŠæˆ‘çš„æ‰‹çƒ«å¾—é€šçº¢ï¼Œçš²è£‚çš„å£å­å’Œå†»ä¼¤çš„çº¢è‚¿æ›´åŠ æ˜æ˜¾ã€‚ç­‰æ³¡æ´—å¹²å‡€åï¼Œç”¨æ¯›å·¾æ“¦å¹²ï¼Œç„¶åç”¨ä»â€œåˆç¤¾â€ä¹°æ¥çš„ä¸€æ¯›é’±æ ¹çš„æ²¹è„‚æ£’æ¶‚æŠ¹ã€‚æ¶‚æŠ¹å®Œä¹‹åæŠŠåŒæ‰‹æ”¾åœ¨ç‚‰ç«è¾¹ä¸Šçƒ¤ï¼Œä¸€åŒå¤§æ‰‹ä¸€åŒå°æ‰‹ç¿»æ¥ç¿»å»ã€‚çª—å¤–æ˜¯å‘¼å•¸çš„å¯’é£ï¼Œå±‹å†…æ¸©æš–å®‰é™çš„ç‚‰ç«è¾¹ï¼Œæˆ‘ä»¬é»˜é»˜æ— è¨€ã€‚ç±»ä¼¼çš„åœºæ™¯å¸¸åœ¨æˆ‘çš„æ¢¦ä¸­æ¸…æ™°çš„å‡ºç°ï¼Œä½†æˆ‘ä»æ¥æ— æ³•ç»™è¿™äº›åœºæ™¯åŠ ä¸Šå¯¹è¯ã€‚æˆ‘çŸ¥é“é‚£äº›çˆ¶æ¯ä¸ºæˆ‘é®æŒ¡å¯’é£çš„å¤œæ™šï¼Œå’Œé‚£ä¸ªä¸çŸ¥ç”Ÿå‘½ä¸ºä½•ç‰©ï¼Œä¸çŸ¥å†¬å¤©æœ‰ä½•æ„çš„æˆ‘éƒ½ä¸€å»ä¸è¿”äº†ã€‚\n\næˆ‘ç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°ç«¥è¯ä¸–ç•Œçš„å­˜åœ¨æ˜¯åœ¨å¾ˆå¤šå¹´å‰ä¸€ä¸ªå¤§é›ªçš„å†¬å¤©ã€‚èŒ«èŒ«çš„å¤§é›ªè¦†ç›–ä½æ ¡å›­ï¼Œæˆ‘èµ°å‡ºæ•™å®¤æ—¶å·²æ™šè‡ªä¹ æ”¾å­¦è®¸ä¹…ï¼Œæ•´ä¸ªæ•™å­¦æ¥¼å‘¨å›´ä¸€ç‰‡è‚ƒé™ï¼Œå¶å°”è·¯è¿‡çš„äººä»¬æ— å£°æ— æ¯â€”â€”æ‰€æœ‰çš„å£°éŸ³éƒ½è¢«çª¸çª£çš„å¤§é›ªæ‚„ç„¶åæ²¡ã€‚æˆ‘ç¯æœ›å››å‘¨ï¼Œæ¥¼é¡¶å¼ºåŠ›çš„ç¯å…‰æ— æ³•ç©¿é€é›ªå¹•ï¼Œåœ¨ä¸€ç‰‡èŒ«èŒ«ä¸­ï¼Œåªèƒ½çœ‹åˆ°ç¦»å¼€çš„äººç¾¤åœ¨è¿œå¤„çš„èƒŒå½±è‹¥éšè‹¥ç°ï¼Œæœ€åæ¶ˆå¤±ä¸è§äº†ã€‚ä»¿ä½›æ•´ä¸ªä¸–ç•Œåªå‰©ä¸‹æˆ‘ç‹¬è‡ªä¸€äººå’Œè¿™ä¸€ç‰‡ç¯å…‰ä¸‹çš„é›ªåœ°ã€‚æˆ‘å‘å®¿èˆæ¥¼èµ°å»ï¼ŒæŠ¬å¤´æƒ³æœ›æœ›è¿™å¹³æ—¶å¹¶ä¸é¥è¿œçš„å»ºç­‘ç‰©ï¼Œå´ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ã€‚æˆ‘åœ¨é›ªä¸­é»˜é»˜åœ°èµ°ç€ï¼Œæˆ‘æƒ³ï¼Œå¦‚æœæ–¹å‘æ²¡é”™æˆ‘åº”è¯¥æ€»èƒ½å›åˆ°å®¿èˆã€‚å®¿èˆé‡Œæ²¡æœ‰ä¾›æš–ï¼Œä½†å®¤å‹ä»¬å—¦å—¦çš„è¯´è¯å£°è®©æˆ‘è§‰å¾—æš–å’Œã€‚é£é›ªä¹Ÿè®¸å°±æ˜¯åœ¨é‚£ä¸ªç«¥è¯èˆ¬çš„å¤œæ™šå¼€å§‹æµ¸å…¥æˆ‘çš„ä¸–ç•Œï¼Œå¤šå°‘å¹´åæˆ‘æ‰çŸ¥è§‰ï¼Œä¸€ä¸ªæ— çŸ¥æ— ç•çš„æˆ‘ä»ç„¶åœ¨é‚£ä¸ªå¤œæ™šçš„çº·æ‰¬å¤§é›ªä¸­é»˜é»˜å‰è¡Œã€‚\n\næ˜¥èŠ‚åçš„å¤œæ™šï¼Œæˆ‘ä»æ¸©æš–çƒ­é—¹çš„ç‚­ç«å°å±‹èµ°å‡ºæ¥ï¼Œå…³ä¸Šæˆ¿é—¨æ—¶æŠŠä¸€å±‹å­çš„æ¸©æš–ä¹Ÿéš”ç»åœ¨äº†èº«åã€‚æˆ‘çœ‹åˆ°å†¬å¤œæ¸…å†·çš„æœˆå…‰æ´’åœ¨å°å··ä½çŸ®çš„æˆ¿å±‹ä¸Šï¼Œä¸€é˜µæ— åº•çš„ææƒ§é¡·åˆ»è¢­ä¸Šå¿ƒå¤´ï¼ŒæŠŠæˆ‘ç§¯æ”’åœ¨ä½“å†…çš„æ¸©æš–å¸­å·ä¸€ç©ºã€‚åœ¨å†¬æœˆçš„æ¸…è¾‰ä¸‹ï¼Œè¿‘å¤„æˆ¿å±‹çš„é˜´å½±æ·¡æ·¡åœ°æŠ•å°„åœ¨å°å··ä¸Šï¼Œæœ¬å·²ç‹­å°ä½çŸ®çš„ä¹¡é—´è¡—å··æ›´æ˜¾å±€ä¿ƒã€‚æˆ‘æŠ¬çœ¼è¿œæœ›ï¼Œæƒ³çœ‹è§å¹¿é˜”çš„å¤œç©ºï¼Œç›®ä¹‹æ‰€åŠå´åªæœ‰ä¸€ç‰‡æœ¦èƒ§ï¼Œæ­£å¦‚å¾ˆå¤šå¹´å‰é‚£ä¸ªå¤§é›ªèŒ«èŒ«çš„å¤œæ™šã€‚æˆ‘çªç„¶å‘è§‰ï¼Œè¿™ä¸€åˆ‡ç«Ÿå¦‚æš—æ·¡èšå…‰ç¯ä¸‹ä¸€éƒ¨èˆå°å‰§çš„å¸ƒæ™¯ï¼Œæˆ‘å›å¤´çœ‹çœ‹ç”µè§†é—ªçƒçš„æˆ¿å±‹ï¼Œéš”ç€å‡ç»“ç€æ°´æ±½çš„ç»ç’ƒçª—ï¼Œæœ¦èƒ§ä¸­å¤§äººå’Œå­©å­ä»¬ä»åœ¨å¬‰ç¬‘ã€‚æˆ‘åƒå‡ºç¥çš„èˆå°å‰§æ¼”å‘˜ï¼Œæ…Œå¼ ä¸­æ©é¥°è‡ªå·±çš„å¤±æ€ï¼ŒåŒ†å¿™å›åˆ°å±‹ä¸­ã€‚æ¸…å†·æœˆå…‰ä¸‹å†¬å¤œçš„å··é“æ— äººé©»è¶³ï¼Œå±‹å†…å±‹å¤–ä»¿ä½›ä¸¤ä¸ªä¸–ç•Œï¼Œæˆ‘å®³æ€•æ™šä¸€ç‚¹å°±å†ä¹Ÿå›ä¸åˆ°æˆ‘çš„å®¶äººä¸­é—´ã€‚\n\né‚£äº›å†¬å¤©çš„å¤œæ™šæˆ‘ä¹…ä¹…ä¸èƒ½å¿˜æ€€ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä½•äººå¸ƒä¸‹äº†è¿™ä¸€å¹•å¹•åœºæ™¯ï¼Œæœ¦èƒ§å¤œè‰²ä¹‹å¤–æ˜¯å¦æœ‰è§‚ä¼—æ›¾å±æ¯å‡è§†ï¼Œä½†æˆ‘çŸ¥é“æˆ‘å·²ç»æŠŠæˆ‘å…¨éƒ¨çš„ç”Ÿå‘½å’Œæ„Ÿæƒ…éƒ½æŠ•å…¥è¿›æ¥äº†ï¼Œæˆ‘çš„äººç”Ÿæ—©å·²ä¸è‡ªä¸»åœ°å¾å¾å±•å¼€äº†ã€‚\n\nå½“åˆ—è½¦é©¶å‡ºè½¦ç«™ï¼Œå†æ¬¡é©¶å…¥ç”°é‡æ—¶ï¼Œæˆ‘çœ‹åˆ°ç‰‡ç‰‡ç§¯é›ªä¸­é™†é™†ç»­ç»­å±•éœ²å‡ºçš„é’é’éº¦è‹—ï¼Œå†¬å¤©é‡Œæ²¡äººä¸ºå®ƒä»¬æ¸…ç†ç§¯é›ªã€é®è”½å¯’é£ï¼Œæ¯ä¸ªäººæœ‰æ¯ä¸ªäººçš„å†¬å¤©ã€‚å½“åˆ—è½¦è¿œå»ï¼Œæ¸…æ™¨çš„é˜³å…‰åˆå¼€å§‹ç…§å°„å¤§åœ°ï¼Œæ‰€æœ‰çš„ç”Ÿå‘½éƒ½åœ¨è¿™ä¸ªå†¬å¤©çš„å¯’å†·å’Œå†°é›ªä¸­é•¿äº†ä¸€å²ã€‚\n\n2020 å¹´ 5 æœˆ\nå†œå† å››æœˆå»¿ä¸ƒ\n","tags":["æ•£æ–‡"],"categories":["life"]},{"title":"æœºå™¨å­¦ä¹ åŸºç¡€-BP(Error Back Propagation)ç®—æ³•çš„æ•°å­¦åŸç†","url":"/archives/34/","content":"\n\næœ¬æ–‡å°± [coursera](https://www.coursera.org/) ä¸Šæ–¯å¦ç¦å¤§å­¦å´æ©è¾¾æ•™æˆçš„[ã€Šæœºå™¨å­¦ä¹ ã€‹](https://www.coursera.org/learn/machine-learning)è¯¾ç¨‹ä¸­çš„[è¯¯å·®åå‘ä¼ æ’­ç®—æ³•](https://baike.baidu.com/item/BP%E7%AE%97%E6%B3%95/1252294?fr=aladdin)ï¼ˆ[Error Back Propagation](https://en.wikipedia.org/wiki/Backpropagation)ï¼‰è¿›è¡Œæ¨å¯¼è¯æ˜\n\n<!--more-->\n\n#### æ˜ç¡®ä¸€äº›è®°æ³•\n\nç®€å•å°†ç¥ç»ç½‘ç»œçš„ç¤ºæ„å¦‚ä¸‹ï¼Œæœ‰åŠ©äºæ¨å¯¼è¿‡ç¨‹ä¸­ç†è§£ï¼Œè¯»è€…ä¹Ÿå¯è‡ªå·±ç”»å‡ºç¤ºæ„å›¾:\n\n![net](/assets/images/34-1.svg)\n\næœ¬æ–‡æ²¿ç”¨å…¬å¼€è¯¾ä¸­çš„ç¬¦å·è®°æ³•ï¼š\n\n* ç”¨å­—æ¯ $z$ å’Œ $a$ åˆ†åˆ«è¡¨ç¤ºæ¯ä¸ªç¥ç»å…ƒä¸Šçš„è¾“å…¥å’Œè¾“å‡ºï¼›å…¶ä¸Šæ ‡ $^{(l)}$ è¡¨ç¤ºè¯¥ç¥ç»å…ƒæ‰€åœ¨çš„å±‚æ•°ï¼Œ$L$ è¡¨ç¤ºç¥ç»ç½‘ç»œçš„æ€»å±‚æ•°ï¼›å…¶ä¸‹æ ‡ $_i$ è¡¨ç¤ºè¯¥ç¥ç»å…ƒåœ¨è¯¥å±‚çš„æ ‡å·ï¼Œå¹¶ç”¨ $S_l$ è¡¨ç¤ºç¬¬ $l$ å±‚ç¥ç»å…ƒçš„æ€»ä¸ªæ•°ã€‚\n* ç‰¹åˆ«åœ°ï¼Œä¹ æƒ¯ç”¨ $_k$ ä¸‹æ ‡è¡¨ç¤ºè¾“å‡ºå±‚çš„ç¥ç»å…ƒæ ‡å·ï¼Œ$K$ è¡¨ç¤ºè¾“å‡ºå±‚ç¥ç»å…ƒçš„æ€»æ•°ï¼Œå³ $S_L = K$\n* ç”¨å¸Œè…Šå­—æ¯ $\\boldsymbol\\Theta$ è¡¨ç¤ºç³»æ•°çŸ©é˜µï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªä¸‰ç»´çŸ©é˜µã€‚$\\boldsymbol\\Theta^{(l)}$ è¡¨ç¤ºç¬¬ $l$ å±‚çš„ç³»æ•°çŸ©é˜µï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ª $S^{l+1} \\times (S^l + 1)$ çŸ©é˜µã€‚\n* ç”¨ $g(x)$ è¡¨ç¤º [S å‹å‡½æ•°](https://baike.baidu.com/item/S%E5%9E%8B%E5%87%BD%E6%95%B0/19178062?fr=aladdin)ï¼ˆ[Sigmoid function](https://en.wikipedia.org/wiki/Sigmoid_function)ï¼‰:\n$$\ng(x) = \\frac1{1+e^{-x}},\\ x \\in R \\tag{1.1}\n$$\n* ä¸”å®¹æ˜“å¾—ï¼š\n$$\ng'(x) = g(x)\\left[1-g(x)\\right] \\tag{1.2}\n$$\n* $\\{\\boldsymbol{x}^{(i)}, y^{(i)}\\}$ è¡¨ç¤ºè®­ç»ƒæ ·æœ¬ï¼Œå½“æœ‰å¤šä¸ªè®­ç»ƒæ ·æœ¬æ—¶ï¼Œç”¨ä¸Šæ ‡è¿›è¡Œæ ‡å·ã€‚å¹¶å­—æ¯ $m$ è¡¨ç¤ºè®­ç»ƒæ ·æœ¬çš„æ€»æ•°ã€‚\n\n**éœ€è¦æ³¨æ„**ï¼Œé™¤äº†è¾“å‡ºå±‚å¤–ï¼Œæ¯ä¸€å±‚éƒ½åº”åŠ å…¥ä¸€ä¸ªåç½®é¡¹:\n$$\na^{(l)}_0 = 1,\\ \\ l = 1,2,\\cdots,L-1\n$$\n\næ ¹æ®ä»¥ä¸Šè®°æ³•ï¼Œæœ‰ï¼š\n$$\nz^{(l)}_i = \\sum\\limits_{j=0}^{S_{l-1}}\\Theta^{(l)}_{ij} a^{(l-1)}_j\n,\\ \\ i = 1,2,\\cdots S_l \\tag{1.3}\n$$\n\n$$\n\\begin{aligned}\n&a^{(l)}_0 = 1, \\\\\n&a^{(l)}_i = g(z^{(l)}_i),\\ \\ i = 1,2,\\cdots S_l\n\\end{aligned}\n\\tag{1.4}\n$$\n\n\\* å¦å¤–ï¼Œæ–‡ä¸­ä¸€èˆ¬ä½¿ç”¨ç²—ä½“å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼ˆæˆ–å‘é‡ï¼‰ï¼Œå¦‚ $\\boldsymbol x$ï¼Œè¡¨ç¤ºè¾“å…¥ç‰¹å¾å‘é‡ï¼›å¸¸è§„å­—æ¯è¡¨ç¤ºå®æ•°ï¼Œå¦‚ $x_1$ è¡¨ç¤ºå‘é‡ $\\boldsymbol x$ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®æ•°ã€‚ï¼ˆå³ä½¿ä¸å…³æ³¨è¿™ä¸ªåŒºåˆ«ï¼Œä¹Ÿåº”èƒ½ä»ä¸Šä¸‹æ–‡åŒºåˆ†å‡ºä¸€ä¸ªå­—æ¯ä»£è¡¨çš„æ˜¯å‘é‡æˆ–å®æ•°ï¼‰\n\n#### ç›®çš„\n\n>æˆ‘ä»¬å·²ç»èµ°å¾—å¤ªè¿œï¼Œä»¥è‡³äºå¿˜è®°äº†ä¸ºä»€ä¹ˆè€Œå‡ºå‘ â€”â€”çºªä¼¯ä¼¦<a href=\"#note1\">$^{æ³¨1}$</a>\n\næˆ‘ä»¬è¦æ—¶åˆ»è®°å¾—æˆ‘ä»¬æƒ³è¦å¾—åˆ°ä»€ä¹ˆï¼Œä»¥è‡³äºå½“æˆ‘ä»¬åœ¨è¿›è¡Œå¤æ‚çš„æ¨å¯¼è¿‡ç¨‹ä¸­ä»èƒ½æ¸…æ¥šçš„çŸ¥é“æ¯ä¸€æ­¥çš„æ„ä¹‰ï¼Œå’Œæ¥ä¸‹æ¥çš„æ–¹å‘ã€‚\n\nBP ç®—æ³•æ˜¯ç¥ç»ç½‘ç»œå‚æ•°è®­ç»ƒçš„é‡è¦ç®—æ³•ï¼Œå…¶å…³é”®åœ¨äºå¾—åˆ°ä»£ä»·å‡½æ•° $J(\\boldsymbol\\Theta)$ å¯¹äºæ¯ä¸€ä¸ªå‚æ•° $\\Theta^{(l)}_{ij}$ çš„åå¯¼æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æœŸæœ›é€šè¿‡è¯¥ç®—æ³•ï¼Œæœ€ç»ˆå¾—åˆ°å¦‚ä¸‹çš„å†…å®¹ï¼š\n$$\\begin{aligned}\n\\frac{\\partial J}{\\partial\\Theta^{(1)}_{1\\ 0}} &= \\cdots \\\\\n\\frac{\\partial J}{\\partial\\Theta^{(1)}_{1\\ 2}} &= \\cdots \\\\\n&\\cdots \\\\\n\\end{aligned}\n\\tag{1.5}\n$$\n\næœ‰äº†è¿™äº›å¯¼æ•°å€¼æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨æ¢¯åº¦ä¸‹é™æˆ–å…¶ä»–ç»å…¸ç®—æ³•ï¼Œå¾ˆå®¹æ˜“åœ°ï¼ˆè°ƒç”¨åº“ï¼‰å¯¹ä»£ä»·å‡½æ•° $J(\\boldsymbol\\Theta)$ è¿›è¡Œæœ€å°åŒ–ï¼Œä»¥è®­ç»ƒå‡ºåˆé€‚çš„å‚æ•°ã€‚\n\næ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯å¾—åˆ°ä¸€ç³»åˆ—å½¢å¦‚ $1.5$ å¼çš„åå¯¼ã€‚\n\n#### ä»£ä»·å‡½æ•°\n\nå¦‚ä½•é€‰å–åˆé€‚çš„ä»£ä»·å‡½æ•°å‘¢ï¼Ÿå½“æˆ‘ä»¬è§‚å¯Ÿç¥ç»ç½‘ç»œçš„æœ€åä¸€å±‚æ—¶ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œè¾“å…¥ä¸º $\\boldsymbol a^{(L-1)}$ çš„ $K$ åˆ†ç±»é—®é¢˜ã€‚\n\nä¾¿å¾—åˆ°äº†ç¥ç»ç½‘ç»œçš„ä»£ä»·å‡½æ•°:\n\n$$\\begin{array}{r}\nJ(\\boldsymbol\\Theta)\n=-\\frac1m\\sum\\limits_{j=1}^m\\sum\\limits_{k=1}^K\n\\left\\{\ny^{(j)}_kln\\left(h_\\boldsymbol\\Theta(\\boldsymbol x^{(j)})\\right)_k +\n\\left(1-y^{(j)}_k\\right)\nln\\left[1-\\left(h_\\boldsymbol \\Theta(\\boldsymbol x^{(j)})\\right)_k\\right]\n\\right\\}, \\tag{3.1} \\\\\ny_k^{(j)} = \\mathbf I_k(y^{(j)}) = \\begin{cases}\n1, & y^{(j)} = k \\\\\n0, & y^{(j)} \\not={k}\n\\end{cases}\n\\end{array}$$\n\nå…¶ä¸­ $h_\\boldsymbol\\Theta(\\boldsymbol x)$ æ˜¯ä¸€ä¸ª $K$ ç»´å‘é‡ï¼Œ$\\Big(h_\\boldsymbol\\Theta(\\boldsymbol x)\\Big)_k$ å°±æ˜¯æ¯ä¸ªæ ·æœ¬æ‰€å¯¹åº”çš„ç¬¬ $k$ ä¸ªè¾“å‡ºå€¼ï¼Œå³å¯¹æ¯ä¸ªæ ·æœ¬æ¥è¯´éƒ½æœ‰ï¼š\n$$\n\\Big(h_\\boldsymbol\\Theta(\\boldsymbol x)\\Big)_k = a^{(L)}_k \\tag{3.2}\n$$\n\n\\* ä»£ä»·å‡½æ•°åœ¨ä¸åŒçš„ç®—æ³•ä¸­å¯èƒ½æœ‰ç»†å¾®å·®åˆ«ï¼Œåœ¨[è¥¿ç“œä¹¦](https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/23613024?fr=aladdin)çš„BPç®—æ³•ä¸€èŠ‚ä¸­ä½¿ç”¨äº†å‡æ–¹è¯¯å·®ä½œä¸ºä»£ä»·å‡½æ•°ï¼Œå…¶å€¼çº¦ç­‰äºä¸Šè¿°ä»£ä»·å‡½æ•°ï¼Œå¹¶ä¸”åå‘ä¼ æ’­çš„æ¨å¯¼è¿‡ç¨‹åŸºæœ¬ä¸€è‡´ã€‚\n\n#### æœ€åä¸€å±‚å‚æ•°çš„åå¯¼\n\n**ä¸ºç®€åŒ–è®°æ³•ï¼Œæˆ‘ä»¬å…ˆåœ¨åªæœ‰ä¸€ä¸ªæ ·æœ¬ $\\{\\boldsymbol x, \\boldsymbol y\\}$ çš„æƒ…å†µä¸‹æ¨å¯¼ã€‚**\n\nç”± $3.1$ã€$3.2$ å¼çŸ¥ï¼Œæ­¤æ—¶ä»£ä»·å‡½æ•°ä¸ºï¼š\n$$\nJ(\\boldsymbol\\Theta) =  \n-\\sum\\limits_{k=1}^K \\left[\ny_klna^{(L)}_k +\n(1-y_k)ln\\left(1-a^{(L)}_k\\right)\n\\right],\\ y_k = \\mathbf{I}_k(\\boldsymbol{y}) \\tag{4.1}\n$$\n\nç”± $1.3$ã€$1.4$ å¼ï¼ŒåŠå¤åˆå‡½æ•°æ±‚å¯¼æ³•åˆ™ï¼Œå¯å¾—ä»£ä»·å‡½æ•° $J(\\boldsymbol\\Theta)$ å¯¹æœ€åä¸€å±‚å‚æ•° $\\boldsymbol\\Theta^{(L-1)}$ çš„åå¯¼ï¼š\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-1)}_{ij}} =\n\\frac{\\partial J}{\\partial a_i^{(L)}} \\cdot\n\\frac{\\mathrm{d}a^{(L)}_i}{\\mathrm{d}z^{(L)}_i} \\cdot\n\\frac{\\partial z^{(L)}_i}{\\partial \\boldsymbol{\\Theta}^{(L-1)}_{ij}}\n\\tag{4.2}\n$$\n\n$$\n$$\n\nåˆ†åˆ«è®¡ç®—ä¸Šå¼ä¸­çš„ 3 é¡¹ï¼š\n\n$$\n\\frac{\\partial J}{\\partial a_i^{(L)}} =\n-\\Big(\\frac{y_i}{a^{(L)}_i} + \\frac{y_i-1}{1-a^{(L)}_i}\\Big) \\tag{4.3}\n$$\n\nç”± $1.4$ã€$1.2$ å¼å¯å¾—:\n$$\n\\frac{\\mathrm{d}a^{(L)}_i}{\\mathrm{d}z^{(L)}_i} =\na^{(L)}_i\\left(1-a^{(L)}_i\\right) \\tag{4.4}\n$$\n\nç”± $1.3$ å¼å¯å¾—ï¼š\n$$\n\\frac{\\partial z^{(L)}_i}{\\partial \\boldsymbol{\\Theta}^{(L-1)}_{ij}}\n=a^{(L-1)}_j \\tag{4.5}\n$$\n\nå°†ä¸Šè¿°ä¸‰å¼å¸¦å› $4.2$ å¼ï¼Œå¹¶åŒ–ç®€ï¼Œç«‹å³å¾—ï¼š\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-1)}_{ij}} =\n(a^{(L)}_i - y_i)a^{(L-1)}_j \\tag{4.6}\n$$\n\nå¹¶ä¸”æœ‰,\n$$\n\\frac{\\partial J}{\\partial z^{(L)}_i} =\n\\frac{\\partial J}{\\partial a_i^{(L)}} \\cdot\n\\frac{\\mathrm{d}a^{(L)}_i}{\\mathrm{d}z^{(L)}_i} =\na^{(L)}_i - y_i\n\\tag{4.7}\n$$\n\n**è®°**\n$$\n\\delta^{(L)}_i = a^{(L)}_i - y_i\n\\tag{4.8}\n$$\n\nç§°ä¸ºç¬¬ $L$ å±‚ï¼ˆè¾“å‡ºå±‚ï¼‰ç¬¬ $i$ ä¸ªç¥ç»å…ƒçš„â€œè¯¯å·®é¡¹â€ã€‚\n\n**è‡³æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°ä»£ä»·å‡½æ•°å¯¹æœ€åä¸€å±‚å‚æ•°çš„åå¯¼**:\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-1)}_{ij}} =\n\\delta^{(L)}_i a^{(L-1)}_j\n\\tag{4.9}\n$$\n\nä¸”æœ‰ï¼š\n$$\n\\frac{\\partial J}{\\partial z^{(L)}_i} = \\delta^{(L)}_i\n\\tag{4.10}\n$$\n\n#### å‘å‰ä¼ æ’­\n\nä¸‹é¢æ±‚ä»£ä»·å‡½æ•° $J(\\boldsymbol\\Theta)$ å¯¹ç¬¬ $L-2$ å±‚å‚æ•° $\\boldsymbol\\Theta^{(L-2)}$ çš„åå¯¼ï¼š\n\n $$\n\\frac{\\partial J}{\\partial\\Theta^{(L-2)}_{ij}} \\tag{5.1}\n $$\n\nç”± $1.3$ã€$1.4$ å¼å¯å¾—ï¼š\n$$\nz^{(L)}_k = \\sum\\limits_{i=0}^{S_{L-1}}\n\\boldsymbol \\Theta^{(L-1)}_{ki} a^{(L-1)}_i \\tag{5.2}\n$$\n\n$$\na^{(L-1)}_i = g(z^{(L-1)}_i), \\ i \\not ={0} \\tag{5.3}\n$$\n\n$$\nz^{(L-1)}_i = \\sum\\limits_{j=0}^{S_{L-2}}\n\\boldsymbol \\Theta^{(L-2)}_{ij} a^{(L-2)}_j \\tag{5.4}\n$$\n\nå› æ­¤ç”±ä¸Šè¿° 3 å¼çŸ¥å¯¹äºä»»æ„ä¸€ä¸ª $z^{(L)}_k$ éƒ½æ˜¯ $\\Theta^{(L-2)}_{ij}$ çš„å‡½æ•°ï¼›è€Œ $J(\\boldsymbol\\Theta)$ åˆæ˜¯æ¯ä¸€ä¸ª $z^{(L)}_k$ çš„å‡½æ•°ï¼Œæ‰€ä»¥æœ‰ï¼ˆç”»å‡ºç¥ç»ç½‘ç»œå›¾ä¸­ç›¸å…³çš„éƒ¨åˆ†ï¼Œç»“åˆå›¾ç¤ºæ›´å®¹æ˜“ç†è§£ï¼‰ï¼š\n\n$$\n\\begin{aligned}\n\\frac{\\partial J}{\\partial\\Theta^{(L-2)}_{ij}} &=\n\\sum\\limits_{k=1}^{K}\\frac{\\partial J}{\\partial z^{(L)}_k} \\cdot\n\\frac{\\partial z^{(L)}_k}{\\partial a^{(L-1)}_i} \\cdot\n\\frac{\\mathrm{d}a^{(L-1)}_i}{\\mathrm{d}z^{(L-1)}_i} \\cdot\n\\frac{\\partial z^{(L-1)}_i}{\\partial \\boldsymbol \\Theta^{(L-2)}_{ij}} \\\\\n&= \\frac{\\partial J}{\\partial z^{(L-1)}_i} \\cdot\n\\frac{\\partial z^{(L-1)}_i}{\\partial \\boldsymbol \\Theta^{(L-2)}_{ij}} \\\\\n\\end{aligned}\n\\tag{5.5}\n$$\n\nåˆ†åˆ«è®¡ç®—ä¸Šå¼å„å¯¼æ•°é¡¹ï¼Œå¾—ï¼š\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-2)}_{ij}} =\n\\sum\\limits_{k=1}^{K} \\delta^{(L)}_k \\cdot\n\\Theta^{(L-1)}_{ki} \\cdot\ng'(z^{(L-1)}_i) \\cdot\na^{(L-2)}_j\n\\tag{5.6}\n$$\n\n**è®°**\n$$\n\\delta^{(L-1)}_i =\n\\sum\\limits_{k=1}^K \\delta^{(L)}_k \\cdot\n\\Theta^{(L-1)}_{ki} \\cdot\ng'(z^{(L-1)}_i)\n\\tag{5.7}\n$$\nè¡¨ç¤ºç¬¬ $L-1$ å±‚ç¬¬ $i$ ä¸ªç¥ç»å…ƒçš„â€œè¯¯å·®é¡¹â€\n\nåˆ™æœ‰ï¼š\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-2)}_{ij}} =\n\\delta^{(L-1)}_i a^{(L-2)}_j\n\\tag{5.8}\n$$\n\nç»“åˆ $5.5$ã€$5.8$ï¼ŒåŒæ ·æœ‰ï¼š\n$$\n\\frac{\\partial J}{\\partial z^{(L-1)}_i} =\n\\delta^{(L-1)}_i\n\\tag{5.9}\n$$\n\n#### æ‰¾å‡ºé€šå¼\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬æ±‚å¾—äº†ä»£ä»·å‡½æ•°å¯¹ $\\boldsymbol\\Theta^{(L)}$ å’Œ $\\boldsymbol\\Theta^{(L-1)}$ çš„åå¯¼ï¼Œåœ¨ç»§ç»­å¯¹ $\\boldsymbol\\Theta^{(L-2)}, \\cdots, \\boldsymbol\\Theta^{(1)}$ æ±‚å¯¼å‰ï¼Œå…ˆçœ‹çœ‹æˆ‘ä»¬å¾—åˆ°äº†å“ªäº›æœ‰è¶£çš„ç»“æœã€‚\n\næˆ‘ä»¬å¯¹å‰é¢ä¸¤æ­¥å¾—åˆ°çš„ç»“æœç¨ä½œæ•´ç†ï¼Œå¾—åˆ°ï¼š\n$$\n\\delta_k^{(L)} = a_k^{(L)} - y_k =\n\\frac{\\partial J}{\\partial z^{(l)}_k}\n\\tag{6.1}\n$$\n\n$$\n\\delta^{(L-1)}_i =\n\\sum\\limits_{k=1}^K \\delta^{(L)}_k \\cdot\n\\Theta^{(L-1)}_{ki} \\cdot\ng'(z^{(L-1)}_i) =\n\\frac{\\partial J}{\\partial z^{(L-1)}_i}\n\\tag{6.2}\n$$\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-1)}_{ij}} =\na^{(L-1)}_j\\delta^{(L)}_i \\tag{6.3}\n$$\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(L-2)}_{ij}} =\na^{(L-2)}_j \\delta^{(L-1)}_i \\tag{6.4}\n$$\n\nè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬å€¾å‘äºä½œå‡ºä»¥ä¸‹çŒœæƒ³ï¼šï¼ˆå¦‚æœä½ è§‰å¾—è¿™ä¸ªçŒœæƒ³ä¸å¤Ÿâ€œè‡ªç„¶â€ï¼Œå¯ä»¥ç»§ç»­æ±‚å‡º$\\frac{\\partial J}{\\partial\\Theta^{(L-3)}_{ij}}$ï¼Œå†å°†ç»“æœæ”¾åœ¨ä¸€èµ·æ¯”è¾ƒï¼Œä¼šå‘ç°åšå‡ºè¿™ä¸ªçŒœæƒ³éå¸¸åˆç†å’Œè‡ªç„¶ï¼‰\n\nå‡è®¾ä¸€ï¼š*è‹¥è®°ï¼š*\n$$\n\\delta_k^{(L)} =\na_k^{(L)} - y_k \\tag{6.5}\n$$\n$$\n\\delta^{(l)}_j =\n\\sum\\limits_{i=1}^{S_{l+1}} \\delta^{(l+1)}_i \\Theta^{(l)}_{ij}\ng'(z^{(l)}_j)\n,\\ \\ l\\not=K  \\tag{6.6}\n$$\n\n*åˆ™å¯¹ä»»æ„ $z^{(l)}_j$ å’Œ $\\Theta^{(l)}_{ij}$ï¼Œæœ‰:*\n\n$$\n\\text{(1).}\\ \\\n\\frac{\\partial J}{\\partial z^{(l)}_j} =\n\\delta^{(l)}_j,\n\\tag{6.7}\n$$\n\n$$\n\\text{(2).}\\ \\ \\frac{\\partial J}{\\partial\\Theta^{(l)}_{ij}} =\na^{(l)}_j \\delta^{(l+1)}_i. \\tag{6.8}\n$$\n\nè‹¥è¯¥å‡è®¾æ­£ç¡®ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°äº†åå‘é€å±‚æ±‚è§£ä»£ä»·å‡½æ•°å¯¹å‚æ•°çš„åå¯¼çš„æ–¹æ³•ã€‚\n\næ¥ä¸‹æ¥è¯æ˜è¯¥å‡è®¾æ˜¯å¦æ­£ç¡®ã€‚\n\n#### å½’çº³è¯æ˜\n\næ˜¾ç„¶ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ $6.1-6.4$ å¼å·²ç»è¯æ˜äº† $l=K$ å’Œ $l=K-1$ æ—¶ï¼Œ*å‡è®¾ä¸€* çš„æ­£ç¡®æ€§ã€‚é‡‡ç”¨æ•°å­¦å½’çº³æ³•ï¼Œå‡è®¾å½“ $l=n<L$ æ—¶ä¸Šè¿° *å‡è®¾ä¸€* ä»æˆç«‹ï¼Œå³æœ‰ï¼š\n\n$$\n\\frac{\\partial J}{\\partial z^{(n+1)}_i} = \\delta^{(n+1)}_i \\tag{7.1}\n$$\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(n)}_{ij}} =\na^{(n)}_j \\delta^{(n+1)}_i \\tag{7.2}\n$$\n\næ—¶ï¼Œè€ƒå¯Ÿ $l=n-1$ æ—¶å‡è®¾çš„æ­£ç¡®æ€§ã€‚\n\nç”± $7.1$ã€$7.2$ å¼ï¼ŒåŒ $5.5$ å¼æ¨å¯¼è¿‡ç¨‹ï¼Œæœ‰ï¼š\n$$\n\\begin{aligned}\n\\frac{\\partial J}{\\partial\\Theta^{(n-1)}_{ij}} &=\n\\sum\\limits_{t=1}^{S_{n+1}}\n\\frac{\\partial J}{\\partial z^{(n+1)}_t} \\cdot\n\\frac{\\partial z^{(n+1)}_t}{\\partial a^{(n)}_i} \\cdot\n\\frac{\\mathrm{d}a_i^{(n)}}{\\mathrm{d}z^{(n)}_i} \\cdot\n\\frac{\\partial z^{(n)}_i}{\\partial\\Theta^{(n-1)}_{ij}} \\\\\n&=\n\\frac{\\partial J}{\\partial z^{(n)}_i} \\cdot\n\\frac{\\partial z^{(n)}_i}{\\partial\\Theta^{(n-1)}_{ij}}\n\\end{aligned}\n\\tag{7.3}\n$$\n\nå°† $7.1$ å¼å¸¦å…¥ä¸Šå¼ï¼Œå¹¶å¯¹å‰©ä½™é¡¹é€é¡¹æ±‚å¯¼ï¼Œå¾—ï¼š\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(n-1)}_{ij}} =\n\\sum\\limits_{t=1}^{S_{n}}\n\\delta^{(n+1)}_t\\cdot\n\\Theta^{(n)}_{ti} \\cdot\ng'(z^{(n)}_i)\\cdot\na^{(n-1)}_j \\tag{7.4}\n$$\n\nç»“åˆ $7.3$ã€$7.4$ åŠ $6.6$ å¼ä¾¿æœ‰ï¼š\n\n$$\n\\begin{aligned}\n\\frac{\\partial J}{\\partial z^{(n)}_i} &=\n\\sum\\limits_{t=1}^{S_{n}}\n\\delta^{(n+1)}_t\\cdot\n\\Theta^{(n)}_{ti} \\cdot\ng'(z^{(n)}_i)\\\\\n&=\n\\delta^{(n)}_i\n\\end{aligned}\n\\tag{7.5}\n$$\n\n$$\n\\frac{\\partial J}{\\partial\\Theta^{(n-1)}_{ij}} =\na^{(n-1)}_j \\delta^{(n)}_i\n\\tag{7.6}\n$$\n\næ‰€ä»¥ *å‡è®¾ä¸€* å¯¹ $l=n-1$ æ—¶ä¹Ÿæˆç«‹ï¼Œç”±æ•°å­¦å½’çº³æ³•ï¼Œ *å‡è®¾ä¸€* æˆç«‹å¾—è¯ï¼\n\n#### çŸ©é˜µè¡¨ç¤ºæ³•\n\nä»¥ä¸Š *å‡è®¾ä¸€* çš„å†…å®¹å°±æ˜¯ BP ç®—æ³•çš„æ ¸å¿ƒå†…å®¹ï¼Œåœ¨æ›´å¤šæƒ…å†µä¸‹è¿˜å¯ä»¥ä½¿ç”¨çŸ©é˜µæ¥è¡¨ç¤ºï¼š\n\nè‹¥è®°ï¼š\n$$\n\\begin{aligned}\n&\\delta^{(L)}_k = a^{(L)}_k - y_k \\\\\n&\\boldsymbol\\delta^{(l)} =\n\\left(\\boldsymbol\\Theta^{(l)}\\right)^T \\times\n\\boldsymbol\\delta^{(l+1)} .*\ng'(\\boldsymbol z^{(l)}), \\ \\\nl \\not=L\n\\end{aligned}\n\\tag{8.1}\n$$\nï¼ˆ$.*$ è¡¨ç¤ºå¯¹å¯¹åº”å…ƒç´ é€ä¸ªæ‰§è¡Œä¹˜æ³•è¿ç®—ï¼‰ï¼Œåˆ™æœ‰ï¼š\n$$\n\\frac{\\partial J(\\boldsymbol\\Theta)}{\\partial\\boldsymbol\\Theta^{(l)}} =\n\\boldsymbol\\delta^{(l+1)} \\times\n\\left(\\boldsymbol{a^{(l)}}\\right)^T\n\\tag{8.2}\n$$\n\n#### å¤šæ ·æœ¬çš„æƒ…å†µ\n\nåœ¨çŸ©é˜µè¡¨ç¤ºæ³•çš„åŸºç¡€ä¸‹ï¼Œå®¹æ˜“å†™å‡ºåœ¨ $m$ ä¸ªè®­ç»ƒæ ·æœ¬ä¸‹ BP ç®—æ³•çš„ç»“è®ºï¼š\n\næ ¹æ®å¤šæ ·æœ¬ä¸‹çš„ä»£ä»·å‡½æ•°ï¼ˆ$3.1$ å¼ï¼‰ï¼Œä»¥åŠ*å‡è®¾ä¸€*çš„ç»“è®º $8.1$ã€$8.2$ å¼ï¼Œæœ‰ï¼š\n$$\n\\frac{\\partial J(\\boldsymbol\\Theta)}{\\partial\\boldsymbol\\Theta^{(l)}} =\n\\frac1m \\sum\\limits_{i=1}^m\n\\left[\n\\boldsymbol\\delta^{(l+1)} \\times\n\\left(\\boldsymbol{a^{(l)}}\\right)^T\n\\right]_i\n\\tag{8.3}\n$$\n\n#### æ­£åˆ™åŒ–\n\nä¸ºäº†ä¸€å®šç¨‹åº¦åœ°é˜²æ­¢è¿‡æ‹Ÿåˆçš„æƒ…å†µåœ°å‘ç”Ÿï¼Œé€‰å–åˆé€‚çš„ $\\lambda$ å°†æ­£åˆ™é¡¹åŠ å…¥ä»£ä»·å‡½æ•°ï¼ˆ$3.1$ å¼ï¼‰ï¼Œä¾¿å¾—åˆ°ï¼š\n\n$$\n\\begin{aligned}\nJ(\\boldsymbol\\Theta) &= -\\frac1m\\sum\\limits_{j=1}^m\\sum\\limits_{k=1}^K\n\\left\\{\n y^{(j)}_kln\\left(h_\\boldsymbol\\Theta(\\boldsymbol x^{(j)})\\right)_k +\n\\left(1-y^{(j)}_k\\right)ln\\left[1-\\left(h_\\boldsymbol\\Theta(\\boldsymbol x^{(j)})\\right)_k\\right]\n\\right\\} \\\\\n&+\n\\frac\\lambda{2m} \\sum\\limits_{l=1}^{L-1}\\sum\\limits_{i=1}^{S_{l+1}}\n\\sum\\limits_{j=1}^{S_l} \\Big(\\Theta^{(l)}_{ij}\\Big)^2,\\\\\n&h_\\boldsymbol\\Theta(\\boldsymbol x) \\in \\mathbb R^Kï¼Œ\n\\left(h_\\boldsymbol\\Theta(\\boldsymbol x)\\right)_i = i^{(th)} \\text{output}\n\\end{aligned}\n\\tag{9.1}\n$$\n\nåˆ™ï¼š\n$$\n\\frac{\\partial J(\\boldsymbol\\Theta)}{\\partial\\boldsymbol\\Theta^{(l)}} =\n\\frac1m \\sum\\limits_{i=1}^m\n\\left[\n\\boldsymbol\\delta^{(l+1)} \\times\n\\left(\\boldsymbol{a^{(l)}}\\right)^T\n\\right]_i +\n\\frac\\lambda m\\boldsymbol\\Theta^{(l)}\n\\tag{9.2}\n$$\n\n#### *BP ç®—æ³•çš„ä½¿ç”¨\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å°† BP ç®—æ³•çš„æ ¸å¿ƒå†…å®¹çš„æ•°å­¦åŸç†æ¨å¯¼å¹¶é˜è¿°å®Œæ•´äº†ã€‚\n\nç”¨ä¼ªä»£ç è¡¨ç¤ºä½¿ç”¨ BP ç®—æ³•æ¥æ±‚è§£åå¯¼çš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼ˆå…¶ä¸­ $\\Delta^{(l)}_{ij}$ è¡¨ç¤ºç¬¬ $i$ ä¸ªæ ·æœ¬ä¸­çš„ $\\delta^{(L)}_j$ï¼Œ$D^{(l)}_{ij}$ è¡¨ç¤º $\\frac{\\partial J}{\\partial\\Theta^{(l)}_{ij}}$ï¼‰ï¼š\n\n$$\n\\begin{aligned}\n&\\text{Set }\\Delta^{(l)}_{ij} = 0 \\text{ (for all l, i, j)} \\\\\n&\\text{For } i = 1  \\text{ to } m \\\\\n&\\ \\ \\ \\text{ Set } \\boldsymbol a^{(1)} = \\boldsymbol x^{(i)} \\\\\n&\\ \\ \\ \\text{ Perform forward propagation to compute } \\boldsymbol a^{(l)} \\text{ for } l = 2,3,\\cdots,L \\\\\n&\\ \\ \\ \\text{ Using } y^{(i)} \\text{, compute }\\boldsymbol\\delta^{(L)} =\n\\boldsymbol a^{(L)} - \\boldsymbol y^{(i)}_* \\\\\n&\\ \\ \\ \\text{ compute } \\boldsymbol\\delta^{(L-1)}, \\boldsymbol\\delta^{(L-2)},\n\\cdots, \\boldsymbol\\delta^{(2)} \\\\\n&\\ \\ \\ \\ \\ \\Delta^{(l)}_{ij} := \\Delta^{(l)}_{ij} +\na^{(l)}_j\\delta^{(l+1)}_i\\\\\n&D^{(l)}_{ij} := \\frac1m\\Delta^{(l)}_{ij}\n+ \\frac\\lambda m\\Theta^{(l)}_{ij} \\text{ if } j\\not=0 \\\\\n&D^{(l)}_{ij} := \\frac1m\\Delta^{(l)}_{ij} \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\\n\\text{ if } j=0\n\\end{aligned}\n$$\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸Šè¿°è¿‡ç¨‹å¾ˆå¤šæ­¥éª¤å¯ä»¥è½¬æ¢ä¸ºçŸ©é˜µè¿ç®—ä»¥æå‡æ€§èƒ½ã€‚\n\n***************\n\n<a name=\"note1\">[*æ³¨1*]</a> è¿™å¥è¯ç½‘ä¼ å‡ºè‡ªé»å·´å«©è¯—äººçºªä¼¯ä¼¦ï¼Œä½†æˆ‘åœ¨ç½‘ç»œä¸Šå¹¶æœªæŸ¥åˆ°ç¡®åˆ‡è¯æ®æˆ–å‡ºå¤„ï¼Œç”šè‡³æµè§ˆäº†ç½‘ä¸Šä¼ è¨€å‡ºå¤„å¾—ä½œå“ï¼Œå¹¶æœªå¾—åˆ°å°è¯ã€‚å¦‚æœä½ çŸ¥é“è¿™å¥è¯çš„å‡ºå¤„ï¼Œè¯·æŒ‡æ­£ï¼\n","tags":["ML"],"categories":["science"]},{"title":"æœºå™¨å­¦ä¹ åŸºç¡€-â€œé€»è¾‘â€å›å½’(logistic regression)çš„æ•°å­¦åŸç†","url":"/archives/33/","content":"é€šè¿‡ä½¿ç”¨ logistic regression å¤„ç†ä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜æ¥ç®€è¦åˆ†æå…¶ä¸­çš„æ•°å­¦åŸç†ã€‚\n<!--more-->\n\n### é—®é¢˜\n\nå‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œæ ¹æ®åŒ»å­¦å›¾åƒæ¥åˆ¤æ–­ç—…äººçš„è‚¿ç˜¤ä¸ºæ¶æ€§è¿˜æ˜¯è‰¯æ€§ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜ã€‚\n\nç›¸å¯¹äºå›å½’é—®é¢˜ï¼Œåˆ†ç±»é—®é¢˜çš„è¾“å‡ºå€¼ä¸ºç¦»æ•£å€¼ã€‚è¿›ä¸€æ­¥åœ°ï¼ŒäºŒåˆ†ç±»çš„è¾“å‡ºå€¼åªæœ‰ä¸¤ä¸ªï¼Œé€šå¸¸ç§°å…¶ä¸ºâ€œæ­£ç±»â€å’Œâ€œè´Ÿç±»â€ï¼Œä¹Ÿå¯ä»¥ç”¨ 1 å’Œ 0 åˆ†åˆ«è¡¨ç¤ºã€‚\n\n### æ€è·¯\n\nåŒå›å½’é—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¸Œæœ›å¾—åˆ°å‡è®¾ $h_\\boldsymbol\\theta(\\boldsymbol{x})$ å¯¹åº”çš„ä»£ä»·å‡½æ•° $J(\\boldsymbol\\theta)$ï¼Œå¹¶é€šè¿‡æœ€å°åŒ–ä»£ä»·å‡½æ•°æ¥ç¡®å®šåˆé€‚çš„å‚æ•°å€¼ $\\boldsymbol\\theta$ã€‚\n\nä¸‹é¢æ¨å¯¼ä»£ä»·å‡½æ•°ï¼š\n\nå…ˆæ˜ç¡®ä¸€äº›è®°æ³•ï¼šç²—ä½“å­—æ¯ä»£è¡¨å‘é‡ï¼Œä¸€èˆ¬ä½¿ç”¨ $\\boldsymbol{x}$ è¡¨ç¤ºä¸€ä¸ªæ ·ä¾‹çš„ç‰¹å¾å‘é‡ï¼Œ$\\boldsymbol{\\theta}$ è¡¨ç¤ºå‚æ•°å‘é‡ï¼Œå®æ•° $y\\in\\{0,1\\}$ è¡¨ç¤ºè¯¥æ ·ä¾‹çš„æ ‡è®°ã€‚å½“å¤„ç†å¤šä¸ªæ ·ä¾‹æ—¶ï¼Œä½¿ç”¨ $\\boldsymbol{x^{(j)}}$ è¡¨ç¤ºç¬¬ $j$ ä¸ªæ ·ä¾‹çš„ç‰¹å¾å‘é‡, å¯¹åº”çš„æ ‡è®°ä¸º $y^{(j)}$ã€‚å‘é‡ $\\boldsymbol{y}$ è¡¨ç¤ºå¤šä¸ªæ ·ä¾‹çš„æ ‡è®°å‘é‡ã€‚å…·ä½“çš„ï¼š\n\n$$\n\\boldsymbol{x^{(j)}}=\\left[\\begin{matrix}\nx^{(j)}_1 \\\\\nx^{(j)}_2 \\\\\n\\vdots \\\\\nx^{(j)}_n \\\\\n\\end{matrix}\\right],\\\n\\boldsymbol\\theta=\\left[\\begin{matrix}\n\\theta_0 \\\\\n\\theta_1 \\\\\n\\vdots \\\\\n\\theta_n \\\\\n\\end{matrix}\\right],\\\n\\boldsymbol{y} = \\left[\\begin{matrix}\ny^{(1)}\\\\\ny^{(2)}\\\\\n\\vdots \\\\\ny^{(m)}\\\\\n\\end{matrix}\\right]\n$$\n\n#### [æœ€å¤§ä¼¼ç„¶ä¼°è®¡](https://baike.baidu.com/item/%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1/4967925?fr=aladdin)ï¼ˆ[Maximum Likelihood Estimation](https://en.wikipedia.org/wiki/Maximum_likelihood_estimation)ï¼‰\n\nä¸çº¿æ€§å›å½’ç›´æ¥è¾“å‡ºè¿ç»­çš„ç»“æœä¸åŒï¼Œå¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¾—åˆ°ä¸€ä¸ªå‡½æ•° $h_\\boldsymbol\\theta(\\boldsymbol{x})$ æ¥è¡¨ç¤ºç‰¹å¾ $\\boldsymbol{x}$ ä¸‹ç»“æœä¸ºæ­£ç±»çš„æ¦‚ç‡ï¼Œå³ $h_\\boldsymbol\\theta(\\boldsymbol{x}) = P\\{Y=1|\\boldsymbol{x}\\}$ã€‚è‡ªç„¶åœ°ï¼Œè‹¥ $h_\\boldsymbol\\theta(x) > 0.5$ æˆ‘ä»¬å€¾å‘äºè®¤ä¸ºç»“æœä¸ºæ­£ç±»ï¼Œåä¹‹å€¾å‘äºè´Ÿç±»ã€‚\n\nç»“åˆå®ä¾‹ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è¾“å…¥ç—…äººåŒ»å­¦å›¾åƒçš„ç‰¹å¾ $x$ï¼Œä¾¿å¯ä»¥ç»™å‡ºè¯¥ç—…äººè‚¿ç˜¤ä¸ºæ¶æ€§çš„æ¦‚ç‡(å°†æ¶æ€§åˆ’åˆ†ä¸ºæ­£ç±»)ï¼Œè‹¥è¯¥å€¼å¤§äº $0.5$ åˆ™å€¾å‘äºè®¤ä¸ºè‚¿ç˜¤ä¸ºæ¶æ€§ï¼Œåä¹‹è®¤ä¸ºè‰¯æ€§ã€‚\n\nç”±äºäºŒåˆ†ç±»é—®é¢˜çš„ç»“æœéæ­¤å³å½¼ï¼Œæ‰€ä»¥åº”æœ‰ï¼š\n\n$$\nP\\{Y=1|\\boldsymbol{x}\\} = h_\\boldsymbol\\theta(\\boldsymbol{x})\n$$\n$$\nP\\{Y=0|\\boldsymbol{x}\\} = 1 - h_\\boldsymbol\\theta(\\boldsymbol{x})\n$$\n\nä¸Šå¼ç­‰ä»·äºï¼š\n$$\nP\\{Y=y|\\boldsymbol{x}\\} = yh_\\boldsymbol\\theta(\\boldsymbol{x}) + [1-y](1-h_\\boldsymbol\\theta(\\boldsymbol{x})), \\ y\\in\\{0,1\\}\n$$\n\nå¯¹äº $m$ ä¸ªè®­ç»ƒæ ·æœ¬ $\\{\\boldsymbol{x}^{(j)}, y^{(j)}\\},\\ j=1,2,3,\\cdots,m$ï¼Œå°†å…¶è§†ä¸ºéšæœºäº‹ä»¶ï¼Œåˆ™æ¯ä¸€ä¸ªæ ·æœ¬çš„å‡ºç°çš„æ¦‚ç‡ä¸º:\n$$\nP\\{Y=y^{(j)}|\\boldsymbol{x}^{(j)}\\} = y^{(j)}h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})+(1-y^{(j)})[1-h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})],\\ y^{(j)}\\in\\{0,1\\}\n$$\n\nç”±äºæ¯ä¸ªæ ·æœ¬ç›¸äº’ç‹¬ç«‹ï¼Œåˆ™å‡ºç°è¯¥æ ·æœ¬çš„æ¦‚ç‡ä¸ºï¼š\n$$\n\\prod_{j=1}^m P\\{Y=y^{(j)}|\\boldsymbol{x}^{(j)}\\},\\ y^{(j)} \\in \\{0, 1\\}\n$$\nå³ï¼š\n$$\n\\prod_{j=1}^m \\left\\{ y^{(j)}h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)}) + (1-y^{(j)})[1-h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})] \\right\\},\\ y^{(j)} \\in \\{0,1\\}\n$$\n\nè‡³æ­¤æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå…³äº $\\boldsymbol\\theta$ çš„å‡½æ•°ï¼Œè®°ä¸º $L(\\boldsymbol\\theta)$ï¼Œè¯¥å‡½æ•°å€¼ä»£è¡¨äº†å‡ºç°è¯¥è®­ç»ƒæ ·æœ¬çš„æ¦‚ç‡ã€‚æœ€å¤§ä¼¼ç„¶ä¼°æ³•è®¡è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æ ·æœ¬åˆ†å¸ƒè€Œä¸æ˜¯å…¶ä»–çš„åˆ†å¸ƒå‘¢ï¼Ÿæˆ‘ä»¬åªèƒ½è®¤ä¸ºå‡ºç°è¿™æ ·çš„åˆ†å¸ƒæ¦‚ç‡æ˜¯å¤§äºå…¶ä»–åˆ†å¸ƒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å‡ºç°è¯¥æ ·æœ¬åˆ†å¸ƒçš„æ¦‚ç‡ $L(\\boldsymbol\\theta)$ å°½å¯èƒ½çš„å¤§æˆ‘ä»¬æ‰å¾—åˆ°äº†è¿™ä¸ªæ ·æœ¬åˆ†å¸ƒã€‚å› æ­¤æˆ‘ä»¬åªéœ€æ±‚å¾— $j(\\boldsymbol\\theta)$ å–å¾—æœ€å¤§å€¼æ‰€å¯¹åº”çš„ $\\hat{\\boldsymbol\\theta}$ï¼Œä¾¿æ˜¯æˆ‘ä»¬å¯¹ $h_\\boldsymbol\\theta(\\boldsymbol{x})$ å‚æ•°å€¼ $\\boldsymbol\\theta$ åˆç†ä¼°è®¡ã€‚è¿™ä¾¿æ˜¯æœ€å¤§ä¼¼ç„¶å‚æ•°ä¼°è®¡æ³•çš„æ€æƒ³ã€‚\n\nè‡³æ­¤ï¼Œæˆ‘ä»¬å¯å°†ä»£ä»·å‡½æ•°çœ‹ä½œ $-L(\\boldsymbol\\theta)$ï¼Œæˆ‘ä»¬åªæœ‰ä½¿ä»£ä»·å‡½æ•°å°½å¯èƒ½çš„å°ï¼Œå³ $L(\\boldsymbol\\theta)$ å°½å¯èƒ½çš„å¤§æ‰èƒ½å¾—åˆ°åˆç†çš„ $\\boldsymbol\\theta$ã€‚è€Œ $-L(\\boldsymbol\\theta)$ ä¸­çš„ $h_\\boldsymbol\\theta(\\boldsymbol{x})$ è¿˜ä¸æ˜ç¡®ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å…¶å½¢å¼ã€‚\n\n#### ç¡®å®š $h_\\boldsymbol\\theta(\\boldsymbol{x})$ çš„å½¢å¼\n\næ˜¾ç„¶çº¿æ€§å›å½’ä¸­çš„å‡è®¾å‡½æ•° $h_\\boldsymbol\\theta(\\boldsymbol{x}) = \\boldsymbol\\theta_0 + \\sum\\limits_{i=1}^n\\boldsymbol\\theta_ix_i$ çš„å½¢å¼ä¸æ»¡è¶³åˆ†ç±»é—®é¢˜ï¼Œå› ä¸ºåœ¨åˆ†ç±»é—®é¢˜ä¸­æˆ‘ä»¬æœŸæœ›æŠŠå¾—åˆ°çš„ $h_\\boldsymbol\\theta(\\boldsymbol{x})$ çœ‹ä½œæ˜¯ä¸€ä¸ªæ¦‚ç‡ï¼Œæ‰€ä»¥å…¶å€¼åº”è¯¥æ˜¯åœ¨åŒºé—´ $[0,1]$ å†…çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŸå‡½æ•°è¿›è¡Œâ€œæŒ¤å‹â€ï¼Œä½¿å…¶å€¼åŸŸå±äº $(0,1)$ã€‚æ­¤æ—¶ä¾¿ç”¨åˆ°äº† [S å‹å‡½æ•°](https://baike.baidu.com/item/S%E5%9E%8B%E5%87%BD%E6%95%B0/19178062?fr=aladdin)ï¼ˆ[Sigmoid function](https://en.wikipedia.org/wiki/Sigmoid_function)ï¼‰:\n$$\nsigmod(z) = \\frac{1}{1+e^{-z}},\\ z \\in \\mathbf{R}\n$$\n\næ‰€ä»¥ä»¤\n$$\nh_\\boldsymbol\\theta(\\boldsymbol{x}) = \\frac{1}{1 + e^{-z}},\\\nz = \\boldsymbol\\theta_0 + \\sum\\limits_{i=1}^n\\boldsymbol\\theta_ix_i\n$$\n\nå…¶ä¸­ $z$ ä¹Ÿå¯è®°ä¸ºçŸ©é˜µå½¢å¼ï¼š\n$$\n\\ z = \\boldsymbol{\\theta}^T \\left[ \\begin{matrix}1 \\\\ \\boldsymbol{x} \\end{matrix} \\right]\n$$\n\nè‡³æ­¤æˆ‘ä»¬å°±å¾—åˆ°äº† $h_\\boldsymbol\\theta(\\boldsymbol{x})$ çš„è¡¨è¾¾å¼ã€‚\n\n#### æ•´ç†å¾—åˆ°ä»£ä»·å‡½æ•° $J(\\boldsymbol\\theta)$\n\nç¡®å®šäº† $h_\\boldsymbol\\theta(\\boldsymbol{x})$ å½¢å¼åï¼Œ$L(\\boldsymbol\\theta)$ çš„å½¢å¼å®Œå…¨ç¡®å®šï¼Œåœ¨ç»™å®šè®­ç»ƒæ•°æ®ä¸‹æ˜¯ä¸€ä¸ªå…³äº $\\boldsymbol\\theta$ çš„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ $-L(\\boldsymbol\\theta)$ ä½œä¸ºä»£ä»·å‡½æ•°ï¼Œä½†åœ¨æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ³•ä¸­æ›´å¸¸ç”¨çš„æ–¹æ³•æ˜¯å¯¹ $L(\\boldsymbol\\theta)$ å–å¯¹æ•°åŒ–ç®€ï¼ˆ$\\ln$ å‡½æ•°çš„å•è°ƒæ€§ä¿è¯äº†åŒ–ç®€å‰ååŒæ—¶å–å¾—æœ€å€¼ï¼‰ï¼Œä»¤\n$$\nJ(\\boldsymbol\\theta) = -\\frac1{m}\\ln L(\\boldsymbol\\theta)\n$$\n\nè¿›ä¸€æ­¥å¾—åˆ°ï¼š\n$$\nJ(\\boldsymbol\\theta) =\n\\begin{cases}\n-\\frac1{m}\\sum\\limits_{j=1}^m \\ln[h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})], & y^{(j)} = 1.\\\\\n-\\frac1{m}\\sum\\limits_{j=1}^m \\ln[1-h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})], & y^{(j)}=0.\n\\end{cases}\n$$\n\nåŒæ ·å¯åˆå¹¶ï¼Œå†™ä¸º:\n$$\nJ(\\boldsymbol\\theta) = -\\frac1{m}\\sum_{j=1}^m\\Big(y^{(j)}\\ln[h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})] + (1-y^{(j)})\\ln[1-h_\\boldsymbol\\theta(\\boldsymbol{x}^{(j)})]\\Big)\n$$\n\nè‡³æ­¤ä¾¿å¾—åˆ°äº†ä»£ä»·å‡½æ•° $J(\\boldsymbol\\theta)$ çš„è¡¨è¾¾å¼ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æœ€å°åŒ–ä»£ä»·å‡½æ•°ä»¥å¾—åˆ°åˆé€‚çš„å‚æ•°å‘é‡ $\\boldsymbol{\\theta}$\n\n### æ¢¯åº¦ä¸‹é™\n\næ¢¯åº¦ä¸‹é™çš„æ ¸å¿ƒåœ¨äºæ±‚å¾—ä»£ä»·å‡½æ•°çš„æ¢¯åº¦ $\\mathbf{Grad}J(\\boldsymbol\\theta)$ï¼Œç”±é«˜ç­‰æ•°å­¦çŸ¥è¯†å¯çŸ¥:\n$$\n\\mathbf{Grad}J(\\boldsymbol\\theta) = (\\frac{\\partial{J}}{\\partial\\boldsymbol{\\theta}_0}, \\frac{\\partial{J}}{\\partial\\boldsymbol{\\theta}_1}, \\cdots, \\frac{\\partial{J}}{\\partial\\boldsymbol{\\theta}_n})\n$$\n\nä¸‹é¢æ±‚ $\\frac{\\partial J}{\\partial\\boldsymbol{\\theta}_i}$ï¼š\n\nå…ˆå°† $h_\\boldsymbol\\theta(\\boldsymbol{x}) = \\frac1{1+e^{-z}}$ å¸¦å…¥ $J(\\boldsymbol\\theta)$ï¼Œå¹¶åŒ–ç®€ï¼Œå¯å¾—ï¼š\n\n$$\nJ(\\boldsymbol\\theta) = \\frac1{m}\\sum\\limits_{j=1}^m\\left[\\ln(1+e^{z^{(j)}}) - y^{(j)}z^{(j)}\\right],\\ z^{(j)} = \\boldsymbol{\\theta}^T\\left[ \\begin{matrix} 1 \\\\ \\boldsymbol{x}^{(j)} \\end{matrix} \\right]\n$$\n\nåˆ™æœ‰ï¼š\n\n$$\n\\begin{aligned}\n\\frac{\\partial{J}}{\\partial\\boldsymbol\\theta_i} &= \\frac{\\partial J}{\\partial z} \\cdot \\frac{\\partial z}{\\partial\\boldsymbol\\theta_i} \\\\\n&= \\frac1{m}\\sum\\limits_{j=1}^m\\Big(\\frac{e^{z^{(j)}}}{1+e^{z^{(j)}}}-y^{(j)}\\Big)x^{(j)}_i \\\\\n&= \\frac1{m}\\sum_{j=1}^{m}\\left[h_\\boldsymbol\\theta(x^{(j)}) - y^{(j)}\\right]x_i^{(j)}\n\\end{aligned}\n$$\n\nè‡³æ­¤æˆ‘ä»¬å°±æ±‚å‡ºäº†ä»£ä»·å‡½æ•°å¯¹äºæ¯ä¸ªå‚æ•° $\\boldsymbol\\theta_i$ çš„åå¯¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥æ±‚å¾—ä½¿ä»£ä»·å‡½æ•°è¶³å¤Ÿå°æ—¶çš„æ‰€æœ‰å‚æ•°äº†ï¼š\n\n```bash\n// é€‰å–åˆé€‚çš„ä¸‹é™ç‡ alpha\nrepeat until converge {\n  theta0 := theta0 - alpha * grad0;\n  theta1 := theta1 - alpha * grad1;\n  ...\n  thetan := thetan - alpha * gradn;\n}\n```\n\nåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ä½¿ç”¨çŸ©é˜µè¿ç®—å¾€å¾€å…·æœ‰æ›´é«˜çš„æ•ˆç‡ï¼Œä¸‹é¢æ ¹æ® $\\frac{\\partial J}{\\partial\\boldsymbol\\theta_i}$ çš„è®¡ç®—å…¬å¼å¯å¾—åˆ° $\\frac{\\partial J}{\\partial\\boldsymbol{\\theta}}$ çš„çŸ©é˜µè¡¨ç¤ºæ³•ï¼š\n\né¦–å…ˆè®°:\n$$\n\\boldsymbol{X} = \\left[\n  \\begin{matrix}\n    1 & [x^{(1)}]^T \\\\\n    1 & [x^{(2)}]^T \\\\\n    \\vdots & \\vdots \\\\\n    1 & [x^{(m)}]^T \\\\\n  \\end{matrix}\n  \\right]\n$$\n\nåˆ™æœ‰ï¼š\n$$\n\\frac{\\partial J}{\\partial\\boldsymbol{\\theta}}\n= \\frac1m\\boldsymbol{X}^T\\left[h_\\boldsymbol\\theta(X\\times\\boldsymbol{\\theta}) - y\\right]\n$$\n","tags":["ML"],"categories":["science"]},{"title":"ç¼–å†™ä¸€ä¸ªè‡ªåŠ¨æ¨é€ Git Page çš„ nodejs è„šæœ¬","url":"/archives/32/","content":"\n\n\n### èƒŒæ™¯\n\nå†™äº†ä¸€ä¸ªç®€å•çš„ä¸ªäººä¸»é¡µï¼Œç”±äºä½¿ç”¨äº†ä¸€äº› CSS3 çš„å±æ€§ï¼Œè€ƒè™‘åˆ°æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œå°±ä½¿ç”¨äº† webpack çš„ä¸€äº› loader ç»™è¿™äº›å±æ€§åŠ å‰ç¼€ã€‚æ‰€ä»¥ç®€å•çš„é™æ€å•é¡µé¢ç”¨äº† webpackï¼Œåˆå› ä¸ºè¿™ä¸ªé¡µé¢è¦æ”¾åœ¨ Github Pages ä¸Šï¼Œæ¯æ¬¡æ‰“åŒ…åè¿˜å¾—æ‰‹åŠ¨åˆ‡æ¢åˆ†æ”¯æ¨é€åˆ° Github ä¸Šï¼Œå¹²è„†è¶è¿™ä¸ªæœºä¼šå†™ä¸€ä¸ªè‡ªåŠ¨æ¨é€çš„è„šæœ¬ã€‚\n<!--more-->\n\n**è¯¥è„šæœ¬ä¸»è¦å‚è€ƒäº† [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git)**ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥é¡¹ç›®è·å–åŠŸèƒ½æ›´å®Œå–„çš„æºç ã€‚\n\n### é¢„å¤‡çŸ¥è¯†\n\nè„šæœ¬æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ä½¿ç”¨ NodeJs child_process çš„ spawn æ–¹æ³•è°ƒç”¨å­è¿›ç¨‹æ‰§è¡Œ git è¯­å¥ã€‚å¦‚æœä½ å¯¹ NodeJs ä¸ç†Ÿæ‚‰å¯èƒ½éœ€è¦äº†è§£ä»¥ä¸‹å†…å®¹æ‰èƒ½å®Œå…¨å¼„æ‡‚è„šæœ¬ä¸­çš„æ¯ä¸€è¡Œä»£ç ï¼šï¼ˆå¦‚æœä½ åªæ˜¯æƒ³å¤§è‡´äº†è§£ä¸€ä¸‹ä»£ç åŸç†ï¼Œå¯ä¸å¿…æŸ¥çœ‹ä»¥ä¸‹çŸ¥è¯†ï¼Œæœ¬æ–‡å°†åšç®€å•çš„è§£é‡Šï¼‰\n\n* [child_process](http://nodejs.cn/api/child_process.html), [child_process.spawn](http://nodejs.cn/api/child_process.html#child_process_child_process_spawn_command_args_options)\n* [stream](http://nodejs.cn/api/stream.html), [process.stdout](http://nodejs.cn/api/process.html#process_process_stdout), [process.stderr](http://nodejs.cn/api/process.html#process_process_stderr)\n* [fs](http://nodejs.cn/api/fs.html)\n\n## spawn\n\n### ç”¨æ³•\n\nNodeJs çš„ child_process æ¨¡å—æä¾›äº† `spawn` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è°ƒç”¨å­è¿›ç¨‹ï¼Œå¹¶æ‰§è¡Œä¼ å…¥çš„å‘½ä»¤è¡ŒåŠå‚æ•°ã€‚è¯¥è„šæœ¬ä¸»è¦åˆ©ç”¨è¯¥æ–¹æ³•æ‰§è¡Œéœ€è¦çš„ git å‘½ä»¤ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ spawn ä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```js\nconst { spawn } = require('child_process');\nconst ls = spawn('ls', ['-lh', '/usr']);\n\nls.stdout.on('data', (data) => {\n  console.log(`stdout: ${data}`);\n});\n\nls.stderr.on('data', (data) => {\n  console.error(`stderr: ${data}`);\n});\n\nls.on('close', (code) => {\n  console.log(`å­è¿›ç¨‹é€€å‡ºï¼Œä½¿ç”¨é€€å‡ºç  ${code}`);\n});\n```\n\nå®ä¾‹ä¸­å‘ `spawn` ä¼ å…¥äº† `ls` å‘½ä»¤ï¼Œä»¥åŠ `-lh`ã€`/usr` å‚æ•°ï¼Œå¹¶é€šè¿‡äº‹ä»¶ç›‘å¬å›è°ƒå¤„ç†å‘½ä»¤æ‰§è¡Œçš„ç»“æœã€‚`spawn` æ–¹æ³•è¿”å›ä¸€ä¸ª `ChildProcess`å®ä¾‹ï¼Œå…¶ä¸­ `stdout` å’Œ `stderr` æ˜¯å‘½ä»¤æ‰§è¡Œåçš„è¾“å‡ºæµå’Œé”™è¯¯æµã€‚æˆ‘ä»¬ç›‘å¬è¿™ä¸¤ä¸ªæµçš„äº‹ä»¶æ¥æ‰“å°å‘½ä»¤æ‰§è¡Œåçš„ç»“æœæˆ–é”™è¯¯ä¿¡æ¯ã€‚åŒæ—¶ç›‘å¬å®ä¾‹çš„ `close` äº‹ä»¶ï¼Œæ‰“å°å‘½ä»¤æ‰§è¡Œåçš„é€€å‡ºç ã€‚é€€å‡ºç ä¸º 0 æ—¶ä»£è¡¨å‘½ä»¤æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼Œé 0 æ—¶ä»£è¡¨å‘ç”Ÿäº†å¼‚å¸¸ã€‚ï¼ˆå¦‚ debug éœ€è¦å…·ä½“ä»£ç å«ä¹‰,å¯æŸ¥çœ‹[é€€å‡ºç ](http://nodejs.cn/api/process.html#process_exit_codes)ï¼‰ã€‚\n\n### å°è£… spawn\n\nå¦‚ä¸Šæ‰€è¿°ï¼Œspawn é€šè¿‡å›è°ƒæ¥å¤„ç†å“åº”ï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨æ›´æ–¹ä¾¿æ˜“è¯»çš„ Promise æ¥ç®€å•å°è£…ä¸€ä¸‹ spawnã€‚(å¯¹äºç®€å•çš„ä»£ç æ¥è¯´ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æˆ‘è¿˜æ˜¯å‚ç…§ hexo çš„åšæ³•å°è£…äº† spawnã€‚)\n\n`spawn.js`\n\n```js\n'use strict'\n\nconst { spawn } = require('child_process')\n\nfunction promiseSpawn(command, args, options) {\n  if (!command) throw new TypeError('command is reuqired');\n\n  if (!options && args && !Array.isArray(args)) {\n    options = args;\n    args = [];\n  }\n\n  // note-1 ä»¥ä¸Šæ˜¯å¯¹å‚æ•°çš„å®¹é”™å¤„ç†\n\n  args = args || [];\n  options = options || {};\n\n  // note-2 æ¥ä¸‹æ¥å°†å…¶å°è£…æˆä¸€ä¸ª Promise å¯¹è±¡\n  return new Promise((resolve, reject) => {\n    const task = spawn(command, args, options);\n    const encoding = options.hasOwnProperty('encoding') ? options.encoding : 'utf8';\n\n    /*-- note-3 start --*/\n    if (task.stdout) {\n      task.stdout.pipe(process.stdout);\n    }\n\n    if (task.stderr) {\n      task.stderr.pipe(process.stdout)\n    }\n    /* \n     è¿™é‡Œè°ƒç”¨å­è¿›ç¨‹è¾“å‡ºæµ(stdout/stderr)çš„ pipe æ–¹æ³•ï¼Œ\n     å°†å…¶è¾“å…¥åˆ°å½“å‰è¿›ç¨‹çš„è¾“å‡ºæµï¼Œè¿™æ ·å°±èƒ½åœ¨è°ƒç”¨è¯¥è„šæœ¬çš„\n     è¿›ç¨‹ä¸­çœ‹åˆ°å­è¿›ç¨‹ä¸­æ‰§è¡Œçš„å‘½ä»¤çš„è¾“å…¥äº†\n\n     å¦‚æœä½ å¸Œæœ›å­è¿›ç¨‹çš„å‘½ä»¤é™é»˜æ‰§è¡Œï¼Œè¿™äº›ä»£ç åŒæ ·ä¸æ˜¯å¿…è¦çš„\n     æˆ–è€…å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥å†³å®šæ˜¯å¦åœ¨ä¸»è¿›ç¨‹ä¸­å±•ç¤ºè¿™äº›ä¿¡æ¯\n    */\n    /*-- note-3 end --*/\n\n    // note-4 ç›‘å¬å‘½ä»¤ç»“æŸäº‹ä»¶ï¼Œæ ¹æ® code æ¥å†³å®šæ˜¯å¦ resolve\n    task.on('close', code => {\n      if (code) {\n        const e = new Error('command execute failed');\n        e.code = code;\n\n        return reject(e);\n      }\n\n      resolve();\n    });\n\n\n    // note-5 å‘½ä»¤æ‰§è¡Œé”™è¯¯æ—¶ reject\n    task.on('error', reject)\n\n    // note-6 å¤„ç† `exit` äº‹ä»¶\n    if (!task.stderr && !task.stdout) {\n      task.on('exit', code => {\n        if (code) {\n          const e = new Error('Spawn failed');\n          e.code = code;\n          \n          return reject(e);\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = promiseSpawn;\n\n```\n\nChildProcess çš„ `close`ã€`error`ã€`exit` äº‹ä»¶çš„è§¦å‘æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¹¶ä¸”ä¹Ÿä¸æ˜¯ç®€å•çš„åŒ…å«å…³ç³»ï¼Œæ‰€ä»¥ä»£ç ä¸­å¯¹å…¶åˆ†åˆ«è¿›è¡Œäº†å¤„ç†ï¼Œå…·ä½“å¯æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](http://nodejs.cn/api/child_process.html#child_process_event_close)ã€‚\n\n## æ‰§è¡Œ git å‘½ä»¤\n\nåˆ©ç”¨ä¸Šé¢å°è£…çš„ `spawn` æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰§è¡Œ git çš„è¯­å¥ã€‚\n\n`deployer.js`\n\n```js\n'use strict'\n\nconst spawn = require('./lib/spawn');  // note-1 å¯¼å…¥å°è£…å¥½çš„ spawn\nconst pathFn = require('path');\nconst fs = require('fs');\n\n// note-2 è®¾ç½®å¥½æ‰§è¡Œ git å‘½ä»¤æ—¶éœ€è¦ç”¨åˆ°çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åˆ†ç¦»å‡ºé…ç½®æ–‡ä»¶\nconst args = {\n  user: {\n    name: 'name',\n    email: 'name@email.com',\n  },\n  // éœ€è¦ push çš„ç›®å½•ï¼Œæ­¤å¤„æ¨é€çš„æ˜¯ webpack é»˜è®¤çš„æ‰“åŒ…è·¯å¾„\n  baseDir: pathFn.resolve('./', 'dist'),\n  repo: {\n    url: 'git@github.com:username/username.github.io.git',\n    branch: 'master',\n  },\n};\n\ndeployToGit(args); // æ‰§è¡Œæ¨é€å‡½æ•°\n\nfunction deployToGit(args) {\n  const message = args.message || `Site updated: ${(new Date()).toDateString()}`\n  const baseDir = args.baseDir;\n  const gitDir = pathFn.join(baseDir, '.git');\n\n  if (!args.repo) {\n    return console.log('Please check configs of repository!')\n  }\n\n  // æ£€æŸ¥è¦æ¨é€çš„ç›®å½•æ˜¯å¦å­˜åœ¨\n  if (!fs.existsSync(baseDir)) {\n    throw new Error('Please build before deploy')\n  }\n  // æ£€æŸ¥è¯¥ç›®å½•ä¸‹æ˜¯å¦å·²ç»å­˜åœ¨ git ä»“åº“\n  if (!fs.existsSync(gitDir)) {\n    setup()\n      .then(() => push(args.repo));\n  } else {\n    push(args.repo);\n  }\n\n  function git(...args) {\n    return spawn('git', args, {\n      cwd: baseDir,\n      stdio: 'inherit'\n    });\n  }\n\n  // åˆå§‹åŒ– git ä»“åº“\n  function setup() {\n    const userName = args.user && args.user.name || '';\n    const userEmail = args.user && args.user.emial || '';\n\n    return git('init').\n      then(() => git('config', 'user.name', userName)).\n      then(() => git('config', 'user.email', userEmail)).\n      then(() => git('add', '-A')).\n      then(() => git('commit', '-m', message));\n  }\n\n  // æäº¤å¹¶æ¨é€æŒ‡å®šç›®å½•\n  function push(repo) {\n    return git('add', '-A').\n      then(() => git('commit', '-m', message).catch(() => '')).\n      then(() => git('push', '-u', repo.url, 'HEAD:' + repo.branch, '--force'));\n  }\n}\n```\n\næ‰§è¡Œ git å‘½ä»¤çš„ä»£ç ç›¸å¯¹æ¥è¯´å°±æ¯”è¾ƒç®€å•äº†ï¼Œä½†æ˜¯è¦å…³æ³¨ä¸€äº›é”™è¯¯æƒ…å†µçš„æ£€æŸ¥ï¼Œå¯èƒ½éœ€è¦å¤š debug å‡ éæ‰èƒ½ç¡®ä¿å‘½ä»¤çš„æ‰§è¡Œè¾¾åˆ°é¢„æœŸçš„æ•ˆæœã€‚\n\n## æ‰§è¡Œè„šæœ¬\n\nä»¥ä¸Š `spawn.js` å’Œ `deployer.js` å°±æ˜¯æ¨é€è„šæœ¬çš„å…¨éƒ¨å†…å®¹ï¼Œæœ€åæŠŠè¿™äº›è„šæœ¬èƒ¶ä¹³ `package.json` ä¸­çš„ `script` ä¸­ï¼Œå°±èƒ½åœ¨æ‰“åŒ…åï¼Œä¸€é”®æ¨é€éƒ¨ç½²åˆ° github pages ä¸Šäº†ã€‚\n\npackage.json\n\n```json\n{\n  ...\n  \"scripts\": {\n    ...\n    \"deploy\": \"node ./script/deploy\"\n  },\n  ...\n}\n```\n\nåœ¨ shell ä¸­æ‰§è¡Œ `npm run deploy` å³å¯æ‰§è¡Œè„šæœ¬ä¸€é”®éƒ¨ç½²ï¼Œä¸‹é¢æ˜¯æˆ‘æ‰§è¡Œçš„ç¤ºï¼Œ(æ˜¾ç„¶æˆ‘åœ¨è¿™æ¬¡éƒ¨ç½²å‰æ²¡æœ‰è¿›è¡Œä»»ä½•ä¿®æ”¹)\n\n```shell\nHozen@HOZEN MINGW64 /c/Workspace/localstatic/lei (dev)\n$ npm run deploy\n\n> lei@1.0.0 deploy C:\\Workspace\\localstatic\\lei\n> node ./script/deploy\n\nOn branch master\nnothing to commit, working tree clean\nEverything up-to-date\nBranch 'master' set up to track remote branch 'master' from 'git@github.com:****/****.github.io.git'.\n```\n\n## æ³¨æ„\n\nç”±äºä¸åŒæ“ä½œç³»ç»Ÿå’Œä¸åŒ shell å®¢æˆ·ç«¯ä¸­çš„å‘½ä»¤è¡Œå’Œæ ¼å¼å¯èƒ½ä¼šæœ‰ä¸åŒï¼Œå¯¼è‡´åŒä¸€å¥—ä»£ç å¯èƒ½ä¸èƒ½åœ¨ä¸åŒç¯å¢ƒä¸­æ‰§è¡Œï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨ [cross-spawn](https://github.com/moxystudio/node-cross-spawn) å·¥å…·æ›¿ä»£ NodeJs ä¸­çš„ spawnã€‚\n","tags":["Git","Node.js","Github page"],"categories":["developer"]},{"title":"ç»æµå­¦çš„æ—å¬ç”Ÿ-å¼ æ™“é£","url":"/archives/31/","content":"\nâ€œä»€ä¹ˆæ˜¯ç»æµå­¦å‘¢ï¼Ÿâ€ä»–ç«™åœ¨è®²å°ä¸Šï¼Œæˆ´çœ¼é•œï¼Œç°è¥¿è£…ï¼Œå£°éŸ³å¹³é™ï¼Œå…¸å‹çš„ä¸­å¹´å­¦è€…ã€‚\n\nå°ä¸‹åçš„æ˜¯å¤§å­¦ä¸€å¹´çº§çš„å­¦ç”Ÿï¼Œè€Œæˆ‘ï¼Œæ˜¯ç½®èº«åœ¨è¿™äºŒç™¾äººå¤§æ•™å®¤é‡Œå·å·æ—å¬çš„ä¸€ä¸ªã€‚\n<!--more-->\n\nä»ä¸€å¼€å­¦æˆ‘å°±æ˜‚å¥‹èµ·æ¥ï¼Œå› ä¸ºåœ¨è¯¾è¡¨ä¸Šçœ‹è§è¦å¼€ä¸€é—¨ã€Šç¤¾ä¼šç§‘å­¦æ¦‚è®ºã€‹çš„è¯¾ç¨‹ï¼ŒåŒ…æ‹¬å››ä½æ•™æˆæ¥è®¾â€œæ”¿æ²»â€â€œæ³•å¾‹â€â€œç»æµâ€â€œäººç±»å­¦â€å››ä¸ªè®²åº§ã€‚æƒ³èµ·å¯ä»¥é‡æ–°åšå­¦ç”Ÿï¼Œå»å¬ä¸€é—¨é—¨å¯¹æˆ‘è€Œè¨€å´­æ–°çš„çŸ¥è¯†ï¼Œé‚£ä»½å–œæ‚¦çœŸæ˜¯æ©ä¸ä½è—ä¸ä¸¥ï¼Œä¸€ä¸ªäººååœ¨ç ”ç©¶å®¤é‡Œéƒ½å¿ä¸ä½è¦è½»è½»çš„ç¬‘èµ·æ¥ã€‚\n\nâ€œç»æµå­¦å°±æ˜¯æŠŠâ€˜æœ‰é™èµ„æºâ€™åšâ€˜æœ€é€‚å½“çš„å®‰æ’â€™ï¼Œä»¥å¾—åˆ°â€˜æœ€å¥½çš„æ•ˆæœâ€™ã€‚â€\n\nå°ä¸‹çš„å­¦ç”Ÿæ²™æ²™çš„æŠ„ç€ç¬”è®°ã€‚\n\nâ€œç»æµå­¦ä¸ºä»€ä¹ˆå‘ç”Ÿå‘¢ï¼Ÿå› ä¸ºèµ„æºâ€˜ç¨€å°‘â€™ï¼Œä¸å•ç‰©è´¨â€˜ç¨€å°‘â€™ï¼Œæ—¶é—´ä¹Ÿâ€˜ç¨€å°‘â€™ï¼Œâ€”â€”è€Œâ€˜ç¨€å°‘â€™åˆæ˜¯ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºï¼Œç›¸å¯¹äºâ€˜æ¬²æœ›â€™ï¼Œä¸€åˆ‡å°±æ˜¾å¾—â€˜ç¨€å°‘â€™äº†â€¦â€¦â€\n\nåŸæ¥æ˜¯æƒ³åœ¨å››é—¨è¯¾é‡Œè·³è¿‡ç»æµå­¦ä¸å¬çš„ï¼Œå› ä¸ºè§‰å¾—è®¨è®ºç‰©è´¨çš„ä¸œè¥¿å¤§æ¦‚æ— ç”šå¯è§‚ï¼Œæ²¡æƒ³åˆ°ä¸€èµ°è¿›æ•™å®¤æ¥ç«Ÿå¬åˆ°è¿™ä¸€ç•ªè§£é‡Šã€‚\n\nâ€œä½ ä»¥ä¸ºä»€ä¹ˆæ˜¯ç»æµå­¦å‘¢ï¼Ÿä¸€ä¸ªå­¦ç”Ÿè¦è€ƒè¯•ï¼Œæ—¶é—´ä¸å¤Ÿäº†ï¼Œä¹¦è¯¥æ€ä¹ˆå¿µï¼Œè¿™å°±å«ç»æµå­¦å•Šï¼â€\n\næˆ‘æ„£åœ¨é‚£é‡Œåå¤æƒ³ç€ä»–é‚£å¥â€œä¸ºä»€ä¹ˆæœ‰ç»æµå­¦â€”â€”å› ä¸ºç¨€å°‘â€”â€”ä¸ºä»€ä¹ˆç¨€å°‘ï¼Œå› ä¸ºæ¬²æœ›â€è€Œéº»é¢¤æƒŠåŠ¨ï¼Œå¦‚åŒå±±é—´é¡½å´–æ„šå£å¶é—»å¤§å¸ˆè¯´æ³•ï¼Œä¸å…éœ‡åŠ¨åˆ°çŸ³éª¨åœŸé«“æ ¼æ ¼ä½œå“çš„ç¨‹åº¦ã€‚åŸæ¥æ•´åœºç”Ÿå‘½ä¹Ÿå¯ä½œç»æµå­¦æ¥çœ‹ï¼Œç”Ÿå‘½ä¹Ÿæ˜¯å¦‚æ­¤çŸ­å°ç¨€å°‘å•Šï¼è€Œäººçš„ä¸å¹¸å´åœ¨äºé‚£é¢—æ°¸è¿œæ¸´åˆ‡ä¸æ­¢çš„æœ‰æ‰€ç´¢æ±‚ï¼Œæœ‰æ‰€è·ƒåŠ¨ï¼æœ‰æ‰€æœªè¶³çš„å¿ƒï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™æ ·çš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆç«Ÿæ˜¯è¿™æ ·çš„å‘¢ï¼Ÿæˆ‘ç—´åç€ï¼Œä»»æ³ªä¸‹å¦‚éº»ä¸æ•¢å»åŠ¨å®ƒï¼Œä¸æ•¢è®©èº«æ—å¹´è½»çš„åŠ©æ•™çœ‹åˆ°ï¼Œä¸æ•¢è®©å¤§ä¸€å¹´è½»çš„å­©å­çœ‹åˆ°ã€‚å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆä»–ä»¬éƒ½ä¸æµæ³ªå‘¢ï¼Ÿåªå› ä¸ºå¹´è½»å—ï¼Ÿå› å¹´è½»å°±çœ‹ä¸å‡ºç”Ÿå‘½å¦‚æœåƒæˆï¼Œä¹Ÿåªèƒ½åƒä¸€åœºçŸ­çŸ­çš„ç‹¬å¹•å‰§å—ï¼Ÿâ€œæœå¦‚é’ä¸æš®æˆé›ªâ€ï¼Œä¹èµ·ä¹è½çš„ä¸€æœä¸€æš®é—´åˆä½•å°çœŸæœ‰å°‘å¹´ä¸å£®å¹´ä¹‹åˆ†ï¼Ÿâ€œæ€¥æŠŠç›ï¼Œå¤œé˜‘ç¯ç­â€ï¼ŒåŒ†åŒ†å¦‚èµ´ä¸€åœºå–§å“—å¤œå®´çš„äººç”Ÿï¼Œåˆå²‚æœ‰æ—©åˆ°æ™šåˆ°æ—©èµ°æ™šèµ°çš„åˆ†åˆ«ï¼Ÿç„¶è€Œä»–ä»¬ä¸æ‚²ä¼¤ï¼Œä»–ä»¬åœ¨ä½å¤´è®°ç¬”è®°ã€‚å¬ç»æµå­¦å¬åˆ°å“­èµ·æ¥ï¼Œè¿™è¯å¦‚æœæ˜¯åˆ«äººè®²ç»™æˆ‘å¬ï¼Œæˆ‘å¤§æ¦‚ä¼šå¤§ç¬‘ï¼Œç¬‘äººå®¶çš„æ»¥æƒ…ï¼Œå¯æ˜¯â€¦â€¦\n\nâ€œæ‰€ä»¥â€ï¼Œç»æµå­¦æ•™æˆåˆè¯´è¯äº†ï¼Œâ€œæœ‰ä½æ–‡å­¦å®¶å¡è±äºšè¿™æ ·å½¢å®¹ï¼šç»æµå­¦æ˜¯é—¨â€˜å¿§éƒçš„ç§‘å­¦â€™â€¦â€¦â€\n\næˆ‘ç–‘æƒ‘èµ·æ¥ï¼Œè¿™æ•™æˆåˆ°åº•æ˜¯å› æœ‰å¿ƒè€Œå‰æ¥è¯´æ³•çš„é•¿è€…ï¼Œè¿˜æ˜¯ä»¥æ— å¿ƒæ¥æ¸¡è„±çš„å¼‚äººï¼Ÿè‡³äºæ»¡å ‚çš„å­¦ç”Ÿæ­£è¥Ÿå±åæ˜¯å› å²æœˆå°šæ—©ï¼Œæ—©å¦‚æ­è¡£åˆæ¶‰æ°´çš„æµ…æºªï¼Œæ‰€ä»¥æ‰å‡ç„¶æ— åŠ¨å—ï¼Ÿä¸ºä»€ä¹ˆäº”æœˆå±±æ¡…å­çš„é¦™é¦¥é‡Œï¼Œç‹¬ç‹¬æ—å¬ç»æµå­¦çš„æˆ‘ä¸ºè¿™è¢«ä¸€è¯­é“ç ´çš„çŸ­ä¿ƒè€Œå¤šæ¬²çš„ä¸€ç”Ÿè€ŒåˆæƒŠåˆç—›æ³ªå¦‚é›¨ä¸‹å‘¢ï¼Ÿ\n","tags":["æ•£æ–‡","æ‘˜æŠ„"],"categories":["life"]},{"title":"åœ¨ Windows ä¸ŠçœŸæœºè°ƒè¯• iPhone(iOS) Safari Web é¡µé¢","url":"/archives/30/","content":"\n\nåœ¨ç§»åŠ¨ç«¯é¡µé¢å¼€å‘ä¸­ï¼Œéœ€è¦å¤„ç† Android å’Œ iOS çš„å…¼å®¹æ€§é—®é¢˜ã€‚åœ¨ Chrome DevTools ä¸­é€‰æ‹©æ‰‹æœºæ¨¡å¼ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæ¨¡æ‹Ÿç§»åŠ¨ç«¯çš„é¡µé¢ï¼Œä½†æ›´å¤šçš„åªæ˜¯æ–¹ä¾¿è¿›è¡Œé¡µé¢å¸ƒå±€çš„è°ƒè¯•å’Œå…¼å®¹ã€‚ä¸€äº›ç§»åŠ¨ç«¯çš„ç‰¹æ€§ä¸è¡¨ç°ï¼Œåœ¨çœŸæœºå’Œæ¨¡æ‹Ÿæƒ…å†µä¸‹è¿˜æ˜¯æœ‰å­˜åœ¨å¾ˆå¤§å·®åˆ«çš„ï¼ˆæ¯”å¦‚è½¯é”®ç›˜çš„å¼¹å‡ºç­‰ï¼‰ï¼Œå°¤å…¶æ˜¯ iOS å‡ºäºæŸäº›â€œè€ƒè™‘â€è¡¨ç°å‡ºä¸ç¬¦åˆæ ‡å‡†çš„ BUGï¼Œåœ¨ Windows Chrome ä¸­æ›´æ˜¯éš¾ä»¥å®šä½ã€‚\n\næœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Windows ç³»ç»Ÿä¸­è¿æ¥ iPhone Web é¡µé¢è¿›è¡ŒçœŸæœºè°ƒè¯•ã€‚\n<!--more-->\n\n## å·¥å…·èµ„æ–™\n\n* iPhone + æ•°æ®çº¿\n* iTunes\n* Node.js ç¯å¢ƒ\n* remotedebug-ios-webkit-adapter\n* Chrome æµè§ˆå™¨ï¼ˆå‹¿ä½¿ç”¨è¿‡ä½ç‰ˆæœ¬ Chromeï¼‰\n* æ¢¯å­ï¼ˆå¯èƒ½éœ€è¦ï¼‰\n\n## ç¯å¢ƒå‡†å¤‡\n\nå®ç°çœŸæœºè°ƒè¯•ä¸»è¦æ˜¯ä½¿ç”¨äº† remotedebug-ios-webkit-adapter è¿™ä¸€å·¥å…·ï¼Œä½¿ç”¨æ–¹æ³•åœ¨å…¶ [gitHub ä¸»é¡µ](https://github.com/RemoteDebug/remotedebug-ios-webkit-adapter) ä¸Šæœ‰ä»‹ç»ï¼Œå¯ä»¥ç›´æ¥æŒ‰ç…§å…¶å®˜æ–¹è¯´æ˜å®‰è£…ä½¿ç”¨ã€‚æœ¬æ–‡å¯¹å…¶ Windows ä¸‹çš„å®‰è£…ä½¿ç”¨è¿›è¡Œäº†ä¸€äº›ç»†èŠ‚çš„è¡¥å……å’Œè¯´æ˜ã€‚\n\n### å®‰è£… scoope\n\n[scoope](https://scoop.sh/) æ˜¯ä¸€ä¸ª Windows å‘½ä»¤è¡Œå®‰è£…å·¥å…·ï¼Œç±»ä¼¼ linux ä¸‹çš„ yum æˆ– apt-getã€‚remotedebug-ios-webkit-adapter çš„å®‰è£…å°†ä½¿ç”¨è¯¥å·¥å…·ã€‚\n\nä½¿ç”¨ [powershell](https://docs.microsoft.com/zh-cn/powershell/)ï¼ˆpowershell æ˜¯ Windows é¢„è£…çš„ Shell å·¥å…·ï¼‰ä¾æ¬¡æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œå®‰è£… scoopeï¼š\n\n```powdershell\nSet-ExecutionPolicy RemoteSigned -scope CurrentUser\niex (new-object net.webclient).downloadstring('https://get.scoop.sh')\n```\n\nç¨ç­‰ç‰‡åˆ»å°±å®‰è£…æˆåŠŸäº†ã€‚å¦‚æœå®‰è£…å¤±è´¥ï¼Œè¯·å°è¯•ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰§è¡Œã€‚\n\n### å®‰è£… remotedebug-ios-webkit-adapter\n\nä½¿ç”¨ cmdã€powershell æˆ– git bash ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…ä¾èµ–ç¯å¢ƒï¼š\n\n```bash\nscoop bucket add extras\nscoop install ios-webkit-debug-proxy\nnpm install -g vs-libimobile\n```\n\nï¼ˆè¿™é‡Œé»˜è®¤ä½ çš„ç”µè„‘å·²ç»å®‰è£…äº† [Node.js](https://nodejs.org) ç¯å¢ƒï¼Œå¦åˆ™ `npm` å‘½ä»¤å°†æ‰§è¡Œå¤±è´¥ï¼‰\n\nå®‰è£… remotedebug-ios-webkit-adapterï¼š\n\n```bash\nnpm install remotedebug-ios-webkit-adapter -g\n```\n\nå®‰è£…æˆåŠŸåï¼Œä½ å°†èƒ½åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ `remotedebug_ios_webkit_adapter` å‘½ä»¤\n\n### å®‰è£… iTunes\n\n[è®¿é—®å®˜ç½‘](https://www.apple.com/itunes/download/)ï¼Œä¸‹è½½ iTunesã€‚è¿™é‡Œæ³¨æ„ iTunes for Windows æä¾›ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯ä» Windows Store ä¸‹è½½ï¼Œå¦ä¸€ä¸ªæ˜¯å®‰è£…åŒ…ã€‚é€‰æ‹©åè€…ä¸‹è½½å®‰è£…ã€‚\n\n## è¿æ¥è°ƒè¯•\n\n1. è¿›å…¥ iPhonse ä¸­çš„ *è®¾ç½® > Safari æµè§ˆå™¨ > é«˜çº§ > Web æ£€æŸ¥å™¨*ï¼Œå¼€å¯è¯¥é€‰é¡¹ã€‚\n\n2. æ‰“å¼€ iTunes å¹¶è¿æ¥ iPhoneï¼Œåœ¨ iPhone å¼¹æ¡†ä¸­é€‰æ‹©ä¿¡ä»»è¯¥ç”µè„‘ã€‚\n\n3. æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨é€‚é…å™¨ï¼š\n\n    ```bash\n    remotedebug_ios_webkit_adapter --port=9000\n    ```\n\n4. åœ¨ iPhone ä¸­æ‰“å¼€ Safari æµè§ˆå™¨ï¼Œæ‰“å¼€å¾…è°ƒè¯•é¡µé¢ã€‚\n\n5. æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè¿›å…¥ [chrome://inspect/#devices](chrome://inspect/#devices) é¡µé¢ï¼Œåœ¨ Discover network targets é€‰é¡¹æ·»åŠ  localhost:9000 é…ç½®ã€‚åˆ·æ–°é¡µé¢ï¼Œè¿™æ—¶é¡µé¢ä¸­ä¼šå‡ºç° 'Remote Target' åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å±•ç¤ºäº† iPhone ä¸­æ‰“å¼€çš„é¡µé¢ï¼Œç‚¹å‡» inspectï¼Œå³å¯è¿›è¡Œè°ƒè¯•ã€‚\n\n**æ³¨æ„**ï¼šå¦‚æœç¬¬ 5 æ­¥ä¸­æœªå‡ºç°å¾…è°ƒè¯•é¡µé¢ï¼Œè¯·é‡å¯ remotedebug_ios_webkit_adapter å·¥å…·ï¼Œç„¶ååˆ·æ–°æˆ–é‡å¯æµè§ˆå™¨é‡è¯•ã€‚\n\n## è¯´æ˜\n\nåœ¨é¦–æ¬¡ç‚¹å‡» inspect æ‰“å¼€çœŸæœºè°ƒè¯•å·¥å…·æ—¶å¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå¦åˆ™å¯èƒ½å‡ºç° 404 é”™è¯¯ã€‚\n\nå‘½ä»¤è¡Œæ‰§è¡Œå¤±è´¥æ—¶ï¼Œè¯·å°è¯•ä½¿ç”¨ç®¡ç†å‘˜æƒé™ï¼Œæˆ–æŸ¥çœ‹å…¶å®˜ç½‘è¯´æ˜ã€‚\n\nè¯·å‹¿ä½¿ç”¨è¾ƒä½ç‰ˆæœ¬çš„ Chrome æµè§ˆå™¨\n\nè¯¥ä¾‹ä¸­ä½¿ç”¨äº† Windows 10ã€Chrome 73.0.3683.75ã€iOS 12.1.4ã€‚\n\nå…¶ä»–ç³»ç»Ÿä¸‹çš„å®‰è£…å’Œä½¿ç”¨è¯·æŸ¥çœ‹ [remotedebug-ios-webkit-adapter gitHub ä¸»é¡µ](https://github.com/RemoteDebug/remotedebug-ios-webkit-adapter)ã€‚\n","tags":["Tools"],"categories":["developer"]},{"title":"æ—¥è®°-ä¸‹é›¨å¤©","url":"/archives/29/","content":"\n\nå†™ç¯‡æ—¥è®°å§ã€‚\n\nä»Šå¤©æ˜¯ 3 æœˆ 7 å·ï¼Œè¿™ä¸ªåŸå¸‚éš¾å¾—çš„æ²¡ä¸‹é›¨çš„æ—¥å­ã€‚\n<!--more-->\n\næˆ‘æ›¾å–œæ¬¢æ·…æ·…æ²¥æ²¥çš„é›¨å¤©ï¼Œåœ¨é‚£æ ·çš„é›¨å¤©èµ°åœ¨å¤§å­¦ç©ºæ—·çš„æ ¡å›­ï¼Œæ¸…çˆ½è€Œå®‰é™ã€‚å·¥ä½œåï¼Œæˆ‘å†ä¸å–œæ¬¢ä¸‹é›¨å¤©ã€‚é›¨å¤©è®©é“è·¯å˜çš„æ³¥æ³ï¼Œå¼„è„æˆ‘çš„é‹å­ã€‚é›¨å¤©æŠ«ç€é›¨è¡£éª‘è½¦ä¹Ÿå¾—æ ¼å¤–å°å¿ƒã€‚è·¯ä¸Šçš„è¡Œäººã€è½¦è¾†éƒ½å˜å¾—æ€¥èºã€‚åŒ†åŒ†å¿™å¿™åœ°ä¸Šä¸‹ç­ï¼Œå†æ²¡æ—¶é—´å’Œå¿ƒæƒ…å»ä½“å‘³é‚£äº›é›¨å¤©çš„æƒ…æ„«ã€‚\n\nå¦‚æœåªæ˜¯ä¸€ä¸ªå­¤ç‹¬çš„ç”·ç”Ÿæ¯å¤©é»˜é»˜åœ°ä¸Šç­ï¼Œé™é™åœ°ä¸‹ç­ï¼Œåœ¨é›¨ä¸­å‡ºæ²¡ï¼Œä¸€è¨€ä¸å‘ï¼›åœ¨è¿™ä¸ªå¤šé›¨çš„åŸå¸‚ï¼Œé€è¿‡åºŠè¾¹çš„çª—æˆ·ï¼Œé™é™åœ°æœ›ç€çª—å¤–æ¹¿æ¼‰æ¼‰çš„å¤œè‰²ï¼Œåœ¨æ²‰é»˜ä¸­åº¦è¿‡ä¸€ä¸ªåˆä¸€ä¸ªå¹³é™çš„å¤œæ™šï¼Œä¸æ€è¿‡å»ï¼Œä¸è™‘å°†æ¥ï¼ŒåŠªåŠ›åœ°å›é¿ç€ä¸è¿™ä¸ªä¸–ç•Œçš„äº¤é›†ï¼Œæ³¢æ¾œä¸æƒŠã€‚é‚£ä¹Ÿæœ¬è¯¥æ˜¯ä¸€ä»¶æ­£å¸¸ç”šè‡³æœ‰ç‚¹é…·çš„äº‹æƒ…ã€‚\n\nä½†åœ¨äººçš„ä¸€ç”Ÿä¸­ï¼Œæ€»ä¼šé‡åˆ°é‚£ä¹ˆä¸€äº›äººçªç„¶é—¯å…¥ä½ çš„ä¸–ç•Œï¼ŒæŠŠä½ ä»é›¨å¤©æ¸©æš–çš„æˆ¿é—´é‡Œå«å‡ºæ¥ï¼Œæ‹‰å‡ºæ¥ï¼Œæ‹–å‡ºæ¥ï¼›ä¸é¡¾é›¨æ°´æ‰“æ¹¿è¡£æœï¼Œå¼„è„é‹å­ï¼Œåœ¨é›¨æ°´é‡Œè¹¦å•Šï¼Œè·³å•Šï¼Œå¸¦ä½ çœ‹é›¨å¤©æœ€ç»šä¸½å¤šå˜çš„å¥‡æ™¯ã€‚ä½ çœ‹ç€ï¼Œæƒ³ç€ï¼Œæ‰‹è¶³æ— æªâ€¦â€¦\n\né‚£äº›æ™¯è‰²ï¼Œä½ è€¿è€¿äºå¿ƒä¸èƒ½å¿˜äº†ã€‚ä½ è§‰å¾—ä½ ä¸åº”è¯¥å°±è¿™æ ·å‘†åœ¨æˆ¿é—´é‡Œé»˜é»˜è§‚èµçª—å¤–çš„æ™¯è‰²ã€‚ä½ ä¹Ÿè¦è·‘å‡ºæ¥ï¼Œæ·‹æ·‹é›¨ï¼Œè¸©è¸©æ°´ï¼›å“ªæ€•è¡£æœæ¹¿äº†ï¼Œé‹å­è„äº†ï¼Œæ·‹æ¹¿äº†å¤´å‘æ„Ÿå†’äº†ï¼Œä½ ä¹Ÿä¸åæ‚”ã€‚ä½ åªæ˜¯è§‰å¾—ä½ ä¸åº”è¯¥é”™è¿‡è¿™åœºé›¨ã€‚ä½ ä¹Ÿè¦ä¸ºè‡ªå·±æ·‹ä¸€åœºé›¨ã€‚\n\næˆ‘å†³å®šè¦ç¦»å¼€è¿™ä¸ªåŸå¸‚ï¼Œç¦»å¼€èˆ’é€‚çš„æˆ¿é—´ã€‚å‘çª—å¤–çš„ï¼Œæˆ‘æ›¾åœ¨æ¨¡ç³Šçš„è®°å¿†ä¸­æ†§æ†¬è¿‡ï¼Œå´æœªæ›¾è¿½é€è¿‡çš„æ™¯è‰²å‡ºå‘ã€‚å³ä½¿æœ‰ä¸€å¤©ï¼Œæˆ‘æ¹¿æ¼‰æ¼‰çš„åˆå›åˆ°è¿™é‡Œï¼ŒæŠŠæµé€çš„æ—¶å…‰éƒ½å½“ä½œç¬‘è°ˆï¼Œæˆ‘ä¹Ÿä¸ä¼šåæ‚”ã€‚æˆ‘ä¸ä¼šå‘Šè¯‰ä»–ä»¬çª—å¤–çš„è·¯æœ‰å¤šæ³¥æ³ï¼Œä¹Ÿä¸ä¼šå‘Šè¯‰ä»–ä»¬çª—å¤–çš„æ™¯è‰²æœ‰å¤šè¿·äººï¼Œæˆ‘ä¹Ÿä¸€æ ·ä¸ä¼šæŠŠæˆ‘åœ¨é›¨ä¸­å¥”è·‘ã€å¬‰æˆã€è·Œå€’ã€å¼€æ€€å¤§ç¬‘çš„å¿ƒæƒ…å‘Šè¯‰ä»–ä»¬ã€‚ä»–ä»¬ä¸ä¼šç›¸ä¿¡ï¼Œä¸ä¼šç†è§£ï¼Œä¹Ÿä½“ä¼šä¸åˆ°ã€‚åœ¨é‚£ä¹‹åï¼Œæˆ‘å¤§æ¦‚ä¾æ—§ä¼šåœ¨æ¯ä¸€ä¸ªé›¨å¤©å‘†ååœ¨çª—è¾¹ï¼Œæœ›ç€çª—å¤–æ·…æ·…æ²¥æ²¥çš„é›¨æ™¯ï¼Œå¥½åƒä¸€åˆ‡éƒ½æ²¡æœ‰å˜ã€‚\n","tags":["æ•£æ–‡"],"categories":["life"]},{"title":"Nginx é…ç½®å‰ç«¯ HTML5 History è·¯ç”±","url":"/archives/16/","content":"\nç”±äº Vueã€React ç­‰ç°ä»£å‰ç«¯æ¡†æ¶çš„å‰ç«¯ History è·¯ç”±ï¼Œåœ¨æœåŠ¡ç«¯å¹¶æ²¡æœ‰å®é™…å¯¹åº”çš„ç‰©ç†è·¯å¾„å’Œæ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ Nginx çš„é»˜è®¤é…ç½®ç›´æ¥è®¿é—®è·¯ç”±æˆ–åˆ·æ–°è·¯ç”±æ—¶ï¼Œä¼šå¯¼è‡´ 404 é”™è¯¯ã€‚\n\n<!--more-->\n\nåœ¨ Nginx ä¸­ä½¿ç”¨ `try_files` é…ç½®å¯¹ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œè¿”å›æŒ‡å®šæ–‡ä»¶å³å¯è§£å†³ History è·¯ç”± 404 çš„é—®é¢˜ã€‚\n\nä»¥ä¸‹é’ˆå¯¹å‡ ç§æƒ…å†µç»™å‡ºé…ç½®ç¤ºä¾‹ï¼Œå¹¶ç®€å•è®²è§£ç›¸å…³é…ç½®ã€‚\n\n### å‰ç«¯é¡¹ç›®åœ¨ Nginx æœåŠ¡æ ¹ç›®å½•ä¸‹\n\næœåŠ¡ç«¯ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n\n```txt\n+-- html\n    +-- index.html\n    +-- bundle.js\n```\n\nnginx é…ç½®å¦‚ä¸‹ï¼š\n\n```nginx-config\n...\n\nlocation / {\n    root   html;\n    try_files $uri $uri/ index.html;\n    index  index.html index.htm;\n}\n\n...\n```\n\n`location` é…ç½®å¯¹è®¿é—®è·¯å¾„è¿›è¡ŒåŒ¹é…:\n\n```nginx\nSyntax: location [ = | ~ | ~* | ^~ ] uri { ... }\n        location @name { ... }\nDefault: â€”\nContext: server, location\n```\n\n`root` æŒ‡å®šè¯·æ±‚å¯¹åº”åœ¨æœåŠ¡å™¨ä¸Šå¯¹åº”çš„æ ¹ç›®å½•ï¼š\n\n```nginx\nSyntax: root path;\nDefault: root html;\nContext: http, server, location, if in location\n```\n\n`try_files` é…ç½®å°†ä¾æ¬¡æŸ¥æ‰¾åé¢çš„æ–‡ä»¶æˆ–è·¯å¾„ï¼Œä¸å­˜åœ¨æ—¶æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼Œå› æ­¤æœ€åä¸€ä¸ªæ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™å°†äº§ç”Ÿ 500 é”™è¯¯ã€‚\n\n```nginx\nSyntax: try_files file ... uri;\n        try_files file ... =code;\nDefault: â€”\nContext: server, location\n```\n\n`index` æŒ‡å®šè¯¥è¯·æ±‚è·¯å¾„çš„ç´¢å¼•\n\n```nginx\nSyntax: index file ...;\nDefault: index index.html;\nContext: http, server, location\n```\n\nè¿™é‡Œä½¿ç”¨ `try_files` é…ç½®å°†ä¸å­˜åœ¨çš„è·¯å¾„è®¿é—®ç»Ÿä¸€è¿”å›äº† `index.html` æ–‡ä»¶ï¼Œè¿™æ ·å°±äº¤ç”±å‰ç«¯é¡¹ç›®è¿›è¡Œ History è·¯ç”±çš„å¤„ç†ã€‚\n\néœ€è¦æ³¨æ„çš„æ—¶ï¼Œå¦‚æ­¤é…ç½®åå°†ä¸ä¼šäº§ç”Ÿ 404 è®¿é—®ï¼Œå› æ­¤å‰ç«¯è·¯ç”±ä¸­åº”å¯¹ä¸å­˜åœ¨çš„è·¯ç”±è¿›è¡Œ 404 é¡µé¢çš„å¤„ç†ã€‚\n\n### å‰ç«¯é¡¹ç›®åœ¨ Nginx æœåŠ¡å­ç›®å½•ä¸‹\n\næœåŠ¡ç«¯ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n\n```\n+-- html\n    +-- project1\n    |   +-- index.html\n    |   +-- bundle.js\n    +--- project2\n        + -- index.html\n        + -- bundle.js\n```\n\nåˆ†åˆ«ä¸º `project1` å’Œ `project2` é…ç½® `try_files`:\n\n```nginx-config\n...\n\nlocation / {\n    root   html;\n    index  index.html index.htm;\n}\n\nlocation /project1 {\n    root html;\n    try_files $uri $uri/ /project1/index.html;\n    index index.html index.htm;\n}\n\nlocation /project2 {\n    root html;\n    try_files $uri $uri/ /project2/index.html;\n    index index.html index.htm;\n}\n\n...\n```\n\n### å‰ç«¯é¡¹ç›®åœ¨å…¶ä»–ç›®å½•ä¸‹\n\nç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n\n```\n+-- nginx\n    +-- html\n    |   +-- project1\n    |   |   +-- index.html\n    |   |   +-- bundle.js\n    +-- project2\n        + -- index.html\n        + -- bundle.js\n```\n\n`project1` å’Œ `project2` ä½¿ç”¨å‰ç«¯è·¯ç”±çš„é…ç½®å¦‚ä¸‹ï¼š\n\n```nginx-config\n...\n\nlocation / {\n    root   html;\n    index  index.html index.htm;\n}\n\nlocation /project1 {\n    root html;\n    try_files $uri $uri/ /project1/index.html;\n    index index.html index.htm;\n}\n\nlocation /project2 {\n    root ./;\n    try_files $uri $uri/ /project2/index.html;\n    index index.html index.htm;\n}\n\n...\n```\n","tags":["Server","Nginx"],"categories":["developer"]},{"title":"IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ2ï¼‰åŸºæœ¬ä½¿ç”¨","url":"/archives/2/","content":"\n\n[IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ1ï¼‰ä»‹ç»](https://www.hozen.site/archives/1/)\n\n[IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ2ï¼‰åŸºæœ¬ä½¿ç”¨](https://www.hozen.site/archives/2/)\n<!--more-->\n\n************\n\næ•™ç¨‹æŒç»­æ›´æ–°ä¸­â€¦â€¦\n\næœ¬æ–‡å°†åŸºäºä¸€äº›ä»£ç å®ä¾‹å¯¹äº IndexedDB çš„åŸºæœ¬ç”¨æ³•è¿›è¡Œä»‹ï¼Œä¸ºäº†æ•™ç¨‹çš„è¿è´¯æ€§ï¼Œä¸€äº›åŸç†æ€§çš„å†…å®¹å’Œå®¹æ˜“æœ‰ç–‘é—®çš„åœ°æ–¹å¹¶æœªå±•å¼€ï¼Œåœ¨æ–‡æœ«å°†ä¼šå¯¹è¿™äº›ç–‘é—®è¿›è¡Œè§£é‡Šå’Œè¯´æ˜ã€‚\n\n## è¿æ¥æ•°æ®åº“\n\nä½¿ç”¨ `indexedDB.open()` æ–¹æ³•æ‰“å¼€æœ¬åœ°æ•°æ®åº“ï¼Œå¦‚æœè¯¥æ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ•°æ®åº“ã€‚è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šæ•°æ®åº“åã€æ•°æ®åº“ç‰ˆæœ¬ï¼ˆå¯é€‰çš„ï¼‰ã€‚\n\n```js\nvar openRequest = window.indexedDB.open('hozen.site');\nvar db;\nopenRequest.onsuccess = function(event) {\n    db = this.result; \n    // db = event.target.result;\n    // db = openRequest.result;\n    console.log(\"æ‰“å¼€æ•°æ®åº“æˆåŠŸ\");\n}\nopenRequest.onupgradeneeded = function(event) {\n    var objStore = this.result.createObjectStore('blog', {keyPath: 'url'});\n    objStore.createIndex('category', 'category'); // åˆ›å»ºç´¢å¼•\n    console.log('åˆ›å»ºå¯¹è±¡ä»“åº“å®Œæˆ');\n}\nopenRequest.onerror = function(event) {\n    console.log('æ‰“å¼€æ•°æ®åº“å¤±è´¥', event);\n}\n```\n\n`open` æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œå½“æ‰“å¼€æˆåŠŸæ—¶è§¦å‘ `onsuccess` äº‹ä»¶ï¼Œå¤±è´¥æ—¶è§¦å‘ `onerror` äº‹ä»¶ã€‚å½“æ•°æ®åº“å‡çº§æ—¶ï¼Œè§¦å‘ `onupgradeneeded` äº‹ä»¶ã€‚å‡çº§æ˜¯æŒ‡è¯¥æ•°æ®åº“é¦–æ¬¡è¢«åˆ›å»ºï¼Œæˆ–è°ƒç”¨ `open()` æ–¹æ³•æ—¶æŒ‡å®šçš„æ•°æ®åº“çš„ç‰ˆæœ¬å·é«˜äºæœ¬åœ°å·²æœ‰çš„ç‰ˆæœ¬ã€‚\n\n`onupgradeneeded` å¤„ç†å‡½æ•°å¯¹äºåˆ›å»ºæ•°æ®åº“å’Œä¿®æ”¹æ•°æ®åº“ç»“æ„æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸º IndexedDB åªå…è®¸åœ¨è¯¥å‡½æ•°å†…åˆ›å»ºå’Œåˆ é™¤ `ObjectStore` æˆ–åˆ›å»ºåˆ é™¤ç´¢å¼•ã€‚ä¸€æ—¦é”™è¿‡è¿™ä¸ªæœºä¼šå°±æ— æ³•åœ¨å½“å‰ç‰ˆæœ¬æ•°æ®åº“ä¸­å¯¹æ•°æ®åº“ç»“æ„è¿›è¡Œä¿®æ”¹äº†ã€‚\n\n`db` å˜é‡ä¿å­˜äº†æ‰“å¼€æ•°æ®åº“è¯·æ±‚çš„ç»“æœï¼Œå½“æ‰“å¼€æ•°æ®åº“æˆåŠŸæ—¶å°†è·å–ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡æ˜¯å¯¹ IndexedDB è¿›è¡Œæ•°æ®æ“ä½œçš„åŸºç¡€ï¼Œå› æ­¤è¦åŠæ—¶ä¿å­˜å®ƒï¼Œå¹¶ä¿è¯åœ¨éœ€è¦çš„åœ°æ–¹èƒ½è°ƒç”¨å¾—åˆ°ã€‚\n\n`createObjectStore` æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ä»“åº“ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä»“åº“åã€é…ç½®å¯¹è±¡ï¼ˆå¯é€‰çš„ï¼‰ã€‚è¯¥ä¾‹ä¸­ï¼Œä½¿ç”¨é…ç½®å¯¹è±¡æŒ‡å®šäº† 'url' ä¸ºå¯¹è±¡ä»“åº“çš„**å†…é”®**ï¼Œå…¶ä½œç”¨ç±»ä¼¼å…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸»é”®ï¼Œéœ€å…·æœ‰å”¯ä¸€æ ‡è¯†æ€§ã€‚è¯¥æ–¹æ³•è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ä»“åº“ã€‚\n\n## æ·»åŠ ä¸€æ¡æ•°æ®\n\n```js\nvar data = {\n    title: 'IndexedDB æ•™ç¨‹ï¼ˆ1ï¼‰ç®€ä»‹',\n    url: 'https://www.hozen.site/archives/6/',\n    categories: 'clientScript',\n};\nvar transaction = db.transaction('blog', 'readwrite');\nvar objectStore = transaction.objectStore('blog');\nvar addReq = objectStore.add(data);\naddReq.onsuccess = function() {\n    console.log('æ·»åŠ æ•°æ®æˆåŠŸ', this.result);\n}\naddReq.onerror = function(event) {\n    console.log('æ·»åŠ æ•°æ®å¤±è´¥', event)\n}\n```\n\nè¿™é‡Œæˆ‘ä»¬ç›´æ¥å°†ä¸€ä¸ª JavaScript å¯¹è±¡ `data` æœªåŠ ä»»ä½•å¤„ç†çš„å­˜å…¥äº†æ•°æ®åº“ã€‚åœ¨è¯¥ä¾‹ä¸­ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†å†…é”®ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½å­˜å‚¨ JavaScript å¯¹è±¡ï¼ˆæˆ–è€…æ˜¯å› ä¸ºæˆ‘ä»¬åªä¼šå­˜å‚¨å¯¹è±¡ï¼Œæ‰€ä»¥æ‰ä½¿ç”¨äº†å†…é”®ï¼‰ï¼Œå¹¶ä¸”å…¶ `url` å±æ€§æ˜¯å¿…é¡»ä¸”å”¯ä¸€çš„ã€‚\n\né¦–å…ˆï¼Œé€šè¿‡ `transaction()` æ–¹æ³•è·å–ä¸€ä¸ªäº‹åŠ¡ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºäº‹åŠ¡çš„**ä½œç”¨åŸŸ**ï¼Œè¡¨ç¤ºè¯¥äº‹åŠ¡è·¨è¶Šçš„å¯¹è±¡ä»“åº“ï¼›ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºäº‹åŠ¡æƒé™ï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ªè¯»å†™æƒé™ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªäº‹åŠ¡å¯¹è±¡ã€‚\n\n`objectStore()` æ–¹æ³•è·å–æŒ‡å®šå¯¹è±¡ä»“åº“ï¼Œè¯¥æ–¹æ³•ä¸€æ¬¡åªèƒ½è·å–ä¸€ä¸ªå¯¹è±¡ä»“åº“ã€‚\n\nä½¿ç”¨å¯¹è±¡ä»“åº“çš„ `add()` æ–¹æ³•åƒæ•°æ®åº“æ·»åŠ æ•°æ®ï¼Œè¿™åŒæ ·æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œè§¦å‘å“åº”äº‹ä»¶å¤„ç†å‡½æ•°ã€‚\n\n## å–å‡ºä¸€æ¡æ•°æ®\n\n```js\nvar transaction = db.transaction('blog');\nvar objectStore = transaction.objectStore('blog');\nvar getReq = objectStore.get('https://www.hozen.site/archives/6/');\ngetReq.onsuccess = function() {\n    console.log('è¯»å–æ•°æ®æˆåŠŸ: ', this.result);\n}\ngetReq.oerror = function(event) {\n    console.log('è¯»å–æ•°æ®å¤±è´¥', event);\n}\n```\n\nç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè·å–ä¸€ä¸ªå¯¹è±¡ä»“åº“ï¼Œè°ƒç”¨å®ƒçš„ `get()` æ–¹æ³•è¯»å–æ•°æ®ï¼Œç„¶åå¯¹æˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µåšå¤„ç†ã€‚ä½†è¿™é‡Œç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªâ€œåªè¯»â€äº‹åŠ¡å³å¯ï¼ˆæœ€å°æƒé™åŸåˆ™ä¸ä»…æ˜¯ä¼˜ç§€çš„ä»£ç ä¹ æƒ¯ï¼Œåœ¨ IndexedDB å¯¹äºè·¨ä½œç”¨åŸŸçš„æƒ…å†µä¹Ÿæ˜¯æœ‰ç§¯æä½œç”¨çš„ï¼Œè§æ–‡æœ«ï¼‰ã€‚\n\n`get()` æ–¹æ³•æ¥å—æ•°æ®çš„é”®ï¼ˆkeyï¼‰ä½œä¸ºå‚æ•°ï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¯¹åº”çš„æ•°æ®ã€‚å¦‚æœæŸ¥è¯¢æˆåŠŸï¼Œå…¶ç»“æœä¼šè¿”å›è‡³è¯·æ±‚å¯¹è±¡çš„ `result` å±æ€§ä¸­ã€‚æ•°æ®ä¸ºç©ºè¿”å› `undefined`ã€‚\n\n## ä¿®æ”¹ä¸€æ¡æ•°æ®\n\n```js\nvar dataNew = {\n    title: 'IndexedDB æ•™ç¨‹ï¼ˆ1ï¼‰ç®€ä»‹',\n    url: 'https://www.hozen.site/archives/6/',\n    categories: 'clientScript',\n    alias: 'indexDB introduction',\n};\nvar transaction = db.transaction('blog', 'readwrite');\nvar objectStore = transaction.objectStore('blog');\nvar addReq = objectStore.put(dataNew);\naddReq.onsuccess = function() {\n    console.log('ä¿®æ”¹æ•°æ®æˆåŠŸ', this.result);\n}\naddReq.onerror = function(event) {\n    console.log('ä¿®æ”¹æ•°æ®å¤±è´¥', event)\n}\n```\n\nè¿™é‡Œçš„ä»£ç åŸºæœ¬ä¸Šå’Œæ·»åŠ æ•°æ®çš„ä»£ç ä¸€è‡´ï¼Œåªä¸è¿‡æˆ‘ä»¬å‘æ•°æ®ä¸­æ–°å¢äº†ä¸€ä¸ª `alias` å­—æ®µã€‚ç„¶åè°ƒç”¨äº† `put()` æ–¹æ³•è€Œé `add()` æ–¹æ³•å‘æ•°æ®åº“æ’å…¥æ•°æ®ã€‚å¦‚æœè¿™é‡Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ `add()` æ–¹æ³•å°†ä¿®æ”¹åçš„æ•°æ®æ’å…¥æ•°æ®åº“æ—¶ï¼Œè¯·æ±‚ä¼šå¤±è´¥ï¼Œå› ä¸ºå·²ç»å­˜åœ¨ä¸€ä¸ª `url` ç›¸åŒçš„æ•°æ®ã€‚è€Œ `put()` åˆ™æ˜¯ä¸å…³å¿ƒæ•°æ®åº“æ˜¯å¦å·²å­˜åœ¨è¯¥æ•°æ®ï¼ˆå…·å¤‡ç›¸åŒé”®çš„æ•°æ®ï¼‰ï¼Œæ€»æ˜¯æŠŠæ•°æ®æ’å…¥æ•°æ®åº“ï¼Œè¿›è€Œè¦†ç›–æ‰ä»¥å‰çš„æ•°æ®ï¼Œè¾¾åˆ°æ›´æ–°æ•°æ®çš„ç›®çš„ã€‚\n\nå› æ­¤ï¼Œåœ¨ IndexedDB ä¸­æ›´æ–°æ•°æ®å®é™…ä¸Šç›¸å½“äºç”¨ä¸€ä¸ªæ–°çš„æ•°æ®è¦†ç›–æ‰åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬åªæ›´æ–°éƒ¨åˆ†æ•°æ®æ—¶ï¼Œä¼šå…ˆä»æ•°æ®åº“ä¸­å–å‡ºåŸæ¥çš„æ•°æ®ï¼Œç„¶åä¿®æ”¹è¯¥æ•°æ®çš„å±æ€§ï¼Œæœ€åå°†è¯¥æ•°æ®â€œputâ€è¿›æ•°æ®åº“ã€‚è¿™å’Œå…³ç³»å‹æ•°æ®åº“ä¸­ `UPDATE` è¯­æ³•ä¸å¤ªä¸€æ ·ã€‚\n\n## åˆ é™¤ä¸€æ¡æ•°æ®\n\n```js\nvar transaction = db.transaction('blog', 'readwrit');\nvar objectStore = transaction.objectStore('blog');\nvar delReq = objectStore.delete('https://www.hozen.site/archives/6/');\ndelReq.onsuccess = function() {\n    console.log('åˆ é™¤æ•°æ®æˆåŠŸ');\n}\ndelReq.onerror = function(event) {\n    console.log('åˆ é™¤æ•°æ®å¤±è´¥', event);\n}\n```\n\nåŒæ ·æˆ‘ä»¬éœ€è¦å¯åŠ¨ä¸€ä¸ªäº‹åŠ¡æ¥è¿›è¡Œåˆ é™¤æ“ä½œï¼Œ`delete` æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°æ¥åˆ é™¤å¯¹åº”çš„æ•°æ®ï¼Œè¯¥å‚æ•°å¯ä»¥æ˜¯ä¸€æ¡æ•°æ®çš„é”®ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªä»£è¡¨é”®èŒƒå›´çš„å¯¹è±¡ [IDBKeyRange](https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange)ã€‚åˆ é™¤æˆåŠŸæ—¶è§¦å‘ `onsuccess` äº‹ä»¶ï¼Œåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šæˆåŠŸã€‚\n\n## æ‰¹é‡æ“ä½œ\n\n### æ‰¹é‡æ’å…¥\n\nä½¿ç”¨å¾ªç¯æ¥æ‰¹é‡æ’å…¥æ•°æ®ï¼š\n\n```js\nvar transaction = db.transaction('blog', 'readwrite');\nvar objectStore = transaction.objectStore('blog');\nvar dataSet = [\n    {\n        title: 'IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ1ï¼‰ç®€ä»‹',\n        url: 'https://www.hozen.site/archives/6/',\n        category: 'clientScript',\n    }, {\n        title: 'IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ2ï¼‰åŸºæœ¬ç”¨æ³•',\n        url: 'https://www.hozen.site/archives/7/',\n        category: 'clientScript',\n    }, {\n  title: 'ã€Šå’Œè§£ã€‹â€”â€” React å·®å¼‚åŒ–ç®—æ³•',\n        url: 'https://www.hozen.site/archives/1/',\n        catefory: 'React',\n    }, {\n        title: '[è¯‘]ä¸¥æ ¼åˆ¤å®šJavaScriptå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„',\n        url: 'https://www.hozen.site/archives/2/',\n        category: 'ECMAScript',\n    }, {\n        title: 'JavaScriptè®¾è®¡æ¨¡å¼(1)â€”â€”å•ä¾‹æ¨¡å¼',\n        url: 'https://www.hozen.site/archives/17/',\n        category: 'ECMAScript',\n    }];\n    \ntransaction.oncomplete = function() {\n console.log('æ‰€æœ‰æ•°æ®æ’å…¥æˆåŠŸ'); \n};\n\ntransaction.onerror = function(event) {\n console.log('æ’å…¥æ•°æ®å¤±è´¥ï¼š', event);\n}\n\ndataSet.forEach(function(data) {\n    objectStore.put(data);\n});\n```\n\nä¸Šä¾‹ä¸­ä½¿ç”¨äº†äº‹åŠ¡çš„ `oncomplete` äº‹ä»¶ï¼Œå½“äº‹åŠ¡å®Œæˆæ—¶ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚\n\n### æŸ¥è¯¢æ‰€æœ‰æ•°æ®\n\nä½¿ç”¨ `getAll()` å¯ä»¥è¿›è¡ŒæŸ¥è¯¢å¯¹è±¡ä»“åº“æ‰€æœ‰æ•°æ®ï¼š\n\n```js\nvar objectStore = db.transaction('blog').objectStore('blog');\nvar getAllReq = objectStore.getAll();\ngetAllReq.onsuccess = function() {\n    console.log('æ‰€æœ‰æ•°æ®', this.result);\n};\ngetAllReq.onerror = function(evnt) {\n    console.log('è·å–æ•°æ®å¤±è´¥', event);\n};\n```\n\nè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šæŸ¥è¯¢èŒƒå›´ [IDBKeyRange](https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange)ï¼Œç¬¬äºŒä¸ªå‚æ•°é™åˆ¶è¿”å›æ•°æ®çš„æ•°é‡ã€‚\n\nç›¸åº”çš„ `getAllKeys()` å¯ä»¥è·å–æ‰€æœ‰æ•°æ®çš„é”®ã€‚\n\n### æ¸…ç©ºå¯¹è±¡ä»“åº“\n\nåœ¨åˆ é™¤æ•°æ®å°èŠ‚é‡Œå·²ç»æåˆ°ï¼Œä¼ å…¥ä¸€ä¸ª [IDBKeyRange](https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange) å¯¹è±¡å‚æ•°ç»™ `delete()` æ–¹æ³•å¯ä»¥å®ç°èŒƒå›´åˆ é™¤ã€‚å¦‚æœéœ€è¦æ¸…ç©ºå¯¹è±¡ä»“åº“ï¼Œæœ‰ä¸€ä¸ªæ›´ç®€å•çš„æ–¹æ³•ï¼š`clear()`ã€‚\n\n```js\nvar objectStore = db.transaction('blog', 'readwrite').objectStore('blog');\nvar clearReq = objectStore.clear();\nclearReq.onsuccess = function() {\n    console.log('æ¸…ç©ºæˆåŠŸ');\n}\nclearReq.onerror = function(event) {\n    console.log('æ¸…ç©ºå¤±è´¥', event);\n}\n```\n\n## ä½¿ç”¨æ¸¸æ ‡\n\nä½¿ç”¨æ¸¸æ ‡å¯ä»¥å¯¹å¯¹è±¡ä»“åº“ä¸­çš„æ•°æ®è¿›è¡Œéå†ï¼š\n\n```js\nvar objectStore = db.transaction('blog').objectStore('blog');\ncursorReq.onsuccess = function() {\n    var cursor = this.result;\n    if (cursor) {\n        console.log(cursor.value.title);\n        cursor.continue();\n    } else {\n        console.log('éå†ç»“æŸ');\n    }\n}\n```\n\n`openCursor()` æ–¹æ³•æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œç¬¬ä¸€ä¸ªä»ç„¶æ˜¯ä¸€ä¸ª IDBKeyRange å¯¹è±¡æ¥æŒ‡å®šéå†èŒƒå›´ï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šéå†æ–¹å‘ã€‚å½“æŸ¥è¯¢æˆåŠŸæ—¶ï¼Œ`cursorReq` çš„ `result` å±æ€§æŒ‡å‘ä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„ `key` å’Œ `value` åˆ†åˆ«ä¿å­˜äº†æŸ¥è¯¢æ•°æ®çš„é”®å€¼ã€‚è°ƒç”¨ `cursor` çš„ `continue()` æ–¹æ³•ä½¿éå†ç»§ç»­å—ï¼Œå½“éå†ç»“æŸæ—¶ `result` å¾—åˆ° `null`ã€‚\n\nä½¿ç”¨ `getAll()` è·å–æ‰€æœ‰æ‰€æœ‰æ•°æ®ï¼Œç„¶åå¯¹ç»“æœè¿›è¡Œéå†è·å– `title` å±æ€§ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°ä¸Šä¾‹çš„ç›®çš„ã€‚ä½†å¦‚æœæˆ‘ä»¬åªæƒ³è·å– `key` çš„å€¼æ—¶ï¼Œä½¿ç”¨æ¸¸æ ‡è¦æ¯”ä½¿ç”¨ `getAll()` é«˜æ•ˆå¾—å¤šã€‚\n\nç›¸åº”çš„ `openKeyCursor` å¯ä»¥ç”¨æ¥è·å–æ•°æ®çš„é”®ã€‚\n\n## ä½¿ç”¨ç´¢å¼•\n\næœ¬æ–‡ä¸­çš„ä¾‹å­ä½¿ç”¨äº† `url` ä½œä¸ºå¯¹è±¡ä»“åº“çš„å†…é”®ä»¥ä¿è¯ä¸ä¼šé‡å¤ï¼Œä½†ä¸ä¼šé‡å¤çš„é”®å¤§å¤šä¸æ˜“è®°å¿†å’ŒæŸ¥è¯¢ã€‚IndexedDB æä¾›äº†ç´¢å¼•æœºåˆ¶ã€‚\n\n```js\nvar objectStore = db.transaction('blog').objectStore('blog');\nvar index = objectStore.index('category');\nvar indexReq = index.getAll();\nindexReq.onsuccess = function() {\n    console.log(this.result);\n}\nindexReq.onerror = function(event) {\n    console.log(event);\n}\n```\n\n## å¯èƒ½å­˜åœ¨çš„ç–‘é—®\n\nä»¥ä¸Šæ˜¯ä¸€äº›åŸºæœ¬çš„ IndexedDB çš„ APIï¼Œå°½é‡é¿å…äº†ä¸€äº›å¯èƒ½ç¨å¾®å¤æ‚çš„æ¦‚å¿µå’ŒåŸç†ï¼Œä½†å¦‚æœæƒ³è§£å†³å®è·µè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œè¿™äº›åŸç†å¿…é¡»è¦æŒæ¡ã€‚\n\næ¯”å¦‚ï¼Œæ–°å­¦è€…åœ¨ä½¿ç”¨ IndexedDB çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š\n\n* äº‹åŠ¡ç»ˆæ­¢ï¼Œæ— æ³•è°ƒç”¨\n* è¯·æ±‚ä¸€ç›´å¤„äº `pending` çŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œæ•°æ®çš„ç‰ˆæœ¬å‡çº§\n* å¯ç”¨ä¸å¿…è¦çš„äº‹åŠ¡ï¼Œæµªè´¹æ€§èƒ½\n* äº‹åŠ¡è·¨ä½œç”¨åŸŸå¤±è´¥\n* é€‰æ‹©ä¸åˆé€‚çš„å¯¹è±¡ä»“åº“ç±»å‹\n\nè¿™äº›é—®é¢˜çš„æ’æŸ¥å’Œè§£å†³éœ€è¦å¯¹ IndexedDB çš„è¯·æ±‚æœºåˆ¶ï¼Œäº‹åŠ¡ç”Ÿå‘½å‘¨æœŸç­‰å†…å®¹æœ‰å…¨é¢çš„äº†è§£ã€‚\n","tags":["ClientScript","indexedDB"],"categories":["developer"]},{"title":"IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ1ï¼‰ä»‹ç»","url":"/archives/1/","content":"\n\n[IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ1ï¼‰ä»‹ç»](https://www.hozen.site/archives/1/)\n\n[IndexedDB ä¸­æ–‡æ•™ç¨‹ï¼ˆ2ï¼‰åŸºæœ¬ä½¿ç”¨](https://www.hozen.site/archives/2/)\n\næ•™ç¨‹æŒç»­æ›´æ–°ä¸­â€¦â€¦\n<!-- more -->\n\n**å‚è€ƒ*\n\n[1] *[ã€ŠIndexedDBã€‹](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) - <https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API>*\n\n*****************\n\n## æ¦‚è¿°\n\nIndexedDB æ˜¯ä¸€ç§ web æµè§ˆå™¨ä¸­æŒä¹…å­˜å‚¨æ•°æ®çš„æ–¹æ³•ï¼Œæ˜¯ä¸€ç§â€œ[NoSQL](https://en.wikipedia.org/wiki/Object_database)â€æ•°æ®åº“ã€‚IndexedDB æä¾›äº†é«˜æ€§èƒ½çš„æ¥å£ï¼Œé€‚ç”¨äºå¤§é‡æ•°æ®çš„æœ¬åœ°è¯»å†™å’ŒæŒä¹…å­˜å‚¨ï¼Œå¯¹äºå¼€å‘å¯ç¦»çº¿ Web\nåº”ç”¨æ„ä¹‰éå‡¡ã€‚\n\nWeb æœ¬åœ°å­˜å‚¨æœ‰å¾ˆå¤šæ–¹æ³•å¯é€‰ï¼Œæ—©æœŸå¯é€‰çš„æ–¹æ³•å¯èƒ½åªæœ‰ cookieã€‚ä½† cookie çš„åˆè¡·å¹¶éå•çº¯ç”¨æ¥åšæœ¬åœ°å­˜å‚¨çš„ï¼Œè€Œæ˜¯ç”¨æ¥è®°å½•ä¸€äº›ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä¾¿äºç½‘ç«™æ ‡è¯†è®¿é—®è€…èº«ä»½ã€‚å› æ­¤ cookie çš„å¯ç”¨å¤§å°æœ‰é™ï¼Œå¹¶ä¸”ä¼šè¢« HTTP è¯·æ±‚æºå¸¦ï¼Œé€ æˆäº†ä¸å¿…è¦çš„ç½‘ç»œæ€§èƒ½å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨è¾ƒå·®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œè¿™äº›å¼€é”€å°†å¯¼è‡´æå·®çš„ä½“éªŒã€‚\n\nåœ¨æ–°çš„ HTML æ ‡å‡†ä¸­æä¾›äº† [Web Storage API](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API)ï¼ŒåŒ…æ‹¬ [sessionStorage](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage) å’Œ [localStorage](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage) ä¸¤ç§æœºåˆ¶ã€‚æ–°çš„ API é…åˆ Ajax åœ¨å¾ˆå¤šåœºæ™¯ä¸­å®Œå…¨å¯ä»¥æ›¿ä»£ cookieï¼Œå¹¶ä¸”å­˜å‚¨å®¹é‡é™åˆ¶å¤§å¤§æé«˜ã€‚ä¸¤ä¸ªæ¥å£ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæœºåˆ¶ä¹Ÿæä¾›äº†ä¸€å®šçš„æ–¹ä¾¿ã€‚\n\nè™½ç„¶ä¸åŒäº cookie çš„å­—ç¬¦ä¸²å­˜å‚¨çš„æ–¹å¼ï¼ŒWeb Storage API æä¾›äº†é”®å€¼å¯¹çš„å­˜å‚¨æ–¹å¼ã€‚ä½†å¯¹äºå¤æ‚æ•°æ®æ¥è¯´ï¼Œä¾ç„¶åªèƒ½é€šè¿‡æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²å»å­˜å‚¨æ•°æ®ï¼Œè¿™å°±å†³å®šäº† Web Storage API åœ¨è¿›è¡Œå¤æ‚æ•°æ®çš„ä¿®æ”¹å’ŒæŸ¥è¯¢æ—¶å¾ˆä¸æ–¹ä¾¿ã€‚æ›´å…³é”®çš„æ˜¯ï¼ŒWeb Storage API æ˜¯åŒæ­¥æ¥å£ï¼Œä¼šåŒæ­¥é˜»æ–­æµè§ˆå™¨ JavaScript è¿›ç¨‹ã€‚å½“æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæˆ–æ“ä½œæ¯”è¾ƒå¤æ‚æ—¶ï¼Œè¿™ä¸¤ä¸ªç¼ºé™·å°†ä¼šå¸¦æ¥è‡´å‘½çš„æ€§èƒ½é—®é¢˜ã€‚\n\néšç€ç§»åŠ¨äº’è”ç½‘å‘å±•å’ŒæŠ€æœ¯è¿›æ­¥ï¼Œç”¨æˆ·å’Œå¼€å‘è€…å¯¹ Web åº”ç”¨çš„æœŸæœ›è¶Šæ¥è¶Šé«˜ï¼ŒWeb åº”ç”¨éœ€è¦æ‰¿æ‹…è¶Šæ¥è¶Šå¤šçš„ä»»åŠ¡ã€‚ä½“ç°åœ¨å¯ç¦»çº¿åº”ç”¨å’Œæ•°æ®æŒä¹…åŒ–æ–¹é¢ï¼Œå¯¹äºæœ¬åœ°åŒ–æ•°æ®å­˜å‚¨çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚æµè§ˆå™¨æœ¬åœ°æ•°æ®åº“è¢«è®¾è®¡å’Œå®ç°å‡ºæ¥ï¼Œå…³ç³»å‹æ•°æ®åº“ [WebSql](https://www.w3.org/TR/webdatabase/) å‡ºç°äº†ï¼Œå¤§é‡çš„æ•°æ®å­˜å‚¨å’Œå¯¹ SQL è¯­å¥çš„æ”¯æŒï¼Œå¤§å¤§æé«˜äº†æµè§ˆå™¨æœ¬åœ°æ•°æ®å­˜å‚¨èƒ½åŠ›ã€‚\n\n2010 å¹´ W3C ç»„ç»‡åºŸå¼ƒäº† WebSqlï¼Œkey-value æ•°æ®åº“ [IndexedDB](https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API) æˆä¸ºå…¶æ›¿ä»£å“ã€‚\n\n## ä¾‹å­\n\nä¸ºäº†æ–¹ä¾¿ä»‹ç»å’Œè§‚å¯Ÿ IndexedDB çš„ç»“æ„å’Œç‰¹ç‚¹ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª IndexedDB çš„ç®€å•å®ä¾‹ã€‚\n\nå¤åˆ¶ä»¥ä¸‹ä»£ç åˆ° Chrome ä¸­å¹¶æ‰§è¡Œã€‚è¯¥ä»£ç å°†åˆ›å»ºä¸€ä¸ª IndexedDB æ•°æ®åº“ï¼Œå¹¶å»ºç«‹ä¸€ä¸ª `ObjectStore`ï¼ˆå¯¹è±¡ä»“åº“ï¼‰ï¼ŒåŒæ—¶å­˜å‚¨äº†ä¸€æ¡æ•°æ®åˆ°æ•°æ®åº“ä¸­ã€‚\n\n*å¯ä»¥ä¸å¿…åœ¨æ„ä»£ç çš„å®ç°ç»†èŠ‚ï¼Œåç»­ä¼šè¯¦ç»†ä»‹ç»ã€‚*\n\n```js\n(function () {\n  if (!window.indexedDB) {\n    console.log('æµè§ˆå™¨ä¸æ”¯æŒ indexedDB');\n    return;\n  }\n\n  var delReq = window.indexedDB.deleteDatabase('hozen.site');\n  delReq.onsuccess = initDB;\n\n  function initDB() {\n    var openReq = window.indexedDB.open('hozen.site');\n    openReq.onupgradeneeded = function () {\n      openReq.result.createObjectStore('blog');\n    }\n    openReq.onsuccess = function () {\n      var db = openReq.result;\n      var store = db.transaction('blog', 'readwrite').objectStore('blog');\n      store.add({\n        name: 'indexDB',\n        author: 'hozen',\n      }, 1);\n    }\n    openReq.onerror = function (e) {\n      console.log('æ‰“å¼€æ•°æ®åº“å¤±è´¥', e);\n    }\n  }\n})();\n```\n\nä»£ç æ‰§è¡ŒæˆåŠŸåï¼Œæ‰“å¼€ Chrome çš„å¼€å‘è€…å·¥å…·ï¼Œåœ¨ Application é¢æ¿ä¸­æ‰¾åˆ° IndexedDB é€‰é¡¹ï¼Œæ‰“å¼€å°±èƒ½æŸ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ IndexedDB çš„æ ·ä¾‹äº†ã€‚\n\næœ‰äº†è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æä¸€äº› IndexedDB çš„æ˜¾è‘—ç‰¹ç‚¹ã€‚\n\n## ç‰¹æ€§\n\n### é¢å‘å¯¹è±¡æ•°æ®åº“\n\nIndexedDB æ˜¯ä¸éœ€è¦ SQL è¯­å¥æ¥æ“æ§çš„ï¼Œæ˜¯é¢å‘å¯¹è±¡æ•°æ®åº“ã€‚\n\nä»ä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼ŒIndexedDB æ•°æ®åº“å¹¶ä¸å…·å¤‡ç±»ä¼¼å…³ç³»æ•°æ®åº“çš„è¡¨ç»“æ„å’Œå›ºå®šçš„å­—æ®µã€‚åœ¨åŒä¸€ä¸ªæºä¸‹ï¼Œå¯ä»¥å­˜åœ¨å¤šä¸ªä¸åŒåçš„æ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“ä¸‹åŒ…å«è‹¥å¹²ä¸ªå¯¹è±¡ä»“åº“ï¼ˆObject Storeï¼‰ï¼Œå¯¹è±¡ä»“åº“æ˜¯ Key-Value ç»“æ„çš„ã€‚ä½ å¯ä»¥å°†æ•°æ®ï¼ˆç”šè‡³æ˜¯ JavaScript å¯¹è±¡ï¼‰å­˜å‚¨åˆ°å¯¹è±¡ä»“åº“ä¸­ï¼Œéœ€è¦æ—¶é€šè¿‡é”®æˆ–ç´¢å¼•å¿«é€Ÿçš„è¯»å‡ºæ•°æ®ã€‚\n\nè¿™ç§é¢å‘å¯¹è±¡çš„è®¾è®¡ï¼Œå…è®¸ç›´æ¥å¯¹ JavaScript å¯¹è±¡è¿›è¡Œå­˜å–ï¼Œä½¿å¾—æ•°æ®åº“çš„çµæ´»æ€§å¤§å¤§æé«˜ï¼Œè¯»å–å­˜å‚¨æ•°æ®çš„æ ¼å¼è½¬åŒ–æˆæœ¬ä¹Ÿå¤§å¤§ä¸‹é™ã€‚ä¹Ÿè§„é¿äº†å…³ç³»å‹æ•°æ®åº“ä¸­éœ€æ±‚å˜æ›´æ—¶ï¼Œéœ€è¦å¯¹è¡¨ç»“æ„è¿›è¡Œä¿®æ”¹ç”šè‡³é‡æ–°è®¾è®¡çš„é£é™©ã€‚\n\n### key-value æ•°æ®åº“\n\nä¸ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ä¸åŒï¼ŒIndexedDB æ˜¯ kye-value æ•°æ®åº“ã€‚value å¯ä»¥æ˜¯éå¸¸å¤æ‚çš„å¯¹è±¡ï¼Œkey å¯ä»¥æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚å¯ä»¥å¯¹å¯¹è±¡çš„æŸä¸ªå±æ€§åˆ›å»ºç´¢å¼•æ¥å®ç°å¿«é€ŸæŸ¥è¯¢å’Œåˆ—ä¸¾æ’åºã€‚å¹¶ä¸”ï¼Œkey çš„æ•°æ®ç±»å‹å‡ ä¹æ²¡æœ‰é™åˆ¶ï¼Œç”šè‡³å¯ä»¥æ˜¯äºŒè¿›åˆ¶å¯¹è±¡ã€‚\n\n### äº‹åŠ¡æ¨¡å¼æ•°æ®åº“\n\nå¯¹äº IndexedDB æ•°æ®çš„æ“ä½œéƒ½å¿…é¡»åœ¨ä¸€ä¸ª**äº‹åŠ¡**ä¸­å®Œæˆï¼Œå› æ­¤ IndexedDB **åŸºæœ¬**ï¼ˆå¯¹äºæŒä¹…æ€§ï¼ŒIndexedDB åœ¨å®ç°ä¸­æ˜¯æœ‰ä¸€ä¸ªé»˜è®¤çš„ BUG çš„ï¼Œå‚è§ï¼‰ä¿è¯äº†åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼Œå‡å°‘äº†æ•°æ®æ··ä¹±çš„æœºä¼šã€‚\n\n### å¼‚æ­¥\n\nIndexedDB API åŸºæœ¬ä¸Šæ˜¯å¼‚æ­¥çš„ã€‚å½“å¯¹ IndexedDB æ•°æ®åº“è¿›è¡Œè¯»å†™ç­‰æ“ä½œæ—¶ï¼Œä¼šå‘æ•°æ®åº“å‘é€ä¸€ä¸ªæ“ä½œè¯·æ±‚ï¼Œå½“æ“ä½œå®Œæˆæ—¶æ•°æ®åº“ä¼šé€šè¿‡äº‹ä»¶é€šçŸ¥æˆ‘ä»¬ã€‚è¿™ç±»ä¼¼ Ajax è¯·æ±‚ï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºç¨‹åºä¸ä¼šé˜»å¡åœ¨æ•°æ®åº“æ“ä½œè¿‡ç¨‹ï¼Œå¯¹äºå¤§é‡å¤æ‚æ•°æ®çš„æ“ä½œï¼Œè¿™ä¸€ç‚¹æ˜¯å¾ˆé‡è¦çš„ã€‚\n\nIndexedDB æ ‡å‡†ä¸­æä¾›äº†åŒæ­¥æ¥å£ï¼Œä½†è¿™äº›åŒæ­¥æ¥å£åªèƒ½ç”¨äº [Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API)ã€‚\n\n### åŒæºç­–ç•¥\n\nIndexedDB åŒæ ·éµå¾ªåŒæºç­–ç•¥ï¼Œå³å¯¹äºä¸åŒçš„åº”ç”¨å±‚åè®®ã€åŸŸåã€ç«¯å£äº§ç”Ÿä¸åŒçš„â€œæºâ€ã€‚åœ¨ä¸åŒçš„â€œæºâ€ä¹‹é—´ï¼Œæ•°æ®æ˜¯ä¸ä¼šç›¸äº’å¹²æ‰°å’Œä½œç”¨çš„ï¼Œåœ¨åŒä¸€ä¸ªâ€œæºâ€å†…æ‰€æœ‰çš„æ•°æ®åº“éƒ½æœ‰å”¯ä¸€çš„åç§°ã€‚\n\nå®¹æ˜“ç†è§£ï¼ŒåŒæºç­–ç•¥æ˜¯ä¸ºäº†æ•°æ®å®‰å…¨è€ƒè™‘ã€‚\n\n## å±€é™æ€§\n\nIndexedDB æ˜¯æœ‰ä¸€äº›å±€é™æ€§çš„ï¼Œä¸‹é¢çš„å†…å®¹åªæ˜¯æŒ‡å¯¼æ€§çš„ï¼Œä¸€äº›ç‰¹æ€§å’ŒåŸå› åé¢çš„æ•™ç¨‹ä¸­ä¼šè¿›è¡Œè§£é‡Šã€‚\n\n!**ä»¥ä¸‹æƒ…å†µä¸é€‚åˆä½¿ç”¨IndexedDB**\n\n* å…¨çƒå¤šç§è¯­è¨€æ··åˆå­˜å‚¨ã€‚å›½é™…åŒ–æ”¯æŒä¸å¥½ã€‚éœ€è¦è‡ªå·±å¤„ç†ã€‚\n* å’ŒæœåŠ¡å™¨ç«¯æ•°æ®åº“åŒæ­¥ã€‚ä½ å¾—è‡ªå·±å†™åŒæ­¥ä»£ç ã€‚\n* å…¨æ–‡æœç´¢ã€‚IndexedDB æ¥å£æ²¡æœ‰ç±»ä¼¼ SQL è¯­å¥ä¸­ LIKE çš„åŠŸèƒ½ã€‚\n\n!**æ³¨æ„ï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œæ•°æ®åº“å¯èƒ½è¢«æ¸…é™¤:**\n\n* ç”¨æˆ·è¯·æ±‚æ¸…é™¤æ•°æ®ã€‚\n* æµè§ˆå™¨å¤„äºéšç§æ¨¡å¼ã€‚æœ€åé€€å‡ºæµè§ˆå™¨çš„æ—¶å€™ï¼Œæ•°æ®ä¼šè¢«æ¸…é™¤ã€‚\n* ç¡¬ç›˜ç­‰å­˜å‚¨è®¾å¤‡çš„å®¹é‡åˆ°é™ã€‚\n* æ•°æ®æŸåã€‚\n* è¿›è¡Œä¸ç‰¹æ€§ä¸å…¼å®¹çš„æ“ä½œã€‚\n","tags":["ClientScript","indexedDB"],"categories":["developer"]},{"title":"ç§‹å¤©çš„å‘³é“","url":"/archives/26/","content":"\n\nå‰ä¸€å¤©æœ‰äººé—®æˆ‘â€œä»€ä¹ˆæ—¶å€™ä¼šè®©ä½ æ„Ÿè§‰åˆ°å¤å¤©ç»“æŸäº†â€çš„æ—¶å€™ï¼Œæˆ‘è¿˜ç­”ä¸ä¸Šæ¥ã€‚ç¬¬äºŒå¤©æ—©æ™¨ï¼Œæˆ‘ä»è¡£æŸœç¿»å‡ºå¤–å¥—å°†è¦ç©¿åœ¨èº«ä¸Šæ—¶ï¼Œæ‰çªç„¶é†’æ‚Ÿï¼Œå–ƒå–ƒé“ï¼šâ€œè¿™å°±æ˜¯ç§‹å¤©çš„å‘³é“â€ã€‚\n\n<!-- more -->\n  ç§‹å¤©çš„å‘³é“å°±æ˜¯ï¼Œçªç„¶æœ‰ä¸€å¤©æ—©æ™¨ï¼Œä½ ä¸å¾—ä¸æ“ç€èƒ³è†ŠæŠŠè¡£æŸœåº•è¿˜æ²¡æ¥å¾—åŠæ™¾æ™’çš„å¤–å¥—ç¿»å‡ºæ¥ï¼Œè¡£æœé€ç€çš„æ·¡æ·¡éœ‰å‘³ã€‚ä½ æ‘¸ç€å®ƒï¼Œæ„Ÿåˆ°ä¸€ä¸å‡‰æ„ï¼Œä½ ç”šè‡³æ€€ç–‘å®ƒä¸€ç›´ä¿ç•™ç€ä¸Šä¸ªå†¬å¤©çš„æ¸©åº¦ï¼Œè®©ä½ ææƒšâ€”â€”æˆ‘åˆåº¦è¿‡äº†ä¸€ä¸ªå¤å¤©å—ã€‚ä¹Ÿè®¸è¿™æœ¬è¯¥æ˜¯å†¬å¤©çš„å‘³é“ï¼Œæˆ–åˆæ˜¥çš„å‘³é“ï¼Œä½†ç»è¿‡ä¸€ä¸ªå¤å¤©çš„é…é…¿ï¼Œå®ƒå®å®åœ¨åœ¨å˜æˆäº†ç§‹å¤©çš„å‘³é“ã€‚å°±åƒé«˜æ¸©ç»™äºˆäº†ç†µå˜å……è¶³çš„çƒ­é‡ï¼Œå¤å¤©åŠ é€Ÿäº†æ‰€æœ‰äº‹æƒ…çš„è¿›åº¦ã€‚ä¸€ä»¶äº‹çš„å¼€å§‹å’Œå®Œç»“ï¼Œä¸€ä¸ªäººçš„æˆé•¿å’Œè€å»ï¼Œä»¿ä½›éƒ½åœ¨å¤å¤©é‡Œæ…¢æ…¢çš„ç§¯ç´¯ï¼Œå·å·çš„è¿›è¡Œï¼Œç„¶ååœ¨å¤å¤©ç»“æŸæ—¶çªç„¶æ˜¾ç°ï¼Œç­‰ä½ å‘ç°æ—¶æ—©å·²æ— ä»è¿½ç©¶ã€‚\n\n  ä»¥å‰çš„æˆ‘æœ‰å¾ˆå¤šæ–°é²œçš„äº‹å»åšï¼Œæœ‰å¾ˆå¤šæ–°é²œçš„æ„Ÿå—å»ä½“éªŒï¼Œæœ‰å¾ˆå¤šç›®æ ‡å’Œå°†æ¥å»æœŸå¾…ï¼Œæˆ‘æ¥ä¸åŠä½“ä¼šä¹Ÿä¸åœ¨æ„ä¸€ä¸ªå­£èŠ‚å¸¦ç»™æˆ‘çš„æ„Ÿå—ï¼Œæ‰€ä»¥æˆ‘å¹¶ä¸æ˜ç¡®åœ°äº†è§£ä¸€ä¸ªå­£èŠ‚ã€‚ç°åœ¨çš„æˆ‘è™½ç„¶ä¸æ¯«ä¸æ¯”ä»¥å‰æ¸…é—²ï¼Œå¾ˆå¤šäººå¾ˆå¤šäº‹å›´ç»•åœ¨æˆ‘å‘¨è¾¹ï¼Œè®©æˆ‘åº”æ¥ä¸æš‡ã€‚ä½†èƒ½å¸¦ç»™æˆ‘æ–°é²œæ„Ÿçš„äº‹ç‰©åè€Œè¶Šæ¥è¶Šå°‘ï¼Œæœ€ç»ˆå˜æˆäº†ä¸€æœµäº‘ï¼Œä¸€é˜µé›¨ï¼Œä¸€æ¡è·¯ï¼Œä¸€ç‰‡è’é‡ï¼Œä¸€ä¸ªå­£èŠ‚ã€‚è€Œé‚£äº›å¿™å¿™ç¢Œç¢Œçš„äººå•Šï¼Œå´è®©æˆ‘è§‰å¾—ç®€å•å¾—è¿˜ä¸å¦‚ä¸€é˜µé£ã€‚ä»–ä»¬æ—¥æ—¥å¤œå¤œåœ°æŒ£æ‰ç€ã€ç…æœ‰ä»‹äº‹åœ°æ‰®æ¼”ç€ï¼Œæ— éä¸ºäº†åƒé¥­ï¼Œä¸ºäº†æ´»ä¸‹å»ã€‚ä½†å¯¹äºä¸€é˜µé£ï¼Œæˆ‘å´æ°¸è¿œä¸çŸ¥é“å®ƒä¸ºä½•è€Œèµ·ï¼Œå°†å¹åˆ°å“ªå»ï¼Œæ›¾ä¸ºè°åœç•™ï¼Œåˆå°†ä¸ºè°å¿½è€Œæ¶ˆæ•£ã€‚\n\n  ç§‹å¤©è®©æˆ‘æ„Ÿåˆ°äº†æ¸©æš–ã€‚ä¸å¤å¤©çš„ç‡¥çƒ­å’Œå†¬å¤©çš„å¯’å†·ä¸åŒï¼Œç§‹å¤©ä»æ³›ç€å‡‰æ„çš„é£ä¸­èµ°è¿›æˆ¿é—´é‡Œï¼Œæˆ–æ˜¯æ™šä¸Šè„±æ‰è¡£æœå§è¿›åºŠé‡Œï¼Œæˆ–æ˜¯æ—©ä¸Šå‡ºé—¨æ—¶è£¹ä¸Šå®½å¤§çš„å¤–å¥—ï¼Œéƒ½ä¼šè®©äººæ„Ÿåˆ°æ— æ¯”çš„æ¸©æš–å’Œæ»¡è¶³ã€‚è¿™ä¸å¤å¤©åƒå†°æ£ï¼Œå†¬å¤©æ³¡æ¸©æ³‰ä¸åŒï¼Œè¿™ç§å¹³æ·¡çš„æ¸©æš–æ„Ÿè§‰å¾ˆå°‘ä¼šè¢«äººåˆ»æ„è®°èµ·ã€è¢«äººæƒ¦å¿µå¿ƒåº•ã€‚è¿™è®©æˆ‘ä¸ç¦åœ°æƒ³ï¼Œäººä»¬ä¸ºä»€ä¹ˆæ€»å–œæ¬¢çŸ«æ‰è¿‡æ­£ï¼Œäº«å—åœ¨ä¸€ä¸ªæç«¯é‡Œå¯»æ±‚å¦ä¸€ç§æç«¯çš„å¿«ä¹å‘¢ï¼Ÿè¿™æ˜¯ä¸€ç§å¾æœæ„Ÿå’Œæˆå°±æ„Ÿå—......\n\n  å½“ä½ å»è®¤çœŸåœ°å»æ€è€ƒä¸€ä»¶äº‹ä¸ºä»€ä¹ˆä¼šè®©ä½ æ„Ÿåˆ°å¿«ä¹æ—¶ï¼Œä½ å°±å¾ˆéš¾ä»è¿™ä»¶äº‹é‡Œæ„Ÿå—åˆ°çœŸæ­£çš„å¿«ä¹äº†ã€‚ä¹Ÿè®¸æˆ‘ä¸åº”è¯¥å»æƒ³è¿™ä¹ˆå¤šäº‹æƒ…ï¼Œå»è¿½ç©¶è¿™ä¹ˆå¤šçš„åŸå› ï¼Œæ¯•ç«Ÿè®©æˆ‘æ„Ÿåˆ°çœŸæ­£å¿«ä¹çš„äº‹å·²ç»è¶Šæ¥è¶Šå°‘äº†ã€‚å¹¶ä¸”ï¼Œå½“æˆ‘è®¤çœŸåœ°å»æƒ³ä¸€ä»¶äº‹ä¸ºä»€ä¹ˆä¼šè®©æˆ‘æ„Ÿåˆ°éš¾è¿‡æ—¶ï¼Œè¿™ä»¶äº‹å°±å†ä¹Ÿæ— æ³•çœŸæ­£çš„ä¼¤å®³åˆ°æˆ‘äº†ã€‚è¿™æ˜¯å¤šä¹ˆè®©äººæ²®ä¸§çš„ä¸€ä»¶äº‹ã€‚\n\n  ç§‹å¤©æ˜¯æ”¶è·çš„å­£èŠ‚ã€‚ä½†ç°åœ¨ä¸æ˜¯äº†ã€‚æˆ‘æ— æ³•ä»ä¸€æ ‹é«˜æ¥¼ï¼Œä¸€é—´åŠå…¬å®¤ï¼Œä¸€ç›†å¸¸ç»¿çš„ç›†æ ½é‡Œçœ‹åˆ°æ”¶è·ã€‚åŸå¸‚é‡Œçš„äººåœ¨æ˜¥å¤©å·¥ä½œï¼Œåœ¨å¤å¤©å·¥ä½œï¼Œåœ¨ç§‹å¤©å·¥ä½œï¼Œåœ¨å†¬å¤©å·¥ä½œï¼Œåœ¨æ¯ä¸ªå­£èŠ‚åšç€åŒæ ·çš„äº‹ï¼Œå­£èŠ‚äºä»–ä»¬æ¥è¯´æ„ä¹‰å¯¥å¯¥ã€‚\n\n  æˆ‘ä¸‹ç­çš„è·¯ç©¿è¿‡ä¸€ç‰‡æ‹†è¿åŒºæ—çš„ç”°é‡ï¼Œæœ‰ä¸€å¤©æˆ‘ä¸‹ç­ç»è¿‡é‚£æ—¶ï¼Œçªç„¶æƒ³åˆ°å®¶ä¹¡æ‘å¤´çš„ç”°é‡ã€‚å°±åƒæˆ‘ä¸Šä¸­å­¦æ—¶æ¯æ¬¡æ”¾å‡å›å®¶ï¼Œåœ¨æœ¦èƒ§çš„å¤œè‰²ä¸­ï¼Œæˆ‘ç»è¿‡é‚£æ¡è·¯ã€‚è·¯çš„ä¸¤æ—ç§æ»¡åº„ç¨¼ï¼Œæœ‰æ—¶æ˜¯å°éº¦ï¼Œæœ‰æ—¶æ˜¯ç‰ç±³ï¼Œæœ‰æ—¶æ˜¯åœŸè±†......æˆ‘åœ¨ä¸åŒçš„å­£èŠ‚é‡åˆ°ä¸åŒçš„ç”Ÿå‘½ã€‚æˆ‘æ„Ÿå—åˆ°ä»–ä»¬é»˜é»˜çš„ç”Ÿé•¿ï¼Œå‚æ™šçš„è·¯ä¸Šå¾ˆéš¾é‡åˆ°å‡ ä¸ªäººï¼Œé£å¹è¿‡æ—¶ï¼Œåœ°é‡Œçš„åº„ç¨¼ä¸€èµ·å‘å‡ºæ²™æ²™çš„å£°éŸ³ï¼Œæˆ‘å’Œå®ƒä»¬ä¸€æ ·åœ¨é£ä¸­æ‘‡å¤´æ™ƒè„‘ã€‚\n\n  æˆ‘æ›¾åœ¨è¿™ç‰‡åœŸåœ°ä¸Šé•¿å¤§ï¼Œä½†æˆ‘å´å¯¹å®ƒä»¬äº†è§£ç”šå°‘ã€‚æˆ‘ä¸çŸ¥é“å¦‚ä½•æ’­ç§ï¼Œå¦‚ä½•çŒæº‰ï¼Œå¦‚ä½•æ–½è‚¥ï¼Œå¦‚ä½•æ”¶å‰²ï¼›ä¸çŸ¥é“åœ¨æ¯ä¸€åœºå¤§é£è¿‡åï¼Œå¦‚ä½•æŠŠåœ°é‡Œæˆç‰‡æ­ªå€’çš„ç‰ç±³ä¸€ä¸€æ‰¶æ­£ï¼›ä¸çŸ¥é“åœ¨æœæ ‘æˆç†Ÿçš„æ—¶å€™ï¼Œæ·±å¤œåœ¨æ—é—´èŒ…è‰å±‹é‡Œå®ˆæŠ¤çš„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼›ä¸çŸ¥é“æ¯åœºå¤§é›¨è¿‡åçš„æ¸…æ™¨ï¼Œåœ°å¤´ä¼«ç«‹çš„ä¹¡é‚»çˆ¶è€ç©¶ç«Ÿåœ¨æ²‰é»˜é‡Œçœºæœ›ç€ä»€ä¹ˆã€‚æˆ‘ç»ˆäºæƒ³æ˜ç™½æˆ‘ä¸ºä»€ä¹ˆè¦ç¦»å¼€å®¶ä¹¡ï¼Œå¥”èµ´ä¸€ä¸ªä¸ªé™Œç”Ÿåˆé¥è¿œçš„åŸå¸‚ï¼ŒæŠŠå®¶ä¹¡åœŸåœ°æµ¸æŸ“åœ¨æˆ‘èº«ä½“é‡Œçš„é‚£äº›å…ƒç´ æ¶ˆè€—æ®†å°½ï¼Œåœ¨å­¤ç‹¬ä¸è¿·èŒ«é‡Œæ€€å¿µé‚£äº›æˆ‘ä»æœªè¸è¶³å¤–é¢ä¸–ç•Œçš„æ—¥å­ã€‚\n\n  ä¸æ˜¯æˆ‘æŠ›å¼ƒäº†ä¹¡åœŸï¼Œæ˜¯å› ä¸ºæˆ‘æ— æ³•åƒåšéŸ§çš„å…ˆè¾ˆä»¬ä¸€æ ·ç…§çœ‹å¥½ä¸€ç‰‡åœŸåœ°ã€‚æˆ‘ç«­å°½å…¨åŠ›èƒ½åšåˆ°çš„ï¼Œåªæ˜¯çœ‹ç®¡å¥½æˆ‘è‡ªå·±ã€‚\n","tags":["æ•£æ–‡"],"categories":["life"]},{"title":"Web å¼€å‘ä¸­å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ª Http è¯·æ±‚","url":"/archives/25/","content":"\n\n\nåœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç»ˆæ­¢ä¸€ä¸ªå·²ç»å¼€å§‹çš„ç½‘è·¯è¯·æ±‚æ˜¯æœ‰ä¸€å®šåº”ç”¨åœºæ™¯çš„ã€‚å°¤å…¶æ˜¯åœ¨ [SPA (Signal Page Web Application)](https://en.wikipedia.org/wiki/Single-page_application) å•é¡µé¢ Web åº”ç”¨ä¸­ï¼Œè·¯ç”±çš„è·³è½¬æˆ–åœºæ™¯çš„åˆ‡æ¢å¹¶ä¸ä¼šåƒå¤šé¡µé¢è·³è½¬ä¸€æ ·ç»ˆæ­¢ä¹‹å‰æœªè¢«å“åº”çš„ç½‘ç»œè¯·æ±‚ã€‚æ­¤æ—¶å°±å¯èƒ½ä¼šå‘ç”Ÿæ•°æ®è¯·æ±‚å‘ç”Ÿæ—¶çš„åœºæ™¯å·²ç»ä¸å­˜åœ¨ï¼Œè€Œç½‘ç»œè¯·æ±‚æˆåŠŸåï¼Œæ•°æ®è¢«ä¸æ­£ç¡®çš„æ¸²æŸ“åœ¨æ–°çš„åœºæ™¯ä¸­çš„é—®é¢˜ã€‚å› æ­¤åº”ç¡®ä¿è¿™äº›ç½‘ç»œè¯·æ±‚åœ¨åœºæ™¯å˜åŒ–åè¢«ç»ˆæ­¢æˆ–ä¸è¢«å¤„ç†ï¼Œä»¥é¿å…æ•°æ®çš„æ··ä¹±ï¼Œæå‡éƒ¨åˆ†æ€§èƒ½ã€‚\n\n<!-- more -->\næœ¬æ–‡ä»‹ç»å¦‚ä½•ç»ˆæ­¢ä¸€ä¸ª XHRã€Fetch æˆ– [Axios](https://github.com/axios/axios) è¯·æ±‚ã€‚ï¼ˆAxios æ˜¯ä¸€ä¸ªåŸºäº XHR å’Œ Promise å°è£…çš„ HTTP åº“ï¼Œå¯ç”¨äº Web å’Œ Node.jsï¼Œå¦‚æœä½ ä¸ä½¿ç”¨å®ƒï¼Œåˆ™ä¸å¿…å…³å¿ƒ Axios çš„éƒ¨åˆ†ã€‚)\n\næœ¬æ–‡çš„å®Œæ•´ Demo ä»£ç è§äº GitHub: [hooozen/web-demo](https://github.com/hooozen/web-demo)ã€‚\n\n## ç»ˆæ­¢ä¸€ä¸ª XHR è¯·æ±‚\n\n[XMLHttpRequest](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest) ï¼ˆæœ¬æ–‡ä¸­ XHR  ä¸ºå…¶ç®€å†™ï¼‰è¢«æµè§ˆå™¨å¹¿æ³›æ”¯æŒï¼ŒåŠŸèƒ½å®Œæ•´ï¼Œç¨³å®šæ€§å¼ºï¼Œåœ¨ Ajax ä¸­å¤§é‡ä½¿ç”¨ã€‚\n\nXHR ç»ˆæ­¢ä¸€ä¸ªè¯·æ±‚çš„æ“ä½œæ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦è°ƒç”¨è¯¥ XHR å®ä¾‹å¯¹è±¡çš„ `abort` æ–¹æ³•å³å¯é˜»æ–­å½“å‰æœªè¢«å“åº”çš„è¯·æ±‚ã€‚\n\n```js\n/**\n * å‘é€ XHR è¯·æ±‚\n */\nfunction sendXHRRequest() {\n  xhr.open('POST', url);\n  xhr.onreadystatechange = function()  {\n    if (xhr.readyState === 4 && xhr.status === 200) {\n      console.log('XHR: ', xhr.responseText);\n    }\n  }\n  xhr.send();\n}\n\n/**\n * ç»ˆæ­¢ XHR è¯·æ±‚\n */\nfunction abortXHRRequest() {\n  console.log('å°è¯•ç»ˆæ­¢ XHR è¯·æ±‚');\n  xhr.abort();\n}\n```\n\n   XMLHttpRequest ä»£ç†æœ‰ 4 ç§çŠ¶æ€ï¼ŒXHR çš„å½“å‰çŠ¶æ€ç”± `readyState` å±æ€§è®°å½•ã€‚XHR æ€»å¤„äºä¸‹åˆ—çŠ¶æ€ä¹‹ä¸€ï¼š\n\n| å€¼  | çŠ¶æ€             | æè¿°                                              |\n| --- | ---------------- | ------------------------------------------------- |\n| 0   | UNSET            | ä»£ç†è¢«åˆ›å»ºï¼Œä½†å°šæœªè°ƒç”¨ `open()` æ–¹æ³•ã€‚            |\n| 1   | OPENED           | `open()` æ–¹æ³•å·²ç»è¢«è°ƒç”¨                           |\n| 2   | HEADERS_RECEIVED | send() æ–¹æ³•å·²ç»è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¤´éƒ¨å’ŒçŠ¶æ€å·²ç»å¯è·å¾—ã€‚ |\n| 3   | LOADING          | ä¸‹è½½ä¸­ï¼ŒresponseText å±æ€§å·²ç»åŒ…å«éƒ¨åˆ†æ•°æ®ã€‚       |\n| 4   | DONE             | ä¸‹è½½æ“ä½œå·²å®Œæˆã€‚                                  |\n\nå½“è°ƒç”¨ `abort()` æ–¹æ³•æ—¶ï¼Œ`readyState` ä¼šè¢«ç½®ä¸º DONEï¼Œç„¶åè¯¥è¯·æ±‚è¢«ç»ˆæ­¢ï¼ŒçŠ¶æ€å˜ä¸º UNSET çŠ¶æ€ã€‚å› æ­¤ï¼Œåœ¨è°ƒç”¨ `abort()` æ–¹æ³•åï¼Œå†æ¬¡è°ƒç”¨ XHR å‘é€è¯·æ±‚ï¼Œä»ç„¶å¯ä»¥æ­£å¸¸å“åº”ï¼ˆé™¤éå†æ¬¡è°ƒç”¨äº† `abort()` æ–¹æ³•ç»ˆæ­¢äº†è¯·æ±‚ï¼‰ï¼Œè¿™ä¸€ç‚¹å’Œ Fetch API ç»ˆæ­¢è¯·æ±‚æ˜¯ä¸ä¸€æ ·çš„ã€‚\n\n## ç»ˆæ­¢ä¸€ä¸ª Fetch è¯·æ±‚\n\nFetch è¯·æ±‚è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ Promise æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ä¸€æ—¦è¢«â€œè®¸è¯ºâ€ï¼Œè¦ä¹ˆè¢« `resolve` è¦ä¹ˆè¢« `reject`ï¼Œä¸å¯è¢«ç»ˆæ­¢ã€‚æ‰€ä»¥ä¸€å¼€å§‹ Fetch æ˜¯ä¸æ”¯æŒè¢«ç»ˆæ­¢çš„ï¼Œæ‰€ä»¥å¼€å‘è€…ä»¬ä¸å¾—ä¸ä½¿ç”¨å…¶ä»–çš„æ–¹æ³•æ¥è¾¾åˆ°â€œç»ˆæ­¢â€çš„æ•ˆæœã€‚åæ¥æ–°çš„æ ‡å‡†å¢åŠ äº† `AbortController` æ¥å£ï¼Œæ¥ç»ˆæ­¢ DOM è¯·æ±‚ï¼Œä½†è¯¥æ¥å£ç›®å‰ä»å¤„äºâ€œå®éªŒä¸­â€ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ã€‚\n\n  æ¥ä¸‹æ¥åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹æ³•ï¼š\n\n### ä½¿ç”¨ AbortController ç»ˆæ­¢ Fetch è¯·æ±‚\n\n   AbortController æ˜¯ä¸€ä¸ªå®éªŒä¸­çš„æ ‡å‡†æ¥å£ï¼Œæä¾› `abort` æ–¹æ³•æ¥ç»ˆæ­¢æŒ‡å®šçš„ DOM è¯·æ±‚ã€‚\n\n```js\n/**\n * å¼€å§‹ fetch è¯·æ±‚\n */\nfunction startFetch() {\n  var options = {\n    method: 'POST',\n    signal,\n  }\n  fetch(url, options).then(function (res) {\n    res.text().then(function (text) {\n      console.log('Fetch: ', text);\n    });\n  }).catch(function (error) {\n    console.log(error);\n  });\n}\n\n/**\n * ç»ˆæ­¢ fetch è¯·æ±‚\n */\nfunction abortFetch() {\n  console.log('å°è¯•ç»ˆæ­¢ fetch è¯·æ±‚');\n  controller.abort();\n}\n```\n\n  AbortController å®ä¾‹åŒ–å¯¹è±¡æä¾›ä¸€ä¸ª `signal` æ ‡è®°ï¼Œå½“åˆ›å»º Fetch è¯·æ±‚æ—¶ï¼ŒæŠŠè¯¥æ ‡è®°ä½œä¸ºå‚æ•°ä¼ å…¥ Fetch æ–¹æ³•ï¼Œåˆ™å¯ä»¥è°ƒç”¨è¯¥å®ä¾‹åŒ–å¯¹è±¡çš„ `abort()` æ–¹æ³•æ¥ç»ˆæ­¢è¢«â€œæ ‡è®°â€çš„ Fetch è¯·æ±‚ã€‚\n\n  ä¸ XHR çš„ `abort()` æ–¹æ³•ä¸åŒçš„æ˜¯ï¼ŒAbortController.abort() æ–¹æ³•ä¸€æ—¦è¢«è°ƒç”¨ï¼Œåˆ™è¢«æ ‡è®°çš„ Fetch ä¸å¯å†æ¬¡å‘èµ·è¯·æ±‚ï¼Œè¿™ä¸€ç‚¹å’Œ Axios ä¸­ç»ˆæ­¢è¯·æ±‚çš„æœºåˆ¶æ˜¯ä¸€è‡´çš„ã€‚\n\n### ä½¿ç”¨ Promise.race() å°è£…ä¸€ä¸ªå¯â€œç»ˆæ­¢â€çš„ Fetch\n\n  å› ä¸º Promise ä¸èƒ½è¢«ç»ˆæ­¢ï¼Œè€Œ AbortController æ¥å£ç¨³å®šæ€§å’Œå…¼å®¹æ€§åˆå¾ˆå·®ï¼Œæ‰€ä»¥æ›´å¤šæƒ…å†µä¸‹éœ€è¦é‡‡å–å…¶ä»–æ–¹æ³•æ¥æ¨¡æ‹Ÿâ€œç»ˆæ­¢â€Fetchè¯·æ±‚ã€‚ä½¿ç”¨ `Promise.race()` æ–¹æ³•åœ¨éœ€è¦æ—¶è·³è¿‡å¯¹ Fetch è¯·æ±‚ç»“æœçš„å¤„ç†æ¥è¾¾åˆ°â€œç»ˆæ­¢â€è¯·æ±‚çš„æ•ˆæœã€‚\n\n> [`Promise.race(iterable)`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/race) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ª promise è§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promise å°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚)\n\n  åˆ©ç”¨ `Promise.race` çš„â€œç«é€Ÿâ€ç‰¹æ€§ï¼Œå°è£…ä¸€ä¸ªå¯ä»¥è¢«â€œç»ˆæ­¢â€çš„ _Fetch æ¥å£ï¼š\n\n```js\n/**\n * å°è£…ä¸€ä¸ªæ¨¡æ‹Ÿ abort çš„ fetch\n * @param {æ¥å£åœ°å€} url \n * @param {fetch é€‰é¡¹} options \n */\nfunction _fetch(url, options) {\n  var abort = null;\n  var abortPromise = new Promise(function(resolve, reject) {\n    abort = reject;\n  });\n  var fetchPromise = fetch(url, options);\n  var promise = Promise.race([abortPromise, fetchPromise]);\n  promise.abort = abort;\n  return promise;\n}\n\nvar fetchAPI;\n\n/**\n * å¼€å§‹ fetch è¯·æ±‚\n */\nfunction _startFetch() {\n  fetchAPI = _fetch(url, { method: 'POST' });\n  fetchAPI.then(function(res) {\n    res.text().then(function(text) {\n      console.log('_fetch: ', text);\n    });\n  }).catch(function(e) {\n    console.log(e);\n  });\n}\n\n/**\n * è·³è¿‡è¯·æ±‚å¤„ç†\n */\nfunction _abortFetch() {\n  console.log('\"ç»ˆæ­¢\"_fetchè¯·æ±‚');\n  fetchAPI.abort('abort ç«é€ŸæˆåŠŸ');\n}\n```\n\n  ä¸Šé¢ä»£ç å°è£…äº†ä¸€ä¸ª `_fetch` æ–¹æ³•æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œåœ¨`_fetch().then()` ä¸­å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œå¤„ç†ã€‚`_fetch` æ–¹æ³•è¿”å›äº†ä¸€ä¸ª `Promise.race()` Promiseï¼Œå¹¶åœ¨è¯¥ `race()` ä¸­ä½¿ç”¨äº†ä¸€ä¸ª `abortPromise` Promse æ¥ä¸ `fetch` Promiseâ€œç«é€Ÿâ€ã€‚å¹¶å°† `abortPromise` çš„ `reject` æ–¹æ³•æš´éœ²å‡ºæ¥ã€‚æ‰€ä»¥å½“è°ƒç”¨è¢«æš´éœ²å‡ºçš„ `reject` æ–¹æ³•æ—¶ï¼Œå¦‚æœæ­¤æ—¶ fetch è¯·æ±‚è¿˜æ²¡æœ‰å®Œæˆï¼ˆå³æ²¡æœ‰è¢« resolveï¼Œæˆ– rejectï¼‰ï¼Œé‚£ä¹ˆç”±äº `Promise.race()` çš„â€œç«é€Ÿâ€ç‰¹æ€§ï¼Œ`_fetch` å°†è¿”å› `abortPromise` çš„ `reject`ï¼Œfetch Promise å°†è¢«å¿½ç•¥ã€‚\n\n  éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œä¸Šè¿°æ–¹æ³•å¹¶æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šç»ˆæ­¢ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå®é™…ä¸Šç½‘ç»œè¯·æ±‚æ²¡æœ‰å—åˆ°ä»»ä½•å½±å“ï¼Œåªä¸è¿‡é€šè¿‡å°è£…çš„æ–¹æ³•â€œè·³è¿‡â€äº†å¯¹å¸Œæœ›è¢«ç»ˆæ­¢çš„è¯·æ±‚çš„å¤„ç†ã€‚è¿™ä¸€ç‚¹æ˜¯å’Œ XHR å’Œ AbortController çš„ `abort()` æ–¹æ³•ä¸åŒçš„ã€‚\n\n## ç»ˆæ­¢ä¸€ä¸ª Axios è¯·æ±‚\n\n  Axios æä¾›äº†ç»ˆæ­¢ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ï¼Œå…·ä½“ä»‹ç»å¯è§å®˜æ–¹æ–‡æ¡£ä¸­çš„ [cancellation](https://github.com/axios/axios/blob/master/README.md#cancellation) éƒ¨åˆ†ï¼Œä¸‹é¢æä¾›ä¸€ä¸ªä¾‹å­å¹¶å¯¹æ–‡æ¡£ä¸­æœªä»‹ç»çš„å†…å®¹è¿›è¡Œä¸€äº›è¡¥å……ã€‚\n\n```js\nvar CancelToken = axios.CancelToken;\nvar source = CancelToken.source();\n\n/**\n * å¼€å§‹ä¸€ä¸ª Axios Post è¯·æ±‚\n */\nfunction axiosPost() {\n  axios.post(url, undefined, {\n    cancelToken: source.token,\n  }).then(function(res) {\n    console.log('Axios: ', res.data);\n  }).catch(e => {\n    console.log('Axios error: ', e);\n  });\n}\n\n/**\n * ç»ˆæ­¢ä¸€ä¸ª Axios è¯·æ±‚\n */\nfunction abortAxios() {\n  console.log('å°è¯•ç»ˆæ­¢ axios è¯·æ±‚');\n  source.cancel('axios è¢«ç»ˆæ­¢');\n}\n```\n\n  Axios çš„ `cancel()` æ–¹æ³•å®ç°çš„æ•ˆæœç±»ä¼¼äº AbortController æ¥å£çš„ `abort()` æ–¹æ³•ï¼Œå³ä¸€æ—¦è¯¥æ–¹æ³•è¢«è°ƒç”¨ï¼Œåˆ™è¯¥å®ä¾‹å°±ä¸å†è¢«å…è®¸å†æ¬¡å‘é€ç½‘ç»œè¯·æ±‚ã€‚ä½† Axios ç½‘ç»œè¯·æ±‚æ˜¯åŸºäº XHR å®ç°çš„ï¼Œç»ˆæ­¢ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•ä¹Ÿæ˜¯è°ƒç”¨äº† XHR çš„ `abort()` æ–¹æ³•ã€‚ä¹‹æ‰€ä»¥å…¶æ•ˆæœå’Œ `XHR.abort()` ç»ˆæ­¢åä»å¯å†æ¬¡è¯·æ±‚çš„æ•ˆæœä¸ä¸€è‡´ï¼Œæ˜¯å› ä¸º Axios åŸºäº Promise è¿›è¡Œäº†å°è£…ï¼Œä¸€æ—¦è°ƒç”¨äº† `cancel()` æ–¹æ³•ï¼ŒPromise å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”è¢«è®°å½•ã€‚ä¸‹æ¬¡å†æ¬¡è°ƒç”¨è¯¥å®ä¾‹è¿›è¡Œè¯·æ±‚æ—¶ï¼Œä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¸ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ã€‚å…·ä½“å®ç°æ–¹æ³•è¯·æŸ¥é˜… [Axios æºç ](https://github.com/axios/axios)ã€‚\n","tags":["ClientScript","XHR","Fetch API","Axios"],"categories":["developer"]},{"title":"webpack4 æ‰“åŒ…â€œå—â€çš„åˆ†ç¦»","url":"/archives/24/","content":"\n\nå½“ä¸ä½¿ç”¨å¤–éƒ¨æ’ä»¶æ—¶ï¼Œwebpack ä¼šæŠŠ `webpack.config.js` é…ç½®æ–‡ä»¶é‡Œæ¯ä¸ªå…¥å£æ‰“åŒ…ä¸€ä¸ª `[entry].js` æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€å•é¡µé¢åº”ç”¨ï¼ˆå•å…¥å£ï¼‰æœ€ç»ˆåªä¼šæ‰“åŒ…ç”Ÿæˆä¸€ä¸ª `js` æ–‡ä»¶ã€‚è€Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿™ç§å¤„ç†å¹¶ä¸æ˜¯æœ€ä½³çš„å¤„ç†æ–¹å¼ã€‚æ¯”å¦‚ä¼šé€ æˆå•ä¸ª `js` æ–‡ä»¶ä½“ç§¯è¿‡å¤§ï¼Œå¹¶ä¸”æ¯æ¬¡é¡¹ç›®è¿­ä»£éƒ½ä¼šé€ æˆå…¨é‡ `js` çš„æ›´æ–°ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨ç¼“å­˜ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒ‰ç…§ä¸€äº›è§„åˆ™ï¼Œå¯¹æ‰“åŒ…è¾“å‡ºçš„â€œå—â€è¿›è¡Œæ‹†åˆ†ï¼Œå·²è¾¾åˆ°ä¼˜åŒ–æ€§èƒ½çš„ç›®çš„ã€‚\n<!--more-->\n\nwebpack4 ä¸­ SplitChunksPlugin æ’ä»¶æä¾›äº†å¯¹æ‰“åŒ…æ–‡ä»¶è¿›è¡Œæ‹†åˆ†çš„åŠŸèƒ½ã€‚\n\nä¸ºäº†å¯¹æ‰“åŒ…åç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶æœ‰å…¨é¢çš„äº†è§£ï¼Œæœ¬æ–‡ç¬¬ä¸€å°èŠ‚å…ˆè®²è§£äº† `runtimeChunk` é…ç½®çš„ä½œç”¨ã€‚\n\n> Originally, chunks (and modules imported inside them) were connected by a parent-child relationship in the internal webpack graph. The CommonsChunkPlugin was used to avoid duplicated dependencies across them, but further optimizations were not possible\n\nä»¥ä¸Šä¸º [Webpackå®˜æ–¹æ–‡æ¡£](https://webpack.js.org/plugins/split-chunks-plugin/) å¯¹ä¸ºä»€ä¹ˆåœ¨ webpack4 åç§»é™¤äº† `CommonsChunkPlugin` è€Œä½¿ç”¨å…¨æ–°çš„ `splitChunksPlugin` æ’ä»¶çš„è§£é‡Šã€‚\n\næœ¬æ–‡ä»¥ `webpack v4.16.2` ä¸ºä¾‹ï¼Œä¸€äº›é…ç½®é€‰é¡¹åœ¨ä½ç‰ˆæœ¬ä¸­å¯èƒ½æ— æ•ˆã€‚\n\n## runtimeChunk\n\nè®¾ç½® `optimization.runtimeChunk` ä¸º `true` èƒ½ä¸ºæ¯ä¸€ä¸ªå…¥å£æ·»åŠ ä¸€ä¸ªé¢å¤–çš„â€œå—â€ï¼Œè¯¥å—æ˜¯åº”ç”¨â€œè¿è¡Œæ—¶â€ï¼ˆruntimeï¼‰ä¾èµ–å—ã€‚\n\nè¯¥é…ç½®æœ‰ä¸¤ä¸ªé…ç½®é€‰é¡¹ï¼š\n\n* `single`ï¼šä¸ºæ‰€æœ‰çš„å—åˆ›å»ºä¸€ä¸ªå…±äº«çš„â€œè¿è¡Œæ—¶â€ï¼ˆruntimeï¼‰æ–‡ä»¶ã€‚\n* `multiple` ä¸ºé€šç”¨çš„å—åˆ›å»ºå¤šä¸ªè¿è¡Œæ—¶æ–‡ä»¶ã€‚\n\né»˜è®¤å€¼ä¸º `false`ï¼Œå³æ¯ä¸ªå…¥å£å—åµŒå…¥ runtime ä¾èµ–ï¼Œè€Œä¸æ˜¯å•ç‹¬å°†å®ƒåˆ†ç¦»æˆä¸€ä¸ªç‹¬ç«‹çš„å—ã€‚\n\n## SplitChunksPlugin\n\n### é»˜è®¤é…ç½®\n\nè‹¥ä¸åŠ ä»¥é…ç½®ï¼Œwebpack4 ä¼šè‡ªåŠ¨ä½¿ç”¨ `splitChunks` å¯¹èµ„æºå—è¿›è¡Œæ‹†åˆ†ï¼Œé»˜è®¤æ‹†åˆ†è§„åˆ™å¦‚ä¸‹ï¼ˆæ¥æº [Webpack å®˜æ–¹æ–‡æ¡£](https://webpack.js.org/plugins/split-chunks-plugin/#defaults)ï¼‰ï¼š\n\n* å—è¢«å¤šå¤„å¼•ç”¨**æˆ–è€…**æ¥è‡ª `node_modules` ç›®å½•\n\n* å—å¤§å°å¤§äº 30kbï¼ˆå‹ç¼©å‰ï¼‰\n\n* æŒ‰éœ€åŠ è½½çš„å—å¹¶è¡Œè¯·æ±‚æ•°ä¸èƒ½å¤§äº 5 ä¸ª\n\n* åˆå§‹åŒ–åŠ è½½çš„å—å¹¶è¡Œè¯·æ±‚æ•°ä¸èƒ½å¤§äº 3 ä¸ª\n\nä¹Ÿå°±æ˜¯è¯´ splitChunks åªä¼šæ‹†åˆ†è¢«å¤šæ¬¡å¼•ç”¨çš„å—ï¼Œæˆ–è€…è¯¥å—æ¥è‡ªäº `node_modules` ç›®å½•ï¼›å¹¶ä¸”è¯¥å—åœ¨å‹ç¼©å‰çš„å¤§å°åº”å¤§äº 30kbï¼Œå¦åˆ™ä¸æ‹†ç¦»ã€‚åŒæ—¶ï¼Œæœ€åä¸¤ä¸ªæ¡ä»¶å¯¹å¹¶è¡Œè¯·æ±‚æ•°åšå‡ºäº†é™åˆ¶ï¼Œè¿™å°±æ„å‘³ç€ä¸ºäº†æ»¡è¶³åä¸¤ä¸ªæ¡ä»¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä½“ç§¯è¾ƒå¤§çš„å—ã€‚\n\n### é»˜è®¤é…ç½®çš„ä¾‹å­\n\nå½“ä¸å¯¹ `optimization.splitChunks` è¿›è¡Œä»»ä½•è‡ªå®šä¹‰é…ç½®ï¼Œå°†`optimization.runtimeChunk` è®¾ç½®ä¸º `true` æ—¶ï¼Œå¯¹ä¸€ä¸ªå•é¡µé¢å¤šè·¯ç”±åº”ç”¨è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œäº§ç”Ÿäº†å¦‚ä¸‹ `js` æ–‡ä»¶ï¼š\n\n```bash\ntotal 941\n 24 chunk.0.dec7f9a819944483d79d.js\n  4 chunk.1.eae64cbc2aa0f9e4e783.js\n  4 chunk.10.f8750d707c27b95bae13.js\n 24 chunk.11.2aef84c3ff12c183b072.js\n  4 chunk.2.21418087238bcf98e494.js\n  4 chunk.3.545ceaa63e410a4b2d59.js\n  4 chunk.4.8ca9fe6ed85d546daba4.js\n  8 chunk.5.1fa9e53fb286828383a7.js\n  4 chunk.6.50e9186b6024c98d9f30.js\n  1 chunk.7.a737ccfe76e044e4e6e7.js\n  8 chunk.8.af950ea9507f49c156e4.js\n  4 chunk.9.238ddb8be097a6200372.js\n800 chunk.app.7c6ddec2161a37416ecb.js\n 44 chunk.main.c54944c0d51e726f5c37.js\n  4 runtime.26028abb8f1fadc57c34.js\n```\n\n`css`æ–‡ä»¶ï¼š\n\n```bash\n  4 chunk.1.b853c7844b6e82e97c6b.css\n  4 chunk.10.ece96fde52d6f0024d0a.css\n  8 chunk.11.3917cb3b5334910b2ca9.css\n  1 chunk.2.e9364a9f3d011dd5312b.css\n  4 chunk.5.d93fa41defa698bc9435.css\n  4 chunk.6.e52a594a36b4ef3fe490.css\n  1 chunk.7.52ac776fd2423a0a7c72.css\n  8 chunk.8.04f1836d396f81ffec4c.css\n  4 chunk.9.52d5fcfb3d22a54ccf0b.css\n320 chunk.app.eea3b0fe4cd81c07d6d8.css\n 20 chunk.main.f451462a7e2cced31c33.css\n ```\n\nå…¥å£æ–‡ä»¶ `index.html` å¦‚ä¸‹ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=zh-CN>\n\n<head>\n  <meta charset=UTF-8>\n  <title>æƒ ç¨-åŠ©æ‰‹</title>\n  <meta name=viewport content=\"width=device-width,initial-scale=1\">\n  <script>window.SYART_TIME = new Date().getTime();</script>\n  <link href=./static/css/chunk.app.eea3b0fe4cd81c07d6d8.css rel=stylesheet>\n</head>\n\n<body>\n  <div id=app></div>\n  <script type=text/javascript src=./static/js/runtime.26028abb8f1fadc57c34.js></script>\n  <script type=text/javascript src=./static/js/chunk.app.7c6ddec2161a37416ecb.js></script>\n</body>\n<script>window.LOAD_TIME = Date.now() - window.startTime;</script>\n\n</html>\n```\n\nå…¶ä¸­ï¼Œ`chunk.[number].[hash]` æ–‡ä»¶æ˜¯å„ä¸ªè·¯ç”±é¡µé¢çš„å—ï¼Œä»–ä»¬å°†åœ¨éœ€è¦æ—¶è¢«æŒ‰éœ€åŠ è½½ã€‚`chunk.app.[hash]` å—åˆ™æ˜¯å…¥å£æ–‡ä»¶åˆå§‹åŒ–åŠ è½½æ‰€ä¾èµ–çš„å—ï¼Œ`chunk.main.[hash]` æ˜¯ splitChunks å°†æ•´ä¸ªåº”ç”¨ä¸­è¢«å¤šæ¬¡å¼•ç”¨çš„å…¬å…±å†…å®¹åˆ†ç¦»å‡ºæ¥ï¼Œè¿™æ ·èƒ½é¿å…ç›¸åŒçš„æ–‡ä»¶è¢«å¤šæ¬¡è¯·æ±‚ã€‚\n\n`runtime.[hash].js` æ–‡ä»¶å³æ˜¯ç¬¬ä¸€èŠ‚ä¸­æåˆ°çš„â€œè¿è¡Œæ—¶â€ä¾èµ–å—ï¼Œå½“æŠŠ `optimization.runtimeChunk` è®¾ç½®ä¸º `false` æ—¶åˆ™ä¸ä¼šç”Ÿæˆè¯¥å—ã€‚\n\n### å°ç»“\n\n> Default configuration was chosen to fit web performance best practices but the optimum strategy for your project might defer depending on the nature of it.\n\nå®˜æ–¹æ–‡æ¡£ä¸­å»ºè®®ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè®¤ä¸ºé»˜è®¤é…ç½®æ˜¯æœ€ä½³å®è·µã€‚ç„¶è€Œæœ‰äº›æ—¶å€™é»˜è®¤é…ç½®å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³é¡¹ç›®éœ€æ±‚ï¼Œå¯èƒ½éœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®ã€‚\n\n### è‡ªå®šä¹‰é…ç½®\n\n`splitChunksPlugin` æ’ä»¶æä¾›äº†é…ç½®å‚æ•°ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¯¹åŒ…è¿›è¡Œè‡ªå®šä¹‰é…ç½®å’Œæ‹†åˆ†å—ã€‚\n\n```js\nmodule.exports = {\n  //...\n  optimization: {\n    splitChunks: {\n      chunks: 'async',  // all async initial é€‰æ‹©å¯¹å“ªäº›å—è¿›è¡Œä¼˜åŒ–\n      minSize: 30000,  // è¢«æ‹†åˆ†çš„æœ€å°å¤§å°ï¼ˆå‹ç¼©å‰ï¼‰\n      minChunks: 1,  // è¢«å…±äº«çš„æœ€å°æ¬¡æ•°\n      maxAsyncRequests: 5,  // æœ€å¤§æŒ‰éœ€æ±‚å¹¶è¡Œè¯·æ¬¡æ•°\n      maxInitialRequests: 3,  // æœ€å¤§åˆå§‹åŒ–å¹¶è¡Œè¯·æ±‚æ•°\n      automaticNameDelimiter: '~',  // è‡ªåŠ¨å‘½ååˆ†éš”ç¬¦\n      name: true, // è‡ªåŠ¨ä¸ºå—å‘½å\n      cacheGroups: {\n        vendors: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          priority: -10\n        },\n        default: {\n          minChunks: 2,\n          priority: -20,\n          reuseExistingChunk: true\n        }\n      }\n    }\n  }\n};\n```\n\nå…¶ä¸­ `cacheGroups` é€‰é¡¹æ”¯æŒå¯¹å—è¿›è¡Œè¿›ä¸€æ­¥çš„è‡ªå®šä¹‰åˆ†å‰²ï¼Œå…¶ä¸­çš„é…ç½®é»˜è®¤ç»§æ‰¿äº `splitChunksPlugin.*` é…ç½®ï¼Œåœ¨å†…éƒ¨è¿›è¡Œé…ç½®å°†è¦†ç›–ç»§æ‰¿é…ç½®ã€‚å…¶ä¸­ `test` `priority` å’Œ `reuseExistingChunk` æ˜¯ `cacheGroups` ç‰¹æœ‰çš„é…ç½®ã€‚\n\n`test` é€‰é¡¹å¯¹è¦æ‰“åŒ…çš„æ–‡ä»¶è¿›è¡Œé€‰æ‹©ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ç±»ä¼¼ `loaders` é…ç½®é‡Œçš„ `test`ã€‚\n\n`priority` è®¾ç½®è¯¥é…ç½®ç»„çš„ä¼˜å…ˆçº§ã€‚ä¸€ä¸ªæ¨¡å—å¯èƒ½å±äºå¤šä¸ª `cacheGroups`ï¼Œè¿™æ—¶ä¼˜å…ˆå°†å…¶æ‰“åŒ…å…¥é«˜ä¼˜å…ˆçº§çš„å—ä¸­ã€‚\n\n`reuseExistingChunk` å¦‚æœè¯¥å—å·²ç»ä»ä¸»å—ä¸­åˆ†ç¦»å‡ºæ¥äº†ï¼Œåˆ™å°†ç›´æ¥é‡ç”¨è¯¥å—ï¼Œè€Œä¸æ˜¯é‡æ–°ç”Ÿæˆï¼Œä¸è¿‡å¯èƒ½ä¼šå½±å“å—çš„å‘½åã€‚\n\n## æ€»ç»“\n\nä»¥ä¸Šå°±æ˜¯ Webpack4 ä¸­æ‰“åŒ…åˆ†ç¦»â€œå—â€çš„é…ç½®æ–¹æ³•ã€‚ä¹‹æ‰€ä»¥è¦è¿›è¡Œâ€œå—â€çš„åˆ†ç¦»ï¼Œæ˜¯å› ä¸ºä¸€äº›ä»£ç å¯ä»¥è¢«å…¬ç”¨ï¼Œå°†ä»–ä»¬åˆ†ç¦»å‡ºæ¥å¯ä»¥é¿å…é‡å¤åŠ è½½ï¼›åŒæ—¶ï¼Œä¸€äº›åŸºæœ¬ä¸ä¼šæ”¹åŠ¨çš„åŸºç¡€æ”¯æŒè¢«åˆ†ç¦»å‡ºæ¥æ—¶ï¼Œå½“é¡¹ç›®è¿­ä»£æ—¶ï¼Œè¿™äº›åŸºç¡€å—å¯ä»¥ä»ç¼“å­˜ä¸­è·å–ï¼Œå‡å°‘æµé‡è´¹ç”¨ã€‚å¦å¤–ï¼Œé€‚å½“çš„å°†è¾ƒå¤§çš„â€œå—â€æ‹†æˆå¤šä¸ªè¾ƒå°çš„â€œå—â€æœ‰åˆ©äºå‘æŒ¥ç°ä»£æµè§ˆå™¨å¹¶è¡Œä¸‹è½½èµ„æºçš„ä¼˜åŠ¿ï¼Œæé«˜èµ„æºåŠ è½½é€Ÿåº¦ã€‚\n\né™¤äº†é€‚å½“çš„å¯¹â€œå—â€è¿›è¡Œæ‹†åˆ†ï¼Œå……åˆ†åˆ©ç”¨ç¼“å­˜ã€æ¨¡å—æŒ‰éœ€åŠ è½½ã€å¼€å¯ Web æœåŠ¡å™¨çš„ Gzip å‹ç¼©ç­‰æ–¹æ³•ä¹Ÿæ˜¯æé«˜ Web åº”ç”¨åŠ è½½å’Œå“åº”é€Ÿåº¦çš„å¸¸ç”¨æ–¹æ³•ã€‚\n","tags":["Node.js","webpack4","splitChunksPlugin"],"categories":["developer"]},{"title":"Git å­æ¨¡å— submodule çš„ä½¿ç”¨","url":"/archives/23/","content":"\n\nGit å­æ¨¡å—å…·æœ‰ä¸€å®šçš„åº”ç”¨åœºæ™¯ã€‚\n\næ¯”å¦‚åœ¨ä¸€ä¸ªé¡¹ç›® P ä¸­ï¼Œè¯¥é¡¹ç›®è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç”± A å’Œ B ä¸¤ä¸ªå›¢é˜Ÿå¹¶è¡Œå¼€å‘ã€‚è€Œ B å›¢é˜Ÿå¼€å‘çš„å†…å®¹å±äºå…¬å…±æ”¯æŒç±»çš„é¡¹ç›®ï¼Œä¸æ­¢ä¼šè¢«è¯¥é¡¹ç›®ä½¿ç”¨ï¼Œå…¶ä»–é¡¹ç›®ä¹Ÿå¯èƒ½ä¼šä½¿ç”¨ã€‚å› æ­¤ B å›¢é˜Ÿå¼€å‘çš„å†…å®¹ä¸å¯èƒ½å’Œå›¢é˜Ÿ A å…±ç”¨ä¸€ä¸ªä»“åº“ã€‚å› ä¸ºè¿™æ ·çš„è¯åˆ«äººæ‹‰å–è¯¥å…¬å…±å†…å®¹æ—¶ä¼šè¿å¸¦æ‹‰å–ä¸éœ€è¦çš„å†…å®¹ã€‚è€Œ A å›¢é˜Ÿé¡¹ç›®çš„å¼€å‘åˆä¾èµ–äº B å›¢é˜Ÿæ‰€åšçš„å†…å®¹ï¼Œå¹¶å¸Œæœ›èƒ½éšæ—¶è·å¾—å›¢é˜Ÿ B å¾—æœ€æ–°æˆæœã€‚\n\n <!--more-->\næ­¤æ—¶ä½¿ç”¨ Git çš„å­æ¨¡å—åŠŸèƒ½èƒ½è¾ƒå¥½çš„è§£å†³è¯¥é—®é¢˜ã€‚\n\nGit å¾—å­æ¨¡å—åŠŸèƒ½å…è®¸æŠŠä¸€ä¸ªä»“åº“ä½œä¸ºå¦ä¸€ä¸ªä»“åº“å¾—å­ç›®å½•ã€‚\n\n## æ¦‚è¿°\n\nå­æ¨¡å—å¸¸ç”¨å¾—å‘½ä»¤å¾ˆç®€å•ï¼Œè¯¥æ–‡ç« å®Œå…¨å­¦ä¹ äº Git çš„å®˜æ–¹æ–‡æ¡£[ã€ŠGit å·¥å…· - å­æ¨¡å—ã€‹](https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97)ã€‚æœ¬æ–‡å¯¹å®˜æ–¹æ–‡æ¡£è¿›è¡Œäº†æç‚¼ã€‚\n\n## å¸¸ç”¨å‘½ä»¤\n\n### æ·»åŠ ä¸€ä¸ªå­æ¨¡å—\n\n```bash\ngit submodule add <url> path\n```\n\næ­¤æ—¶ä¼šåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º `.gitmoudules` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¿å­˜äº†å­æ¨¡å—çš„ç›¸å…³é…ç½®ã€‚å¦‚ä¸‹ï¼š\n\n```bash\n[submodule \"themes/next\"]\n path = themes/next\n url = git@github.com:hooozen/hexo-theme-next.git\n```\n\næ·»åŠ å®Œæ¯•åï¼Œå³æ‹¥æœ‰äº†ä¸€ä¸ªå­æ¨¡å—ã€‚å¯ä»¥åœ¨å­æ¨¡å—è¿›è¡Œä»£ç çš„ä¿®æ”¹å’Œæäº¤å’Œæ‹‰å–ç­‰æ“ä½œã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“åœ¨ä¸Šå±‚ä»“åº“æ‰§è¡Œ `commit` æ“ä½œæ—¶ï¼Œè¯¥ä»“åº“ä¼šè®°å½•å­æ¨¡å—çš„æäº¤è®°å½•ï¼Œä½†ä¹Ÿä»…é™äºæ­¤ã€‚ä¸Šå±‚ä»“åº“å¹¶ä¸ä¼šè·Ÿè¸ªå­æ¨¡å—é‡Œçš„æ–‡ä»¶ã€‚\n\næ‰€æœ‰çš„ git å‘½ä»¤ï¼Œåœ¨ä¸¤ä¸ªä»“åº“é‡Œç‹¬ç«‹å·¥ä½œã€‚\n\n### å…‹éš†ä¸€ä¸ªå¸¦å­æ¨¡å—çš„é¡¹ç›®\n\n`git clone <url>`\n\nå°†ä¸Šå±‚ä»“åº“å…‹éš†ä¸‹æ¥ï¼Œå­æ¨¡å—ä»…ä»…è¢«æ‹‰å–äº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ²¡æœ‰ä»»ä½•å†…å®¹ã€‚æ¥ä¸‹æ¥è¦æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼š\n\n`git submodule init`\n\nåˆå§‹åŒ–æœ¬åœ°é…ç½®æ–‡ä»¶\n\n`git submodule update`\n\næ‹‰å–å­ç›®å½•æ‰€æœ‰æ•°æ®ï¼Œå¹¶æ£€å‡ºä¸Šå±‚ä»“åº“é‡Œæ‰€åˆ—çš„æäº¤ã€‚\n\nä¹‹åæ¯æ¬¡éœ€è¦æ›´æ–°å­æ¨¡å—ä»“åº“æ—¶éƒ½éœ€è¿è¡Œ `git submodules update`ã€‚å­æ¨¡å—å¹¶ä¸ä¼šéšä¸Šå±‚ç›®å½•çš„æ›´æ–°è€Œä¸€èµ·æ›´æ–°ã€‚\n\n### éœ€è¦æ³¨æ„çš„é—®é¢˜\n\n1. ä¸Šå±‚ä»“åº“åªä¿æŒå¯¹å­æ¨¡å—çš„ä¸€ä¸ªè®°å½•ï¼Œè€Œä¸ä¼šè·Ÿè¸ªå†…éƒ¨æ–‡ä»¶ã€‚\n\n    ä¸Šå±‚ä»“åº“ï¼ˆåç®€ç§° A ä»“åº“ï¼‰åªä¼šä¿ç•™å­æ¨¡å—ï¼ˆåç®€ç§° B ä»“åº“ï¼‰çš„ä¸€ä¸ªæäº¤è®°å½•ï¼ˆå³ HEAD æŒ‡é’ˆå€¼ï¼‰ã€‚æ‰€ä»¥å½“åœ¨ A ä»“åº“æ‹‰å–æ›´æ–°æ—¶ï¼ŒB ä»“åº“çš„å†…å®¹å¹¶ä¸ä¼šå¾—åˆ°æ›´æ–°ï¼Œè€Œæ˜¯åªæ˜¯æ›´æ–°äº† B ä»“åº“çš„ HEADã€‚å½“æ‰§è¡Œ `git submodule update` å‘½ä»¤æ—¶ï¼ŒB ä»“åº“æ‰ä¼šä»è¿œç¨‹ä»“åº“æ‹‰å–æ‰€æœ‰æ•°æ®ï¼Œå¹¶æ ¹æ® A ä»“åº“ä¸­å¯¹ B ä»“åº“çš„ HEAD è®°å½•æ£€å‡ºéœ€è¦çš„æ–‡ä»¶å†…å®¹ã€‚\n\n2. å­æ¨¡å—æ‹‰å–å¤±è´¥çš„åŸå› \n\n    æœ‰ä¸Šæ–‡å¯çŸ¥ï¼ŒA ä»“åº“ä»…ä»…è®°å½•ä¸€ä¸ª HEAD å€¼ã€‚æ‰€ä»¥å½“ä¸€ä¸ªå¼€å‘è€…åœ¨æœ¬åœ°çš„ B ä»“åº“é‡Œåšäº†ä»£ç çš„ä¿®æ”¹ï¼Œå¹¶æäº¤ï¼Œä½†**æœªæ¨é€**åˆ°è¿œç¨‹ä»“åº“ã€‚ä»–éšååœ¨ A ä»“åº“ä¸­è¿›è¡Œäº†æäº¤å’Œ**æ¨é€**ï¼Œæ­¤æ—¶ A ä»“åº“ä¼šè®°å½• B ä»“åº“åœ¨è¯¥å¼€å‘è€…æœ¬åœ°çš„ä¸€ä¸ª HEADã€‚å½“å…¶ä»–å¼€å‘è€…å°è¯•é€šè¿‡ `git submodule update` æ›´æ–° B ä»“åº“æ—¶ï¼Œä¼šå‘ç”Ÿé”™è¯¯ï¼Œå› ä¸ºæ­¤æ—¶ B ä»“åº“çš„ HEAD æ‰€æŒ‡å‘çš„æäº¤åªå­˜åœ¨äºç¬¬ä¸€ä¸ªå¼€å‘è€…çš„æœ¬åœ°ã€‚\n\n    æ­¤æ—¶ï¼Œä½ åªèƒ½æŸ¥çœ‹æ˜¯è°æäº¤äº†æœ¬æ¬¡æ›´æ”¹ï¼Œç„¶åè”ç³»ä»–ï¼Œæ•™è‚²ä»–ä¸€ä¸‹ã€‚\n\n3. åœ¨å­æ¨¡å—é‡Œå·¥ä½œè¦æ ¼å¤–å°å¿ƒ\n\n    å› ä¸ºåœ¨ä¸Šå±‚ä»“åº“é‡Œè¿›è¡Œ `git submodule update` æ—¶ä¼šå°†å­æ¨¡å—æ£€å‡ºè‡³ä¸€ä¸ªæ¸¸ç¦»çš„ HEADï¼Œè¿™å¯èƒ½å¯¼è‡´ä½ åœ¨å­ç›®å½•é‡Œæäº¤ä½†æœªåœ¨ä¸Šå±‚ä»“åº“æäº¤çš„å·¥ä½œä¸¢å¤±ã€‚è¿™ç§æƒ…å†µä»å¯ä»¥ä½¿ç”¨ `git reflog` å‘½ä»¤å»æŸ¥æ‰¾å‡ºé‚£ä¸ªæ¸¸ç¦»çš„ HEADã€‚ä½†ä»è¦é¿å…è¿™ç§å¤±è¯¯å‡ºç°ã€‚\n","tags":["Tools","Git"],"categories":["developer"]},{"title":"å¤§å­¦æ¯•ä¸š","url":"/archives/58/","content":"\n<!--more-->\n\n![é•¿å®‰](/assets/images/58-1.jpg)\n\n![è½¯ä»¶ä¸€ç­](/assets/images/58-2.jpg)\n\n> æ¸…é£æ‹‚æ¸­æ°´ï¼Œæ˜æœˆæ»¡é•¿å®‰ã€‚\n","categories":["timeline"]},{"title":"åˆ«å›å»å…®ä½•æ—¶è¿˜","url":"/archives/22/","content":"\n\nä¸€\n\næˆ‘è¦æ¯•ä¸šäº†ã€‚\n\nä»è¿™ä¸ªå­¦æœŸè¿˜æ²¡å¼€å§‹ï¼Œæˆ‘å°±å› è¿™ä»¶äº‹çš„é€¼è¿‘è€Œæƒ¶æƒ¶ä¸å¯ç»ˆæ—¥ã€‚æˆ‘ä»æœªå¯¹æ¯•ä¸šæœ‰è¿‡å¦‚æ­¤æƒ¶æçš„æ„Ÿè§‰ã€‚\n<!--more-->\n\nå½“å‡ ä¸ªæœˆå‰æˆ‘åªèº«ä¸€äººå‰å¾€å—æ–¹é™Œç”ŸåŸå¸‚å®ä¹ æ—¶ï¼Œè¿™ç§æƒ¶ææ„Ÿä¾¿æ„ˆæ¼”æ„ˆçƒˆäº†ã€‚\n\nå‡ºå‘å½“å¤©çš„æƒ…å½¢è¿˜å†å†åœ¨ç›®ã€‚\n\nç ´æ—§çš„å¤¹å±‚å€™è½¦å®¤é‡ŒæŒ¤æ»¡äº†å½¢å½¢è‰²è‰²çš„äººï¼Œå”¯ç‹¬æ²¡æœ‰åƒæˆ‘ä¸€æ ·çš„å¹´è½»äººã€‚ä»–ä»¬æ‹–ç€è¡Œæéº»è¢‹ï¼Œå„è‡ªè¯´ç€æ™¦æ¶©çš„å®¶ä¹¡è¯ï¼Œçœ¼ç¥ç–²åŠ³è€Œæˆ’å¤‡ã€‚æˆ‘å¼€å§‹æ„Ÿåˆ°ä¸å®‰ï¼Œæˆ‘ä¸çŸ¥é“é“è·¯çš„å¦ä¸€å¤´é‚£ä¸ªå®Œå…¨é™Œç”Ÿçš„åŸå¸‚ç­‰ç€æˆ‘çš„ä¼šæœ‰ä»€ä¹ˆï¼Œæˆ–è€…æ²¡æœ‰ä»€ä¹ˆã€‚\n\nå¼€å§‹æ£€ç¥¨æ—¶ï¼Œäººç¾¤æ¶Œå‘æ£€ç¥¨å£ï¼Œæ£€ç¥¨å‘˜å¾ˆæ•·è¡ï¼Œæˆ‘åŠªåŠ›ä»å¯¹ä¾§å£è¢‹æ‹¿å‡ºè½¦ç¥¨åœ¨å¥¹çœ¼å‰æ™ƒäº†æ™ƒï¼Œå¥¹å¹¶ä¸ç†ä¼šã€‚äººç¾¤æ¨ç€æˆ‘å‘å‰èµ°ï¼Œæˆ‘å¾ˆå¿«èå…¥äº†ä»–ä»¬ä¹‹ä¸­ã€‚ä¹…è¿çš„èŒ«ç„¶è‹¥å¤±æ„Ÿæ¶Œä¸Šå¿ƒå¤´ã€‚\n\næˆ‘åœ¨è¯»é«˜ä¸­æ—¶æ”¾å‡çš„å¤œæ™šå¸¸å¸¸æœ‰è¿™ç§æ„Ÿè§‰ã€‚é«˜ä¸­ä½å®¿ï¼ŒåŠæœˆå›å®¶ä¸€æ¬¡ï¼Œæœ‰æ—¶è´ªç©æ‰“çƒåˆ°å¤©é»‘æ‰ç¦»å¼€æ ¡å›­ã€‚å½“æˆ‘èµ°å‡ºæ ¡é—¨ï¼Œä½åœ¨é™„è¿‘çš„åŒå­¦çº·çº·å½’å®¶ï¼Œæ¬¢å£°ç¬‘è¯­é¡·åˆ»æ¶ˆå¤±ï¼Œæ¸…å†·å’Œå­¤å¯‚è¿…é€Ÿå°†æˆ‘åŒ…å›´ã€‚æˆ‘çœ‹ç€è½¦æ°´é©¬é¾™ï¼Œç¯å…‰éœ“å½©çš„åŸå¸‚ï¼Œä¸çŸ¥é“è¿˜èƒ½ä¸èƒ½æ­ä¸Šå½’å®¶çš„æœ«ç­è½¦â€”â€”é‚£æ—¶çš„æˆ‘æ€»æœ‰ä¸€ç§æ„Ÿè§‰ï¼šå‡ºäº†å­¦æ ¡çš„å¤§é—¨æˆ‘ä¾¿ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä»€ä¹ˆéƒ½ä¸æ˜¯äº†â€”â€”è¿™ä¸ªæˆ‘ä¸Šäº†äº”å…­å¹´å­¦çš„åŸå¸‚å…¶å®ä»æœªçœŸæ­£æ„Ÿå—åˆ°è¿‡æˆ‘çš„å­˜åœ¨......\n\nç«è½¦çš„æ±½ç¬›å£°å°†æˆ‘ä»é‚£äº›æ¸…å†·çš„å¤œæ™šæ‰¯å›ï¼Œæˆ‘æ‰å‘ç°ï¼ŒåŸæ¥é‚£ç§å­¤å•æ— ä¾çš„æ„Ÿè§‰ä»æœªä»æˆ‘çš„å¿ƒåº•æ¶ˆæ•£ï¼Œå®ƒä¸€ç›´æ½œä¼åœ¨é‚£é‡Œï¼Œåœ¨è®¸å¤šå¹´åå½“æˆ‘ä»¥ä¸ºè‡ªå·±å·²ç»ç™¾ç‚¼æˆé’¢æ—¶çªæ–½å†·ç®­ï¼Œä»¤æˆ‘çŒä¸åŠé˜²ã€è¸‰è·„ä¸­ä¼¤ï¼Œå´åˆç»™æˆ‘ç§è€å‹é‡é€¢çš„æ¬£æ…°ã€‚\n\nå°±è¿™æ ·ï¼Œæˆ‘é™·å…¥å¯¹å¯‚å†·å¾€äº‹çš„å›å¿†ä¸­è¸ä¸Šäº†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡é©¶å¾€å—æ–¹çš„ç«è½¦ã€‚\n\näºŒ\n\nåœ¨å—æ–¹çš„ç¬¬ä¸€ä¸ªæ™šä¸Šï¼Œæˆ‘å¹¶æ²¡æœ‰æ„Ÿå—åˆ°â€œäººäººå°½è¯´æ±Ÿå—å¥½ï¼Œæ¸¸äººåªåˆæ±Ÿå—è€â€çš„è‡ªåœ¨æƒ¬æ„ï¼Œç›¸åè¾›å¼ƒç–¾â€œè½æ—¥æ¥¼å¤´ï¼Œæ–­é¸¿å£°é‡Œï¼Œæ±Ÿå—æ¸¸å­.....â€çš„è¯å¥åœ¨æˆ‘è„‘æµ·é‡Œä¹…ä¹…å¾˜å¾Šï¼ŒæŒ¥ä¹‹ä¸å»ã€‚åŒæ ·äºŒåå‡ºå¤´çš„å¹´çºªï¼ŒåŒæ ·æ˜¯é½é²å­å¼Ÿï¼ŒåŒæ ·çš„â€œæ±Ÿå—æ¸¸å­â€ï¼Œè®©æˆ‘ä¸å¾—ä¸æƒ³èµ·è¾›å¼ƒç–¾ï¼Œæƒ³èµ·ä»–â€œçœ‹è¯•æ‰‹ï¼Œè¡¥å¤©è£‚â€çš„è‹±é›„æ°”æ¦‚ï¼Œä¹Ÿæƒ³èµ·ä»–â€œæ— äººä¼šï¼Œç™»ä¸´æ„â€çš„è½å¯å­¤å¯‚ã€‚\n\n> åŒä¸ºå¼±å† å¹´ï¼Œç¦»ä¹¡å…¥æ±Ÿå—ã€‚\n>\n> æœªæœ‰å®¶å›½æ¨ï¼Œä½•æ•…æˆšæˆšç„¶?\n\nçªç„¶åªèº«å¥”èµ´åƒé‡Œä¹‹å¤–ï¼Œä»ç®€å•å®é™çš„æ ¡å›­è¿›å…¥çƒ­çƒˆå–§åš£çš„åŸå¸‚ï¼Œä»Šåçš„è·¯å½“å¦‚ä½•èµ°ï¼Ÿæˆ‘ç»ˆç©¶ä¼šæˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿæˆ‘æ²¡æœ‰ä»»ä½•ç­”æ¡ˆã€‚\n\nä¸‰\n\nå‡ ç»æŠ˜è…¾ï¼Œç§Ÿåˆ°äº†ä¸€é—´å…¬å¯“é‡Œçš„å°å•é—´ï¼Œç½®åŠå¥½èµ·å±…ç”¨å“ï¼Œç»ˆèƒ½äºåŒå¤§åŸå¸‚ä¸­å¾—ä¸€éš…å®‰é™å’Œèˆ’é€‚ï¼Œä¹Ÿç®—æ˜¯ä¸€äº›æ…°è—‰å’Œå®‰å®šå§ã€‚\n\nä½†å°±åœ¨åˆšå¾—ä¸€äº›å®‰å®šæ„Ÿçš„æ™šä¸Šï¼Œä¸€åˆ‡æ”¶æ‹¾å¦¥å½“ï¼Œæ´—æ¼±å®Œæ¯•å‡†å¤‡ç¡è§‰æ—¶ï¼Œæˆ‘ä¸å°å¿ƒæŠŠè‡ªå·±é”åœ¨äº†æˆ¿é—¨å¤–ï¼Œæ‰‹æœºè¡Œæé’±åŒ…è¯ä»¶å¤–å¥—å…¨åœ¨æˆ¿é—´å†…ï¼Œæˆ¿é—¨çš„å¯†ç æˆ‘è¿˜æ²¡æ¥å¾—åŠé‡ç½®ï¼Œå¦‚æœä¸èƒ½è”ç³»åˆ°ä¸­ä»‹æˆ‘æ˜¯è¿›ä¸å»äº†ã€‚æˆ‘ä½å¤´çœ‹äº†çœ‹èº«ä¸Šçš„ç‰›ä»”è£¤æš—è‡ªåº†å¹¸â€”â€”å¹¸äºæˆ‘è¿˜ç©¿ç€è£¤å­ã€‚äºæ˜¯æˆ‘ç©¿ç€å•è–„çš„è¡£æœå‡ºäº†é—¨ï¼Œå½“æˆ‘ç»ˆäºèµ¶åˆ°ä¸­ä»‹é—¨é¢æ—¶ï¼Œä»–ä»¬æ—©å·²ç»ä¸‹ç­æ‰“çƒŠäº†ã€‚åœ¨æ­å·æ¹¿å†·çš„å†¬å¤©é‡Œï¼Œæˆ‘å†æ¬¡é©»è¶³åœ¨ç¯å…‰éœ“å½©çš„åŸå¸‚è¡—å¤´ï¼Œä¸ºå›å®¶è€Œå¿§è™‘ã€‚ä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘è¿ä¸€ä»¶èƒ½å¾¡å¯’çš„å¤–å¥—éƒ½æ²¡æœ‰......\n\nå½“æˆ‘ç«¯ç€ä¸€çº¸æ¯çƒ­æ°´ï¼ŒæŠ«ç€æ—…åº—è€æ¿çš„å¤–å¥—ï¼Œæ‰“ç€é¢¤å‘æ—…åº—è€æ¿å¨˜è®²è¿°æˆ‘çš„é­é‡æ—¶ï¼Œè€æ¿å¨˜å’Œåº—é‡Œä¸¤ä¸ªæ¸…æ´å·¥ç¬‘å¾—ç«Ÿç„¶æ¯”æˆ‘æŠ–å¾—è¿˜å‰å®³ã€‚æˆ‘è¶ç€èº«ä½“è¿˜åœ¨æ‰“é¢¤èµ¶ç´§è·Ÿç€ç¬‘äº†èµ·æ¥â€”â€”é‚£ä¸ªæ·±å¤œé‡Œï¼Œè¦ä¸æ˜¯ä»–ä»¬å¸®äº†æˆ‘ï¼Œæˆ‘å¤§æ¦‚åªèƒ½åœ¨æ”¶å®¹æ‰€åº¦è¿‡ä¸€æ™šäº†ã€‚\n\nåœ¨æ­å·å®ä¹ çš„é‚£å‡ ä¸ªæœˆï¼Œæˆ‘æ„Ÿå—åˆ°è®¸å¤šä»å‰ä»æœªç•™æ„çš„ä¸œè¥¿ã€‚å…¶ä¸­æœ€å¤šçš„ä¾¿æ˜¯å¯¹å®¶ä¹¡ï¼Œå¯¹å®¶äººçš„çœ·æ‹ã€‚ç‹¬è‡ªä¸€äººåœ¨é™Œç”Ÿçš„åŸå¸‚ï¼Œä¸€åˆ‡éƒ½è¦æ ¼å¤–å°å¿ƒï¼Œä¸€åˆ‡éƒ½ä¼šé¢‡è´¹å‘¨æŠ˜ã€‚æµæ„Ÿå‘é«˜çƒ§è‡ªå·±å»åŒ»é™¢æ’äº”ä¸ªå°æ—¶çš„é˜Ÿï¼Œæ™šä¸Šé¡¶ç€ç¼çƒ«çš„å—“å­ä¸åœçš„èµ·åºŠçƒ§å¼€æ°´ï¼›é£Ÿç‰©ä¸­æ¯’ä¸¤çœ¼é‡‘æ˜Ÿä¹Ÿè¦è‡ªå·±æœç´¢é™„è¿‘çš„åŒ»é™¢ä¸‹æ¥¼å«è½¦ã€‚\n\næˆ‘ä¸æ˜¯ä¸€ä¸ªä¸èƒ½åƒè‹¦çš„äººï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¹æ„ç‹¬å¤„çš„äººï¼Œä½†å½“ä¸‹ç­åï¼Œä»å®Œå…¨æ²¡æœ‰ä¸ªä½“æ„è¯†çš„ç´§å¼ é›†ä½“å·¥ä½œçªç„¶è¿›å…¥å®Œå…¨è‡ªæˆ‘çš„çŠ¶æ€ï¼Œé‚£ç§æ„Ÿè§‰æ­£å¦‚å‡ å¹´å‰é‚£äº›æœ‹å‹ä»¬é¡·åˆ»æ•£å»åçš„å¤œæ™šã€‚è€Œå¦‚ä»Šï¼Œè¿™ç§çŠ¶æ€å¯èƒ½ä¼šæŒç»­ä¸€å‘¨ã€ä¸€ä¸ªæœˆç”šè‡³æ›´ä¹…éƒ½ä¸ä¼šè¢«æ‰“ç ´ã€‚åœ¨è¿™äº›å®Œå…¨ç‹¬å¤„çš„é•¿ä¹…æ—¶é—´é‡Œï¼Œä½ è¢«è¿«ä¸åœåœ°è§‚å¯Ÿè‡ªå·±ï¼Œå®¡è§†è‡ªå·±ï¼Œä»»å‡­ä¸€äº›æ„Ÿè§¦åœ¨å¿ƒä¸­éƒéƒç´¯ç§¯ï¼Œä¸å¾—æ¶ˆé£ã€‚æ­¤æ—¶ä½ ä¼šæƒ³å¿µé‚£äº›å’Œå®¶äººååœ¨ä¸€èµ·åƒæ™šé¥­ï¼Œçœ‹ç”µè§†çš„åœºæ™¯ï¼›æƒ³å¿µå’Œè¡—é‚»ååœ¨å®¶ä¹¡å‚æ™šçš„è·¯æ—å¹ç€æ™šé£ï¼Œçœ‹æ˜Ÿç©ºçš„æ—¶å…‰ã€‚åœ¨è¿™äº›å…‰æ™¯é‡Œï¼Œå³ä¾¿ä¸è¯´è¯ä½ ä¹Ÿèƒ½æ„Ÿå—åˆ°é‚£æ¥è‡ªäººä¸äººä¹‹é—´æ¸©æš–çš„é»˜å¥‘åœ¨å½¼æ­¤é”€èš€ç€è‹¦éš¾ç”Ÿæ´»ä¸­çš„éƒç»“ã€‚\n\nå››\n\nå½“æœ‰è¿‡å­¤èº«ä¸€äººå¥”èµ´ä¸€ä¸ªä¸¾ç›®æ— äº²çš„é™Œç”ŸåŸå¸‚çš„ç”Ÿæ´»ç»å†åï¼Œæˆ‘æ‰æ¸æ¸å‘ç°åŸæ¥äººçš„ä¸€ç”Ÿä¸€ç›´éƒ½æ˜¯ä¸€åœºå­¤å•çš„æ—…è¡Œã€‚æ¯ä¸ªäººæœ‰è‡ªå·±ä¸åŒçš„è½¨è¿¹ï¼Œè¿‡å»å’Œä½ å¹¶è‚©è¿‡çš„äººä¸ä¼šå‡ºç°åœ¨ä½ çš„æœªæ¥ï¼Œæœªæ¥é‡åˆ°çš„äººåˆæ— æ³•äº†è§£ä½ çš„è¿‡å»ã€‚ç»ˆå…¶ä¸€ç”Ÿï¼Œåªæœ‰è‡ªå·±æ‰æ˜¯è‡ªå·±æœ€å¿ å®çš„æ—…ä¼´ã€‚\n\nç„¶è€Œäººæ€»è¦å‘å‰èµ°ï¼Œæ— è®ºæ˜¯è¸Œèº‡æ»¡å¿—çš„ç§¯æå‰è¡Œï¼Œè¿˜æ˜¯ä¸çŸ¥ä¸è§‰çš„éšæ³¢é€æµï¼Œç”šè‡³æ˜¯å¹¶ä¸æƒ…æ„¿çš„è¢«æ¨ç€å‘å‰ã€‚åœ¨è¿™è¿‡ç¨‹ä¸­æ€»è¦å¤±å»äº›ä¸œè¥¿ï¼Œä¹Ÿæ€»ä¼šæ”¶è·ç‚¹ä¸œè¥¿ï¼Œè¿™æ˜¯è‡ªç„¶è€Œç„¶ï¼Œæ— éœ€çº ç¼ çš„ã€‚å›é¡¾å¤§å­¦è¿™å‡ å¹´ï¼Œæˆ‘ç€å®å‰è¿›äº†å¾ˆå¤šï¼Œå¤šåˆ°ä»¥è‡³äºæˆ‘å›å¿†èµ·å‡ å¹´å‰çš„è‡ªå·±éƒ½æœ‰äº›æ°¤æ°²ä¸æ¸…è€Œéš¾ä»¥åœ¨è®°å¿†é‡Œæ‰æ‘¸äº†ã€‚åœ¨è¿™é€”ä¸­ç»å†äº†ç”Ÿç¦»ï¼Œä¹Ÿç»å†äº†æ­»åˆ«ï¼›ç»å†äº†åˆè¯†ï¼Œä¹Ÿç»å†äº†é‡é€¢ï¼›ç—›è‹¦å’Œå¿«ä¹å‚æ‚ç€ï¼Œè¶Šæ¥è¶Šå¤šçš„æ˜¯å¹³æ·¡å’Œé‡Šç„¶ã€‚\n\nè¿™ä¸€è·¯èµ°æ¥ï¼Œéš¾å…æœ‰æä¸æƒ…æ„¿çš„è¢«æ¨ç€èµ°çš„æ—¶å€™ï¼Œéš¾å…æœ‰è¢«è¿«ä¸¢æ‰çš„ä¸œè¥¿ï¼Œä½†ç»ˆå½’éƒ½æ˜¯è‡ªå·±é€‰æ‹©çš„ç»“æœã€‚é€‰æ‹©äº†åšéŸ§ä¾¿ä¸¢å¤±äº†ä¸€äº›å‹‡æ°”ï¼Œé€‰æ‹©äº†æ²‰ç¨³ä¾¿æ”¾å¼ƒäº†ä¸€äº›æœºä¼šï¼Œé€‰æ‹©äº†ç®€å•å°±å°‘äº†ä¸€äº›å¿«ä¹ï¼Œé€‰æ‹©äº†æ”¶æ•›å°±å°‘äº†ä¸€äº›å…‰èŠ’ï¼Œé€‰æ‹©äº†å­¤ç‹¬å°±å°‘äº†ä¸€äº›æ¸©æš–ã€‚\n\næ¥ä¸åŠåœç•™ï¼Œä¸‹ä¸€ç«™ä¾¿èµ«ç„¶çœ¼å‰â€”â€”æ¯•ä¸šå¦‚æœŸè€Œè‡³ï¼Œçºµä½¿æˆ‘æ›¾æƒ¶æä¸å®‰ï¼Œæ›¾ä¾ä¾ä¸èˆï¼Œæ›¾æ€…æƒ˜åä¾§ã€‚æˆ‘ç»ˆç©¶è¦å‘Šåˆ«æˆ‘çš„å­¦ç”Ÿæ—¶ä»£ï¼Œå‘Šåˆ«è½»æ¾è‡ªåœ¨çš„å²æœˆï¼Œå‘Šåˆ«å•çº¯èµ¤è¯šçš„è‡ªå·±ã€‚\n\næ—¢åˆ«å›å…®ä¸æ€è¿˜ã€‚\n","tags":["æ•£æ–‡"],"categories":["life"]},{"title":"æˆ‘ä»¬ä¸ºä»€ä¹ˆæ„å»ºReact","url":"/archives/19/","content":"\n\nç°åœ¨å·²ç»å­˜åœ¨å¾ˆå¤š JavaScript MVC æ¡†æ¶äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦åˆ›å»º React å¹¶ä¸”ä½ ä¸ºä»€ä¹ˆä¼šå»ç”¨å®ƒï¼Ÿ\n<!--more-->\n\n## React å¹¶ä¸æ˜¯ä¸€ä¸ª MVC æ¡†æ¶\n\nReact æ˜¯ä¸€ä¸ªæ„å»ºåˆæˆå¼ç”¨æˆ·ç•Œé¢çš„åº“ã€‚å®ƒé¼“åŠ±åˆ›å»ºå¯é‡ç”¨çš„ UI ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶èƒ½è·Ÿéšæ•°æ®å˜åŒ–è¿›è¡Œå±•ç¤ºã€‚\n\n## React ä¸ä½¿ç”¨æ¨¡æ¿\n\né€šå¸¸ï¼ŒWeb åº”ç”¨ä½¿ç”¨æ¨¡æ¿æˆ– HTML æŒ‡ä»¤æ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚è¿™äº›æ¨¡æ¿ä¸»å¯¼äº†æ‰€ç”¨ä½ å¯ä»¥ç”¨æ¥æ„å»ºç”¨æˆ·ç•Œé¢çš„æŠ½è±¡é›†åˆã€‚\n\nReact å…è®¸é€šè¿‡æŠŠç”¨æˆ·ç•Œé¢æ‹†åˆ†æˆ**ç»„ä»¶**æ¥è¿›è¡Œæ„å»ºã€‚è¿™æ„å‘³ç€ React ä½¿ç”¨äº†çœŸæ­£çš„ã€å…¨åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€æ¥æ¸²æŸ“è§†å›¾ï¼Œè¿™æ ·ä¸€æ¥ç›¸å¯¹æ¨¡æ¿è¯­è¨€å…·æœ‰ä¸€å®šä¼˜åŠ¿ï¼ŒåŸå› å¦‚ä¸‹ï¼š\n\n- **JavaScript æ˜¯ä¸€ä¸ªçµæ´»çš„ï¼Œå¼ºå¤§çš„å…·æœ‰æŠ½è±¡èƒ½åŠ›çš„ç¼–ç¨‹è¯­è¨€**ã€‚è¿™åœ¨å¤§å‹åº”ç”¨ä¸­éå¸¸é‡è¦ã€‚\n\n- é€šè¿‡ç»Ÿä¸€ä½ çš„æ ‡è®°å’Œå®ƒæ‰€å¯¹åº”çš„è§†å›¾é€»è¾‘ï¼ŒReact å®é™…ä¸Šå¯ä»¥ä½¿è§†å›¾**æ›´å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤**ã€‚\n\n- é€šè¿‡å°†æ ‡è®°å’Œå†…å®¹è§£é‡Šæˆ JavaScriptï¼Œè¿™é‡Œå°±**æ²¡æœ‰æ‰‹åŠ¨çš„å­—ç¬¦ä¸²æ’å…¥**ï¼Œå› æ­¤é™ä½äº† XSS æ¼æ´çš„æš´éœ²é¢ç§¯ã€‚\n\næˆ‘ä»¬åŒæ ·æä¾›äº† JSXï¼Œä¸€ä¸ªå¯é€‰çš„è¯­æ³•æ‰©å±•ï¼Œå¦‚æœä½ å–œæ¬¢ä½¿ç”¨ HTML çš„æ˜“è¯»æ€§æ¥ä¹¦å†™åŸç”Ÿ JavaScriptã€‚\n\n## å³æ—¶æ›´æ–°éå¸¸ç®€å•\n\nå½“æ•°æ®éšç€æ—¶é—´æ›´æ–°æ—¶ï¼ŒReact ä¼šè·Ÿéšç€å˜åŒ–ã€‚\n\nåœ¨ä¸€ä¸ªä¼ ç»Ÿçš„ JavaScript åº”ç”¨ä¸­ï¼Œä½ éœ€è¦å»ç›‘æ§ä»€ä¹ˆæ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œç„¶åç«‹åˆ»æ“ä½œ DOM èŠ‚ç‚¹æ¥ç¡®ä¿è§†å›¾å’Œæ•°æ®ä¿æŒä¸€è‡´ã€‚å³ä½¿ AngularJSï¼Œä¹Ÿéœ€è¦é€šè¿‡æŒ‡ä»¤å’Œæ•°æ®ç»‘å®šæä¾›ä¸€ä¸ªå£°æ˜å¼çš„æ¥å£[éœ€è¦ç»‘å®šä¸€ä¸ªå‡½æ•°æ¥æ‰‹åŠ¨æ›´æ–° DOM èŠ‚ç‚¹](https://code.angularjs.org/1.0.8/docs/guide/directive#reasonsbehindthecompilelinkseparation)ã€‚\n\nReact é‡‡ç”¨ä¸ç”¨çš„æ–¹æ³•\n\nå½“ä½ çš„ç»„ä»¶ç¬¬ä¸€æ¬¡åˆå§‹åŒ–ï¼Œ`render` æ–¹æ³•è¢«è°ƒç”¨ï¼Œç”Ÿæˆè½»é‡çº§è¡¨ç°å½¢å¼çš„è§†å›¾ã€‚é€šè¿‡è¿™ä¸ªè¡¨ç°å½¢å¼ï¼Œæ ‡ç­¾å­—ç¬¦ä¸²è¢«ç”Ÿæˆï¼Œç„¶åæ’å…¥åˆ°æ–‡æ¡£ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ`render` æ–¹æ³•å†æ¬¡è¢«è°ƒç”¨ã€‚ä¸ºäº†ç¡®ä¿æ›´æ–°çš„é«˜æ•ˆæ€§ï¼Œæˆ‘ä»¬å°†ä¸Šæ¬¡å’Œæœ¬æ¬¡ `render` æ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åç”Ÿæˆæœ€å°çš„å˜åŒ–æ¥åº”ç”¨åˆ° DOM ç»“æ„ä¸­ã€‚\n\n> `render` æ–¹æ³•çš„è¿”å›å€¼æ—¢ä¸æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¸æ˜¯ DOM èŠ‚ç‚¹ â€”â€” å®ƒæ˜¯ä¸€ç§å¯¹ DOM ç»“æ„è½»é‡çº§çš„è¡¨è¿°æ–¹æ³•ã€‚\n\næˆ‘ä»¬æŠŠè¿™ä¸ªè¿‡ç¨‹å«åš**å’Œè§£**ã€‚é€šè¿‡[è¿™ä¸ª jsFiddle](http://jsfiddle.net/2h6th4ju/)å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªå…³äº**å’Œè§£**å¦‚ä½•è¿›è¡Œçš„å®ä¾‹ã€‚\n\nå› ä¸ºé‡æ–°æ¸²æŸ“æ˜¯å¦‚æ­¤çš„å¿«é€Ÿï¼ˆå¤§æ¦‚ 1 æ¯«ç§’ï¼‰ï¼Œå¼€å‘è€…æ— éœ€å»æ˜ç¡®çš„å£°æ˜æ•°æ®ç»‘å®šã€‚æˆ‘ä»¬å·²ç»è¯å®è¯¥æ–¹æ³•ä½¿å¾—æ„å»º APP å˜å¾—ç®€å•ã€‚\n\n## HTML ä»…ä»…åªæ˜¯å¼€å§‹\n\nå› ä¸º React æ‹¥æœ‰å¯¹æ–‡æ¡£ç‹¬æœ‰çš„è½»é‡çº§è¡¨è¿°æ–¹å¼ï¼Œæˆ‘å¯ä»¥åˆ©ç”¨å®ƒåšä¸€äº›éå¸¸é…·çš„äº‹æƒ…ï¼š\n\n- Facebook æœ‰è®¸å¤šæ¸²æŸ“åœ¨ `<canvas>` è€Œä¸æ˜¯ HTML ä¸Šçš„åŠ¨æ€å›¾è¡¨ã€‚\n- Instagram æ˜¯ä¸€ä¸ªå®Œå…¨ç”± React å’Œ `Backbone.Router` æ„å»ºçš„â€œå•é¡µâ€ web åº”ç”¨ã€‚è®¾è®¡è€…å®šæœŸä½¿ç”¨ JSX è¯­æ³•è´¡çŒ® React ä»£ç ã€‚\n- æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå†…éƒ¨é¡¹ç›®åŸå‹ï¼Œè¯¥é¡¹ç›®ä½¿ç”¨ Objective-C ä½œä¸ºæ¡¥æ¥ï¼Œä½¿å¾— React åº”ç”¨å¯ä»¥è¿è¡Œåœ¨ä¸€ä¸ª web å·¥ä½œç¯å¢ƒä¸­ï¼Œå¹¶ä½¿ç”¨ React å»é©±åŠ¨**åŸç”Ÿ IOS è§†å›¾**ã€‚\n- ä½ å¯ä»¥[åœ¨æœåŠ¡ç«¯](https://github.com/petehunt/react-server-rendering-example)è¿è¡Œ React æ¥åš SEOã€æ€§èƒ½ä¼˜åŒ–ã€ä»£ç åˆ†äº«ç­‰å¾ˆå¤šçµæ´»æ€§çš„å†…å®¹ã€‚\n- åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­ï¼ˆåŒ…æ‹¬ IE 8ï¼‰å…·æœ‰ç»Ÿä¸€çš„ã€æ ‡å‡†çš„ã€å…¼å®¹çš„è¡Œä¸ºè¡¨ç°ï¼Œå¹¶ä¸”è‡ªåŠ¨ä½¿ç”¨äº†[äº‹ä»¶å§”æ‰˜](http://davidwalsh.name/event-delegate)ã€‚\n\nè¯·æµè§ˆ[https://reactjs.org](https://reactjs.org)æ¥äº†è§£æˆ‘ä»¬æ„å»ºäº†å“ªäº›ä¸œè¥¿ã€‚æˆ‘ä»¬çš„æ–‡æ¡£æ˜¯é¢å‘å¦‚ä½•ä½¿ç”¨æ¡†æ¶ä¸€æ­¥æ­¥æ„å»ºåº”ç”¨çš„ï¼Œä½†å¦‚æœä½ å¯¹å…¶ä¸­çš„å®ç°åŸç†æ„Ÿå…´è¶£ï¼Œè¯·[è”ç³»](https://reactjs.org/community/support.html)æˆ‘ä»¬ï¼\n\næ„Ÿè°¢é˜…è¯»!\n\n### è¯‘è€…æŒ‰\n\nè¯¥æ–‡ç¿»è¯‘è‡ª [React å®˜æ–¹åšå®¢](https://reactjs.org/blog/all.html)ä¸­çš„[Why did we build React?](https://reactjs.org/blog/2013/06/05/why-react.html)ï¼Œå‘å¸ƒäº 2013 å¹´ 6 æœˆ 5 æ—¥ï¼Œä½œè€…ä¸º[Pete Hunt](https://twitter.com/floydophone)ã€‚\n","tags":["è½¬è½½","React"],"categories":["developer"]},{"title":"æ•æ¢¦ - å°¼å°”Â·ç›–æ›¼","url":"/archives/18/","content":"\n\næœ‰ä¸ªå’Œå°šç‹¬å±…åœ¨å±±è…°ä¸Šçš„å¯ºåº™æ—ã€‚åº™å¾ˆå°ï¼Œå’Œå°šå¾ˆå¹´è½»ï¼Œè¿™å±±ä¹Ÿç®—ä¸ä¸Šæ—¥æœ¬çš„åå±±å³»å³°ã€‚\n\nå’Œå°šæ‰“ç†ç€å¯ºåº™ï¼Œç”Ÿæ´»å®é™å®‰é—²ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œä¸€ä¸ªç‹ç‹¸å’Œä¸€åªç‹¸çŒ«ä»åº™æ—ç»è¿‡ï¼Œçœ‹åˆ°å’Œå°šæ­£è€•ç§ç€ä»–èµ–ä»¥ä¸ºç”Ÿçš„ä¸€å°å—å±±è¯åœ°ã€‚\n\nç‹¸çŒ«çœ‹ç€å’Œå°šå’Œå¯ºåº™ï¼Œå¼€å£é“ï¼šâ€œè®©æˆ‘ä»¬æ‰“ä¸ªèµŒã€‚æˆ‘ä»¬ä¸­è¦æ˜¯æœ‰è°èƒ½æŠŠè¿™å’Œå°šä»åº™é‡Œèµ¶èµ°ï¼Œå°±å¯ä»¥æ®æ­¤ä¸ºå®¶ï¼›å·²ç»å¾ˆå¤šå¹´æ²¡æœ‰é¦™å®¢æ—…äººåˆ°åº™é‡Œæ¥äº†ï¼Œè¿™åœ°æ–¹æ€»æ¯”ç‹ç©´ç‹¸å·¢è¦å¥½ã€‚â€\n\n<!--more-->\n\nç‹ç‹¸ç»¿çœ¸ä¸€çœ¨ï¼Œå±•é¢œä¸€ç¬‘ï¼Œéœ²å‡ºäº†å°–ç‰™ï¼›å¥¹ç”©ç”©æ¯›èŒ¸èŒ¸çš„å°¾å·´ï¼Œä»å±±ä¸Šæœ›ä¸‹å»ï¼Œçœ‹äº†çœ‹è¿™åº™ï¼Œè¿˜æœ‰è¿™å’Œå°šï¼›ç„¶åå¥¹æœ›ç€ç‹¸çŒ«è¯´ï¼šâ€œå¥½å•Šï¼Œå°±è¯´å®šäº†ã€‚â€\n\nâ€œæˆ‘ä»¬è½®æµæ¥ï¼Œâ€ç‹¸çŒ«è¯´ï¼Œâ€œæˆ‘å…ˆå»ã€‚â€\n\nåœ¨é‚£å—å°å°çš„èœå›­ä¸­ï¼Œå’Œå°šçŠå®Œäº†å±±è¯åœ°ï¼Œåˆè·ªä¸‹èº«ä¸ºé‡è‘±ã€ç”Ÿå§œå’Œä¸€å°ç‰‡è¯åœƒæ¸…ç†æ‚è‰ã€‚\n\næ¥ç€ï¼Œä»–æ¸å‡€æ‰‹å’Œè†ç›–ä¸Šçš„æ³¥åœŸï¼Œèµ°å›å¯ºåº™åå¢çš„å±…æ‰€ï¼Œå‡†å¤‡æ™šè¯¾ã€‚\n\né‚£æ™šï¼Œå¤œç©ºçš„é¢œè‰²å¥½åƒç†Ÿé€çš„è½¦å­ï¼›æ»¡æœˆé«˜æ‚¬å¥½ä¼¼é“¶ç›˜ã€‚å’Œå°šå¬åˆ°é—¨å¤–ä¸€é˜µå–§åš£ã€‚\n\né™¢å­é‡Œç«™äº†äº”ä¸ªäººï¼Œä¸€ä¸ªä¸ªé²œè¡£æ€’é©¬ï¼Œé¡»å‘è†¨å¼ ã€‚\n\nä¸ºé¦–çš„æ“ç€ä¸€å£å¤§åˆ€ã€‚\n\nâ€œè°æ˜¯æ­¤é—´ä½æŒï¼Ÿâ€ä»–é«˜å£°æ–­å–ï¼Œæœ‰å¦‚æƒŠé›·ï¼Œâ€œé€Ÿé€Ÿå‡ºæ¥è§æˆ‘ï¼â€\n\nå’Œå°šèµ°ä¸Šå‰å»ï¼Œæ¥åˆ°æœˆå…‰ä¹‹ä¸‹ï¼Œæ·±æ–½ä¸€ç¤¼ï¼Œâ€œè´«åƒ§æ— å¾·ï¼Œæ­£æ˜¯æ­¤åœ°å®ˆæŠ¤ï¼Œâ€ä»–æ·¡ç„¶è¯´ã€‚\n\nâ€œå¥½ä¸ªç˜¦å°æ¯å¹²çš„å’Œå°šï¼Œâ€ä¸ºé¦–çš„å–é“ï¼Œâ€œä½†åˆæœ‰è°èƒ½å‚é€ç¥ä½›çš„å®æ—¨ï¼Ÿè¯šå¦‚æ–¯è¨€ï¼Œè¿½åé€åˆ©è€…å®ä¹ƒæ•é£æ‰å½±ï¼›æ·¡æ³Šä¸–äº‹ä¹‹äººï¼Œå€’å¸¸æœ‰é¸¿ç¦åœ¨é—¨å¤–é¸£é”£ã€‚â€\n\nå’Œå°šå¯¹è¿™ç•ªè¯æœªç½®ä¸€è¯­ï¼Œåªæ˜¯ç•¥ç•¥æŠ¬å¤´ï¼Œæœ›å‘æœˆå…‰ä¸‹çš„å¤§æ±‰ã€‚\n\nä»€ä¹ˆäº‹éƒ½é€ƒä¸è¿‡è¿™åŒç‚¯ç‚¯æœ‰ç¥çš„çœ¼ç›ã€‚\n\nâ€œé‚£å¥½ï¼Œä½ å¯æƒ³çŸ¥é“è‡ªå·±è¿åŠ¿ä½•åœ¨ï¼Ÿâ€\n\nâ€œè‡ªç„¶ï¼Œâ€å’Œå°šè¨€é“ã€‚\n\nâ€œé‚£å°±å¬å¥½ï¼Œå·®æˆ‘ä»¬æ¥æ‰¾ä½ çš„å¹¶éæ—äººï¼Œæ­£æ˜¯å¤©çš‡é™›ä¸‹ã€‚ä½ é¡»å³åˆ»å¯ç¨‹ï¼Œèµ¶å¾€çš‡å®«ï¼Œå¤©çš‡è¦ä¸ä½ é¢è°ˆï¼Œå¥½ç¡®å®šä½ æ˜¯ä¸æ˜¯æ˜Ÿå®˜åœè€…å¯¹ä»–è®²èµ·çš„é‚£ä¸ªäººã€‚å¦‚æœæ²¡æé”™çš„è¯ï¼Œä½ ä¾¿å°±æ­¤é£é»„è…¾è¾¾ï¼Œå®˜åŠå®°ä¸â€”â€”ä¸€ä¸ªè¶³ä»¥èµ¢å¾—å¯Œè´µè£åã€å¹¿å¦è±ªå®…çš„åœ°ä½ã€‚â€\n\nâ€œä½†ä½ ä¹Ÿè¦è®°å¾—ï¼Œè‹¥æ˜¯çŒ´å¹´çš„æ¬¡æ—¥ï¼Œä½ è¿˜æ²¡æœ‰èµ¶åˆ°çš‡å®«ï¼Œè¿åŠ¿å°±ä¼šç”±ç››è½¬è¡°ã€æ•æˆ‘ç›´è¨€ï¼Œå¤©çš‡å¿…ä¼šå¤„ä½ æåˆ‘ã€‚æ•…è€Œä¸è¦è€½æï¼Œé»æ˜å‰å°±åŠ¨èº«ã€‚ä¸ç„¶è‹¥æ˜¯çŠ¯äº†åœ£æ€’ï¼Œè°ä¹Ÿæ•‘ä¸äº†ä½ ã€‚â€\n\nè¯´è¯é—´ï¼Œäº”åŒ¹æˆ˜é©¬åœ¨æ»¡æœˆé“¶è¾‰ä¸‹è¸©å“äº†è¹„å­ã€‚\n\nå’Œå°šåˆæ–½ä¸€ç¤¼ã€‚\n\nâ€œæˆ‘è¿™å°±åŠ¨èº«ï¼Œâ€ä»–è¯´ã€‚\n\né‚£äº”ä¸ªéª‘å£«å’§å˜´ç¬‘äº†èµ·æ¥ï¼Œæœˆå…‰ç…§äº®äº†ä»–ä»¬çš„çœ¼ç›å’Œç‰™é½¿ï¼Œä¹Ÿç…§äº®äº†æˆ˜é©¬çš„é“è¾”éé«»ã€‚\n\nâ€œä½†åœ¨æˆ‘åŠ¨èº«å‰ï¼Œè¿˜æœ‰ä¸€äº‹ç›¸è¯¢ã€‚â€\n\nâ€œè¿˜æœ‰ä½•äº‹ï¼Ÿâ€ä¸ºé¦–çš„é—®é“ï¼Œå£°å¦‚è™å•¸å±±æ—ã€‚\n\nâ€œä¸ºä½•å¤©çš‡è¦æ´¾ä¸€åªç‹¸çŒ«æ¥å®£æˆ‘è¿›æ®¿ï¼Œâ€å’Œå°šé—®é“ã€‚\n\nè™½ç„¶å‰å››åŒ¹éªé©¬çš„å°¾å·´æ¯«æ— å¼‚çŠ¶ï¼Œä½†ä»–æ—©å·³çœ‹å‡ºæœ€åé‚£åŒ¹å´é•¿ç€ä¸€æ¡ç‹¸çŒ«çš„å°¾å·´ã€‚è¯éŸ³æœªè½ï¼Œå’Œå°šå°±å¤§ç¬‘èµ·æ¥ã€‚ä»–éšå³èµ°å›åº™é‡Œï¼Œå¼€å§‹è‡ªå·±çš„æ™šè¯¾ã€‚\n\né™¢å­é‡Œä¸€é˜µè¹„å£°å“è¿‡ï¼Œå¤§æ±‰ä»¬æ‹”é©¬è€Œé€ƒã€‚å±±å¡ä¸Šä¼ æ¥äº†æ¡€ï¼Œæ¡€ï¼Œæ¡€ï¼Œçš„å£°éŸ³ï¼Œé‚£æ˜¯ä¸€åªç‹ç‹¸å¹¸ç¾ä¹ç¥¸çš„å°–å•¸ã€‚\n\næ¬¡æ—¥ï¼Œæ­£åˆæœªè‡³ï¼Œé»‘æ²‰æ²‰çš„æµ“äº‘å·²ç»é®è”½å±±é¢ ã€‚æ‰€ä»¥è½é›¨æ—¶ï¼Œå’Œå°šä¸€ç‚¹éƒ½ä¸åƒæƒŠã€‚\n\nè¿™åœºç“¢æ³¼å¤§é›¨æ‰“å¼¯äº†ç«¹å­ï¼Œå‹å€’äº†æ–°é•¿å‡ºçš„å±±è¯è‹—ã€‚\n\nå’Œå°šæ—©å·³ä¹ æƒ¯å±±ä¸Šå˜å¹»æ— å¸¸çš„å¤©æ°”ã€‚å°½ç®¡ç™½ç‚½çš„é—ªç”µçœ©äººçœ¼ç›®ï¼Œå–‘å“‘çš„é›·é¸£ä»¿ä½›è‡ªå±±è…¹æ»šå‡ºï¼Œä½†ä»–ä¸æ¯«ä¸ä¸ºæ‰€åŠ¨ï¼Œç»§ç»­ç€è‡ªå·±çš„é¢‚è¯¾ã€‚é›¨åŠ¿æ›´å¤§ï¼ŒçŠ¹å¦‚æ•²å“ä¸Šç™¾é¢å°é¼“ã€‚\n\nåœ¨è¿™æ»‚æ²±é›¨å£°ä¸­ï¼Œå’Œå°šå‡ ä¹å¬ä¸åˆ°æŠ½å™å£°ï¼Œä½†ä»–ç¡®å®æ„Ÿè§‰æœ‰äººåœ¨å“­æ³£ã€‚\n\nå’Œå°šèµ°å‡ºå¯ºåº™ï¼Œé™¢ä¸­çš„åœŸåœ°è¢«å¤§é›¨æµ‡æˆäº†æ³¥æ±¤ã€‚ä¸€åå°‘å¥³èººåœ¨é‚£é‡Œï¼Œå¥¹ç²¾ç¾çš„ä¸è¢æ—©è¢«é›¨æ°´æµ¸é€ï¼Œæ¹¿æ¼‰æ¼‰å¾—è´´åœ¨èº«ä¸Šï¼Œå°±åƒç¬¬äºŒå±‚çš®è‚¤ã€‚å’Œå°šå¯Ÿè§‰åˆ°å°‘å¥³çš„ç²ç‘æ›²çº¿ã€æ›¼å¦™èº«å§¿ï¼Œå¿ƒä¸­å¿å¿‘ã€‚ä»–æ€æ‰¶ç€å¥³å­èµ°è¿›å¯ºåº™ï¼Œé‚£é‡Œå ªå¯é¿é›¨ã€‚\n\nâ€œæˆ‘æ˜¯å±±åŸå¤§åçš„ç‹¬ç”Ÿå¥³ï¼Œâ€å¥¹ç«™åœ¨å°å°çš„ç«ç‚‰æ—ï¼Œæ‹§ç€è‡ªå·±çš„è¡£è¢å’Œä¹Œé»‘çš„é•¿å‘ï¼Œâ€œæˆ‘æœ¬æ˜¯ç”±ä¸€ç¾¤ä¾ä»ã€å©¢å¥³é™ªç€è¦æ¥è¿™åº§å¯ºåº™ï¼Œä½†é€”ä¸­é‡ä¸Šäº†åŒªäººã€‚æˆ‘ä¸€ä¸ªäººé€ƒäº†å‡ºæ¥ã€‚å¦å¤–æˆ‘å·å¬åˆ°ä»–ä»¬è¯´ç­‰é›¨åœäº†ï¼Œå°±è¦åˆ°å±±ä¸Šæ¥æŠŠå¯ºåº™ä»˜ä¹‹ä¸€ç‚¬ï¼Œè¿˜è¦æ€å…‰è¿™é‡Œçš„æ¯ä¸ªäººã€‚â€\n\nå¥¹è¯´è¯é—´åƒäº†å’Œå°šçš„ä¸€ç¢—ç±³é¥­ï¼Œå’Œä¸€å°ç¢Ÿå±±è¯ã€‚å¥¹åƒèµ·é¥­æ¥ç‹¼åè™å’½ï¼ŒåŒæ—¶è¿˜ç”¨æ˜äº®çš„ç»¿çœ¸ç›¯ç€å’Œå°šçœ‹ã€‚\n\nâ€œæ•…è€Œï¼Œâ€å¥¹è¯´ï¼Œâ€œè¶åŒªäººæ²¡æ¥ï¼Œæˆ‘ä»¬èµ¶å¿«è·‘å§ï¼Œæ°¸è¿œä¹Ÿåˆ«å›æ¥ã€‚å¦‚æœæˆ‘ä»¬å¾…åœ¨è¿™å„¿ï¼Œç»ˆç©¶éš¾é€ƒä¸€æ­»ã€‚è¦æ˜¯æˆ‘ä»¬åœ¨è·¯ä¸Šèµ°æ•£äº†ï¼Œé‚£ä½ å°±åˆ°å±±åŸå»æ‰¾æˆ‘çˆ¶äº²ï¼Œä»–æ˜¯é‚£é‡Œçš„å¤§åï¼Œä½åœ¨åŸé‡Œæœ€å¥¢åçš„å®…é‚¸ä¸­ã€‚ä»–ä¼šç»™ä½ é‡èµçš„ã€‚å¤šè°¢ä½ çš„ç±³é¥­ï¼Œå¾ˆå¥½åƒï¼Œå¯æƒœå±±è¯æœ‰ç‚¹å¹²äº†ã€‚â€\n\nâ€œé‚£æˆ‘ä»¬å¯è¦èµ¶ç´§ä¸Šè·¯äº†ï¼Œâ€å’Œå°šå˜´è§’æ¼«å‡ºä¸€ä¸æ¸©æŸ”çš„ç¬‘æ„ï¼Œâ€œä½†æˆ‘è¿˜æœ‰ä¸€äº‹ç›¸è¯¢ã€‚â€\n\nâ€œè¿˜æœ‰ä½•äº‹ï¼Ÿâ€å¥³å­©é—®é“ã€‚\n\nâ€œè¯·å‘Šè¯‰æˆ‘ï¼Œä¸ºä½•å±±åŸå¤§åçš„å¥³å„¿æ˜¯ä¸€åªç‹ç‹¸ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œæˆ‘å¯ä»æ²¡åœ¨å‡¡äººè„¸ä¸Šè§è¿‡è¿™æ ·çš„åŒçœ¸ã€‚â€\n\nè¯éŸ³æœªè½ï¼Œå¥³å­©å°±ä»ç«ç‚‰ä¸Šè·ƒäº†è¿‡å»ã€‚å¥¹è½åœ°æ—¶å·²ä¸å†æ˜¯å¥³å­ï¼Œè€Œæ˜¯ä¸€åªç‹ç‹¸ã€‚çš®æ¯›é¡ºæ»‘ï¼Œå°¾å·´é«˜ç«–ï¼Œå®ƒéå¸¸è½»è”‘åœ°ç¥äº†å’Œå°šä¸€çœ¼ï¼Œéšå³è·³ä¸ŠçŸ³å¢™ï¼Œé¡ºç€å®ƒè·ƒä¸Šä¸€æ ªè™¬ç»“è€æ¾ï¼Œåœ¨é‚£é‡Œé©»è¶³ç‰‡åˆ»ï¼Œä¾¿æ¶ˆå¤±åœ¨æš´é›¨ä¹‹ä¸­ã€‚\n\nä¸‹åˆæ™šäº›æ—¶å€™ï¼Œå¤ªé˜³çˆ¬å‡ºæµ“äº‘ï¼Œå’Œå°šç»•ç€å¯ºåº™æ‹£æ‹¾èµ·è½å¶æ®‹æï¼Œä¿®èŒ¸ç€æš´é›¨é€ æˆçš„æŸä¼¤ã€‚æ­£æ˜¯æ­¤æ—¶ï¼Œä»–è¾¨è¯†å‡ºä¸€ä¸ªç¬¦è®°ã€‚æ‰€ä»¥è¿‡äº†å‡ å¤©ï¼Œå½“å¤ªé˜³è½å±±åï¼Œä¸€ç¾¤å¦–é­”æ™ƒæ™ƒæ‚ æ‚ åœ°ç©¿è¿‡æ ‘æ—ï¼Œå›´ä½å°åº™æ—¶ï¼Œä»–ä¹Ÿå¹¶ä¸åƒæƒŠã€‚\n\nè¿™äº›å¦–é­”ä¸­ï¼Œæœ‰äº›é¡¶ç€æ­»äººçš„å¤´é¢…ï¼Œæœ‰äº›é•¿ç€æ€ªå…½çš„è„‘è¢‹ï¼Œé»„ç‰™å·¨è§’ï¼Œä¸¤çœ¼æ”¾å…‰ï¼›å®ƒä»¬å‘å‡ºçš„åµåš·å‘¼å•¸å£°ï¼Œä½ è‚¯å®šæœªæ›¾å¬é—»ã€‚\n\nâ€œä¿ºä»¬é—»åˆ°äº†äººå‘³ï¼â€å®ƒä»¬é«˜å–Šé“ï¼Œâ€œä¿ºä»¬å—…åˆ°äº†æ–°é²œçš„äººè‚‰ï¼æŠŠé‚£äººå¸¦å‡ºæ¥ï¼Œä¿ºä»¬è¦åƒäº†ä»–â€”â€”çƒ¤äº†ä»–çš„äº”è„å…­è…‘ï¼Œè¿˜æœ‰è„‘ä»ï¼›å¤§åš¼ä»–çš„çœ¼ç ã€è„¸è›‹å’Œå£æ¡ï¼›åäº†ä»–çš„è‚è„ã€è‚¥è‚‰å’Œé˜³ç‰©ï¼æŠŠä»–å¸¦å‡ºæ¥ï¼â€\n\nè¯´è¯é—´ï¼Œæœ‰å‡ ä¸ªå¦–é­”å¼€å§‹æŠŠå’Œå°šæ”¶é›†èµ·æ¥çš„æ®‹æè´¥å¶é«˜é«˜å †èµ·ï¼Œå°†è‡ªå·±ç¼çƒ­çš„å‘¼æ¯å¹åœ¨ä¸Šé¢ï¼Œç›´åˆ°ææ¡å†’çƒŸï¼Œå¼€å§‹ç‡ƒçƒ§ã€‚\n\nâ€œè¦æ˜¯æˆ‘ä¸å‡ºå»å‘¢ï¼Ÿâ€å’Œå°šå–Šé“ã€‚\n\nâ€œé‚£ä¿ºä»¬æ¯å¤©æ—¥è½åéƒ½è¦å›æ¥ï¼Œâ€ä¸€ä¸ªå¦–é­”å•¸é“ï¼Œå®ƒçš„è„‘è¢‹å¥½åƒå‰¥äº†çš®çš„è™è ï¼Œâ€œåµå¾—ä½ ä¸å¾—å®‰ç”Ÿï¼Œç­‰ä¿ºä»¬ä¸è€çƒ¦äº†ï¼Œå°±çƒ§äº†ä½ è¿™åº§å°åº™ï¼Œå†ä»ç°å †ä¸­æ‰’å‡ºä½ ç„¦é»‘çš„å°¸é¦–ï¼Œç”¨ä¿ºä»¬çš„å°–ç‰™æŠŠå®ƒå’¬ç¢ï¼â€\n\nâ€œå¿«æ»šå§ï¼â€å¦ä¸€ä¸ªå¦–é­”åš·é“ï¼Œå®ƒçš„è„¸æ˜¯ä¸ªæººæ¯™çš„æ­»äººï¼Œè‚Œè‚¤å›Šè‚¿ï¼ŒåŒç›®ç™½ä¼¼çç ï¼Œâ€œç¦»å¼€è¿™åœ°æ–¹ï¼Œæ°¸è¿œåˆ«å†å›æ¥ï¼â€\n\nä½†å’Œå°šæ²¡æœ‰è·‘ã€‚ä»–åè€Œèµ°è¿›é™¢å­ï¼Œä»ç«å †ä¸­æ¡èµ·ä¸€æ ¹ç‡ƒçƒ§çš„æ ‘æã€‚â€œæˆ‘ä¸ä¼šç¦»å¼€å¯ºåº™ï¼Œâ€ä»–è¯´ï¼Œâ€œè€Œä¸”æˆ‘å·²ç»åŒå€¦äº†è¿™äº›é¬¼æŠŠæˆã€‚å¥½äº†ï¼Œæ— è®ºä½ æ˜¯ç‹ç‹¸è¿˜æ˜¯ç‹¸çŒ«ï¼Œå°å°è¿™ä¸ªï¼è¿˜æœ‰è¿™ä¸ªï¼â€ä»–è¯´ç€æŒ¥èˆèµ·ç«æ£ã€‚\n\nè½¬çœ¼ä¹‹é—´ï¼Œé‚£ç¾¤å¦–é­”æ‰€ç«™çš„åœ°æ–¹ï¼Œå°±ä»…å‰©ä¸‹ä¸€åªè¡°è€ç—´è‚¥çš„å…¬ç‹¸çŒ«ï¼Œå®ƒè·Œè·Œæ’æ’åœ°å¼€å§‹é€ƒè·‘ã€‚å’Œå°šæŠŠç‡ƒçƒ§çš„æ ‘ææ‰”å‘ç‹¸çŒ«ï¼Œæ‰“ä¸­äº†å®ƒçš„èƒŒï¼Œçƒ§æ‰äº†å®ƒå°¾å·´ä¸Šçš„æ¯›ï¼Œè¿˜çƒ¤ç„¦äº†å®ƒçš„å±è‚¡ã€‚ç‹¸çŒ«å“€åšä¸€å£°ï¼Œæ¶ˆå¤±åœ¨å¤œè‰²ä¹‹ä¸­ã€‚\n\né»æ˜æ—¶åˆ†ï¼Œå’Œå°šåœ¨åŠç¡åŠé†’é—´å¬åˆ°èƒŒåä¼ æ¥ä¸€é˜µä½è¯­ã€‚\n\nâ€œæˆ‘è¦å‘ä½ é“æ­‰ï¼Œâ€è¿™å£°éŸ³è¯´é“ï¼Œâ€œæ˜¯ç‹¸çŒ«å’Œæˆ‘æ‰“äº†ä¸ªèµŒã€‚â€\n\nå’Œå°šæ²‰é»˜ä¸è¯­ã€‚\n\nâ€œç‹¸çŒ«å·²ç»è·‘åˆ°åˆ«çš„è—©å›½å»äº†ï¼Œå®ƒçš„å°¾å·´è¢«çƒ§æ‰äº†ï¼Œé¢œé¢æ‰«åœ°ï¼Œâ€å¥³å­©çš„å£°éŸ³è¯´ï¼Œâ€œå¦‚æœä½ æœ‰æ„çš„è¯ï¼Œæˆ‘ä¹Ÿä¼šç¦»å¼€ã€‚æˆ‘çš„æ´ç©´å°±åœ¨ç€‘å¸ƒä¸Šé¢ï¼Œä¸€æ ªè™¬ç»“è€æ¾æ—è¾¹ã€‚æˆ‘åœ¨é‚£å„¿ä½äº†å¾ˆä¹…ï¼Œç¦»å¼€å®ƒéš¾å…è®©æˆ‘éš¾è¿‡ã€‚â€\n\nâ€œé‚£å°±ç•™ä¸‹å§ï¼Œâ€å’Œå°šè¯´ï¼Œ\n\nâ€œåªè¦ä½ åˆ«å†å’Œæˆ‘è€é‚£äº›æ„šè ¢çš„ç‹æŠ€æ·«å·§ã€‚â€\n\nâ€œå½“ç„¶ï¼Œâ€å¥³å­©çš„ä½è¯­å£°ä»å’Œå°šèº«åä¼ æ¥ï¼Œè¿‡äº†ç‰‡åˆ»ä»–åˆå å…¥æ¢¦ä¹¡ã€‚\n\nåŠä¸ªæ—¶è¾°åï¼Œå’Œå°šå¾å¾é†’è½¬ï¼Œå‘ç°å±‹ä¸­çš„è‰å¸­ä¸Šæœ‰ç‹ç‹¸çš„è„šå°ã€‚å’Œå°šä¸æ—¶èƒ½åœ¨çŸ®æ ‘ä¸›é—´çœ‹åˆ°ç‹ç‹¸ï¼Œå¥¹çš„èº«å½±æ€»ä¼šè®©ä»–ä¼šå¿ƒä¸€ç¬‘ã€‚\n\nä½†å’Œå°šå¹¶ä¸çŸ¥é“ï¼Œç‹ç‹¸å·²ç»æ·±æ·±åœ°çˆ±ä¸Šäº†ä»–ã€‚\n\né‚£æ˜¯åœ¨å¥¹æ¥é“æ­‰æ—¶ï¼Œä¹Ÿè®¸æ›´æ—©äº›ï¼Œæ˜¯åœ¨å’Œå°šå°†å¥¹ä»æ³¥æ³çš„åº­é™¢ä¸­æŒ½è¿›åº™å®‡ï¼Œç”¨ç‚‰ç«å¸®å¥¹çƒ¤å¹²æ—¶ã€‚ä½†æ— è®ºè‡ªä½•æ—¶è€Œèµ·ï¼Œç‹ç‹¸æ— ç–‘æ˜¯çˆ±ä¸Šäº†è¿™åå¹´è½»çš„å’Œå°šã€‚è¿™å°±æ˜¯æ—¥åè¯¸èˆ¬ç¥¸äº‹çš„ç¼˜ç”±ã€‚\n\né‚£å°†æ˜¯ä¸€æ®µå¥‡å¦™çš„æ•…äº‹ï¼Œè®©äººå¿ƒç¢ç¥ä¼¤ã€‚\n\nå½¼æ—¶ï¼Œåœ¨äººé—´è¡Œèµ°ä¹‹ç‰©ï¼Œå¦‚ä»Šæˆ‘ä»¬é²œå°‘è§é—»ã€‚\n\né¬¼é­…ã€å¦–é­”ï¼Œå’Œè¯¸å¤šçµä½“ï¼›å¤§ç¥ã€å°ç¥ï¼Œè¿˜æœ‰å…½ç¥ï¼›å„ç§è§‰è¯†ã€å­˜åœ¨ï¼Œé­‚çµå’Œç”Ÿç‰©ã€‚æœ‰å–„äº¦æœ‰æ¶ã€‚\n\nå¤œé˜‘äººé™ï¼Œæœˆè¿‡ä¸­å¤©ï¼Œç‹ç‹¸æ­£åœ¨å±±è…°æ•çŒã€‚\n\nå¥¹å¿½ç„¶çœ‹åˆ°ï¼Œåœ¨ä¸€æ ªè¢«é›·æ‰“è¿‡çš„æ¾æ ‘æ—ï¼Œæœ‰å‡ ç‚¹è“å…‰é—ªçƒã€‚\n\nå¥¹å‘è¿™äº›å…‰ç‚¹çªœäº†è¿‡å»ï¼Œè¿…ç–¾å¦‚å½±ï¼Œä¸€å°˜ä¸æƒŠã€‚\n\nå½“å¥¹é è¿‘åï¼Œè“å…‰åŒ–ä½œå¥‡å¼‚çš„ç”Ÿçµã€‚å®ƒä»¬éç”Ÿéæ­»ï¼Œæµ‘èº«ä¸Šä¸‹éƒ½è£¹åœ¨é—ªè€€çš„è“è‰²å¦–æ°”ä¸­ã€‚\n\nè¿™äº›ç”Ÿçµæ­£åœ¨ä½å£°ç§è¯­ã€‚\n\nâ€œæˆ‘ä»¬å·²ç„¶é¢†å‘½ï¼Œâ€ä¸ºé¦–çš„è¯´é“ï¼Œè“å…‰åœ¨å®ƒè£¸éœ²çš„è‚Œè‚¤ä¸Šè·ƒåŠ¨ä¸ä¼‘ï¼Œâ€œå’Œå°šæ³¨å®šè¦æ­»ã€‚â€\n\nç‹ç‹¸é©»è¶³æ½œè¸ªï¼Œéšèº«åœ¨ä¸€ä¸›çŒæœ¨ä¹‹åã€‚\n\nâ€œæ­£æ˜¯ï¼Œâ€ç¬¬äºŒä¸ªè¯´é“ï¼Œå®ƒçš„ç‰™é½¿åƒä¸€æŠŠæŠŠé”‹åˆ©çš„å°åˆ€ï¼Œâ€œæˆ‘ä¸»æ˜¯èº«å…·å¤§èƒ½çš„é˜´é˜³å¸ˆï¼Œä»–é€šè¿‡è§‚å¯Ÿæ˜Ÿç›¸é£æ°´ï¼Œå·²ç»çœ‹å‡ºï¼Œåœ¨ä¸‹ä¸€æ¬¡æœˆç›ˆä¹‹æ—¶ï¼Œä»–ä¸å’Œå°šä¹‹é—´ï¼Œæ³¨å®šè¦æ­»ä¸€ä¸ªã€‚å¦‚æœå’Œå°šä¸æ­»ï¼Œé‚£å„è¿å°±è¦è½åœ¨æˆ‘ä¸»å¤´ä¸Šã€‚â€\n\nâ€œä½†ï¼Œä»–æ€å¯èƒ½ä¼šæ­»ï¼Ÿâ€ç¬¬ä¸‰ä¸ªè¯´é“ï¼Œ\n\nè“è‰²ç«å…‰åœ¨å®ƒçš„çœ¼ä¸­å‡è…¾ï¼Œâ€œå˜˜ï¼æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆä¸œè¥¿åœ¨å·å¬æˆ‘ä»¬è¯´è¯ï¼Ÿæˆ‘è§‰å¾—æœ‰äººåœ¨çœ‹æˆ‘ã€‚â€\n\nç‹ç‹¸å±ä½å‘¼å¸ï¼ŒçŸ®èº«è¶´åœ¨åœ°ä¸Šï¼Œé™é™åœ°èººç€ã€‚\n\nè¿™ä¸‰ä¸ªå¦–çµé£ä¸Šå¤©ç©ºï¼Œä¿¯ç°ç€é»‘æš—çš„æ ‘æ—ã€‚\n\nâ€œé™¤äº†åªæ­»ç‹ç‹¸ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚â€ä¸ºé¦–çš„è¯´é“ã€‚\n\nä¸€åªè‹è‡è½åˆ°ç‹ç‹¸çš„é¢å¤´ä¸Šï¼Œæ¼«æ…¢çˆ¬ä¸Šå¥¹çš„é¼»å°–ã€‚\n\nç‹ç‹¸å‹æŠ‘ä½å’¬å®ƒçš„å†²åŠ¨ï¼Œä»æ—§èººåœ¨é‚£é‡Œä¸€åŠ¨ä¸åŠ¨ï¼Œçœ¼ç¥æ¶£æ•£ç©ºèŒ«ï¼Œåƒä¸ªæ­»ç‰©ã€‚\n\nâ€œæˆ‘ä¸»æ‰“ç®—å¦‚æ­¤è¿™èˆ¬ï¼Œâ€ä¸ºé¦–çš„è¯´ï¼Œâ€œè¿ç»­ä¸‰å¤œï¼Œå’Œå°šéƒ½ä¼šå‘å™©æ¢¦ã€‚ç¬¬ä¸€æ™šï¼Œä»–ä¼šæ¢¦è§ä¸€ä¸ªåŒ£å­ã€‚ç¬¬äºŒæ™šï¼Œä»–ä¼šæ¢¦åˆ°ä¸€æšé»‘åŒ™ã€‚ç¬¬ä¸‰æ™šï¼Œä»–ä¼šæ¢¦åˆ°ç”¨é»‘åŒ™æ‹§å¼€åŒ£å­ä¸Šçš„é”ã€‚è¿™æ—¶ï¼Œåœ¨æ¢¦ä¸­ï¼Œä»–å°†æ‰“å¼€åŒ£å­ï¼Œéšå³ä¸§å¤±ä¸ç°ä¸–çš„ä¸€åˆ‡ç¾ç»Šã€‚æ— é£Ÿæ— æ°´ï¼Œæ­»æœŸä¸è¿œä¹Ÿã€‚æˆ‘ä¸»ä¸ä¼šä¸ºä»–çš„æ­»è€Œè´Ÿç–šï¼Œâ€å®ƒåˆç¯é¡¾å››å‘¨ï¼Œâ€œä½ ç¡®å®šæ²¡äººå·å¬å—ï¼Ÿâ€\n\nè‹è‡çˆ¬ä¸Šäº†ç‹ç‹¸çš„çœ¼ç ã€‚å°½ç®¡å¥¹è§‰å¾—å¥‡ç—’éš¾å¿ï¼Œä½†å´ä¸€çœ¨ä¸çœ¨ã€‚\n\nâ€œè°èƒ½å¬è§æˆ‘ä»¬è¯´è¯ï¼Ÿâ€ç¬¬äºŒä¸ªç”Ÿçµé—®é“ï¼Œâ€œç‹ç‹¸çš„å°¸ä½“ï¼Ÿâ€å®ƒè¯´ç€å¤§ç¬‘èµ·æ¥ï¼Œè¿™å£°éŸ³é«˜äº¢è¾½è¿œã€‚\n\nâ€œæœ‰äººå¬è§ä¹Ÿæ— å¦¨ï¼Œâ€ä¸ºé¦–çš„è¯´ï¼Œâ€œå³ä¾¿çœŸæœ‰äººå¬åˆ°ï¼Œè‹¥ä»–æŠŠæˆ‘ä»¬è¿™ç•ªè¯è¯´ç»™æ—äººï¼Œä¸ç­‰ç¬¬ä¸€ä¸ªå­—å‡ºå£ï¼Œä»–çš„å¿ƒå°±ä¼šåœ¨èƒ¸ä¸­çˆ†è£‚ã€‚â€\n\nä¸€è‚¡å†·é£å¹è¿‡å±±é¢ ã€‚ä¸œæ–¹çš„å¤©ç©ºæ³›èµ·é±¼è‚šç™½ã€‚\n\nâ€œä½†å’Œå°šçœŸæ²¡æ³•å­é€ƒè¿‡è¿™ä¸€åŠ«å—ï¼Ÿâ€ç¬¬ä¸‰ä¸ªç”Ÿçµé—®é“ã€‚\n\nâ€œåªæœ‰ä¸€ä¸ªåŠæ³•ï¼Œâ€ç¬¬äºŒä¸ªè¯´ã€‚\n\nç‹ç‹¸å…¨ç¥è´¯æ³¨å€¾å¬ç€æ¥ä¸‹æ¥çš„è¯å¥ï¼Œä½†æ­¤åå†æ— è¯éŸ³ä¼ æ¥ï¼Œå¤šä¸€ä¸ªå­—éƒ½æ²¡æœ‰ã€‚å¥¹åªèƒ½å¬è§å±±é£å·èµ·è½å¶æ—¶çš„ç§è¯­ï¼Œæ ‘æœ¨åœ¨é£ä¸­æ‘‡æ›³åçº³æ—¶çš„å¹æ¯ï¼Œè¿˜æœ‰è¿œå¤„å°åº™ä¸­é£æ‰“é”ºé“ƒå‘å‡ºçš„å®åŸã€‚\n\nç‹ç‹¸åƒä¸€æ®µæ®‹æï¼Œåƒµç›´åœ°èººåœ¨åŸåœ°ã€‚\n\nç›´åˆ°æ—¥ä¸Šä¸‰ç«¿ï¼Œå¥¹æ‰ç”©ç”©å°¾å·´ï¼Œèˆ”è½çˆ¬ä¸Šè„šæŒçš„èš‚èšï¼Œä¸€è·¯è·‘ä¸‹å±±å¡ï¼Œæ¥åˆ°å¥¹çš„æ´ç©´ã€‚\n\nè¿™é‡Œæ¸…å†·é»‘æ¼†ï¼Œå……æ»¡æ³¥åœŸæ°”æ¯ï¼Œæ´ä¸­è—ç€å¥¹æœ€çè´µçš„å®ç‰©ã€‚\n\nç‹ç‹¸æ˜¯åœ¨å‡ å¹´å‰æ‰¾åˆ°å®ƒçš„ã€‚\n\né‚£æ—¶ï¼Œå®ƒç¼ åœ¨ä¸€æ ªå‚å¤©å¤æ ‘çš„æ ¹é¡»ä¸­ã€‚\n\nå¥¹åˆæŒ–åˆå’¬ï¼Œç”¨äº†å‡ å¤©çš„å·¥å¤«ï¼Œæ‰æŠŠå®ƒå®Œå…¨åˆ¨å‡ºåœ°é¢ã€‚\n\nç‹ç‹¸ç”¨ç²‰èˆŒå°†å®ƒèˆ”å‡€ï¼Œç”¨ç»’æ¯›å°†å®ƒç£¨å…‰ï¼Œå¸¦å›äº†è‡ªå·±çš„æ´ç©´ã€‚\n\nåœ¨è¿™é‡Œï¼Œç‹ç‹¸æ•¬å¥‰å®ƒï¼Œä¿å…»å®ƒï¼ŒæŠŠå®ƒè§†ä½œçå®ã€‚\n\nè¿™ä»¶å™¨ç‰©å¤è€éå‡¡ï¼Œæ¥è‡ªé¥è¿œçš„å›½åº¦ã€‚\n\nè¿™æ˜¯ä¸ªé¾™å½¢ç‰é¥°ï¼ŒåŒçœ¼é•¶ç€ç»†å°çº¢çŸ³ã€‚\n\nè¿™ä»¶é¾™é¥°ä¸ºå¥¹å¸¦æ¥å®‰å®ã€‚å®ƒçº¢è‰²çš„çœ¼ç åœ¨æ´ç©´å¾®å…‰ä¸­é—ªçƒï¼Œæ•£å‘å‡ºä¸€è‚¡æš–æ„ã€‚\n\nç‹ç‹¸ç”¨å˜´æ‹¾èµ·å¥¹çš„çå®ï¼Œè½»æŸ”åœ°å¼ç€å®ƒï¼Œå°±åƒå¼ç€ä¸€åªè‡ªå·±çš„å¹¼å´½ã€‚\n\nå¥¹æŠŠç‰é¥°å’¬åœ¨å˜´é‡Œï¼Œèµ°äº†å¾ˆè¿œçš„è·¯ï¼Œæ¥åˆ°ä¸€åº§æµ·è¾¹çš„æ‚¬å´–æ—ã€‚\n\nå¥¹èƒ½å¬åˆ°æµ·é¸¥åœ¨å¤´é¡¶å‘œå«ï¼Œä¹Ÿèƒ½å¬åˆ°èº«ä¸‹çš„å†·æ¶›æ‹æ‰“å²©çŸ³ï¼Œè¿˜èƒ½å—…å‡ºç©ºä¸­é£˜è¡çš„ç›å‘³ã€‚\n\nâ€œè¿™æ˜¯æˆ‘æœ€çè´µçš„å®ç‰©ï¼Œâ€å¥¹æš—è‡ªæƒ³é“ï¼Œâ€œç°åœ¨æˆ‘æŠŠå®ƒçŒ®å‡ºï¼ŒçŒ®ç»™å¤§æµ·ï¼Œåªæ±‚çŸ¥é“å¦‚ä½•æ‹¯æ•‘å’Œå°šçš„æ€§å‘½ã€‚å› ä¸ºå¦‚æœæˆ‘ç½®èº«äº‹å¤–ï¼Œä»–å°±ä¼šæ¢¦åˆ°ä¸€ä¸ªåŒ£å­ï¼Œæ¥ç€æ˜¯ä¸€æšé’¥åŒ™ï¼Œç„¶åæ˜¯ç”¨é’¥åŒ™æ‰“å¼€åŒ£å­ï¼Œæœ€ç»ˆä»–å°†æ­»å»ã€‚â€\n\nç‹ç‹¸ç”¨é¼»å°–å°†ç‰é¥°è½»è½»æ¨è½ï¼Œçœ‹ç€å®ƒåœ¨ç©ºä¸­ç¿»æ»šï¼Œè½ä¸‹ç™¾å°ºé«˜å´–ï¼Œè½å…¥æ³¢æ¶›æ±¹æ¶Œçš„æµ·ä¸­ã€‚\n\nå¥¹è½»å¹ä¸€å£°ï¼Œå› ä¸ºè¿™å°å°çš„é¾™é¥°æ›¾ä¸ºå¥¹çš„æ´ç©´å¸¦æ¥å¹³é™ä¸å®‰å®ã€‚\n\nç‹ç‹¸åˆèµ°äº†å¾ˆè¿œå›åˆ°è‡ªå·±çš„æ´ç©´ï¼Œå¥¹æ„Ÿåˆ°ç–²æƒ«ä¸å ªï¼Œå¾ˆå¿«å°±æ²‰æ²‰ç¡å»ã€‚\n\nä»¥ä¸‹æ˜¯ç‹ç‹¸çš„æ¢¦å¢ƒã€‚\n\nå¥¹ç«™åœ¨ä¸€å¤„è´«ç˜ è’åŸï¼Œåˆ°å¤„éƒ½æ˜¯ç°è¤è‰²çš„å²©çŸ³ï¼Œå¯¸è‰ä¸ç”Ÿã€‚\n\nå¤©ç©ºåŒæ ·æ˜¯ç°è’™è’™çš„ï¼Œæ—¢ä¸æ˜äº®ï¼Œä¹Ÿä¸æ˜æš—ã€‚\n\nåœ¨å¥¹é¢å‰çš„ä¸€å—å·¨çŸ³ä¸Šï¼Œè¹²ç€ä¸€åªç¡•å¤§çš„ç‹ç‹¸ï¼Œä»å¤´è‡³å°¾éƒ½å¦‚å¢¨ç‰æ¼†é»‘ï¼Œåªæœ‰å°¾å°–ä¸Šç”Ÿæœ‰ä¸€ç°‡ç™½æ¯›ï¼Œå¥½åƒåœ¨ç™½æ¼†æ¡¶é‡Œæµ¸è¿‡ä¸€æ ·ã€‚ä»–å¤§æ„ˆçŒ›è™ï¼Œå¤§æ„ˆæˆ˜é©¬ï¼Œå¤§æ„ˆç‹ç‹¸è§è¿‡çš„ä»»ä½•ç”Ÿçµã€‚\n\nä»–è¹²ååœ¨å²©çŸ³ä¸Šï¼Œå¥½åƒåœ¨ç­‰å¾…ç€ä»€ä¹ˆã€‚\n\nä»–çš„åŒçœ¼å°±åƒä¸¤ä¸ªé»‘æ´ï¼Œé¥è¿œçš„æ˜Ÿè¾°åœ¨å…¶ä¸­é—ªçƒã€ç‡ƒçƒ§ã€‚\n\nç‹ç‹¸åœ¨å²©çŸ³é—´è·³è·ƒç©¿æ¢­ï¼Œæ¥åˆ°æ¢¦ä¹‹ç‹çš„é¢å‰ã€‚\n\nå¥¹ä¿¯ä¸‹å»ï¼Œç¿»è¿‡èº«ï¼Œå°†è‡ªå·±çš„å–‰å’™æ˜¾éœ²ç»™ä»–ã€‚\n\nèµ·èº«ï¼Œå·¨ç‹è¯´é“ã€‚èµ·èº«ï¼Œè«æ€•ã€‚ä½ ä¸ºæ¢¦åˆ°æ­¤æ¢¦ï¼Œå·²ä»˜å‡ºè‰¯å¤šã€‚\n\nç‹ç‹¸ç«™äº†èµ·æ¥ã€‚å°½ç®¡å¥¹çš„ææƒ§è¶…è¿‡äº†ä»»ä½•å°ç‹ç‹¸çš„ç»å†ï¼Œä½†åœ¨æ¢¦ä¸­ï¼Œå¥¹æ²¡æœ‰é¢¤æŠ–ã€‚\n\nâ€œæˆ‘çš„é¾™ï¼Œâ€å¥¹é—®ï¼Œâ€œæ˜¯å±äºæ‚¨çš„å—ï¼Œé™›ä¸‹ï¼Ÿâ€\n\nä¸ï¼Œä»–è¯´ã€‚ä½†å®ƒæ˜¯ä¸€ä½æˆ‘ç§°ä¹‹ä¸ºå‹çš„æ•…äººï¼Œåœ¨å¾ˆä¹…å¾ˆä¹…ä»¥å‰é—å¤±çš„ã€‚é‚£è¿˜æ˜¯åœ¨çœŸé¾™ç¦»å¼€å°˜ä¸–ï¼Œç¿±ç¿”å¤©å®‡ä¹‹å‰ã€‚æˆ‘å‹å¼„ä¸¢äº†è¿™ä»¶å®ç‰©ï¼Œæ•´å¤©å¿§å¿ƒä»²ä»²ã€‚\n\nç°åœ¨å¤§æµ·å°†ç‰é¥°å†²è¿˜ç»™ä»–ï¼Œä»–å°†åœ¨å·¨æ¸Šä¹‹åº•ï¼Œä»–çš„æ—å…¶ä¹‹ä¸­ï¼Œç¡å¾—æ›´åŠ å®‰ç¨³ï¼Œç›´åˆ°ä¸‹ä¸ªçºªå…ƒæ¥ä¸´ã€‚\n\nâ€œæœ‰å¹¸ä¸ºå°Šå‹æ•ˆåŠ³ï¼Œå®ä¹ƒæ— ä¸Šè£å…‰ï¼Œâ€ç‹ç‹¸è¯´ã€‚\n\nå°ç‹ç‹¸å’Œé»‘å·¨ç‹ï¼Œåœ¨æ¢¦ç–†ä¸­é™é™åœ°çŸ—ç«‹äº†å‡ ç¬ã€‚\n\nå°ç‹ç‹¸çœ‹äº†çœ‹å››å‘¨çš„å²©çŸ³è’åŸã€‚\n\nâ€œé‚£äº›æ˜¯ä»€ä¹ˆåŠ¨ç‰©ï¼Ÿâ€å¥¹é—®é“ã€‚\n\né‚£ç¾¤åŠ¨ç‰©ä½“å‹å¦‚ç‹®ï¼Œæ­£åœ¨å²©çŸ³ä¸Šçˆ¬è¡Œï¼Œå°†å®ƒä»¬çš„é•¿é¼»å­æ·±è¿›è´«ç˜ çš„åœŸåœ°å—…æ¢ã€‚\n\nåå­—æ˜¯è²˜ï¼Œå·¨ç‹è¯´ã€‚å®ƒä»¬æ˜¯é£Ÿæ¢¦å…½ã€‚\n\nå°ç‹ç‹¸å¬è¯´è¿‡è²˜ã€‚\n\nå¦‚æœä¸€ä¸ªäººä»è•´è—æ¶å…†æˆ–æ˜¯ææ€–ä¹‹ç‰©çš„æ¢¦ä¸­é†’æ¥ï¼Œä»–å¯ä»¥å°è¯•å”¤æ¥è²˜ï¼Œå¯„å¸Œæœ›äºè¿™ç§å¹»å…½ä¼šåƒæ‰è¿·æ¢¦ï¼Œå°†å®ƒå’Œå®ƒæ‰€å½°æ˜¾çš„å¾å…†ä¸€èµ·å¸¦èµ°ã€‚\n\nå¥¹æ³¨è§†ç€åœ¨æ¢¦ç–†çš„å²©çŸ³è’é‡ä¸Šæ¸¸èµ°çš„è²˜ã€‚\n\nâ€œå¦‚æœæœ‰äººèƒ½åœ¨è²˜åƒæ‰ä¸€ä¸ªæ¢¦ä¹‹åå°†å®ƒæŠ“ä½ï¼Œâ€ç‹ç‹¸é—®ï¼Œâ€œé‚£ä¼šæ€æ ·ï¼Ÿâ€\n\nå·¨ç‹ä¸€æ—¶æ— è¯­ã€‚è¿œæ˜Ÿåœ¨å®ƒç©ºèŒ«çš„çœ¼çœ¸ä¸­é—ªçƒã€‚\n\nè²˜å¾ˆéš¾æ‰ï¼Œæ›´éš¾æ§åˆ¶ã€‚å®ƒä»¬æ˜¯çµå·§çŸ«æ·çš„åŠ¨ç‰©ã€‚\n\nâ€œæˆ‘æ˜¯åªç‹ç‹¸ï¼Œâ€å¥¹è°¦å‘åœ°è¯´é“ï¼Œä¸€ç‚¹æ²¡æœ‰å¹å˜˜çš„æ„æ€ï¼Œâ€œæˆ‘ä¹Ÿæ˜¯çµå·§çš„åŠ¨ç‰©ã€‚â€\n\nå·¨ç‹ç‚¹ç‚¹å¤´ï¼Œå‚çœ¼æœ›å‘å¥¹ã€‚\n\nç‹ç‹¸è§‰å¾—ä»–èƒ½å°†è‡ªå·±çœ‹é€ï¼Œèƒ½çœ‹åˆ°å¥¹æ‰€æœ‰çš„æ¢¦å¢ƒã€æœŸå†€å’Œæ„Ÿæ€€ã€‚\n\nä»–åªæ˜¯ä¸ªäººï¼Œå·¨ç‹è¯´ï¼Œè€Œä½ æ˜¯å­¤ç‹¸ã€‚è¿™ç§äº‹å°‘æœ‰å–„ç»ˆã€‚\n\nç‹ç‹¸æœ¬æƒ³æ•å¼€å¿ƒæ‰‰ï¼Œå‘Šè¯‰ä»–è‡ªå·±çš„æƒ³æ³•ã€‚\n\nä½†å·¨ç‹ä¸€ç”©é•¿å°¾ï¼Œä»å²©çŸ³ä¸Šè·³åˆ°ä¸‹é¢çš„è’åŸã€‚\n\nåœ¨å°ç‹ç‹¸çœ¼ä¸­ï¼Œä»–æ„ˆé•¿æ„ˆå¤§ï¼Œç›´åˆ°å……æ–¥å¤©å®‡ã€‚\n\næ­¤åˆ»ï¼Œå·¨ç‹ä¾¿æ˜¯è¿™å¤œï¼Œæ˜Ÿè¾°åœ¨ä»–çš„é»‘ç‰çš®æ¯›ä¸Šé—ªçƒï¼Œç™½è‰²çš„å°¾å°–å˜æˆäº†ä¸€è½®æ®‹æœˆï¼ŒæŒ‚åœ¨å¤œç©ºä¹‹ä¸­ã€‚\n\nâ€œæˆ‘å¾ˆçµå·§ï¼Œâ€å°ç‹ç‹¸å¯¹å¤œè¯´ï¼Œâ€œæˆ‘ä¼šé¼“èµ·å‹‡æ°”ï¼Œä¼šä¸ºä»–è€Œæ­»ã€‚â€\n\nç‹ç‹¸è§‰å¾—å¤´é¡¶ä¼ æ¥ä¸€å¥å‡ è¿‘æ¸©æŸ”çš„è¯è¯­ã€‚é‚£å°±å»æ•å®ƒçš„æ¢¦å§ï¼Œå­©å­ï¼æ¥ç€ï¼Œä»–è½¬é†’è¿‡æ¥ã€‚åˆåè‰³é˜³åƒä¸ªç†”é‡‘å…‰çƒï¼Œæ“¦äº®äº†æ•´ä¸ªä¸–ç•Œã€‚\n\nç‹ç‹¸é’»è¿›æ ‘ä¸›ï¼Œæœå°åº™èµ°å»ï¼Œåªåœ¨æºªæ°´æ—åœç•™äº†ç‰‡åˆ»ï¼Œä¸‰å£ä¸¤å£ä¾¿è¿çš®å¸¦éª¨åä¸‹ä¸€åªå¤§é’è›™ã€‚\n\nç„¶åå¥¹åˆå¦‚é¥¥ä»¥æ¸´åœ°èˆ”é¥®äº†äº›æ¸…å‡‰æ´å‡€çš„å±±æ³‰ã€‚\n\nå½“å¥¹æ¥åˆ°å°åº™æ—¶ï¼Œå’Œå°šæ­£åœ¨ä¸ºä»–çš„ç«ç‚‰ç åŠˆæŸ´ã€‚\n\nå’Œå°šçš„æ–§å­å¾ˆå¿«ï¼Œæ‰€ä»¥å°ç‹ç‹¸å’Œä»–ä¿æŒç€é€‚å½“çš„è·ç¦»ï¼Œå¼€å£è¯´é“ï¼šâ€œæ„¿ä½ è¿™å‡ å¤©éƒ½æœ‰ç¾æ¢¦ï¼Œæ¢¦åˆ°å‰å…†å’Œå¥½è¿ã€‚â€\n\nå’Œå°šå†²ç‹ç‹¸ç¬‘ç¬‘ã€‚â€œå¤šè°¢ä½ çš„ç¥ç¦ï¼Œâ€ä»–è¯´ï¼Œâ€œä½†æˆ‘å¯è¯´ä¸æ¸…è‡ªå·±èƒ½ä¸èƒ½æ¢¦åˆ°å‰å…†ã€‚â€\n\nç‹ç‹¸ç”¨å¥¹çš„ç»¿çœ¸å‡è§†ç€å’Œå°šã€‚â€œè¦æ˜¯ä½ éœ€è¦æˆ‘çš„è¯ï¼Œâ€å¥¹æœ€åè¯´é“ï¼Œâ€œæˆ‘å°±åœ¨é™„è¿‘ã€‚â€\n\nå¹´è½»çš„å’Œå°šä»åŠˆæŸ´å †ä¸ŠæŠ¬èµ·ç›®å…‰ï¼Œä½†ç‹ç‹¸å·²ç»æ‚„ç„¶æ— è¸ªã€‚\n\nå°åŸä½äºé¥è¿œçš„è¥¿å—æ–¹ï¼Œé˜´é˜³å¸ˆçš„å®…é‚¸å°±åœ¨æ­¤é—´ã€‚\n\nä»–ååœ¨å®¶ä¸­ï¼Œç‡ƒèµ·å‡ æ¡ˆä¸Šçš„æ²¹ç¯ã€‚æ¡Œé¢é“ºäº†ä¸€æ–¹å½©ç»˜ä¸å·¾ï¼Œä¸Šé¢æ‘†ç€ä¸€ä¸ªæ¼†åŒ£å’Œä¸€æšé»‘æœ¨é’¥åŒ™ã€‚\n\näº”ä¸ªå°ç£ç›˜ï¼ŒæŒ‰ç…§ä¸œè¥¿å—åŒ—ä¸­äº”æ–¹åŸºä½ç å¥½ã€‚\n\nå…¶ä¸­ä¸‰ä¸ªæ”¾ä¸ªæŸç§ç²‰æœ«ï¼Œå¦ä¸€ä¸ªç››æœ‰ä¸€æ»´æ¶²ç ï¼Œæœ€åçš„ç¢Ÿå­åˆ™ç©ºæ— ä¸€ç‰©ã€‚\n\né˜´é˜³å¸ˆä½é«˜æƒé‡ï¼Œå¯Œå¯æ•Œå›½ã€‚è¯·ä»–å åœæˆ–æ˜¯æ±‚ä»–å¸®å¿™çš„äººç»œç»ä¸ç»ã€‚å¾ˆå¤šè—©å›½çš„å¤§åéƒ½åšä¿¡ï¼Œæ˜¯é˜´é˜³å¸ˆçš„å½±å“åŠ›å’Œç®—æœ¯è®©è‡ªå·±è·å¾—äº†å¦‚ä»Šçš„è´¢å¯Œä¸æƒåŠ¿ï¼Œå°†ä»–æ•¬è‹¥ä¸Šå®¾ã€‚å°±è¿å¤§ç›¸å›½å’Œå·¦å³å¤§è‡£éƒ½å¯¹ä»–è¨€å¬è®¡ä»ã€‚\n\nä½†é˜´é˜³å¸ˆä¸æ˜¯ä¸ªå¿«ä¹çš„äººã€‚\n\né˜´é˜³å¸ˆæœ‰ä½å¦»å­ï¼Œå°±ä½åœ¨åº­é™¢çš„åŒ—å¢ã€‚å¥¹å¯è°“è´¤è‰¯æ·‘å¾·ï¼Œå¯¹é˜´é˜³å¸ˆç™¾ä¾ç™¾é¡ºï¼ŒæŠŠå®¶ä¸­å¤§å¤§å°å°çš„äº‹åŠ¡éƒ½æ‰“ç†å¾—å¾ˆå¥½ã€‚\n\né˜´é˜³å¸ˆè¿˜æœ‰ä¸ªåˆšæ»¡åä¸ƒå²çš„å°å¦„ï¼Œå¥¹ç¾è²Œç»ä¼¦ï¼ŒåŒå”‡è‰³è‹¥æ¡ƒæï¼Œè‚Œè‚¤ç™½èƒœå‡è„‚ã€‚ä»–çš„å¦»å­å’Œå°å¦¾åŒä½åœ¨ä¸€ä¸ªå±‹æªä¸‹ï¼Œå´ç›¸æ•¬å¦‚å®¾ï¼Œä»ä¸äº‰åµã€‚ä½†é˜´é˜³å¸ˆä¸æ˜¯ä¸ªå¿«ä¹çš„äººã€‚\n\näººä»¬éƒ½è¯´ä»–æ‰€ä½çš„å®…é™¢åç¾æ¢å®ï¼Œåœ¨äº¬åŸé‡Œå¯æ’ç¬¬åä¸ƒä½ã€‚\n\nå¦–é¬¼å’Œå¤©ç‹—ï¼Œè¿™äº›é£ç•Œçš„ç²¾æ€ªï¼Œéƒ½éµä»ä»–çš„å·ä»¤ï¼Œä»»ä»–å·®é£ã€‚é˜´é˜³å¸ˆèƒ½è®°èµ·å‰ä¸¤ä¸–çš„ç»å†ã€‚\n\nå½“ä»–è¿˜æ˜¯ä¸ªå¹´è½»äººæ—¶ï¼Œå°±ä¸è¿œä¸‡é‡Œåˆ°ä¸­å›½å»ä¿®è¡Œã€‚\n\nä»–å›æ¥åé¡»å‘çš†ç°ï¼Œä½†æ»¡è…¹é˜´é˜³ä¹‹æœ¯å·²æ— äººèƒ½åŠã€‚\n\nä»–è¢«é«˜ä½è€…æ•¬é‡ï¼Œè¢«ä¸‹ä½è€…æƒ§æ€•ã€‚\n\nä½†å°½ç®¡å¦‚æ­¤ï¼Œé˜´é˜³å¸ˆä¸æ˜¯ä¸ªå¿«ä¹çš„äººã€‚\n\nè¿™çš†å› ä¸ºä»–å­˜ææƒ§ã€‚\n\nä»ä»–è¿˜æ˜¯ä¸ªé»„æ¯›å°å„¿ï¼Œåˆšèƒ½è®°äº‹æ—¶èµ·ï¼Œå°±å¿ƒå­˜ææƒ§ã€‚\n\nä»–æ‰€å­¦çš„æ¯æ ·æœ¬é¢†ï¼Œæ‰€è·å¾—çš„æ¯åˆ†åŠ›é‡ï¼Œéƒ½æ˜¯å› ä¸ºæƒ³ç”¨æ¥èµ¶èµ°ææƒ§ã€‚ä½†ææƒ§ä¾ç„¶ï¼Œé™„åœ¨ä»–èƒŒåï¼Œè—åœ¨ä»–å¿ƒé‡Œã€‚å…¥ç¡æ—¶ï¼Œææƒ§ä¼´ä»–è€Œçœ ï¼šé†’æ¥åï¼Œææƒ§æ­£ç­‰ç€å‘ä»–è¯·å®‰ã€‚\n\næ— è®ºåœ¨é¥®é…’æ—¶ï¼Œæ²æµ´æ—¶ï¼Œè¿˜æ˜¯åŒæˆ¿æ—¶ï¼Œææƒ§éƒ½å¦‚å½±éšå½¢ï¼Œä¸ç¦»ä¸å¼ƒã€‚\n\nè¿™ææƒ§å¹¶éå¯¹æ­»äº¡çš„æƒ§æ€•ï¼Œå› ä¸ºåœ¨ä»–å¿ƒä¸­ï¼Œæ­»äº¡ä¹Ÿè®¸æ­£æ˜¯è§£è„±ã€‚ä»–è¿‡å»ä¹Ÿæ›¾åŠ¨è¿‡è¿™æ ·çš„å¿µå¤´ï¼šè‹¥æ˜¯å‡­å€Ÿæ³•æœ¯å± å°½è¿™ä¸–ä¸Šçš„ç”·å¥³è€å°‘ï¼Œä¹Ÿè®¸èƒ½å¾—ä»¥å®‰å®ï¼šä½†ä»–è¿˜æ˜¯è§‰å¾—ï¼Œå³ä½¿ç»ä¸–å­¤ç«‹ï¼Œææƒ§ä»è¦çº ç¼ åœ¨ä»–å¿ƒå¤´ã€‚\n\næ˜¯ææƒ§åœ¨é©±ä½¿ä»–ï¼Œæ˜¯ææƒ§å°†ä»–æ¨è¿›é»‘æš—ä¹‹ä¸­ã€‚\n\né˜´é˜³å¸ˆæ›¾å‘è’å†¢ç§½çµæ±‚æ•™ï¼Œä¹Ÿæ›¾åœ¨æ™¨æ˜ä¹‹é™…ä¸ç•¸å½¢çš„æ€ªç‰©ç›¸ä¼šï¼Œéšå®ƒä»¬çš„æ­¥è°ƒèµ·èˆï¼Œåˆ†é£Ÿå®ƒä»¬çš„é£¨å¸­ã€‚\n\näº¬åŸçš„éƒŠå¤–ï¼Œè´±æ°‘é›†èšï¼Œç›—åŒªæ¨ªè¡Œã€‚\n\né˜´é˜³å¸ˆåœ¨æ­¤å¤„ç½®æœ‰ä¸€å¤„åºŸå®…ï¼Œé‡Œé¢ä½ç€ä¸‰ä¸ªå¥³äººï¼šä¸€åå¹´è€ï¼Œä¸€åå¹´è½»ï¼Œè¿˜æœ‰ä¸€åæ—¢ä¸å¹´è€ä¹Ÿä¸å¹´è½»ã€‚\n\nå¥¹ä»¬å¹³æ—¶é å‘èµ°éœ‰è¿çš„æ‘å¦‡å‡ºå”®è¯è‰ä¸ºç”Ÿã€‚\n\nä¹¡é‡ä¼ è¨€è¯´ï¼Œé‚£äº›æ™šä¸Šåœ¨æ­¤é—´å€Ÿå®¿çš„æ— çŸ¥æ—…äººï¼Œæ—¥åéƒ½æ— äººå¾—è§ã€‚\n\nå¯æƒ³è€ŒçŸ¥ï¼Œè°ä¹Ÿä¸çŸ¥é“é˜´é˜³å¸ˆå’Œè¿™ä¸‰ä¸ªå¥³äººçš„ç“œè‘›ï¼Œæ›´ä¸ä¼šçŸ¥é“åœ¨é‚£äº›æœˆé»‘é£é«˜çš„å¤œæ™šï¼Œä»–å¸¸é€ è®¿æ­¤åœ°ã€‚\n\nä»é˜´é˜³å¸ˆçš„å¿ƒåº•æ¥çœ‹ï¼Œä»–å¹¶éå¥¸ä»»æ¶äººã€‚\n\nä»–åªæ˜¯è¢«å“åäº†ã€‚ææƒ§å¸¦èµ°äº†å¹¸ç¦ä¸éª„å‚²å¸¦æ¥çš„æ¯ä¸å¿«ä¹ï¼Œå®å°½äº†ç”Ÿå‘½ä¸­çš„æ¬¢æ„‰ã€‚\n\næ•…äº‹å‘ç”Ÿçš„å‡ æ—¬å‰ã€‚ä¸€å¤œï¼Œæœˆæ­£é»‘æ²‰ï¼Œé˜´é˜³å¸ˆæ¥åˆ°åºŸå®…ï¼Œå‘ä¸‰ä¸ªå¥³äººè®¨æ•™æœ€è®©ä»–çƒ¦æ‰°çš„é—®é¢˜ã€‚\n\nå¯’é£å¹è¿›ç ´çª—ï¼Œåœ¨æ®‹æŸçš„å±‹æªé—´å‘¼å•¸ã€‚\n\nâ€œæˆ‘å¦‚ä½•èƒ½æ‰¾åˆ°å®‰å®ï¼Ÿâ€ä»–å‘æœ€è€çš„å¥³äººå‘é—®ã€‚\n\nâ€œå†¢ä¸­è‡ªæœ‰å®‰å®ï¼Œâ€å¥¹è¯´é“ï¼Œâ€œæ¬£èµæ—¥è½ç¾æ™¯æ—¶ï¼Œä¹Ÿæœ‰ç‰‡åˆ»å¿ƒå®‰ã€‚â€\n\nå¥¹èµ¤èº«è£¸ä½“ï¼Œä¹³æˆ¿åƒä¸¤ä¸ªç©ºå£è¢‹ä¸€æ ·å‚åœ¨èƒ¸å‰ï¼Œè„¸ä¸Šç»˜ç€å¦–é­”çš„é¢å®¹ã€‚\n\né˜´é˜³å¸ˆçœ‰å¤´ç´§é”ï¼Œæ»¡é¢æ€’å®¹ï¼Œç„¦èºä¸å®‰åœ°åœ¨æŒä¸­æ•²æ‰“ç€æŠ˜æ‰‡ã€‚\n\nâ€œä¸ºä½•æˆ‘æ€»ä¸å¾—å®‰å®ï¼Ÿâ€ä»–å‘æœ€å°çš„å¥³äººå‘é—®ã€‚\n\nâ€œå› ä¸ºä½ è¿˜æ´»ç€ï¼Œâ€è¯å¥è‡ªå¥¹å†°å†·çš„åŒå”‡åå‡ºã€‚\n\nä¸‰ä¸ªäººä¸­ï¼Œä»–æœ€æ€•è¿™å°‘å¥³ï¼Œå› ä¸ºé˜´é˜³å¸ˆè§‰å¾—å¥¹æ˜¯ä¸ªæ­»ç‰©ã€‚\n\nå°‘å¥³å¾ˆç¾ï¼Œä½†å´å¯’è‹¥éœœé›ªã€‚æ¯æ¬¡å¥¹ç”¨å†°å†·çš„æ‰‹æŒ‡ç¢°è§¦é˜´é˜³å¸ˆæ—¶ï¼Œéƒ½ä¼šè®©ä»–é¢¤æ —ã€‚\n\nâ€œæˆ‘åœ¨å“ªèƒ½æ‰¾åˆ°å®‰å®ï¼Ÿâ€ä»–å‘ä¸­å¹´å¥³å­å‘é—®ã€‚\n\nå¥¹å¹¶æœªèµ¤èº«ï¼Œä½†è¡£è¢å®½è§£ï¼Œèƒ¸å‰æŒºç€ä¸¤æ’ä¹³æˆ¿ï¼Œå¦‚åŒæ¯çŒªé›Œé¼ ï¼Œä¹³å¤´é»‘ç¡¬åƒå—å—ç‚­çŸ³ã€‚\n\nå¥¹è‡ªé½¿é—´æ·±å¸ä¸€å£æ°”ï¼Œå±æ¯å‡ç¥ï¼Œè®¸ä¹…ä¹‹åæ‰æ…¢æ…¢åå‡ºã€‚\n\næ¥ç€å¥³äººè¯´é“ï¼šâ€œä¸œåŒ—æ–¹çš„ç¾æµ“ï¼Œä»è¿™å„¿èµ°è¦ç”¨å¾ˆå¤šå¾ˆå¤šå¤©ã€‚é‚£é‡Œçš„æŸåº§å±±ä¸Šæœ‰ä¸ªå¯ºï¼Œåº™å°åœ°åé²œæœ‰äººçŸ¥ï¼Œåªæœ‰ä¸€ä¸ªå’Œå°šåœ¨æ‰“ç†ç…§çœ‹ã€‚ä»–ç”Ÿæ¥æ— æ‰€ç•æƒ§ï¼Œè‡ªæœ‰ä½ æ¸´æœ›çš„å®‰å®ã€‚ç°åœ¨æˆ‘å¯ä»¥ç»‡æˆä¸€æ–¹ä¸å·¾ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œç­‰ä»–æ­»åä½ å°±èƒ½å¾—åˆ°ä»–çš„åŠ›é‡ï¼Œå†ä¹Ÿæ— é¡»ç•æƒ§ã€‚ä½†è‡ªæˆ‘ç»‡å°±æ—¶ç®—èµ·ï¼Œåˆ°ä¸‹ä¸€æ¬¡æœˆç›ˆä¹‹å‰ï¼Œä½ å¿…é¡»å°†å’Œå°šç½®äºæ­»æ•Œã€‚è€Œä¸”ä»–ä¸èƒ½æ­»äºåˆ€å‰‘è¡€å…‰ï¼Œä¹Ÿä¸èƒ½æœ‰ä¸æ¯«ç—›æ¥šï¼Œå¦åˆ™ç»‡å·¾å°±ä¼šå¤±æ•ˆã€‚â€\n\né˜´é˜³å¸ˆæ»¡è¶³åœ°å’•å“ä¸€å£°ï¼Œäº²æ‰‹å–‚å¥¹åƒäº†å‡ ä»¶ç²¾è‡´ç¾é£Ÿï¼ŒæŠšæ‘¸ç€å¥¹çš„é•¿å‘ï¼Œå‘Šè¯‰å¥¹å¦‚æ­¤å®‰æ’ä»–å¾ˆæ»¡æ„ã€‚\n\nä¸‰ä¸ªå¥³äººé€€åˆ°è¿™åº§å€¾é¢“å±‹èˆçš„å¦ä¸€ä¸ªæˆ¿é—´ï¼Œå¥¹ä»¬å›æ¥æ—¶å·²æ˜¯æ™¨æ›¦å°†è‡³ï¼Œå¤©ç©ºå¼€å§‹æ”¾äº®ã€‚\n\nå¥¹ä»¬ç»™äº†é˜´é˜³å¸ˆä¸€æ–¹ç™½å¦‚æœˆå…‰çš„ä¸å¸•ã€‚\n\né‚£ä¸Šé¢ç»˜ç€é˜´é˜³å¸ˆå’Œæœˆäº®ï¼Œè¿˜æœ‰é‚£åå¹´è½»çš„åƒ§äººã€‚\n\né˜´é˜³å¸ˆç‚¹ç‚¹å¤´ï¼Œæ„Ÿåˆ°å¿ƒæ»¡æ„è¶³ã€‚ä»–æœ¬è¦å‘å¥³äººä»¬é“è°¢ï¼Œä½†å´æ˜ç™½å‡¡äººå†³ä¸èƒ½å‘è¿™ç­‰ç”Ÿçµè‡´è°¢ï¼Œæ‰€ä»¥ä»–åªæ˜¯å°†æŠ¥é…¬æ”¾åœ¨æˆ¿å­çš„è‰å¸­ä¸Šï¼Œåœ¨æ‹‚æ™“å‰å¿«æ­¥èµ¶å›å®¶ä¸­ã€‚\n\nä»–é€šæ™“å¾ˆå¤šæ€äººåƒé‡Œçš„æ³•é—¨ï¼Œä½†å…¶ä¸­å¤§éƒ¨åˆ†è™½è¯´å¹¶ä¸ç›´æ¥æ¶‰åŠåˆ€å…µè¡€ç¾ï¼Œå´ä¹Ÿå¿…ä¼šå¸¦æ¥è‹¦æ¥šã€‚\n\né˜´é˜³å¸ˆæŸ¥é˜…äº†ä»–çš„å·å®—ï¼Œæ¥ç€å·®é£æ‰‹ä¸‹é­”ç‰©åˆ°å’Œå°šæ‰€ä½çš„å±±ä¸­ï¼Œä¸ºä»–å–æ¥å’Œå°šç¢°è¿‡çš„å™¨ç‰©ã€‚\n\nï¼ˆç‹ç‹¸å°±æ˜¯åœ¨é‚£æ—¶å¬åˆ°äº†å®ƒä»¬çš„è°ˆè¯ã€‚ï¼‰è€Œæ­¤æ—¶æ­¤åˆ»ï¼Œé˜´é˜³å¸ˆååœ¨å‡ æ¡ˆå‰ï¼Œæ²¹ç¯ã€æ¼†åŒ£å’Œé’¥åŒ™å°±æ‘†åœ¨ä¸Šé¢ã€‚\n\nä¸€ä¸ªæ¥ç€ä¸€ä¸ªï¼Œä»–æŠŠäº”ä¸ªç£ç›˜ä¸­çš„ä¸œè¥¿ä¸€æ’®æ’®åŠ åˆ°ç¯ç«ä¸Šã€‚\n\nè¿™äº›ç£ç›˜ç››ç€çš„ç‰©äº‹éƒ½ä¸ç›¸åŒã€‚\n\næœ€ååŠ å…¥çš„æ˜¯é­”ç‰©ä»å’Œå°šèº«ä¸Šå·æ¥çš„ä¸œè¥¿ï¼šå®ƒå°±ç››åœ¨é‚£ç©ºæ— ä¸€ç‰©çš„ç¢Ÿå­é‡Œâ€”â€”é­”ç‰©å·æ¥çš„ï¼Œæ˜¯å’Œå°šçš„ä¸€ç‰‡å½±å­ã€‚\n\né˜´é˜³å¸ˆæ¯åœ¨ç¯ç«ä¸­åŠ ä¸Šä¸€æ’®ï¼Œå®ƒå°±ç‡ƒçƒ§åœ°æ›´é«˜æ›´äº®ï¼›å½“ä»–æŠŠæœ€åä¸€ç‚¹å’Œå°šçš„å½±å­åŠ è¿›å»æ—¶ï¼Œç„°ç«å‡è…¾ï¼Œå…‰äº®å……ç›ˆç€æ•´ä¸ªæˆ¿é—´ã€‚ç‰‡åˆ»ä¹‹åï¼Œç«å…‰è¤ªå»ï¼Œå±‹é‡Œåªå‰©é»‘æš—ã€‚\n\né˜´é˜³å¸ˆç‚¹èµ·ç¯ï¼Œæ¬£å–œåœ°çœ‹åˆ°é“ºåœ¨æ¡Œä¸Šçš„æ–¹å·¾å¤šäº†ä¸€å—éš¾çœ‹çš„æ±¡ç‚¹ï¼Œå°±åƒæŸç§æ­»ç‰©è¶´åœ¨å¹´è½»å’Œå°šçš„è„¸ä¸Šã€‚\n\nä»–æ»¡æ„åœ°è§‚èµç‰‡åˆ»ï¼Œéšå³èµ°å›åºŠæ¦»ï¼Œå®‰ç¨³åœ°ç¡äº†ä¸€å¤œï¼Œæ²¡æœ‰ææƒ§ã€‚è¿™ä¸€æ™šï¼Œä»–å¾ˆæ»¡è¶³ã€‚\n\næ˜¯å¤œï¼Œåœ¨æ¢¦ä¸­ï¼Œå’Œå°šç«™åœ¨ä»–çˆ¶äº²çš„å®…é‚¸é‡Œã€‚\n\nè¿™ä¼¼ä¹è¿˜æ˜¯åœ¨ä»–çˆ¶äº²è·ç½ªå¤±åŠ¿ï¼Œä¸¢æ‰è¿™å®…é‚¸å’Œæ‰€æœ‰è´¢ç‰©ä¹‹å‰â€”â€”ä»–çš„çˆ¶äº²æœ‰å¾ˆå¤šä½é«˜æƒé‡çš„æ•Œäººã€‚\n\nçˆ¶äº²å‘ä»–æ·±æ·±ä¸€èº¬ã€‚\n\nåœ¨æ¢¦é‡Œï¼Œå’Œå°šè®°èµ·çˆ¶äº²æ—©å·³è‡ªå°½èº«äº¡ï¼ŒåŒæ ·ä¹Ÿè®°å¾—è‡ªå·±å°šåœ¨äººä¸–ã€‚\n\nå’Œå°šè¯•å›¾æŠŠè¿™äº›éƒ½å‘Šè¯‰çˆ¶äº²ï¼Œ\n\nä½†ä»–çˆ¶äº²å´æ— è¨€åœ°ç¤ºæ„è‡ªå·±å¬ä¸åˆ°å„¿å­å¯¹ä»–è¯´å¾—ä»»ä½•è¨€è¯­ã€‚\n\næ¥ç€ï¼Œä»–ä»è¢æœä¸­å–å‡ºä¸€ä¸ªå°æ¼†ç›’ï¼Œé€’ç»™è‡ªå·±çš„å„¿å­ã€‚\n\nå’Œå°šæ¥è¿‡å½©é¥°æ¼†åŒ£åï¼Œçˆ¶äº²å·²ç»æ¶ˆå¤±ä¸è§ã€‚\n\nä½†ä»–æ²¡æœ‰å¤šæƒ³ï¼Œå› ä¸ºè¿™æ¼†åŒ£å æ®äº†ä»–çš„å…¨å‰¯å¿ƒç¥ï¼ˆä¸è¿‡ï¼Œåœ¨æ¢¦ä¸­ï¼Œä»–ä¼¼ä¹ç¥è§ä¸€æ‰‡æ•å¼€çš„æˆ¿é—¨åé¢ç‹å°¾ä¸€é—ªï¼‰ã€‚\n\nä»–çŸ¥é“ç›’å­é‡Œæœ‰äº›é‡è¦çš„ä¸œè¥¿ï¼Œä¸€äº›ä»–å¿…é¡»è¦çœ‹çš„å¯¹è±¡ã€‚\n\nä½†ä»–æƒ³å°½åŠæ³•ï¼Œä¹Ÿæ‰“ä¸å¼€è¿™åŒ£å­ï¼šè¶Šæ˜¯åŠªåŠ›ï¼Œå°±è¶Šæ„ŸæŒ«è´¥ã€‚\n\nå’Œå°šé†’æ¥æ—¶ï¼Œè§‰å¾—å¿ƒç»ªçƒ¦ä¹±æƒ´æƒ´ä¸å®‰ï¼Œä¸ç¦æ£æµ‹è¿™æ¢¦å¢ƒæ˜¯ä¸æ˜¯æŸç§é¢„å…†æˆ–è­¦ç¤ºã€‚\n\nâ€œå¦‚æœè¿™æ˜¯åœºå™©æ¢¦ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œå¸Œæœ›è²˜èƒ½æŠŠå®ƒå¸¦èµ°ã€‚â€\n\nä»–éšå³èµ·èº«ï¼Œå‡ºå»æ‰“æ°´ï¼Œå¼€å§‹ä¸€å¤©çš„ç”Ÿæ´»ã€‚\n\nç¬¬äºŒå¤©å¤œé‡Œï¼Œå’Œå°šæ¢¦è§ç¥–çˆ¶æ¥æ‰¾ä»–ã€‚\n\nå¯æ˜¯å¾ˆå¤šå¹´å‰ï¼Œä»–çš„ç¥–çˆ¶å°±åœ¨åƒç±³é¥¼â€”â€”ä¸€ç§ç³¯ç±³ç³•ç‚¹æ—¶å™æ­»äº†ï¼Œé‚£æ—¶çš„å’Œå°šè¿˜åœ¨è¥è¤“ä¹‹ä¸­ã€‚\n\nä»–ä»¬ç«™åœ¨æµ·ä¸­ä¸€åº§å°å²›ä¸Šï¼Œè¿™å²›é»‘é»¢é»¢çš„ï¼Œæ¯”ä¸€å—å²©çŸ³å¤§ä¸äº†å¤šå°‘ã€‚ä»–çš„ç¥–çˆ¶çç€ä¸€åŒç›²çœ¼ï¼Œçœºæœ›äººæµ·ã€‚é£æ²«æ³¼æº…ï¼Œæµ·é£å‘¼å·ï¼Œæµ·é¸Ÿåœ¨ç©ºä¸­æ‚²é¸£ã€‚\n\nç¥–çˆ¶å¼ å¼€ä¸€åªè‹è€çš„æ‰‹ï¼Œå±•ç¤ºå‡ºä¸€æšå°å°çš„é»‘åŒ™ã€‚\n\nä»–å°†æ‰‹é€’å‡ºï¼ŒåŠ¨ä½œç¼“æ…¢å¾—å¥½åƒä¸€ä»¶æœºæ¢°ç©å…·ã€‚\n\nå’Œå°šä»ç¥–çˆ¶æ‰‹ä¸­æ¥ä¸‹é’¥åŒ™ã€‚\n\nä¸€åªæµ·é¸¥æ‚²å‘œä¸‰å£°ï¼Œæ¸é£æ¸è¿œã€‚\n\nå’Œå°šæœ¬æƒ³é—®é—®ç¥–çˆ¶è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½†è€äººå·²ç„¶æ¶ˆå¤±ã€‚\n\nå’Œå°šç´§ç´§æ¡ç€é’¥åŒ™ã€‚\n\nä»–ç¯é¡¾å››å‘¨æƒ³æ‰¾ä¸ªå’Œé»‘åŒ™åŒ¹é…çš„ä¸œè¥¿ï¼Œä½†è¿™åº§å²›è’èŠœè´«ç˜ ï¼Œç©ºæ— ä¸€ç‰©ã€‚\n\nå’Œå°šæ…¢æ…¢è¸±è¿‡å°å²›ï¼Œä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°ã€‚\n\nè¿™æ—¶ï¼Œåœ¨æ¢¦ä¸­ï¼Œå’Œå°šè§‰å¾—è‡ªå·±æ­£è¢«çª¥è§†ã€‚\n\nä»–å››ä¸‹å¼ æœ›ï¼Œå¯æ¢¦ä¸­å¯‚å¯¥æ— äººï¼Œåªæœ‰åœ¨å¤©ç©ºç¿±ç¿”çš„æµ·é¸¥ï¼Œè¿˜æœ‰é¥è¿œæ‚¬å´–ä¸Šçš„ä¸€ä¸ªçº¤ç»†èº«å½¢ï¼Œå’Œå°šè§‰å¾—é‚£å¯èƒ½æ˜¯åªç‹ç‹¸ã€‚\n\nä»–é†’æ¥æ—¶ï¼Œæ‰‹é‡Œæ¡ç€ä¸€æšå¹¶ä¸å­˜åœ¨çš„é’¥åŒ™ï¼Œè¢«ç‹ç‹¸æ³¨è§†çš„æ„Ÿè§‰ä»æŒ¥ä¹‹ä¸å»ã€‚\n\nè¿™åœºæ¢¦å¦‚æ­¤é€¼çœŸã€‚è¿™å¤©æ™šäº›æ—¶å€™ï¼Œå‡‰é£å°†æ«æ ‘ä¸Šç¬¬ä¸€æ‰¹æˆ–æ©™æˆ–çº¢çš„å¶ç‰‡å¹è½åˆ°å¯ºåº™çš„çª„å°èœå›­ä¸­ï¼Œå’Œå°šæ­£åœ¨é‚£é‡Œç…§æ–™ç€æˆ–é»„æˆ–ç™½çš„è‘«èŠ¦ã€‚\n\nä»–å¿½ç„¶å‘è§‰è‡ªå·±æ­£ç¯è§†å››å‘¨å¯»æ‰¾é‚£æšé’¥åŒ™ï¼Œè¿™æ‰æ…¢æ…¢æƒ³èµ·ï¼Œåœ¨å°˜ä¸–ä¸­ï¼Œè‡ªå·±ä»æ²¡ç¢°è¿‡æˆ–æ˜¯è§è¿‡å®ƒã€‚\n\né‚£å¤©å¤œé‡Œï¼Œå’Œå°šç­‰å¾…ç€å¦ä¸€åœºé»‘æ²‰è¿·æ¢¦ã€‚\n\nä»–é—­ä¸Šçœ¼ç›æ—¶ï¼Œå¬åˆ°å±‹å¤–æœ‰äº›å“åŠ¨ï¼Œæ²¡è¿‡å¤šä¹…ä¾¿ç¡äº†è¿‡å»ã€‚\n\nä¸ŠåŠå¤œï¼Œä»–ä»€ä¹ˆä¹Ÿæ²¡æ¢¦åˆ°ã€‚\n\nè€ŒååŠå¤œä»–æ¢¦è§è‡ªå·±ç«™åœ¨ä¸€åº§å°æ¡¥ä¸Šï¼Œçœ‹ç€ä¸¤å°¾é²¤é±¼åœ¨ä¸€æ±ªæ± å¡˜ä¸­æƒ¬æ„å¬‰æ¸¸ã€‚\n\nå…¶ä¸­ä¸€å°¾çº¯ç™½å¦‚é“¶ï¼Œå¦ä¸€å°¾æ©™é»„è‹¥é‡‘ã€‚\n\nå’Œå°šçœ‹ç€å®ƒä»¬ï¼Œè§‰å¾—å¿ƒç»ªå®‰å®ã€‚\n\nå’Œå°šé†’æ¥åï¼Œæ£åº¦è¿™æ¢¦æ˜¯ä¸ªå‰å…†ï¼Œä¹Ÿç›¸ä¿¡å‰å‡ æ—¥çš„é»‘æ¢¦å°±æ­¤å‘Šç»ˆã€‚\n\nä»–å±•å¼€ç¬‘é¢œï¼Œå…´é«˜é‡‡çƒˆåœ°ä»ç¡å¸­ä¸Šçˆ¬äº†èµ·æ¥ã€‚\n\nå’Œå°šçš„å¥½å¿ƒæƒ…ä¸€ç›´ä¿ç•™åˆ°ä»–è¢«ç‹ç‹¸ç»Šåˆ°ã€‚\n\nå°ç‹åŒç›®ç´§é—­ï¼Œå°±è¶´åœ¨å¯ºåº™çš„é—¨åä¸Šã€‚\n\nèµ·åˆï¼Œå’Œå°šä»¥ä¸ºå¥¹æ­»äº†ã€‚\n\nä»–è¹²ä¸‹èº«åï¼Œå´å‘ç°ç‹ç‹¸è¿˜ä¸€æ¯å°šå­˜ï¼Œå¾ˆæµ…å¾ˆæ…¢ï¼Œå‡ ä¹çœ‹ä¸å‡ºæ˜¯å¦åœ¨å‘¼å¸ã€‚ä½†æ¯•ç«Ÿå¥¹è¿˜æ´»ç€ã€‚\n\nå’Œå°šæŠŠç‹ç‹¸æŠ±è¿›å°åº™ï¼Œæ”¾åœ¨ç«ç‚‰æ—è®©å¥¹å–æš–ã€‚\n\næ¥ç€ä»–å‘ä½›é™€é»˜ç¥·ï¼Œä¸ºç‹ç‹¸çš„æ€§å‘½ç¥ˆç¦ã€‚\n\nâ€œå¥¹è™½æ˜¯ä¸ªé‡ç‰©ï¼Œâ€å’Œå°šæƒ³é“ï¼Œâ€œä½†å¿ƒåœ°è‰¯å–„ï¼Œæˆ‘ä¸èƒ½çœ¼çœ‹ç€å¥¹æ­»ã€‚â€\n\nå’Œå°šæŠšæ‘¸ç€ç‹ç‹¸å¦‚è“ŸèŠ±å† ç»’èˆ¬æŸ”è½¯çš„çš®æ¯›ï¼Œæ„Ÿå—ç€å¥¹å¾®å¼±çš„å¿ƒè·³ã€‚\n\nâ€œæˆ‘è¿˜æ˜¯ä¸ªå­©å­æ—¶ï¼Œâ€å’Œå°šå¯¹æ˜è¿·ä¸­çš„ç‹ç‹¸è¯´ï¼Œâ€œé‚£æ˜¯åœ¨æˆ‘çˆ¶å¤±åŠ¿ä¹‹å‰ã€‚æˆ‘å¸¸ç’ç€å¥¶å¦ˆå’Œå¸ˆé•¿ï¼Œå·å·è·‘åˆ°é›†å¸‚ä¸Šå»ã€‚é‚£é‡Œæœ‰å¾ˆå¤šæ´»ç‰©åœ¨å–ï¼šæˆ‘åœ¨é‚£äº›ç«¹ç¬¼é‡Œè§è¿‡å„ç§å„æ ·çš„åŠ¨ç‰©ã€‚æœ‰ç‹ç‹¸ã€ç‹—å’Œç†Šï¼Œæœ‰å°çŒ´å­ã€çº¢è„¸çŒ•çŒ´ã€‚é‡å…”å’Œé³„é±¼ï¼Œæœ‰è›‡ã€‚é‡çŒªå’Œé¹¿ï¼Œæœ‰è‹é¹­ã€ç™½é¹¤ï¼Œè¿˜æœ‰å°ç†Šå´½ã€‚æˆ‘å–œçˆ±åŠ¨ç‰©ï¼Œæ‰€ä»¥çœ‹åˆ°å®ƒä»¬æ—¶ï¼Œå¿ƒé‡Œå¾ˆæ˜¯å¿«æ´»ã€‚ä½†è¿™ä¹Ÿè®©äººéš¾è¿‡ï¼Œå®ƒä»¬è¢«å…³åœ¨ç¬¼å­é‡Œçš„æ ·å­ï¼Œä»¤æˆ‘å¿ƒç—›ä¸å·²ã€‚â€\n\nâ€œä¸€å¤©ï¼Œå½“å•†äººä»¬æ”¶æ‘Šç¦»å»åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç ´æŸçš„ç¬¼å­ï¼Œé‡Œé¢æœ‰åªåˆšå‡ºç”Ÿä¸ä¹…çš„å°çŒ´ï¼Œå®ƒç˜¦å¾—çš®åŒ…éª¨å¤´ï¼Œå·²ç»æ­»äº†ï¼Œè¿ä¸ªæ°´ç½éƒ½æ¢ä¸æ¥â€”â€”è‡³å°‘æŸäº›äººæ˜¯è¿™ä¹ˆæƒ³çš„ã€‚ä½†æˆ‘å‘ç°å®ƒè¿˜æ´»ç€ï¼Œå°±æŠŠå®ƒè—åœ¨è¡£æœé‡Œï¼Œä¸€è·¯è·‘å›å®¶ã€‚â€\n\nâ€œæˆ‘æŠŠçŒ´å­å…»åœ¨å§æˆ¿ï¼Œä»è‡ªå·±çš„é£Ÿç‰©ä¸­çœä¸‹äº›ç¾¹é¥­å–‚å®ƒã€‚æˆ‘çš„å°çŒ´å­å°±è¿™æ ·æ…¢æ…¢é•¿å¤§ï¼Œæœ€åä¸ªå¤´å‡ ä¹å’Œæˆ‘ä¸€æ ·é«˜ã€‚å®ƒæ˜¯æˆ‘çš„æœ‹å‹ã€‚å®ƒä¼šååœ¨æˆ‘ä»¬å±‹å¤–çš„æŸ¿å­æ ‘ä¸Šç­‰æˆ‘å›å®¶ã€‚çˆ¶äº²å®¹ä¸‹äº†è¿™åªçŒ´å­ï¼Œä¸€å‘å¹³å®‰æ— äº‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©ï¼Œä¸€ä½å¤§åæ¥å®¶é‡Œæ‰¾æˆ‘çˆ¶äº²ã€‚â€\n\nâ€œçŒ´å­å¥½åƒå‘äº†ç–¯ä¸€æ ·ã€‚å®ƒä¸è‚¯è®©å¤§åé è¿‘æˆ‘çš„çˆ¶äº²ã€‚å®ƒè·³ä¸‹æ ‘ï¼ŒæŒ¡åœ¨é‚£äººé¢å‰ï¼Œå¡ç€ç‰™ï¼Œéœ²å‡ºèƒ¸è†›ï¼Œå°±å¥½åƒä»–æ˜¯æ¥è‡ªå¦ä¸€ä¸ªçŒ´ç¾¤çš„æ•Œäººã€‚â€\n\nâ€œå¤§åå‘ä¸€ä½éšä»ç¤ºæ„ã€‚å°½ç®¡æˆ‘è‹¦è‹¦å“€æ±‚ï¼Œé‚£äººè¿˜æ˜¯æ‹‰å¼€å¼“ï¼Œä¸€ç®­å°„ç©¿äº†çŒ´å­çš„èƒ¸è†›ã€‚æˆ‘å°†çŒ´å­æŠ±å‡ºå®…é™¢ï¼Œå®ƒæ³¨è§†ç€æˆ‘çš„åŒçœ¼ï¼Œå°±è¿™æ ·æ­»å»äº†ã€‚â€\n\nâ€œåæ¥ï¼Œæˆ‘çˆ¶çš„å¤±åŠ¿ï¼Œå°±æ˜¯å‡ºäºè¿™ä½å¤§åçš„é˜´è°‹ã€‚æœ‰æ—¶æˆ‘åœ¨æƒ³ï¼Œä¹Ÿè®¸é‚£åªçŒ´å­å¹¶ä¸æ˜¯çŒ´å­ï¼Œè€Œæ˜¯é˜¿å¼¥é™€ä½›æ´¾æ¥ä¿ä½‘æˆ‘ä»¬çš„å®ˆæŠ¤çµï¼Œä½†åªæœ‰å½“æˆ‘ä»¬å­¦ä¼šè†å¬å’Œè§‚å¯Ÿï¼Œå®ƒæ‰èƒ½çœŸæ­£è¡Œä½¿æŠ¤å«ä¹‹è´£ã€‚è¿™æ˜¯å¾ˆä¹…ä»¥å‰çš„äº‹äº†ï¼Œå°ç‹ç‹¸ï¼Œåœ¨æˆ‘å‡ºå®¶ä¹‹å‰ï¼Œé‚£æ®µæˆ‘å·²å¼ƒç»çš„ç”Ÿå‘½ä¹‹ä¸­ã€‚ä½†äººæ€»è¦å¸å–æ•™è®­ã€‚â€\n\nâ€œä¹Ÿè®¸ï¼Œä½ ç©å¼„çš„é‚£äº›ç‹æŠ€æ·«å·§ï¼Œåªæ˜¯æƒ³è¦ä¿æŠ¤æˆ‘ã€‚â€\n\nå’Œå°šè¯´å®Œï¼Œå¼€å§‹å‘é˜¿å¼¥é™€ä½›é¢‚ç»ç¥·å‘Šï¼›ç„¶ååˆå‘é¬¼å­æ¯ç¥ç¥·å‘Šï¼Œå¥¹åœ¨é‡åˆ°ä½›é™€å‰æ˜¯ä¸ªå¤œå‰ï¼Œå¦‚ä»Šå´æ˜¯å¥³å­ä¸å­©ç«¥çš„å®ˆæŠ¤ç¥ï¼›ä»–è¿˜å‘å¤§æ—¥å¦‚æ¥ç¥ˆæ±‚ï¼šæœ€åï¼Œå’Œå°šå‘å®¾å¤´å¢å°Šè€…å’è¯µäº†ä¸€ç¯‡ç®€çŸ­ç»æ–‡ï¼Œä»–æ˜¯ä½›é™€çš„å¼Ÿå­ï¼Œç½—æ±‰é¦–åº§ï¼Œè¢«ä½›é™€ç¦æ­¢æ¶…ç›˜å¾€ç”Ÿã€‚\n\nä»–å‘æ‰€æœ‰è¿™äº›ç¥ä½›ç¥·å‘Šï¼Œä¸ºäº†å°ç‹ç‹¸ï¼Œç¥ˆæ±‚ä»–ä»¬çš„çœ‹æŠ¤ä¸æ‚²æ³¯ã€‚\n\nè¯µç»å·²æ¯•ï¼Œç‹ç‹¸è¿˜æ˜¯è½¯å¡Œå¡Œåœ°èººåœ¨è‰å¸­ä¸Šï¼Œä¸€åŠ¨ä¸åŠ¨ï¼Œåƒä¸ªæ­»ç‰©ã€‚\n\nå±±è„šä¸‹æœ‰ä¸ªå°æ‘ï¼Œå¤§æ¦‚åŠå¤©çš„è·¯ç¨‹ã€‚\n\nâ€œä¹Ÿè®¸ï¼Œâ€å’Œå°šæƒ³ï¼Œâ€œæ‘å­é‡Œä¼šæœ‰åŒ»å¸ˆæŠ‘æˆ–æ™ºå¦‡ï¼Œå¯ä»¥æ•‘ç‹ç‹¸çš„å‘½ã€‚â€ä»–æœªåŠ å¤šæƒ³ï¼ŒæŠ±èµ·ç˜«è½¯çš„ç‹ç‹¸ï¼Œå¼€å§‹å‘å±±ä¸‹çš„æ‘åº„èµ°å»ã€‚\n\nå¤©æ°”æ¸…å†·ï¼Œå’Œå°šåœ¨è½»è–„çš„åƒ§è¢ä¸­ç‘Ÿç‘Ÿé¢¤æŠ–ã€‚\n\næ™šç§‹çš„è‹è‡ï¼Œæ˜¯ä¸€å¹´ä¸­æœ€åã€æœ€è€ã€æœ€å¤§ä¹Ÿæ˜¯æœ€è®¨åŒçš„è‹è‡ï¼Œå®ƒä»¬å›´ç€å’Œå°šå—¡å—¡ä¹±è½¬ï¼Œè·Ÿç€ä»–ä¸€è·¯é£ä¸‹å±±å»ï¼Œè®©ä»–çƒ¦æ‰°ä¸å·²ã€‚\n\nè·¯ç¨‹è¿‡åŠï¼Œå±±é—´çš„æºªæµæ±‡æˆå°æ²³ï¼Œæ°´é¢ä¸Šæ¨ªç€åº§æœ¨æ¡¥ã€‚\n\nå’Œå°šèµ°è¿‡å»ï¼Œçœ‹åˆ°æ¡¥ä¸Šèµ°æ¥ä¸€ä½è€è€…ã€‚ä»–æœ‰ä¸€éƒ¨é“¶ç™½é•¿é«¯ï¼Œè¿˜æœ‰å¾ˆé•¿å¾ˆé•¿çš„çœ‰æ¯›ã€‚ä»–èµ°è·¯æ—¶æ‹„ç€ä¸€æ ¹å¼¯æ›²çš„é•¿æ‹æ£ï¼Œçœ‰å®‡é—´å……æ»¡æ™ºæ…§ä¸ç¥¥å’Œï¼Œä½†åˆæœ‰ä¸€ä¸é¡½åŠ£ï¼Œè‡³å°‘å’Œå°šè¿™ä¹ˆè§‰å¾—ã€‚\n\nè€äººåœ¨æ¡¥ä¸Šé©»è¶³ï¼Œç­‰å’Œå°šèµ°è¿‘ã€‚\n\nâ€œæ­¤å­£çš„æ«æ ‘å¾ˆç¾ï¼Œâ€ä»–è¯´ï¼Œâ€œæ–‘æ–“å¤šå½©ï¼Œç¨çºµå³é€ã€‚æœ‰æ—¶æˆ‘è§‰å¾—ç§‹å’Œæ˜¥ä¸€æ ·ç¾ã€‚â€\n\nå’Œå°šé¢”é¦–èµåŒã€‚\n\nâ€œä½ æŠ±çš„æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿâ€è€äººé—®é“ï¼Œâ€œçœ‹ç€åƒæ¡æ­»ç‹—ã€‚å¯¹åƒ§äººæ¥è¯´ï¼Œè¿™ä¸æ˜¯ç§½ç‰©å—ï¼Ÿâ€\n\nâ€œè¿™æ˜¯åªç‹ç‹¸ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œè€Œä¸”å¥¹è¿˜æ²¡æ­»ã€‚â€\n\nâ€œä½ å‡†å¤‡æ€äº†å¥¹ï¼Ÿâ€è€äººä¸è€çƒ¦åœ°è¯´ã€‚\n\nâ€œæˆ‘è¦å¸¦å¥¹æ±‚åŒ»ï¼Œâ€å’Œå°šè¯´é“ã€‚\n\nè€è€…é¢è‰²å‡æ²ˆï¼Œä»–ä¸¾èµ·æ‰‹é‡Œçš„æ‹æ–ï¼Œæ‰“äº†å’Œå°šä¸¤ä¸‹â€”â€”ä¸€è®°åœ¨å¤´ä¾§ï¼Œä¸€è®°åœ¨è‚©è†€ä¹‹é—´ã€‚\n\nâ€œè¿™ä¸‹ï¼æ˜¯å› ä¸ºä½ ç¦»å¼ƒåº™å®‡ï¼Œâ€è€äººæ‰“ä¸‹ç¬¬ä¸€æ–æ—¶è¯´é“ï¼Œâ€œè€Œè¿™ä¸‹ï¼æ˜¯å› ä¸ºä½ æ€å’Œç‹çµé¬¼é­‚ã€‚â€\n\nå’Œå°šä½ä¸‹å¤´ã€‚â€œä¹Ÿè®¸æ‚¨è´£ç½šå¾—å¯¹ï¼Œâ€ä»–è¯´ï¼Œâ€œæ­£å¦‚æ‚¨æ‰€è¨€ï¼Œæˆ‘æ²¡æœ‰çœ‹æŠ¤å¯ºåº™ï¼Œè€Œä¸”è¿˜æŠ±ç€ä¸€åªç‹ç‹¸ã€‚\n\nå¯æˆ‘ç›¸ä¿¡å¸¦å¥¹æ±‚åŒ»ï¼Œä¹Ÿæ˜¯éµå¾ªæ­£é“ã€‚â€\n\nâ€œæ­£é“ï¼Ÿæ­£é“ï¼Ÿâ€è€äººåˆç”¨æ‹æ–æˆ³ç€å’Œå°šçš„èƒ¸è†›ï¼Œâ€œä¸ºä»€ä¹ˆï¼Œä½ è¿™ä¸ªè ¢è´§ï¼Œä½ è¿™ä¸ªæ²¡è„‘å­çš„ä¸œè¥¿ã€‚ä½ è‹¥æ˜¯éµå¾ªæ­£é“ï¼Œå°±è¯¥å¸¦ç€ç‹ç‹¸å›ä½ çš„åº™é‡Œå»ï¼Œç„¶åæŠŠå¤œæ¢¦ä¹‹å›çš„ä¿¡ç‰©æ•åœ¨å¤´ä¸‹ï¼Œç¡ä¸Šä¸€è§‰ã€‚ä½ çš„å°æ¯ç‹æ­£æ˜¯è¢«å›°åœ¨æ¢¦å¢ƒä¸­ã€‚â€\n\nâ€œæˆ‘å¯å¦å…å—æ–è´£ï¼Œå†å¤šé—®ä¸€å¥ï¼Œâ€å’Œå°šå°å¿ƒç¿¼ç¿¼åœ°è¯´ï¼Œâ€œåœ¨å“ªèƒ½æ‰¾åˆ°å¤œæ¢¦ä¹‹å›çš„ä¿¡ç‰©å‘¢ï¼Ÿâ€\n\nè€äººçªç€å¹´è½»çš„å’Œå°šï¼Œåˆçœ‹äº†çœ‹æ‰‹é‡Œçš„å¼¯æ‹æ£ã€‚\n\næ¥ç€ï¼Œä»–é•¿å¹ä¸€å£°ï¼Œè¿™å£æ°”é•¿å¾—å°±åƒä¸ªè€„è€‹ä¹‹äººæƒ³è¦å¹å‡‰é¢å‰çš„çƒ­æ±¤ã€‚\n\nè€äººä¼¸æ‰‹ä»è¢–å­é‡Œæ‹¿å‡ºä¸€ç‰‡å†™æœ‰å­—è¿¹çš„çº¸æ¡ï¼ŒæŒ‰åœ¨å’Œå°šæ‰‹ä¸­ã€‚\n\nâ€œç»™ä½ ï¼Œâ€è€äººå’•å“é“ï¼Œâ€œä½†ä½ åˆ°åº•è¿˜è¶³ä¸ªè ¢è´§ã€‚ä¸æ˜¯ç‹ç‹¸æ­»ï¼Œå°±æ˜¯ä½ æ­»ï¼›ä¸ç®¡ä½ æ˜¯å¦å¿ƒæ€çº¯è‰¯ï¼Œå°˜ä¸–ä»™ä¹¡çš†æ— ä¸€ç‰©èƒ½æ”¹å˜æ­¤äº‹ã€‚â€\n\nå’Œå°šæœ¬æƒ³äº‰è¾©å‡ å¥ï¼Œé—®é—®è€äººä¸ºä½•è¦ç»™ä»–è¿™æ²¡æœ‰å¥½å¤„çš„ä¿¡ç‰©ã€‚\n\nä½†å½“ä»–ååº”è¿‡æ¥æ—¶ï¼Œæ¡¥ä¸Šå·²ä¸è§äººå½±ï¼Œæ•´ä¸ªå±±éº“é—´å°±åªæœ‰ä»–ä¸€ä¸ªäººå½¢å½±ç›¸åŠã€‚\n\nâ€œè¿™è€äººä¸€å®šæ˜¯å®¾å¤´å¢å°Šè€…ï¼Œâ€å’Œå°šæƒ³ï¼Œå› ä¸ºä¼ è¯´ä¸­å®¾å¤´å¢å°Šè€…ç»å¸¸åŒ–ä½œé•¿çœ‰ç™½é¡»çš„è€è€…ï¼›ä»–å§‹ç»ˆåœ¨å‡¡é—´ä¿®å–„ç§¯å¾·ï¼Œç­‰å¾…ä½›ç¥–æŠŠä»–è¶…åº¦ã€‚\n\nä½†å’Œå°šè¿˜æ˜¯æƒ³ä¸é€šï¼Œä¸ºä½•å®¾å¤´å¢å°Šè€…è¦å¸®ä»–è¿™ä¹ˆä¸ªå‘å¾®å°æ°‘ï¼›ä»–è®°èµ·å°Šè€…æ˜¯å› ä¸ºå¦„è‡ªæ˜¾åœ£ï¼Œè¢«ç½šä¸èƒ½è¥¿æ–¹å¾€ç”Ÿï¼Œä½†è¿™å¹¶ä¸ä»¤äººå®½æ…°ã€‚\n\nä¸‹å±±æ—¶ï¼Œç‹ç‹¸å‡ ä¹è½»å¦‚é¸¿æ¯›ï¼Œä½†å½“å’Œå°šè¸ä¸Šå½’è·¯ï¼Œå´å‘ç°å¥¹çš„èº«ä½“è¶Šæ¥è¶Šé‡ã€‚ä¸€ç¬¼è–„é›¾é™ä¸‹å±±å¡ï¼Œå°†ä¸‡ç‰©è™šåŒ–ã€‚å’Œå°šå‘å±±ä¸Šèµ°å»ï¼Œåªè§‰å¾—ä¸¾æ­¥ç»´è‰°ã€‚\n\nä»–å¿ƒä¸­æš—è‡ªæ€é‡ï¼Œæ•‘åŠ©ç‹ç‹¸åˆ°åº•æ˜¯ä¸æ˜¯æ­£é“ã€‚\n\nä»–æƒ³ä¸æ¸…æ¥šï¼Œä½†å´çŸ¥é“è‡ªå·±ä¸èƒ½å¼ƒå¥¹ä¸é¡¾ã€‚\n\næ— è®ºå¦‚ä½•ï¼Œä¹Ÿè¦è¯•ä¸Šä¸€è¯•ã€‚\n\nå’Œå°šæ˜¯æ—©ä¸Šç¦»å¼€å¯ºåº™çš„ï¼Œä¸‹åˆæ™šäº›æ—¶å€™ä»–æ‰èµ°äº†å›æ¥ã€‚\n\nç§‹é›¾æŒ‚åœ¨å±±é—´ï¼Œæœ‰å¦‚è››ç½‘èš•ä¸ï¼Œè€Œé‚£æ¸ä½æ¸è¿‘çš„æš®éœ­æ›´è®©ä¸–é—´å¦‚å æ¢¦å¢ƒã€‚\n\nå’Œå°šèµ°è¿›å°åº™ï¼Œå°±è¿è¿™ä½äº†å…«å¹´çš„åœ°æ–¹ï¼Œéƒ½è®©ä»–è§‰å¾—æœ¦èƒ§ç¼¥ç¼ˆï¼Œä»¿ä½›ä¸€æ–¹å¹»åœŸã€‚\n\nç‚‰ç«å‡ ä¹å·²ç»å†·é€ï¼Œå’Œå°šæ·»äº†ç‚¹ç‚­è–ªï¼Œå¼€å§‹ç…®ç±³é¥­ï¼Œåˆçƒ¤äº†äº›åˆ‡å¾—å¾ˆè–„çš„è‘«èŠ¦ç‰‡ä½é¤ã€‚\n\né¥­åä»–å¼€å§‹åšæ™šè¯¾ï¼Œä½†å´ä¸å¦‚å¹³æ—¥é‚£èˆ¬ä¸“æ³¨è™”è¯šã€‚\n\nç¥·å‘Šæ˜¯ä¸€å›äº‹ï¼›å‘æŸäº›ç¥ä½›ç¥·å‘Šå°±æ˜¯å¦ä¸€å›äº‹äº†ï¼Œä»–ä»¬ä¸ä»…ä¼šå€¾å¬ï¼Œè€Œä¸”ä¼šåœ¨è·¯ä¸ŠæŠŠä½ æ‰¾å‡ºæ¥ï¼Œè¢«ä½ å†’çŠ¯æ—¶è¿˜ä¼šç”¨æ‹æ–æ‰“ä½ è„‘è¢‹ã€‚\n\nåœ¨ç‚‰ç«è¾‰å…‰ä¸­ï¼Œå’Œå°šäº§ç”Ÿäº†ä¸€ç§è¯¡å¼‚çš„å¹»æƒ³ã€‚\n\nä»–è§‰å¾—è‡ªå·±çš„å½±å­ä¼¼ä¹ç¼ºäº†ä¸€ç‰‡ï¼Œå°±åƒè¢«æ’•æ‰äº†ä¼¼çš„ã€‚\n\nç‹ç‹¸ç¡å¾—åƒä¸ªæ­»ç‰©ã€‚\n\nå¥¹é‚£ä¹ˆå°ã€‚å’Œå°šæŠšè¿‡ç‹ç‹¸æŸ”æ»‘çš„çš®æ¯›ï¼Œåˆçœ‹äº†çœ‹å®¾å¤´å¢å°Šè€…ç»™ä»–çš„ç¬¦çº¸ã€‚\n\nå’Œå°šä¸æ‡‚ä¸Šé¢å†™äº†ä»€ä¹ˆï¼Œå½“ä»–çœ‹å»æ—¶ï¼Œé‚£äº›æ–‡å­—ä»¿ä½›åœ¨æ‰­åŠ¨é—ªçƒï¼Œå°±åƒæ¢¦ä¸­çš„ç¬¦è®°ã€‚\n\nå’Œå°šæŠŠç‹ç‹¸æ”¾åœ¨ä»–çš„åƒ§è¢ä¸Šï¼Œç”¨è‡ªå·±çš„ä½“æ¸©ä¸ºå¥¹ä¿æš–ï¼Œä¹Ÿè®¸è¿˜èƒ½ä¸ºå¥¹ä¿ä½æ€§å‘½ã€‚ä»–èººåœ¨ç¡æ¦»ä¸Šï¼Œå°†çº¸ç‰‡æ”¾åœ¨æ•ä¸‹ã€‚æ¥å›ä¸€è¶Ÿå±±è·¯å·²ç»è®©å’Œå°šç²¾ç–²åŠ›å°½ï¼Œä»–å¾ˆå¿«å°±å å…¥æ¢¦ä¹¡ã€‚\n\nèµ·åˆï¼Œæ˜¯é»‘æš—ã€‚\n\né»‘æš—ä¸­é—ªå‡ºä¸€ç‚¹è§å…‰ã€‚æ¥ç€åˆä¸€ç‚¹ï¼Œå†ä¸€ç‚¹ã€‚å…‰äº®å¼€å§‹æ¸¸å¼‹ã€‚\n\nå®ƒä»¬æ˜¯è¤ç«è™«ã€‚å…ˆæ˜¯å‡ åªï¼Œç»§è€Œèšèµ·ä¸€ç¾¤ï¼Œæœ€åæˆç™¾ä¸Šåƒçš„è¤è™«åœ¨é»‘æš—ä¸­é—ªè€€ç€å®ƒä»¬çš„å†·å…‰ã€‚\n\nè¿™è®©å’Œå°šæƒ³èµ·æ˜Ÿè¾°ä¹‹æ²³ï¼Œæˆ–æ˜¯ä¸€åº§æ˜Ÿæ¡¥ï¼Œæˆ–æ˜¯ä¸€æ¡åœ¨é»‘æš—ä¸­ç¼ ç»•è¦è½¬çš„é”¦å¸¦ï¼Œç¿ç¿ç”Ÿè¾‰ï¼Œäº¦å¹»äº¦çœŸã€‚\n\nå’Œå°šæ²¿ç€é”¦å¸¦è¡Œèµ°ã€‚\n\né‚£å¼ ä¿¡ç‰©å°±æ¡åœ¨ä»–æ‰‹ä¸­ï¼Œçº¸ä¸Šæº¢å‡ºçš„å…‰èŠ’ï¼Œæ¯”è¤ç«æ›´ç››ã€‚\n\nä»–èµ°äº†ç‰‡åˆ»ï¼Œä¸€äº›æ˜æ˜§ä¸ä¼‘çš„è¤è™«å¼€å§‹é™¨è½ï¼Œåƒå±±èŒ¶èŠ±ä¸€æ ·ç¿©ç„¶è€Œå ã€‚\n\nå’Œå°šåŒå®ƒä»¬ä¸€èµ·ä¸‹å ã€‚ä»–å‘ç°è‡ªå·±å¹¶éè‡ªè¤ç«è™«é—´æ‰è½ï¼Œè€Œæ˜¯è½è¿‡é“¶æ²³ï¼Œé‚£ç©¿è¶Šå¤œç©ºçš„ä¼—ç¥ä¹‹æ²³ã€‚\n\nä»–è½»è½»è½åœ¨ä¸€ç‰‡å­”é›€çŸ³èˆ¬ç›ˆç»¿çš„ç¢çŸ³è’åŸã€‚\n\nå’Œå°šçˆ¬èµ·èº«ï¼Œè¡Œèµ°åœ¨ç‰ç’ƒç»¿è‰²çš„å¹³åŸä¸Šã€‚\n\nåœ¨æ¢¦ä¸­ï¼Œä»–è¶³è¸é«˜æœ¨å±ã€‚è¿™ç§é‹äººä»¬åœ¨é›¨å­£æ‰ä¼šç©¿ï¼Œå¥½è®©è‡ªå·±è¿œç¦»æ³¥æ³çš„åœ°é¢ã€‚è¡Œèµ°é—´ï¼Œæœ¨å±æ¸æ¸ç£¨æŸæ¶ˆé€ï¼Œæ²¡è¿‡å¤šä¹…ï¼Œå’Œå°šå°±åªå¾—èµ¤è¶³è€Œè¡Œã€‚\n\nç‰‡ç‰‡ç¢çŸ³åƒæ— æ•°é”‹åˆ©çš„å°åˆ€ï¼Œé²œè¡€ä»ä»–è„šä¸Šçš„ä¼¤å£æ±©æ±©è€Œå‡ºï¼Œåœ¨èº«åç•™ä¸‹ä¸€ä¸²è¡€çº¢çš„è¶³è¿¹ã€‚\n\nä»–èµ°è¿‡ä¸€ç‰‡æ€ªéª¨å¶™å³‹çš„å¹³åŸï¼Œé‚£äº›éäººçš„å°¸éª¨æ—©å·³ç ´ç¢ï¼Œé”‹åˆ©å°–é”ã€‚\n\nä»–èµ°è¿‡ä¸€ç‰‡æ¹¿çƒ­é€¼äººçš„æ²¼æ³½ã€‚ç©ºä¸­å……æ»¡å’¬äººçš„èšŠè™«ï¼Œä½“å‹ä¹‹å°è‚‰çœ¼éš¾è¾¨ã€‚è¿™äº›é£è™«è¶´ä¸Šä»–çš„çš®è‚¤å’Œçœ¼è§’ï¼Œå®åˆºå’¬å™¬ï¼Œç•™ä¸‹ç‚¹ç‚¹ä¼¤ç—•ã€‚ç‰‡åˆ»ä¹‹åï¼Œè‹ç©¹å·²è¢«æ»¡å¤©çš„èšŠè “æŸ“é»‘ã€‚\n\nçº¸æ¡è¾‰å…‰æ›´ç››ï¼Œå’Œå°šå°†å®ƒé«˜ä¸¾åœ¨èº«å‰ï¼Œç»§ç»­èµ¶è·¯ã€‚\n\nä»–æœ€ç»ˆç©¿è¿‡æ²¼æ³½ï¼Œä»å–‰å’™é‡Œå•å‡ºæœ€åä¸€å£é»‘è “ï¼Œåˆå°†å®ƒä»¬ä»çœ¼è§’æŠ¹å‡€ã€‚\n\nå’Œå°šèµ°è¿‡ä¸€ä¸ªå‘ä»–ç§è¯­çš„èŠ±å›­ã€‚å®ƒå»ºè®®å’Œå°šå›å¤´ï¼Œå‘Šè¯‰ä»–æ¢¦ä¹‹å›ä¸æ˜¯éšéšä¾¿ä¾¿å°±èƒ½æ‰¾åˆ°çš„ï¼Œè¿˜è¯´ä»–åº”è¯¥ç•™åœ¨èŠ±å›­é‡Œï¼Œæ¼«æ­¥åœ¨å®ƒçš„å°å¾„ä¸Šï¼Œé—²ååœ¨å®ƒçš„ç”œæ°´æ—ã€‚ä½†å’Œå°šå§‹ç»ˆä¸çŸ¥é“ï¼ŒèŠ±å›­ä¸ºä½•èƒ½å¯¹ä»–è¯´è¯ã€‚\n\nä»–æ‹æ‹ä¸èˆåœ°ç¦»å¼€èŠ±å›­ï¼Œç»§ç»­å‰è¡Œã€‚\n\nå’Œå°šåœ¨ä¸¤æ ‹æ¯”é‚»çš„æˆ¿èˆå‰é©»è¶³ã€‚\n\næœ‰ä¸¤ä¸ªäººæ­£ååœ¨å…¶ä¸­ä¸€é—´çš„ç¼˜ä¾§ï¼Œé¢å¯¹å»Šä¸‹çš„æ± å¡˜æŒæ†å‚é’“ã€‚\n\nâ€œæˆ‘è¦æ‰¾å¤œæ¢¦ä¹‹å›ï¼Œâ€å’Œå°šå–Šé“ï¼Œâ€œè¿™æ¡è·¯å¯¹å—ï¼Ÿâ€\n\nâ€œæ¯æ¡è·¯éƒ½é€šå‘ä»–çš„ç–†åœŸï¼Œâ€ç¬¬ä¸€ä¸ªäººé—®é“ï¼Œâ€œä½ åˆæ€èƒ½èµ°é”™ï¼Ÿâ€\n\nç¬¬äºŒä¸ªäººèº«æä¸°è…´ï¼Œé¢å¸¦æ„å®¹ã€‚ä»–ä¸€å¥è¯ä¹Ÿæ²¡è¯´ã€‚\n\nå’Œå°šå‘ä»–ä»¬å±•å¼€ä¿¡ç‰©ã€‚å¦‚æœè¯´ä¹‹å‰è¿˜æœ‰äº›è®¸ç–‘è™‘çš„è¯ï¼Œæ­¤åˆ»ä»–å·²ç¡®ä¿¡è‡ªå·±æ˜¯åœ¨æ¢¦ä¸­ã€‚å› ä¸ºä»–ç«Ÿèƒ½è¯»æ‡‚çº¸ä¸Šçš„å­—ã€‚\n\né‚£æ˜¯äº›å¾ˆç®€å•çš„æ–‡å­—ï¼Œç®€å•åˆ°å’Œå°šå¾ˆå¥‡æ€ªå…ˆå‰æ€ä¹ˆä¼šè¯»ä¸æ‡‚ã€‚\n\nè¿™äº›æ–‡å­—ä¹¦å†™ç€ä¸€ä¸ªäººï¼Œä»–å¯ä»¥ä»æ··æ²Œæˆ–è™šæ— ä¸­å¡‘é€ ã€åˆ¶é€ ã€é“¸é€ ï¼Œå°†æ— å½¢æ— ç›¸ä¹‹ç‰©åŒ–ä½œå¹»æ¢¦ï¼Œä½†ç¦»äº†è¿™å¹»æ¢¦ï¼Œä»»ä½•çœŸå®éƒ½å°†å¤±å»æ„ä¹‰ã€‚\n\nç¬¬äºŒä¸ªäººè½»å“¼ä¸€å£°ï¼Œå¼•æ¥å’Œå°šçš„æ³¨æ„ã€‚\n\nä»–ä»¿ä½›æ˜¯ä¸ç»æ„é—´ï¼ŒæŒ‡äº†æŒ‡ä¸€åº§å±±å³°ã€‚\n\nå’Œå°šæ–½ç¤¼è‡´è°¢ï¼Œå‘é‚£åº§å±±èµ°å»ã€‚\n\nä»–æ¥åˆ°å±±è„šä¸‹ï¼Œå›å¤´çœ‹å»ï¼Œå‘ç°èƒ–ç”·äººé¢æœä¸‹é£˜åœ¨é±¼æ± ä¸­ã€‚\n\nè€Œå‡¶æ‰‹æ­£ä»æˆ¿å­çš„éœ²å°ä¸Šä¿¯ç°ç€ä»–çš„å°¸èº«ã€‚\n\nå’Œå°šèµ°åˆ°åŠå±±è…°ï¼Œåˆå›å¤´å¼ æœ›ã€‚\n\næˆ¿å­ï¼Œè¿åŒé‚£äººå’Œé±¼æ± ï¼Œéƒ½å·³æ¶ˆå¤±ã€‚å®ƒä»¬æ–¹æ‰çš„æ‰€åœ¨åªå‰©ä¸€ç‰‡è’å†¢ã€‚\n\nåœ¨ä»–å‰æ–¹ï¼ŒçŸ—ç«‹ç€ä¸€åº§å®ä¼Ÿçš„å»ºç­‘ï¼Œä¸å‘¨å›´çš„æ™¯è‡´æµ‘ç„¶ä¸€ä½“ã€‚\n\nå®ƒæ˜¯ç¥æ®¿ï¼Œæ˜¯åŸå ¡ï¼Œä¹Ÿæ˜¯ä½æ‰€ã€‚å®ƒæœ‰æ°´ç€‘å’ŒèŠ±åœƒï¼Œæœ‰å½©ç»˜å±é£å’Œåç¾çš„æ‹±é¡¶ã€‚å’Œå°šè¯´ä¸æ¸…è¿™æ˜¯ä¸€åº§æˆ¿èˆï¼Œè¿˜æ˜¯ä¸€ç™¾åº§ã€‚ä»–èƒ½çœ‹åˆ°è¯¸å¤šé™¢è½ã€æœå›­å’Œæ ‘æœ¨ï¼›åœ¨é‚£äº›å¥‡å¼‚çš„èŠ±åœƒä¸­ï¼Œæ¯”é‚»çš„æ ‘æœ¨ä¸Šï¼Œæ˜¥åã€ç§‹å¶ä¸å¤å®ç«Ÿç›¸ç”Ÿé•¿ã€‚\n\nè‰³ä¸½çš„é¸£é¸Ÿåœ¨æ ‘ä¸Šæ­Œå”±ï¼›å®ƒä»¬çš„ç¾½è‰²æˆ–çº¢æˆ–è“ï¼Œç¾è‰³é²œæ´»å®›è‹¥é£ç¿”çš„èŠ±æœµã€‚é‚£æ­Œå£°ä¹ŸåŒæ ·å¥‡å¼‚è«åã€‚\n\nå’Œå°šä»æ²¡è§è¿‡è¿™æ ·çš„æ‰€åœ¨ã€‚\n\næˆ¿å‰æ˜¯ä¸€é“æ‹±é—¨ï¼Œç”±é‡‘è‰²çš„æœ¨æé€ å°±ï¼Œä¸Šé¢åˆ»ç€å¥‡ç¦½å¼‚å…½ã€‚\n\nå’Œå°šèµ°åˆ°é—¨å‰ï¼Œæ•²å“äº†æŒ‚åœ¨é‚£é‡Œçš„ä¸€é¢å°é”£ã€‚\n\né”£é¸£æ— å£°ï¼Œä½†ä»–ç¡®ä¿¡ï¼Œé‚£äº›åº”å½“çŸ¥é“ä»–åœ¨é—¨å‰çš„äººï¼Œå·²ç„¶çŸ¥æ™“ã€‚\n\nå¤§é—¨æ‰“å¼€ï¼Œç»§è€Œå˜åŒ–ï¼Œä¸€ä¸ªç»šä¸½å¤šå½©çš„ç”Ÿçµç«‹åœ¨ä»–é¢å‰ã€‚\n\nè¿™æ˜¯åªæ€ªé¸Ÿï¼Œå¤´é¢…å¦‚ç‹®ï¼Œå°–ç‰™è›‡å°¾ï¼Œå·¨ç¿¼è”½å¤©ã€‚\n\nç«Ÿæ˜¯å·¨å¤§æ— æœ‹çš„æ—¶åŠä¹Œï¼Œç¥è¯ä¸­çš„ç”Ÿçµã€‚\n\nâ€œé¸£é”£æ‰€ä¸ºä½•äº‹ï¼Œâ€æ—¶åŠé¸Ÿè¯´ï¼Œâ€œä½ åˆæ˜¯ä½•äººï¼Œä¸ºç”šæ‰“æ…æˆ‘ä¸»ï¼Ÿâ€\n\nâ€œè¿™é‡ŒçœŸç¾ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œç­‰æˆ‘é†’æ¥ï¼Œä¸–ä¸Šå†æ— è¿™èˆ¬æ™¯è‡´ï¼Œå› ä¸ºå®ƒä»¬å‡éæ­¤åœ°ã€‚å¦‚æ­¤æƒ³æ¥ï¼Œæ›´è®©è¿™å®«æ®¿å¹³æ·»å‡ åˆ†ç¾è‰²ã€‚â€\n\nâ€œæˆ‘æ˜¯å¦çœŸçš„ç«™åœ¨æ¢¦ä¹‹å›çš„å®«æ®¿èŠ±å›­é‡Œï¼Ÿâ€ä»–çš„è¯è¯­è½»æŸ”è‡³æï¼Œä½†å´è•´å«ç€å¯¹å®ˆé—¨è€…çš„å±è´£ã€‚\n\nå³ä¾¿æ˜¯ç¥è¯ä¸­çš„ç”Ÿçµï¼Œä¹Ÿåº”æ™“å¾—ç¤¼æ•°ã€‚\n\nâ€œæ­¤åœ°æ­£æ˜¯æ¢¦ä¹‹å®«ï¼Œâ€æ—¶åŠé¸Ÿå’†å“®é“ï¼Œâ€œå‘Šè¯‰æˆ‘ä½ æƒ³å¹²ä»€ä¹ˆï¼Œä¸ç„¶æˆ‘å°±æŠŠä½ åƒäº†ã€‚â€\n\nå’Œå°šä¼¸å‡ºæ‰‹ï¼Œå°†å®¾å¤´å¢å°Šè€…ç»™ä»–çš„çº¸ç‰‡å±•ç¤ºåœ¨æ—¶åŠé¸Ÿé¢å‰ã€‚\n\nå®ƒç»½å‡ºå…‰åä¸‡åƒã€‚å·¨é¸Ÿä½ä¸‹å¤´å–ƒå–ƒç§è¯­ã€‚\n\nâ€œæˆ‘æ²¡æ–™åˆ°ï¼Œâ€å®ƒè¯´ï¼Œâ€œæˆ‘ä»¥ä¸ºä½ ä¸è¿‡æ˜¯ä¸ªæ¢¦è€…ã€‚â€\n\nå’Œå°šå‘è§‰æœ‰ä»€ä¹ˆä¸œè¥¿æ­£ä»ä¸€æ£µé»‘æ¾ä¸Šä¿¯è§†ç€ä»–ã€‚\n\né‚£æ˜¯åªæ¸¡é¸¦ï¼Œä½“å‹é¢‡å¤§ï¼Œæ¯›è‰²é»‘ä¸”æš—ã€‚\n\nå®ƒå¯Ÿè§‰åˆ°å’Œå°šçš„è§†çº¿ï¼Œæ‰‘æ„£æ„£é£æ‰‘è€Œä¸‹ï¼Œè½åœ¨ä»–é¢å‰çš„æ­¥é“ä¸Šã€‚\n\nâ€œè·Ÿæˆ‘æ¥ï¼Œâ€æ¸¡é¸¦çš„å£°éŸ³å¥½ä¼¼ä¸¤å—å²©çŸ³åœ¨ç£¨æ“¦ã€‚\n\nâ€œä½ ä¼šå¸¦æˆ‘å»è§æ¢¦ä¹‹å›å—ï¼Ÿâ€å’Œå°šé—®ã€‚\n\nâ€œä½ ä¸ä¼šå‘ä¸€é¦–è¯—å‘é—®ï¼Œä¸ä¼šå‘ä¸€ç‰‡é£˜é›¶è½å¶ï¼Œæˆ–æ˜¯å±±é¢ é›¾è‰²å‘é—®ï¼Œâ€æ¸¡é¸¦è¯´ï¼Œâ€œä½ åˆä¸ºä½•è¦å‘æˆ‘å‘é—®ï¼Ÿâ€\n\næˆ¿èˆåƒä¸€åº§è¿·å®«ï¼Œå’Œå°šè·Ÿç€æ¸¡é¸¦ç©¿è¿‡èœ¿èœ’æ›²æŠ˜çš„èµ°å»Šå’Œå¥‡å¼‚è‚ƒç©†çš„äº­å°ï¼›èµ°è¿‡å¹³é™çš„æ± å¡˜å’Œå³»ç§€çš„å±±çŸ³ï¼Œç©¿è¡Œåœ¨å±é£éš”æˆçš„é€šé“ä¸­ã€‚\n\nä»–å§‹ç»ˆè·Ÿç€é»‘ä¹Œå‰è¡Œã€‚\n\nâ€œä»ä½ çš„å›è¯åˆ¤æ–­ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œæˆ‘çŒœä½ æ˜¯ä¸ªè¯—äººã€‚â€\n\nâ€œæˆ‘ä¾å¥‰å¤œæ¢¦ä¹‹å›ï¼Œâ€é»‘ä¹Œè¯´ï¼Œâ€œå¬ä»–çš„å·®é£ã€‚â€\n\nå®ƒæ‹æ‰“ç¿…è†€ï¼Œé¼“ç¿¼è€Œç¿”ï¼Œè½åœ¨ä¸€æ‰‡åŒå’Œå°šå·®ä¸å¤šé«˜çš„å±é£ä¸Šã€‚\n\nâ€œä½†ä½ è¯´çš„ä¹Ÿæ²¡é”™ã€‚æˆ‘æ›¾æ˜¯ä¸ªè¯—äººï¼Œè€Œä¸”åƒæ‰€æœ‰è¯—äººä¸€æ ·ï¼Œæˆ‘åœ¨æ¢¦ä¹‹å›½é€—ç•™å¾—å¤ªä¹…ã€‚â€\n\næ¸¡é¸¦è®©å’Œå°šèµ°è¿›ä¸€é—´å½©ç»˜å±é£éš”æˆçš„å±‹å­ã€‚\n\næˆ¿é—´çš„ä¸€ç«¯æœ‰åº§é«˜å°ï¼Œå°å­ä¸Šæ”¾äº†å¼ é•¶æœ‰ç æ¯çš„æœ¨æ¤…ã€‚\n\nè¿™æ˜¯å¼ å®Œç¾çš„åº§æ¤…ï¼Œæœ¨å·¥å¤æœ´ï¼Œæ ·å¼ç¦»å¥‡ã€‚\n\nå’Œå°šçŸ¥é“è¿™ä¸€å®šæ˜¯æ¢¦ä¹‹å›çš„ç‹åº§ã€‚\n\nâ€œåœ¨è¿™é‡Œç­‰ç€ï¼Œâ€æ¸¡é¸¦è¯´å®Œä»°é¦–é˜”æ­¥èµ°å‡ºæˆ¿é—´ï¼Œå°±åƒä¸ªå‚²æ…¢çš„è€ä¾è‡£ã€‚\n\nå’Œå°šæ‰‹è¶³æ— æªåœ°ç«™åœ¨è§è§å®¤ï¼Œç­‰å¾…ç€æ¢¦ä¹‹å›çš„é©¾ä¸´ã€‚\n\nåœ¨å’Œå°šçš„æƒ³è±¡ä¸­ï¼Œæ¢¦ä¹‹å›æ˜¯ä¸ªè€äººï¼Œæœ‰ç€é•¿é•¿çš„èƒ¡é¡»å’ŒæŒ‡ç”²ï¼Œæ¥ç€ä»–å˜å¾—å¥½ä¼¼å®¾å¤´å¢å°Šè€…ä¸€èˆ¬ï¼Œæœ€ååˆåŒ–ä½œåŠäººåŠé¾™çš„å¦–é­”ã€‚\n\nå’Œå°šçš„ç›®å…‰è¢«ç¯ç»•æˆ¿é—´çš„å±é£æ‰€å¸å¼•ã€‚\n\nåªè¦ä»–æ³¨è§†ç€å±é£ï¼Œé‚£äº›å½©ç»˜å›¾æ¡ˆå°±é™æ­¢ä¸åŠ¨ï¼›ä½†ä»–ç¨ä¸€åˆ†ç¥ï¼Œä¸Šé¢å°±ä¼šå˜åŒ–å‡ºå‰æ‰€æœªè§çš„æ™¯è±¡ã€‚\n\nä»–è½¬å¼€ç›®å…‰ï¼Œå±é£ä¸Šçš„ç”Ÿç‰©ä¾¿ä¼šæ¸¸ç§»ã€‚\n\nä¼ è¯´è½å¹•ï¼Œæ–°çš„ä¼ è¯´ï¼Œæ‚„ç„¶ç™»åœºã€‚\n\nä»–ç‹¬è‡ªç«™åœ¨è§è§å®¤ä¸­ï¼Œçœ‹ç€å½©ç»˜å±é£ã€‚\n\nä¸çŸ¥ä»ä½•æ—¶èµ·ï¼Œå’Œå°šä¸å†æ˜¯å­¤èº«ä¸€äººï¼Œå› ä¸ºæ¢¦ä¹‹å›å·²ååœ¨é«˜å°ä¸Šçš„ç‹åº§ä¸­ã€‚\n\nå’Œå°šæ·±æ–½ä¸€ç¤¼ã€‚\n\næ¢¦ä¹‹å›çš„è‚Œè‚¤ä¼¼ä»¥å†¬æœˆï¼Œé•¿å‘é»‘å¦‚é¸¦ç¿¼ï¼ŒåŒçœ¸å®›è‹¥å€’æ˜ å¤œç©ºçš„æ± æ°´ï¼Œè¿œæ˜Ÿåœ¨å…¶ä¸­é—ªè€€ç‡ƒçƒ§ã€‚\n\nä»–çš„è¢è‰²è‹¥å¤œï¼Œè¯¸èˆ¬ç«ç„°å’Œé¢å­”åœ¨åº•çº¹ä¸Šæµ®ç°åˆæ¶ˆå¤±ã€‚\n\nä»–å¼€å£è¯´è¯ï¼Œå£°éŸ³è½»æŸ”å¦‚ä¸ï¼ŒåšéŸ§å¦‚ä¸ã€‚\n\næœ‰æœ‹è‡ªè¿œæ–¹æ¥ï¼Œä¸äº¦ä¹ä¹ï¼Œå’Œå°šå¬åˆ°ä¸€ä¸ªå£°éŸ³ä»è„‘ä¸­å“èµ·ï¼Œä½†ä½ ä¸è¯¥æ¥ã€‚\n\nâ€œæˆ‘æ“…è‡ªç™»é—¨â€å’Œå°šè¯´ï¼Œâ€œåªæ±‚æ‚¨æ•‘ä¸‹ä¸€åªç‹ç‹¸çš„æ€§å‘½ã€‚å¥¹èº«åœ¨å°˜ä¸–ï¼Œé­‚è¿·æ¢¦åœŸã€‚å€˜è‹¥æ‚¨è¢–æ‰‹æ—è§‚ï¼Œç‹ç‹¸è¿Ÿæ—©å‘½ä¸§æ­¤åœ°ã€‚â€\n\nä¹Ÿè®¸å¥¹ï¼Œå¤œæ¢¦ä¹‹å›è¨€é“ï¼Œåªæ±‚è¿·å¤±æ¢¦ä¹¡ã€‚å¥¹æ‰€è¡Œä¹‹äº‹ï¼Œå¿…æœ‰èˆå·±çš„é“ç†ï¼Œè€Œè¿™é“ç†ä½ çŸ¥ä¹‹ç”šå°‘ã€‚æ›´ä¸æ¶ˆè¯´å¥¹æ˜¯åªç‹ç‹¸ã€‚å¥¹çš„æ€§å‘½åˆä¸ä½ ä½•å¹²ï¼Ÿ\n\nå’Œå°šè¸Œèº‡ç‰‡åˆ»ï¼Œå¼€å£è¯´é“ï¼šâ€œä½›ç¥–æ•™è¯²æˆ‘ç­‰ï¼Œå¯¹ä¸‡ç”Ÿä¸‡çµï¼Œéƒ½è¦çˆ±è¦æ•¬ã€‚ç‹ç‹¸ä»æ²¡å®³è¿‡æˆ‘ã€‚â€\n\næ¢¦ä¹‹å›ä¸Šä¸Šä¸‹ä¸‹æ‰“é‡ç€å’Œå°šã€‚ä»…æ­¤è€Œå·²ï¼Ÿä»–ä¸åŠ¨å£°è‰²åœ°è¯´ã€‚ä½ ç¦»å¼ƒåº™å®‡ï¼Œæ¥æ¢¦åœŸå¯»æˆ‘ï¼Œåªä¸ºæ­¤äº‹ï¼Ÿåªå› ä½ å¯¹ä¸‡ç”Ÿä¸‡çµï¼Œéƒ½æœ‰çˆ±æœ‰æ•¬ï¼Ÿ\n\nâ€œä¸‡ç‰©äºæˆ‘çš†æœ‰è´£ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œæ—¢å‰Šå‘ä¸ºåƒ§ï¼Œæˆ‘ä¾¿å·²èˆå¼ƒè¯¸èˆ¬æ¬²å¿µï¼Œéš”æ–­å°˜ä¸–ç¾è¿ã€‚â€\n\næ¢¦ä¹‹å›æ²‰é»˜ä¸è¯­ï¼Œåƒæ˜¯åœ¨ç­‰å¾…ä»€ä¹ˆã€‚\n\nå’Œå°šä½ä¸‹å¤´è¯´ï¼šâ€œä½†å¥¹åŒ–ä½œå°‘å¥³æ—¶ï¼Œé‚£è‚Œè‚¤çš„è§¦æ„Ÿï¼Œæˆ‘å§‹ç»ˆéš¾ä»¥å¿˜æ€€ã€‚è¿™æ®µè®°å¿†å°†ä¼´æˆ‘èµ°åˆ°æ­¤ç”Ÿå°½å¤´ï¼Œä¹ƒè‡³å°½å¤´ä¹‹åã€‚ä½•å†µï¼Œæœ€éš¾æ–©æ–­æ˜¯æƒ…ä¸ã€‚â€\n\næˆ‘æ˜ç™½ï¼Œæ¢¦ä¹‹å›è¯´ã€‚ä»–ç«™èµ·èº«ï¼Œèµ°ä¸‹é«˜å°ã€‚\n\nå¦‚æœæŠŠä»–å½“ä½œäººæ¥çœ‹çš„è¯ï¼Œæ¢¦ä¹‹å›çš„èº«é‡å¾ˆé«˜ã€‚\n\néšæˆ‘æ¥ï¼Œä»–è¯´ã€‚\n\næ°´ç€‘è‡ªå®«æ®¿çš„ä¸€é¢å¢™å£ä¸Šå€¾æ³»è€Œä¸‹ã€‚\n\nä¸¤äººç©¿è¡Œè¿‡å»ï¼Œæ¶“æµåœ¨ä»–ä»¬èº«ä¸Šå†²åˆ·å¹æ‹‚ï¼Œå´æ²¡æ‰“æ¹¿åˆ†æ¯«ã€‚\n\næ°´ç€‘çš„å¦ä¸€ä¾§æœ‰åº§é¿æš‘å°ç­‘ã€‚æ¢¦ä¹‹å›å¸¦ç€å’Œå°šå‘é‚£é‡Œèµ°å»ã€‚\n\nä½ çš„å­¤ç‹¸ä¹Ÿæ¥æ‰¾è¿‡æˆ‘ï¼Œç¥ˆæ±‚ä¸€ä»¶ç¤¼ç‰©ï¼Œæ¢¦ä¹‹å›è¯´ï¼Œå¥¹å¯¹å¿ƒä¸­çš„çˆ±æ‹æ¯”ä½ å¦è¯šå¾—å¤šã€‚\n\nå­¤ç‹¸æ¢¦ä½ ä¹‹æ¢¦ï¼Œä¸ä½ ä¸€é“åšäº†å‰ä¸¤ä¸ªæ¢¦ï¼Œåˆæ›¿ä½ æ¢¦åˆ°æœ€åçš„ç»“å±€ï¼Œç”¨é»‘åŒ™æ‰“å¼€æ¼†åŒ£ã€‚\n\nâ€œå¥¹åœ¨å“ªï¼Ÿâ€å’Œå°šè¯´ï¼Œâ€œæˆ‘å¦‚ä½•å¸¦å¥¹å›å»ï¼Ÿâ€\n\nä½ ä¸ºä½•è¦å¸¦å¥¹å›å»ï¼Ÿæ¢¦ä¹‹å›è¯´ã€‚è¿™éå¥¹æ‰€æ„¿ï¼Œå¯¹ä½ ä¹Ÿæ²¡æœ‰å¥½å¤„ã€‚\n\nå’Œå°šä¸å‘ä¸€è¯­ã€‚\n\nå›ç‹æŒ‡äº†æŒ‡å°ç­‘é‡Œçš„æ¡Œå­ã€‚é‚£ä¸Šé¢æ”¾ç€ä¸€ä¸ªæ¼†åŒ£ï¼Œå’Œå°šæ›¾åœ¨æ¢¦ä¸­è§è¿‡ã€‚\n\né’¥åŒ™å°±æ’åœ¨é”å­”é‡Œã€‚\n\nå¥¹å°±åœ¨è¿™å„¿ã€‚å¦‚æœä½ ä¸»æ„å·²å®šï¼Œå°±å»æ‰¾å¥¹å§ã€‚\n\nå’Œå°šä¿¯ä¸‹èº«ï¼Œæ…¢æ…¢æ‰“å¼€åŒ£å­ã€‚ç›’å­å¼ å¼€ï¼Œå¼ å¤§ï¼Œå¼ æ»¡å¤©åœ°ã€‚\n\nä»–èµ°äº†è¿›å»ï¼Œæ¯«ä¸è¿Ÿç–‘ã€‚\n\nèµ·åˆï¼Œå’Œå°šè§‰å¾—æ¼†åŒ£é‡Œåƒä¸ªä¼¼æ›¾ç›¸è¯†ï¼Œå´åˆæ—©å·²è¢«å¿˜å´çš„åœ°æ–¹ä¸€ä¸€ä¹Ÿè®¸æ˜¯ä»–å¹¼å¹´æ—¶çš„æˆ¿é—´ï¼Œæˆ–æ˜¯åº™é‡Œå°šæœªè¢«å‘ç°çš„å¯†å®¤ã€‚\n\nè¿™ä¸ªæˆ¿é—´ç©ºæ— ä¸€ç‰©ï¼Œåªæœ‰è§’è½é‡Œæ”¾ç€é¢é•œå­ã€‚\n\né•œé¢æ•£å‘æ·¡æ·¡å¾®å…‰ï¼Œå®›è‹¥è½æ—¥å‰æœ€åä¸€ç¼•æ®‹é˜³ã€‚\n\nå’Œå°šæ¡èµ·å®ƒã€‚\n\né•œå­èƒŒåæœ‰å¹…ç”»ï¼Œä¸Šé¢ç”»ç€ä¸¤ä¸ªäººï¼šä¸€ä¸ªæ˜¯å‚²æ…¢æš´èºçš„ç”·äººï¼Œç›®å…‰å¦‚çŸ©ï¼Œé¡»å‘ç°ç™½ï¼›å¦ä¸€ä¸ªè™½ç„¶æ²¾æ»¡æ±¡å¢éœ‰è…ï¼Œä½†å¾ˆå®¹æ˜“çœ‹å‡ºå°±æ˜¯å’Œå°šè‡ªå·±ã€‚\n\nä»–æŠŠé•œå­ç¿»è¿‡æ¥ï¼Œå‘é•œé¢çœ‹å»ã€‚\n\nå’Œå°šçœ‹åˆ°ä¸€ä¸ªç»¿çœ¸å°‘å¥³ï¼Œå…‰æ™•å‹¾å‹’å‡ºå¥¹çš„ç²ç‘å€©å½±ã€‚\n\nå°‘å¥³è§‰å¯Ÿåˆ°å’Œå°šçš„ç›®å…‰ï¼Œæ…¢æ…¢ä½ä¸‹å¤´ã€‚\n\nâ€œä½ ä¸ºä½•è¦æ¥ï¼Ÿâ€å¥¹è¯­å¸¦å¿§ä¼¤ï¼Œè½»å£°è¯´é“ï¼Œâ€œæˆ‘æŠŠè‡ªå·±çš„æ€§å‘½éƒ½ç»™äº†ä½ ã€‚â€\n\nâ€œä½ ç¡åœ¨å¯ºåº™çš„é—¨åä¸Šï¼Œâ€å’Œå°šå¯¹å¥¹è¯´ï¼Œâ€œæˆ‘å”¤ä¸é†’ä½ ã€‚â€\n\nå¥¹çŒ›åœ°ä»°èµ·å¤´ã€‚â€œæˆ‘è·Ÿç€è²˜ï¼Œâ€å¥¹å¯¹å’Œå°šè¯´ï¼Œâ€œä¸€è·¯è·Ÿç€å®ƒä»¬ï¼Œçœ‹å®ƒä»¬åé£Ÿæ¢¦å¢ƒã€‚ä½ è¿›å…¥æ¢¦ä¹¡ï¼Œæˆ‘ä¹Ÿè·Ÿäº†è¿›å»ã€‚ä½ çˆ¶äº²ç»™ä½ é‚£ä¸ªæ¼†åŒ£æ—¶ï¼Œæˆ‘å°±åœ¨é‚£å„¿ï¼Œä½ é†’æ¥åï¼Œæˆ‘å°†æ¼†åŒ£ç•™ä¸‹ã€‚ä½ ç¥–çˆ¶ç»™äº†ä½ é’¥åŒ™ï¼Œä½ é†’æ¥åï¼Œæˆ‘ä¹ŸæŠŠé’¥åŒ™å–èµ°äº†ã€‚â€\n\nâ€œç¬¬ä¸‰å¤©ï¼Œæˆ‘ä»æ—©åˆ°æ™šä¸€ç›´è·Ÿç€ä½ ï¼Œå¤œå¹•é™ä¸´æ—¶ï¼Œæˆ‘åœ¨ä½ çš„é—¨ï¼Œèººä¸‹ã€‚æ¢¦åœ¨æ‰¾åˆ°ä½ ä¹‹å‰ï¼Œè‚¯å®šè¦ä»å¤§é—¨è·¯è¿‡ã€‚æˆ‘æ²‰æ²‰ç¡å»ï¼Œçœ‹åˆ°æ¢¦æ»‘å‡ºé»‘æš—ï¼Œå°±æ‰‘äº†ä¸Šå»ï¼ŒæŠŠå®ƒæŠ¢ä¸ºå·²æœ‰ã€‚æˆ‘åœ¨æ¢¦ä¸­ç”¨é’¥åŒ™æ‰“å¼€åŒ£å­ã€‚å®ƒå¼ å¼€åï¼Œå¤§å¦‚è‹ç©¹ï¼Œæˆ‘æ— ä»é€‰æ‹©ï¼Œåªèƒ½è¿›å»ã€‚â€\n\nâ€œæˆ‘å¾ˆå®³æ€•ï¼Œå› ä¸ºæˆ‘è¿·å¤±åœ¨è¿™ä¸ªç›’å­é‡Œï¼Œæ‰¾ä¸åˆ°å‡ºå»çš„è·¯ï¼Œä¹Ÿæ‰¾ä¸åˆ°å›åˆ°èº«ä½“çš„è·¯ã€‚æˆ‘è¢«å“åäº†ï¼Œå¿ƒæƒ…æ²®ä¸§ï¼Œä½†åˆéå¸¸éª„å‚²ï¼Œå› ä¸ºæˆ‘çŸ¥é“æˆ‘æ•‘äº†ä½ çš„å‘½ã€‚â€\n\nâ€œä½ ä¸ºä½•è¦æ•‘æˆ‘ï¼Ÿâ€å’Œå°šé—®é“ã€‚ä½†ä»–æ¸…æ¥šè‡ªå·±æ—©å·²çŸ¥é“ç­”æ¡ˆã€‚\n\nç‹å¥³çš„é­‚é­„å«£ç„¶ä¸€ç¬‘ã€‚â€œä½ ä¸ºä½•è¦æ¥æ‰¾æˆ‘ï¼Ÿâ€å¥¹é—®ï¼Œâ€œä¸ºä½•è¦æ¥è¿™å„¿ï¼Ÿâ€\n\nâ€œå› ä¸ºæˆ‘åœ¨ä¹ä½ ï¼Œâ€ä»–è¯´ã€‚\n\nå°‘å¥³å‚ä¸‹ç›®å…‰ã€‚â€œé‚£â€”â€”ä½ å·²ç»æ¥äº†ï¼Œå·²ç»çŸ¥é“äº†çœŸç›¸â€”â€”ä½ è‚¯å®šä¹ŸçŸ¥é“ç°åœ¨è¯¥ç¦»å¼€äº†ã€‚æˆ‘å·²æ•‘ä¸‹ä½ çš„å‘½ã€‚ä¸ä½ ä¸ºæ•Œçš„é˜´é˜³å¸ˆä¼šä»£ä½ è€Œæ­»ï¼Œä½ å¯ä»¥å›åˆ°åº™é‡Œå»ï¼Œç»§ç»­ç§ä½ çš„å—ç“œå’Œéš¾åƒçš„å¹²å±±è¯ã€‚è‹¥æ˜¯å¾—é—²ï¼Œä¹Ÿè¯·ä¸ºæˆ‘é¢‚ç¯‡å¾€ç”Ÿç»ã€‚â€\n\nâ€œæˆ‘æ˜¯æ¥æ•‘ä½ çš„ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œè¿™æ˜¯æˆ‘çš„ä½¿å‘½ã€‚â€\n\nâ€œä½ æ€ä¹ˆæ•‘æˆ‘ï¼Ÿâ€å¥³å­©è‹¦æ¶©åœ°è¯´ï¼Œâ€œä½ èƒ½æ‰“ç ´é•œå­çš„é“æ¡†å—ï¼Ÿâ€\n\nâ€œä¸ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œæˆ‘ä¸èƒ½ã€‚â€\n\nä»–æ‹¿å‡ºå®¾å¤´å¢å°Šè€…åœ¨æ¡¥ä¸Šç»™ä»–çš„ä¿¡ç‰©ï¼Œå¿µå‡ºé‚£ä¸Šé¢å†™ç€çš„åè®³ã€‚æ¢¦ä¹‹å›å‡ºç°åœ¨ä»–èº«æ—ã€‚\n\né‚£ä¹ˆï¼Œå›ç‹è¯´ï¼Œä½ å‡†å¤‡ç¦»å¼€æ­¤åœ°äº†å—ï¼Ÿ\n\nâ€œé™›ä¸‹ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œæˆ‘æ˜¯ä¸ªåƒ§äººã€‚é™¤äº†é£Ÿé’µä¸€æ— æ‰€æœ‰ã€‚ä½†ç‹ç‹¸æ¢¦åˆ°çš„æ¢¦ï¼Œæœ¬è¯¥å±äºæˆ‘ã€‚æˆ‘æ±‚æ‚¨æŠŠå®ƒè¿˜ç»™æˆ‘ã€‚â€\n\nä½†ï¼Œå›ç‹è¯´ï¼Œå¦‚æœæˆ‘æŠŠæ¢¦è¿˜ç»™ä½ ï¼Œä½ å°±è¦æ›¿å¥¹è€Œæ­»ã€‚\n\nâ€œæˆ‘çŸ¥é“ï¼Œâ€å’Œå°šè¯´ï¼Œâ€œä½†è¿™æ˜¯æˆ‘çš„æ¢¦ã€‚æˆ‘ä¸ä¼šè®©ç‹ç‹¸åšæˆ‘çš„æ›¿æ­»é¬¼ã€‚â€\n\næ¢¦ä¹‹å›ç‚¹ç‚¹å¤´ã€‚ä»–çš„è„¸è‰²æ¯«æ— å˜åŒ–ã€‚\n\nä½†å’Œå°šè§‰å¾—è‡ªå·±çš„å†³æ–­è®©ç‹è€…ä¼¤æ‚²ï¼Œä¹Ÿè®©ä»–æ¬£å–œã€‚\n\nå¹´è½»çš„å’Œå°šçŸ¥é“ä»–ç´¢æ±‚çš„æ˜¯æ­£é“ã€‚\n\nå›ç‹ä¸€æŒ¥æ‰‹ï¼Œç©ºèŒ«çš„é•œå­èººå€’åœ¨åœ°æ¿ä¸Šã€‚\n\né»‘æš—ä¸­ï¼Œç‹çµç«™åœ¨å’Œå°šèº«æ—ã€‚\n\nä½ ä»¥èº«ç›¸æ®‰ï¼Œç§‰æŒæ­£é“ï¼Œå›ç‹å¯¹å’Œå°šè¯´ï¼Œç°åœ¨è½®åˆ°æˆ‘å¸®ä½ ä¸€ä¸ªå°å¿™ã€‚ä½ ä¼šæœ‰ä¸€ç‚¹æ—¶é—´ä¸å­¤ç‹¸å‘Šåˆ«ã€‚\n\nç‹çµæ‰‘å€’åœ¨å›ç‹è„šä¸‹ã€‚\n\nâ€œä½†ä½ å‘èª“è¦å¸®æˆ‘ï¼â€å¥¹æ„¤æ€’åœ°è¯´ã€‚\n\næˆ‘å¸®äº†ä½ ã€‚\n\nâ€œè¿™ä¸å…¬å¹³ï¼Œâ€ç‹ç‹¸è¯´ã€‚\n\næ˜¯çš„ï¼Œå›ç‹é¢”é¦–ï¼Œè¿™ä¸å…¬å¹³ã€‚è¯´å®Œï¼Œä»–æ‚„ç„¶è€Œå»ï¼Œç•™ä¸‹ä¸¤äººç‹¬å¤„ã€‚\n\nä¼ è¯´ä¸­åªè®°å™è¿™äº›ï¼šä»–ç•™ä¸¤äººç‹¬å¤„ï¼Œè®©ä»–ä»¬å‘Šåˆ«ã€‚\n\nä¹Ÿè®¸ä»–ä»¬ç¬¨æ‹™åœ°è¯´å‡ºåˆ«ç¦»ä¹‹è¾ã€‚ä»–ä»¬ä¹‹é—´çš„é˜»éš”â€”â€”å¼ƒä¸–çš„å’Œå°šä¸ç‹çµä¹‹é—´çš„é˜»éš”â€”â€”å¦‚é¸¿æ²Ÿå¤©å ‘ï¼Œä¸å¯é€¾è¶Šã€‚\n\nè¿™å¾ˆå¯èƒ½ã€‚\n\nä½†æœ‰äººè®°å¾—ä»–ä»¬ä¸ºå½¼æ­¤æ‰€ä½œçš„ä¸€åˆ‡ï¼Œç°åœ¨å›æƒ³èµ·æ¥ï¼Œå¥¹å¯èƒ½è§‰å¾—ï¼Œåœ¨é‚£æ®µæ—¶é—´é‡Œä¸¤äººæ›¾å…±èµ´å·«å±±ï¼Œæˆ–è€…è¯´æ¢¦åˆ°äº†é‚£ä¸€ç•ªäº‘é›¨ã€‚\n\nè¿™ä¹Ÿå¯èƒ½ã€‚\n\nä»–ä»¬é“åˆ«å·²æ¯•ï¼Œæ¢¦ä¹‹å›åˆå†åº¦å‡ºç°ã€‚\n\nè¯¸äº‹é‡å›å…¶è½¨ï¼Œä»–è¯´ã€‚å’Œå°šå‘ç°è‡ªå·±æ­£ä»é•œå­é‡Œçœ‹ç€ç‹ç‹¸ã€‚\n\nâ€œæˆ‘ä¼šæŠŠå‘½ç»™ä½ ï¼Œâ€å¥¹æ‚²å£°è½»è¯­é“ã€‚\n\nâ€œæ´»ä¸‹å»ï¼Œâ€å’Œå°šè¯´ã€‚\n\nâ€œæˆ‘ä¼šä¸ºä½ å¤ä»‡ï¼Œâ€ç‹ç‹¸è¯´ï¼Œâ€œå¯¹ä½ ä¸‹æ¯’æ‰‹çš„é˜´é˜³å¸ˆï¼Œä¼šå­¦åˆ°æ‹¿èµ°ç‹ç‹¸æ‰€çˆ±æ„å‘³ç€ä»€ä¹ˆã€‚â€\n\nå’Œå°šä»é•œå­é‡Œæ³¨è§†ç€ç‹ç‹¸ã€‚\n\nâ€œè«å¯»ä»‡ï¼Œä¸”å¯»ä½›ï¼Œâ€ä»–å¯¹å°‘å¥³è¯´ã€‚æ¥ç€å’Œå°šè½¬èº«èµ°å‘é•œå­æ·±å¤„ï¼Œç¿©ç„¶è¿œé€ã€‚\n\nå°ç‹ååœ¨å²©çŸ³è’é‡ä¸­ï¼Œèº«è¾¹æ˜¯çš®æ¯›è‹¥å¤œã€èº«å½¢å¦‚å®‡çš„æ¢¦ä¹‹ç‹ã€‚\n\nâ€œæˆ‘æ‰€åšçš„ä¸€åˆ‡ï¼Œâ€å¥¹è¯´ï¼Œâ€œæˆ‘åŠªåŠ›å»åšçš„æ¯ä»¶äº‹ï¼Œéƒ½æ²¡æœ‰æ„ä¹‰ã€‚â€\n\næ²¡æœ‰ä¸€ä»¶äº‹ä¼šæ²¡æœ‰æ„ä¹‰ï¼Œæ¢¦ä¹‹ç‹è¯´ã€‚æ²¡æœ‰ä¸€äº‹ä¼šæ˜¯å¾’åŠ³ã€‚ä½ å¹´å²å¢æ·»ï¼Œä½ åšå‡ºäº†æŠ‰æ‹©ï¼Œä½ å·²ç»ä¸æ˜¯æ˜¨å¤©çš„ç‹ç‹¸ã€‚è®°ä½å­¦åˆ°çš„ä¸œè¥¿ï¼Œæ´»ä¸‹å»ã€‚\n\nâ€œä»–åœ¨å“ªï¼Ÿâ€å°ç‹é—®é“ã€‚\n\nä»–çš„èº«ç¡åœ¨å¯ºåº™çš„è‰å¸­ä¸Šã€‚ä»–çš„é­‚ä¼šå»è¯¥å»çš„åœ°æ–¹ã€‚\n\nâ€œä»–ä¼šæ­»ï¼Œâ€å°ç‹è¯´ã€‚\n\nä¼šï¼Œæ¢¦ä¹‹ç‹è¯´ã€‚\n\nâ€œä»–å‘Šè¯‰æˆ‘ä¸è¦å¯»ä»‡ï¼Œè€Œå»å¯»ä½›ï¼Œâ€ç‹çµæ‚²å£°è¯´é“ã€‚\n\nè¯šä¹ƒè‰¯è¨€ï¼Œæ¢¦ä¹‹ç‹è¯´ã€‚å¤ä»‡æ˜¯æ¡ä¸å½’è·¯ã€‚ä½ åº”æ˜æ™ºåœ°é¿å¼€å®ƒã€‚é‚£ä¹ˆâ€¦â€¦\n\nâ€œæˆ‘ä¼šå¯»ä½›ï¼Œâ€ç‹ç‹¸çŒ›åœ°ä»°èµ·å¤´è¯´ï¼Œâ€œä½†æˆ‘è¦å…ˆå¯»ä»‡ã€‚â€\n\nå¦‚ä½ æ‰€æ„¿ï¼Œæ¢¦ä¹‹ç‹è¯´ã€‚\n\nå°ç‹ä¸çŸ¥é“å®ƒæ˜¯é«˜å…´è¿˜æ˜¯å¿§ä¼¤ï¼Œæ˜¯æ»¡æ„è¿˜æ˜¯æ¼æ€’ã€‚\n\nå·¨ç‹ä¸€ç”©å°¾å·´ï¼Œè·³è¿‡æ¢¦ç–†ï¼ŒæŠŠå°ç‹ç‹¬è‡ªç•™åœ¨å‰æ‰€æœªæœ‰çš„å­¤ç‹¬ä¸­ã€‚\n\nç‹ç‹¸åœ¨å±±è…°çš„å°åº™ä¸­é†’æ¥ï¼Œå’Œå°šå°±åœ¨å¥¹èº«æ—ã€‚ä»–åŒç›®ç´§é—­ï¼Œæ°”è‹¥æ¸¸ä¸ï¼Œçš®è‚¤æ³›èµ·æµ·æ²«çš„é¢œè‰²ã€‚\n\nå·²ç»å‘ä»–é“åˆ«ï¼Œå´è¿˜çœ‹ç€ä»–èººåœ¨è¿™é‡Œï¼Œå¾ˆç—›ã€‚\n\nä½†å°ç‹è¿˜æ˜¯å¾…åœ¨ä»–èº«è¾¹ï¼Œç…§æ–™ç€ä»–çš„èº«èº¯ã€‚\n\nç¬¬äºŒå¤©ï¼Œå’Œå°šå¹³é™åœ°æ­»å»ã€‚\n\nç‹ç‹¸åœ¨å°åº™ä¸­ä¸ºä»–æ“åŠäº†è‘¬ä»ªã€‚å’Œå°šè¢«åŸ‹åœ¨å±±è…°ï¼Œä¸å¾€æ˜”æ— æ•°å²æœˆä¸­ç…§æ–™è¿‡è¿™åº§å°åº™çš„åƒ§äººä»¬ä¸ºä¼´ã€‚\n\næ»¡æœˆå‡èµ·åˆè½ä¸‹ï¼Œæ®‹æœˆé«˜é«˜çˆ¬ä¸Šå¤©é™…ï¼Œé˜´é˜³å¸ˆè¿˜æ´»ç€ã€‚\n\nä¸ä»…å¦‚æ­¤ï¼Œä»–èƒ½æ„Ÿåˆ°å¿ƒä¸­çš„ææƒ§æ­£é€æ¸æ¯èã€‚\n\nä»–æ‹¿è¿‡æ¼†åŒ£ã€é»‘åŒ™ï¼Œå’Œé‚£äº›å°ç£ç›˜ï¼ŒæŠŠå®ƒä»¬è£¹åœ¨æ–¹å·¾é‡Œï¼ˆç°åœ¨æ–¹å·¾ä¸Šåªæœ‰ä»–çš„è„¸ï¼Œå¦ä¸€ä¸ªäººç‰©å·²ç»è¿ç‚¹æ±¡è¿¹çš„æ®‹å½±éƒ½ä¸å‰©äº†ï¼‰ã€‚\n\nåœ¨é»‘å¤œæ­»å¯‚ä¸­ï¼Œé˜´é˜³å¸ˆæŠŠå®ƒä»¬åŸ‹åœ¨ä¸€æ£µæ ‘ä¸‹ï¼Œè¿™æ ‘å¾ˆä¹…ä»¥å‰æ›¾é­é›·é½‘ï¼Œææ¡ æ‰­æ›²å¾—è®©äººå¿ƒæ‚¸ã€‚\n\nä»–ä¸ºè‡ªå·±è¿˜æ´»ç€è€Œå®½å¿ƒã€‚ä»–æ¯”è¿‡å»ä»»ä½•æ—¶å€™éƒ½å¿«ä¹ã€‚\n\né˜´é˜³å¸ˆçš„å¥½æ—¥å­åˆ°äº†ã€‚\n\nçšæœˆåœ¨ç©ºä¸­å†åº¦åœ†æ»¡æ—¶ï¼Œä¸€ä½å‡ºèº«é«˜è´µçš„å°‘å¥³æ¥æ‹œè®¿ä»–ï¼Œå‘ä»–æ±‚åœå‰æ—¥è‰¯è¾°ã€‚é‚£å¤©é›¾æ°”æµ“æ²‰ï¼ŒæŒ‚æ»¡å¤©åœ°ï¼Œæ¡æ¡å·é¡»ç¼ ç»•åœ¨é˜´é˜³å¸ˆçš„åºœç¬¬ä¸­ã€‚\n\nå¥³å­ç”¨é‡‘å¸å’Œæœ€ç”˜ç¾çš„å¤§ç±³ç­”è°¢ä»–çš„æ™ºæ…§ã€‚\n\nè¿™äº›é’±å¸å¦‚æ­¤å¤è€ï¼Œå·²ç»çœ‹ä¸å‡ºå¸é¢çš„å›¾æ¡ˆã€‚\n\néšåï¼Œå¥¹åä¸Šä¸€è¾†åç¾ç»ä¼¦çš„ç‰›è½¦ï¼Œç¦»å¼€äº†é˜´é˜³å¸ˆçš„å®…é‚¸ã€‚\n\né˜´é˜³å¸ˆè®©ä»†äººéª‘é©¬è·Ÿä¸Šï¼Œå»ææ¸…å°‘å¥³å®¶ä½ä½•æ–¹ï¼Œå§“ç”šåè°ã€‚\n\nå‡ ä¸ªæ—¶è¾°åï¼Œä»†äººå›æ¥ç¦€æŠ¥è¯´ï¼Œå°‘å¥³ä½åœ¨äº¬åŸåŒ—æ–¹å‡ é‡Œå¤–ä¸€æ ‹å¤è€è€Œæ¢å®çš„å®…é™¢é‡Œã€‚ä»–å°†é‚£ä¸ªåœ°æ–¹æè¿°ç»™é˜´é˜³å¸ˆã€‚\n\næ—¥å­ä¸€å¤©å¤©è¿‡å»ã€‚é˜´é˜³å¸ˆæ— æ³•æŠŠå°‘å¥³çš„é¢å®¹ä»å¿ƒä¸­æŠ¹å»ï¼›è¿˜æœ‰å¥¹èµ°è·¯æ—¶çš„çªˆè¢…èº«å§¿ï¼Œé«˜è´µåˆå……æ»¡è¯±æƒ‘ã€‚\n\nä»–æƒ³è±¡ç€å¦‚ä½•å¾—åˆ°å¥¹ï¼ŒæŠšæ‘¸å¥¹ï¼Œå æœ‰å¥¹ã€‚\n\næ¯ä¸ªå¤œæ™šï¼Œä»–ä¸€é—­ä¸Šçœ¼ï¼Œå°‘å¥³å°±ä¼šå‡ºç°ï¼šå¥¹çš„å¤´å‘ï¼Œé•¿ä¸”é»‘ï¼šå¥¹çš„çœ¼ç›ï¼Œå¥½åƒæ˜¥æ—¥æš–é˜³ä¸‹èˆ’å±•çš„ç»¿å¶ï¼›å¥¹çš„çº¤è¶³ï¼Œç¢æ­¥ç¿©ç¿©ï¼›å¥¹çš„å£°éŸ³ï¼Œå¦‚æ¢¦ä¸­ä»™ä¹ï¼›è¿˜æœ‰å¥¹æŒæ‰‡çš„æŸ”è‘ã€‚\n\nä»–å»å’Œå® å§¬è¡Œæˆ¿ï¼Œå´å‘ç°è‡ªå·±æ¯«æ— å…´è‡´ï¼Œä¾¿å›åˆ°ä¹¦æˆ¿ï¼Œå†™ä¸‹ä¸€é¦–è¯—ï¼Œå°†ä»–å¯¹å°‘å¥³çš„æ€æ…•æ¯”ä½œæ± æ°´è¢«ç§‹é£å¹çš±ï¼Œåˆæ…¢æ…¢å¹³æ¯ã€‚é˜´é˜³å¸ˆè®©ä»†äººæŠŠå®ƒé€ç»™å°‘å¥³ã€‚\n\nä»†äººå¸¦æ¥äº†å¥¹çš„å›éŸ³ï¼Œåœ¨è¿™é¦–è¯—ä¸­ï¼Œå°‘å¥³æåˆ°æ°´é¢ä¸Šçš„æœˆå…‰è¢«é£å¹ä¹±çš„æƒ…æ™¯ã€‚é˜´é˜³å¸ˆåŸå’ç€è¯—å¥ï¼Œå¿ƒé©°ç¥å¾€ï¼Œå°‘å¥³é£˜é€¸ç§€ç¾çš„ä¹¦æ³•ä¹Ÿè®©ä»–èµå¹ä¸å·²ã€‚\n\nä»–å‘åºŸå±‹ä¸­çš„ä¸‰ä¸ªå¥³äººé—®èµ·å°‘å¥³çš„äº‹ã€‚è€å¦‡åªæ˜¯ç‹‚ç¬‘ä¸æ­¢ï¼Œä»€ä¹ˆä¹Ÿæ²¡è¯´ï¼Œç¬‘å£°ä¹‹çƒˆï¼Œé˜´é˜³å¸ˆè§‰å¾—å¥¹ä¼šå°±æ­¤æ­»å»ã€‚\n\nåŒæ‰‹å¦‚å†°çš„å¹´è½»å¥³äººè¯´ï¼Œâ€œå¥¹æ‰€çˆ±çš„äººå·²ç»æ­»äº†ã€‚â€\n\nâ€œæ­£å¥½ï¼Œâ€é˜´é˜³å¸ˆè¯´ï¼Œâ€œæˆ‘ä½•æ—¶æ‹œè®¿å¥¹æœ€ä¸ºåˆå®œï¼Ÿâ€\n\nä½†ä¸‰ä¸ªå¥³äººåªæ˜¯å½å½å’¯å’¯åœ°ç¬‘ï¼Œå¥½åƒåœ¨å˜²è®½ä»–ï¼Œé˜´é˜³å¸ˆæ„¤ç„¶ç¦»å¼€äº†å¥¹ä»¬çš„ç ´å±‹ã€‚\n\nç¬¬äºŒå¤©å¤œé‡Œï¼Œä»–æ¥åˆ°å°‘å¥³çš„åºœç¬¬ã€‚\n\né˜´é˜³å¸ˆæ±‚å°‘å¥³æ•ä»–ä¸å‘Šè€Œæ¥ä¹‹ç½ªï¼Œè‡ªé™ˆæ˜¯æƒ…éå¾—ä»¥ã€‚\n\nè¯´ä»–é€šè¿‡åœç®—æœ¯å¾—çŸ¥è‡ªå·±å¿…é¡»ç¦»å®¶èµ¶å¾€å‰ä½ï¼Œä¹Ÿå°±æ˜¯åŒ—æ–¹ã€‚è€Œä¸”ä»–å¿…é¡»åœ¨åŒ—æ–¹é€—ç•™ä¸€å¤œï¼Œæ—©ä¸Šå†å›åŸã€‚\n\nå°‘å¥³é‚€ä»–å…±è¿›æ™šè†³ã€‚\n\nè¿™æ ‹æˆ¿å­å®ä¼Ÿåä¸½ã€‚ä»–å’Œå°‘å¥³å•ç‹¬ç”¨é¥­ï¼Œå¥¹çš„ä»†äººä»¬ä¸æ–­é€ä¸Šé˜´é˜³å¸ˆä»æ²¡å°è¿‡çš„çé¦ä½³è‚´ã€‚\n\nâ€œæˆ‘ä»æ²¡åƒè¿‡è¿™ä¹ˆç¾å‘³çš„ä¸œè¥¿ï¼â€ä»–å’¬äº†ä¸€å£æ²¾äº†å†·é…±æ±çš„å¥‡å¼‚è‚‰é£Ÿã€‚\n\nâ€œæƒ³æƒ³å§ï¼Œâ€å°‘å¥³è¯´ï¼Œâ€œå¦‚æœæˆ‘ä¸åœ¨è¿™é‡Œï¼Œæ‚¨ä¹Ÿè®¸åªèƒ½ååœ¨æ‘‡æ‘‡æ¬²å çš„è€æ—§ç©ºå±‹é‡Œï¼Œå’Œé¼ è±¸è››è™«ä¸€èµ·ç”¨é¥­ã€‚â€\n\nç”¨ç½¢æ™šè†³ï¼Œé˜´é˜³å¸ˆå¦è¨€è‡ªå·±æ¸´æ±‚ä¸å¥¹åºŠç¬¬ç›¸æ¬¢ã€‚\n\nå°‘å¥³å€’ä¸Šä¸¤ç›…ç±³é…’ï¼Œå‘Šè¯‰ä»–è¿™æ˜¯æ— ç¨½ä¹‹è°ˆã€‚\n\nâ€œæˆ‘æ€ä¼šç”˜ä¸ºå§¬å¦„ï¼Ÿâ€å¥¹é—®é“ï¼Œâ€œæ‚¨æœ‰å¦»å­ï¼Œè¿˜æœ‰ä¸ªå°å¦¾ã€‚é‚£æˆ‘ç®—ä»€ä¹ˆï¼Ÿâ€\n\nâ€œæˆ‘æ˜¯ä½ çš„ï¼Œæ˜¯ä½ ä¸€ä¸ªäººçš„ï¼Œâ€é˜´é˜³å¸ˆå¯¹å¥¹è¯´ã€‚\n\nâ€œæ‚¨ç°åœ¨æ˜¯è¿™ä¹ˆè¯´ï¼Œâ€å¥¹è¯´ï¼Œâ€œä½†äº‘æ”¶é›¨ä½ï¼Œæ‚¨çš„å¦»å¦¾åˆä¼šå˜å¾—å¨‡åªšè¯±äººï¼Œæˆ‘åªèƒ½ç‹¬å®ˆç©ºæˆ¿ã€‚æˆ‘æƒ³æ‚¨ä»Šå¤œä¸è¯¥ç•™åœ¨æ­¤é—´ã€‚æ‚¨çš„ç‰›è½¦ä¼šå¸¦æ‚¨åˆ°å¦ä¸€å¤„æˆ¿èˆè¿‡å¤œã€‚å¦‚æœæ‚¨çœŸçš„çˆ±æˆ‘ï¼Œåªçˆ±æˆ‘ä¸€ä¸ªï¼Œé‚£å°±æ—¥åå†æ¥ã€‚â€\n\nâ€œæˆ‘ä»Šæ—¥ä¾¿æ˜¯ä¸ºæ­¤è€Œæ¥ï¼â€é˜´é˜³å¸ˆè¯´ã€‚\n\nâ€œä½†è‹¥æ‚¨è¿˜æœ‰è‡ªå·±çš„å®¶ï¼Œâ€å¥¹è¯´ï¼Œâ€œæˆ‘å°±æ°¸è¿œä¸ä¼šå±äºæ‚¨ã€‚æˆ‘è¦æ‚¨æ¥è¿™é‡Œï¼Œå’Œæˆ‘ä¸€èµ·ä½åœ¨æˆ‘çš„åºœé‚¸ã€æˆ‘çš„å®…é™¢ä¼šå±äºæ‚¨ï¼Œæ°¸è¿œå±äºæ‚¨ã€‚ä½†å¦‚æœæ‚¨å¦æœ‰ä½æ‰€ï¼Œæ—©æ™šä¼šæƒ³å¿µå®ƒï¼Œæ€»æœ‰ä¸€å¤©æ‚¨ä¼šæŠŠæˆ‘æ’‡ä¸‹ã€‚â€\n\nå¥¹å¾®å¾®æŒªåŠ¨èº«å­ã€‚é˜´é˜³å¸ˆè§‰å¾—è‡ªå·±ä¼¼ä¹ç¥åˆ°ä¸€çœ¼ï¼Œå°‘å¥³è¢æœä¸‹ç™½æ¶¦æŸ”æ»‘çš„é…¥èƒ¸ã€‚\n\nâ€œæˆ‘ä¼šå¤„ç†æ‰æˆ‘çš„å®¶ï¼Œâ€é˜´é˜³å¸ˆæ„Ÿåˆ°æ¬²ç«åœ¨èƒ¸ä¸­ç¼çƒ§ã€‚\n\nâ€œè¿˜æœ‰ä»¶äº‹ï¼Œâ€å°‘å¥³ç¢§ç»¿çš„çœ¸å­ç‡ƒè¿›ä»–çš„åŒçœ¼ï¼Œâ€œå°±æ˜¯æ‚¨çš„é˜´é˜³æœ¯ã€‚æˆ‘çŸ¥é“æ‚¨èƒ½å·ä»¤å¤©ç‹—ã€å¦–é¬¼ã€‚è¦æ˜¯æˆ‘è®©æ‚¨ä¸æ‚¦ï¼Œæ‚¨å°±å¯ä»¥ç”¨é‚£äº›å·è½´ä¸Šçš„æ³•æœ¯éšæ‰‹æŠŠæˆ‘å˜æˆä¸€åªé£ä¹Œã€‚æˆ‘æ€èƒ½åšæ‚¨çš„çˆ±äººï¼Œæ‚¨çš„å¦»å­å‘¢ï¼Ÿâ€\n\nå°‘å¥³åˆä¸ºä»–å€’ä¸Šä¸€ç›…ç±³é…’ã€‚è¿™ä»¤å¥¹çš„è¢æœç¨ç¨æ»‘å¼€äº†å‡ åˆ†ï¼Œé˜´é˜³å¸ˆçœ‹åˆ°äº†ä¸€æ¡æŸ”ç™½çš„é…¥èƒ¸ï¼Œä¹³å¤´ç²‰è‰³å¾—å¥½åƒæ—¥å‡ºã€‚\n\né˜´é˜³å¸ˆæ‰‘è¿‡å»æƒ³è¦æŠ“ä½å¥¹ï¼Œå°‘å¥³ä¼¼ä¹æ ¹æœ¬æ²¡æ³¨æ„åˆ°é˜´é˜³å¸ˆçš„å¤±ç¤¼ï¼Œåªæ˜¯çµå·§åœ°å‘åä¸€é€€ï¼Œé¿å¼€ä»–çš„åŒæ‰‹ï¼Œç¼“ç¼“èµ·èº«å‘ä»–é“è¾ã€‚\n\né˜´é˜³å¸ˆæ„è¯†åˆ°è‰¯å®µå·²å°½ï¼Œä¸ç¦å¤§å£°å¹æ¯ï¼ŒçŠ¹å¦‚ä¸–é—´æ‰€æœ‰é—¨è½´åŒæ—¶å‘»åŸã€‚å°±åœ¨æ­¤åˆ»ï¼Œç–¯ç‹‚æ”«ä½äº†ä»–ï¼Œè‡³å°‘äººä»¬æ˜¯è¿™ä¹ˆè¯´çš„ã€‚\n\nç¬¬äºŒå¤©ï¼Œäº¬åŸèµ·äº†ä¸¤å¤„ç«å¤´ã€‚å…ˆçƒ§èµ·æ¥çš„æ˜¯é˜´é˜³å¸ˆçš„åºœé‚¸ï¼Œå…¨åŸæ’ç¬¬åä¸ƒçš„åº­é™¢ã€‚\n\né˜´é˜³å¸ˆæ—©ä¸ŠæŠŠæ‰€æœ‰å·è½´æ³•å™¨é«˜é«˜å †æ»¡ä¸€è¾†ç‰›è½¦ï¼Œèµ¶è½¦ç¦»å¼€äº†å®¶ï¼Œæ‰€ä»¥æ²¡äººæ€€ç–‘åˆ°ä»–èº«ä¸Šã€‚è¿™æ˜¯ä¸€åœºæƒ¨çƒˆçš„ç«äº‹ï¼Œçƒ§èµ·æ¥æ—¶ï¼Œä»–çš„å¦»å­ã€å°å¦¾å’Œæ‰€æœ‰ä»†äººéƒ½è¿˜åœ¨å®‰ç¡ï¼Œè¿™ç«å¤ºèµ°äº†ä»–ä»¬çš„æ€§å‘½ã€‚\n\nç¬¬äºŒå¤„æ˜¯åŸéƒŠçš„ä¸€åº§ç ´å±‹ï¼Œå®ƒåœ¨é™„è¿‘å‘æ¥åå¤´é™©æ¶ã€‚\n\nè¿™åº§æˆ¿å­é‡Œä½äº†ä¸‰ä¸ªå¥³äººï¼Œæ®è¯´æ˜¯å·«å¦‡è¯å¸ˆã€‚æ²¡äººçŸ¥é“èµ·ç«æ—¶ï¼Œå¥¹ä»¬åœ¨ä¸åœ¨å®¶ã€‚å› ä¸ºåœ¨åºŸå¢Ÿæ®‹ç°ä¸­ï¼Œäººä»¬åªæ‰¾åˆ°äº†å©´å„¿å’Œç¨šç«¥çš„å°¸éª¨å¤´é¢…ã€‚\n\næ™šä¸Šï¼Œé˜´é˜³å¸ˆæ¥åˆ°è®©ä»–å¿ƒé†‰ç¥é©°çš„å°‘å¥³é—¨å‰ã€‚\n\nâ€œæˆ‘çš„å®¶å·²ä»˜ä¹‹ä¸€ç‚¬ï¼Œâ€ä»–è¯´ï¼Œâ€œæˆ‘çš„å¥³äººéƒ½æ­»äº†ã€‚é™¤äº†ä½ æˆ‘å†æ— äººå¯çˆ±ï¼Œé™¤äº†è¿™é‡Œä¹Ÿæ— å¤„å¯å»ã€‚â€\n\nå°‘å¥³å†²ä»–ç¬‘äº†ç¬‘ï¼Œè¿™ä¸€ç¬‘çš„å«£ç„¶ï¼Œè®©ä»–è§‰å¾—å¥½åƒé‡‘ä¹Œè·ƒç©ºï¼Œå…‰èŠ’éƒ½æ—©åœ¨ä»–ä¸€äººèº«ä¸Šã€‚\n\nâ€œè¿˜æœ‰è¿™è¾†è½¦ï¼Œâ€ä»–è¯´ï¼Œâ€œæˆ‘æŠŠæ‰€æœ‰æ³•æœ¯éƒ½å¸¦æ¥äº†ã€‚æ‰€æœ‰å·è½´ï¼Œæ‰€æœ‰æ³•å™¨ã€‚æ‰€æœ‰é¥°ç‰©ã€æœ¯æ–å’ŒçœŸåï¼Œæˆ‘å·ä»¤å¦–é­”çµé¬¼ã€ç®—åä¸–ä»Šç”Ÿçš„æ³•åŠ›ï¼Œéƒ½å¾—è‡ªå®ƒä»¬ã€‚æ‰€æœ‰è¿™äº›ï¼Œæˆ‘éƒ½å¸¦æ¥æ”¾åœ¨ä½ çš„è„šä¸‹ã€‚â€\n\nå°‘å¥³ç‚¹ç‚¹å¤´ï¼Œå‡ ä¸ªä»†äººæ‹‰è¿‡ç‰›è½¦ï¼Œæ¬ä¸‹å™¨ç‰©ï¼Œå–èµ°ä»–å¸¦æ¥çš„æ‰€æœ‰å™¨ç‰©ã€‚\n\nâ€œå¥½äº†ï¼Œâ€é˜´é˜³å¸ˆè¯´ï¼Œâ€œå¦‚ä»Šæˆ‘æ˜¯ä½ çš„äº†ï¼Œå†æ— ä¸€ç‰©å¯ä»¥é˜»éš”æˆ‘ä»¬ã€‚â€\n\nâ€œè¿˜æœ‰ä¸€ä»¶ï¼Œâ€å°‘å¥³å¯¹ä»–è¯´ï¼Œâ€œæ‚¨çš„è¢å­ã€‚è„±ä¸‹æ¥ï¼Œè®©æˆ‘çœ‹çœ‹æ‚¨ã€‚â€\n\né˜´é˜³å¸ˆçš„è¡€è„‰ä¸­æ€æ»¡äº†ç–¯ç‹‚å’Œæ¬²æœ›ã€‚ä»–è„±ä¸‹é•¿è¢ï¼Œèµ¤èº«è£¸ä½“ç«™åœ¨æš®é›¾ä¹‹ä¸­ã€‚å°‘å¥³æ¡èµ·ä»–çš„é•¿è¢ï¼Œæ‹¿åœ¨æ‰‹é‡Œã€‚\n\nä»–å¼ å¼€åŒè‡‚ï¼ŒæŠ±å‘å°‘å¥³ã€‚\n\nå°‘å¥³é ä¸Šä»–çš„èº«å­ã€‚â€œå¦‚ä»Šï¼Œâ€å¥¹ä½è¯­é“ï¼Œâ€œæ‚¨æ— å®¶ã€æ— å¦»ï¼Œæ— å¦„ï¼Œæ— æœ¯åŠ›ï¼Œæ— è¡£è¢ã€‚æ‚¨èˆå¼ƒäº†ä¸€åˆ‡ã€‚ç°åœ¨è½®åˆ°æˆ‘é€æ‚¨ç‚¹ä¸œè¥¿äº†ã€‚â€\n\nå¥¹ä¼¸æ‰‹æ§ä½ä»–çš„å¤´ï¼Œæ‹‰åˆ°å”‡è¾¹ï¼Œä»¿ä½›è¦å»ä»–ï¼Œå»ä»–çš„çœ¼ç›ã€‚\n\nâ€œä½†æˆ‘ä¼šç•™ä¸‹ä½ çš„å‘½ï¼Œâ€å¥¹è¯´ï¼Œâ€œå› ä¸ºä»–ä¸æƒ³è®©æˆ‘æ€ä½ ã€‚â€\n\nç‹ç‹¸çš„ç‰™æ˜¯å¾ˆå°–çš„ã€‚\n\nç¬¬äºŒå¤©ï¼Œäººä»¬å‘ç°é˜´é˜³å¸ˆå‡ºç°åœ¨ä¸€åº§äºŒåå¹´å‰å°±åºŸå¼ƒäº†çš„é™¢è½ä¸­ã€‚\n\nå®ƒè¿‡å»çš„ä¸»äººæ—©å·³å¤±åŠ¿ã€‚æœ‰äººè¯´è¿™æ˜¯æŠ¥åº”ï¼Œå› ä¸ºåäº”å¹´å‰ï¼Œæ­£æ˜¯é˜´é˜³å¸ˆå½“æ—¶ä¾å¥‰çš„å¤§åï¼Œä»¤è¿™ä¸ªå®¶æ—è¡°è´¥å‡‹é›¶ã€‚\n\nä»–èµ¤èº«è£¸ä½“ï¼Œçª˜è¿«ç¾æƒ­ï¼Œè¡Œäº‹ç–¯ç–¯ç™«ç™«ã€‚\n\næœ‰äººè¯´æ˜¯å› ä¸ºå¤±å»äº†å¦»å­å’Œå®…é™¢ï¼ŒæŠŠä»–æ„ç–¯çš„ã€‚\n\nä¹Ÿæœ‰äººè¯´æ˜¯å› ä¸ºå¤±å»äº†çœ¼æ™´ã€‚è€Œé‚£äº›ç¬ƒä¿¡é¬¼ç‹ä»™æ€ªçš„äººï¼Œåˆ™ç§ä¸‹é‡Œä¼ è¨€ï¼Œè¯´è¿™æ˜¯ä¸­äº†ç‹æœ¯ã€‚\n\nä¹‹åçš„æ—¥å­é‡Œï¼Œä»–è¿‡å»çš„äº²æœ‹å¥½å‹çœ‹åˆ°ä»–æ²¿è¡—ä¹è®¨ï¼Œéƒ½æœ‰æ„é¿å¼€ã€‚ä»–èº«ä¸Šåªæœ‰ç¢å¸ƒé®ä½“ï¼Œå…¶ä¸­ä¸€æ¡ç¼ åœ¨è„‘è¢‹ä¸Šï¼ŒæŒ¡ä½è„¸ä¸Šçš„ä¼¤ç—•ã€‚\n\nä»–æ´»åœ¨è´«è‹¦ã€å‘è´±å’Œç–¯ç‹‚ä¸­ï¼Œä¸€ç›´åˆ°æ­»ã€‚æ­¤ç”Ÿå†æ— ä¸æ¯«æ¬¢æ„‰ï¼Œåªæœ‰åœ¨æ¢¦ä¸­æ‰å¾—ç‰‡åˆ»å–˜æ¯ã€‚\n\nä¸è¿‡ï¼Œä»–åˆ°åº•æ˜¯æ€ä¹ˆæ´»çš„ï¼Œåˆæ˜¯æ€ä¹ˆæ­»çš„ï¼Œä¼ è¯´ä¸­éƒ½æ²¡æœ‰æåŠã€‚\n\nâ€œä½†è¿™åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿâ€æ¸¡é¸¦è¯´ã€‚\n\nå¥½å¤„ï¼Ÿå¤œæ¢¦ä¹‹å›é—®é“ã€‚\n\nâ€œå—¯ï¼Œâ€æ¸¡é¸¦è¯´ï¼Œâ€œå’Œå°šæœ¬ä¼šæ­»ï¼Œä»–ç¡®å®æ­»äº†ã€‚ç‹ç‹¸æƒ³è¦æ•‘ä»–ï¼Œæ²¡èƒ½æ•‘æˆã€‚è€Œé˜´é˜³å¸ˆä¸§å¤±äº†ä¸€åˆ‡ã€‚ä½ ç­”åº”ç‹ç‹¸çš„è¯·æ±‚ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿâ€å›ç‹çœ‹ç€è¿œæ–¹çš„åœ°å¹³çº¿ã€‚åœ¨ä»–çš„çœ¼ä¸­ï¼Œä¸€é¢—å­¤æ˜Ÿä¸€é—ªè€Œæ²¡ã€‚\n\né¢†æ‚Ÿï¼Œç™½å¸è¯´ã€‚ä¸€åˆ‡éƒ½æ˜¯éšä»–ä»¬çš„æ­¥è°ƒè¿›è¡Œçš„ã€‚æˆ‘çš„å¿ƒæ€æ²¡æœ‰è¢«æµªè´¹äº†ã€‚\n\nâ€œé¢†æ‚Ÿï¼Ÿâ€æ¸¡é¸¦é«˜æ‰¬èµ·é»‘è‰²çš„å¤´é¢…ï¼Œç«–èµ·é¢ˆç¿ã€‚â€œä½ æ˜¯è¯´è°ï¼Ÿâ€\n\næ‰€æœ‰äººã€‚å°¤å…¶æ˜¯å’Œå°šã€‚\n\næ¸¡é¸¦ä»å–‰å’™é‡ŒæŒ¤å‡ºä¸€é˜µå˜¶å“‘çš„å«å£°ï¼Œä»ä¸€åªçˆªå­è·³åˆ°å¦ä¸€åªï¼Œåƒæ˜¯åœ¨æ•æ‰è¯å¥ã€‚\n\né»‘ç³çš„ç‹è€…è€å¿ƒåœ°çœ‹ç€å®ƒã€‚\n\nâ€œä½†ä»–æ­»äº†ï¼Œâ€è¿‡äº†åŠæ™Œï¼Œæ¸¡é¸¦è¯´é“ã€‚\n\nè¯´åˆ°è¿™ä¸ªï¼Œä½ ä¹Ÿä¸€æ ·å•Šï¼Œæˆ‘çš„é»‘é¸¦ã€‚è¿™æ¬¡ä½ ä¹Ÿå°†æœ‰æ‰€é¢†æ‚Ÿã€‚\n\nâ€œé‚£ä½ å‘¢ï¼Ÿâ€æ›¾æ˜¯ä¸ªè¯—äººçš„æ¸¡é¸¦é—®é“ã€‚\n\nä½†ç™½å¸å§‹ç»ˆè£¹åœ¨å¯‚é™é‡Œï¼Œçœ‹ç€åœ°å¹³çº¿ï¼Œæ²¡æœ‰åšç­”ã€‚\n\nè¿‡äº†ä¸€é˜µï¼Œæ¸¡é¸¦é‡é‡æ‹æ‰“äº†å‡ ä¸‹ç¿…è†€ï¼Œé£ä¸Šæ¢¦çš„å¤©ç©ºï¼ŒæŠŠå›ç‹ç‹¬è‡ªç•™ä¸‹ã€‚\n\nè¿™å°±æ˜¯ç‹ç‹¸ä¸å’Œå°šçš„æ‰€æœ‰ä¼ è¯´ã€‚\n\nå‡ ä¹æ˜¯æ‰€æœ‰ã€‚å› ä¸ºæ®è¯´é‚£äº›æ¢¦åˆ°é¥è¿œå›½åº¦çš„äººï¼Œæœ‰æ—¶ä¼šçœ‹åˆ°ä¸¤ä¸ªèº«å½±ï¼Œåœ¨è¿œæ–¹èµ°è¿‡ï¼Œåƒæ˜¯ä¸€ä¸ªåƒ§äººå’Œä¸€åªç‹ç‹¸ã€‚ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå¥³äººå’Œä¸€ä¸ªç”·äººã€‚\n\nä¹Ÿæœ‰äººè¯´è¿™ä¸å¯èƒ½ï¼Œå› ä¸ºå³ä½¿æ˜¯åœ¨æ¢¦å¢ƒã€åœ¨å†¥åºœï¼Œå’Œå°šä¸ç‹ç‹¸éƒ½å±äºä¸åŒçš„ä¸–ç•Œï¼Œå°±åƒä»–ä»¬åœ¨å‡¡é—´ä¸€æ ·ã€‚\n\nè€Œä¸”ï¼Œä»–ä»¬å°†æ°¸è¿œå¾…åœ¨è¿™ä¸åŒçš„ä¸–ç•Œã€‚\n\nä½†æ¢¦æ˜¯å¾ˆç¦»å¥‡çš„ä¸œè¥¿ï¼Œé™¤äº†å¤œæ¢¦ä¹‹å›è°ä¹Ÿä¸æ•¢è¯´å®ƒä»¬æ˜¯çœŸæ˜¯å‡ï¼Œè°ä¹Ÿä¸çŸ¥é“å®ƒä»¬åˆä¼šè®²è¿°ä»€ä¹ˆæ¼«æ¼«å…‰é˜´ä¸­çš„æ•…äº‹ã€‚\n","tags":["æ‘˜æŠ„","å°è¯´","å¥‡å¹»"],"categories":["life"]},{"title":"JavaScriptè®¾è®¡æ¨¡å¼(1)â€”â€”å•ä¾‹æ¨¡å¼","url":"/archives/17/","content":"\nåœ¨ JavaScript ä¸­å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ã€‚å¤§ä½“æ€è·¯æ— éå°±æ˜¯ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œå®ä¾‹åŒ–ç¤ºä¾‹å¹¶ä¿å­˜èµ·æ¥ã€‚å†æ¬¡è°ƒç”¨æ—¶ç›´æ¥å°†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–çš„å¯¹è±¡è¿”å›å³å¯ã€‚\n\n<!--more-->\n## å®ç°\n\n### ä¸€ä¸ªæç®€çš„å®ç°æ–¹å¼\n\n```js\nvar __instance;\nfunction Single() {\n    if (__instance) {\n        return __instance;\n    }\n    this.name = 'single';\n    this.time = Date.now();\n    __instance = this;\n    return this;\n}\n// éªŒè¯\nvar obj1 = new Single();\nvar obj2 = new Single();\nobj1 === obj2 // true\n```\n\n  ä¸Šé¢ä½¿ç”¨ `__instance` å­˜å‚¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°æ—¶å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œä»¥åæ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°éƒ½ç›´æ¥è¿”å›è¯¥å¯¹è±¡ã€‚å®ç°äº†å•ä¾‹ã€‚\n\n  ä½†ä¸Šä¾‹æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯å®¹æ˜“é€ æˆå…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œä½¿å¾— `__instance` è¿™ä¸ªå˜é‡å¹¶ä¸å®‰å…¨ï¼Œå¾ˆå®¹æ˜“è¢«å¤–éƒ¨ä¿®æ”¹ã€‚\n\n  **å½“ç„¶**ï¼Œå¦‚æœä½¿ç”¨äº†æ¨¡å—åŒ–å¼€å‘åˆ™ä¸ç”¨æ‹…å¿ƒè¯¥é—®é¢˜ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å®ç°æ–¹æ³•ï¼Œç®€å•æœ‰æ•ˆã€‚\n\n#### ä¸€ä¸ªæ”¹è¿›çš„å®ç°æ–¹æ³•\n\n  é’ˆå¯¹å…¨å±€å˜é‡æ±¡æŸ“çš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šåŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚ä½¿ç”¨ä¸åŒçš„å‘½åç©ºé—´æˆ–å†³å®šå¥½å‘½åè§„åˆ™ï¼Œæ¥é¿å…å˜é‡è¢«æ„å¤–ä¿®æ”¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨**é—­åŒ…**æ¥è§£å†³è¿™é—®é¢˜ï¼š\n\n```js\nfunction Single() {\n    this.name = 'single';\n    this.time = Date.now();\n    var instance = this;\n    Single = function() {\n        return instance;\n    }\n}\n```\n\n  ä¸Šé¢çš„å†™æ³•ï¼Œé€šè¿‡ç¬¬ä¸€æ¬¡è°ƒç”¨æ„é€ å‡½æ•°æ—¶æ”¹å†™æ„é€ å‡½æ•°æ¥æ¥å®ç°å•ä¾‹ã€‚åˆ©ç”¨äº†å‡½æ•°é—­åŒ…çš„ç‰¹æ€§ï¼Œå°†ç¤ºä¾‹ä¿æŠ¤èµ·æ¥ï¼Œä¸ä¼šè¢«å¤–éƒ¨è®¿é—®å’Œæ”¹å†™ã€‚\n\n  åœ¨æ›´ä¸¥æ ¼çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»å¯ä»¥å¯¹ä¸Šè¿°ä¾‹å­è¿›è¡Œè¿‘ä¸€æ­¥çš„ä¼˜åŒ–ã€‚\n\n```js\nfunction Single() {\n    this.name = 'single';\n    this.time = Date.now();\n    \n    var instance;\n    Single = function() {\n        return instance;\n    }\n    \n    Single.prototype = this.__proto__;\n    Single.prototype.consctructor = Single;\n    \n    instance = this;\n    \n    return this;\n}\n```\n\n  ä¸Šé¢çš„ä¼˜åŒ–åœ¨äºï¼Œä¿è¯èƒ½å¤Ÿåœ¨å®ä¾‹åŒ–åå†æ¬¡ä¸ºæ·»åŠ ç±»æ–¹æ³•æ—¶èƒ½å¤Ÿå¾—åˆ°ç»§æ‰¿ï¼ŒåŒæ—¶èƒ½å¤Ÿä¿è¯æ¯æ¬¡è¿”å›çš„å®ä¾‹åŒ–å¯¹è±¡çš„æ„é€ å‡½æ•°æŒ‡å‘åŒä¸€ä¸ªå‡½æ•°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥ä¸ç”¨åšæ¬¡è€ƒè™‘ã€‚\n\n## æ€»ç»“\n\n  åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ç°å•ä¾‹æ¨¡å¼æ—¶å¾ˆç®€å•çš„ã€‚å°¤å…¶æ˜¯ä½¿ç”¨äº†æ¨¡å—åŒ–æ—¶ï¼Œåªéœ€ä½¿ç”¨ä¸€ä¸ªå˜é‡å°†ç¬¬ä¸€æ¬¡å®ä¾‹åŒ–çš„å¯¹è±¡ä¿å­˜èµ·æ¥ï¼Œå†æ¬¡è°ƒç”¨ç›´æ¥è¿”å›å³å¯ã€‚\n","tags":["ECMAScript","è®¾è®¡æ¨¡å¼","å•ä¾‹æ¨¡å¼"],"categories":["developer"]},{"title":"requestAnimationFrameâ€”â€”HTML5åŠ¨ç”»åˆ©å™¨","url":"/archives/15/","content":"\n`requestAnimationFrame` æ˜¯ `window` å¯¹è±¡ä¸­çš„ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œæ˜¯ä¸“é—¨ä¸ºäº†ç½‘é¡µåŠ¨ç”»è€Œç”Ÿçš„ã€‚\n\n<!--more-->\n\n## ä¼˜ç‚¹\n\n  åœ¨è¯¥æ–¹æ³•æ²¡æœ‰å®ç°ä¹‹å‰ï¼Œåœ¨æ“ä½œ DOM åŠ¨ç”»æ—¶ï¼Œå‡ ä¹åªèƒ½é€šè¿‡ `setInterval` å®šæ—¶å™¨æ¥å®ç°ã€‚è€Œ `setInterval` æ–¹æ³•å®ç°åŠ¨ç”»çš„ç¼ºç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š\n\n1. æ—¶é—´è®¡ç®—ä¸ç²¾å‡†ã€‚ç”±äº `setInterval` å¤„äº `JavaScript` çš„å¼‚æ­¥æ‰§è¡Œé˜¶æ®µï¼ŒåŸºäº `JavaScript`å•çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œä¸ºå…¶è®¾å®šæ‰§è¡Œæ—¶é—´æ— æ³•ä¿è¯å‡†ç¡®ã€‚\n2. æ€§èƒ½æµªè´¹ã€‚ä½¿ç”¨ `setInterval` æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸ºå…¶è®¾å®šåˆé€‚çš„é—´éš”å€¼ï¼Œä»¥ä¿è¯åŠ¨ç”»æµç•…ã€‚è€Œè¿‡ä½çš„é—´éš”å°†é€ æˆäº‹ä»¶é¢‘ç¹çš„è§¦å‘é™ä½ä»£ç æ€§èƒ½ã€‚\n3. ä¸åˆé¢„æœŸçš„è¡¨ç°ã€‚ä½¿ç”¨ `setInterval` è®¾ç½®åŠ¨ç”»æ—¶ï¼Œå½“ç”¨æˆ·åˆ‡æ¢è‡³å…¶ä»–é¡µé¢æˆ–æœ€å°åŒ–æ—¶ï¼Œ`setInterval` ä¼šæš‚æ—¶è¿›å…¥â€œä¼‘çœ â€çŠ¶æ€,ä½†æ˜¯å¹¶ä¸æ˜¯ä¸æ‰§è¡Œç¨‹åº,å®ƒä¼šæŠŠéœ€è¦æ‰§è¡Œçš„æ“ä½œæ”¾åœ¨é˜Ÿåˆ—ä¸­ ï¼Œç­‰åˆ°ä¸‹æ¬¡çª—å£ä¸€æ‰“å¼€çš„ä¸€ç¬é—´æŠŠé˜Ÿåˆ—é‡Œé¢çš„å…¨éƒ¨æ‰§è¡Œã€‚è¿™æ ·å°±é€ æˆäº†åŠ¨ç”»æ•ˆæœæ··ä¹±ï¼Œä¸åˆé¢„æœŸã€‚\n\n  è€Œ `requestAnimationFrame` åˆ™å¾ˆå¥½çš„é¿å…äº†ä»¥ä¸Šå‡ ç‚¹ï¼š\n\n1. åŠ¨ç”»çš„è°ƒç”¨æ—¶é—´æ˜¯æµè§ˆå™¨é€šè¿‡ç³»ç»Ÿæ—¶é—´è®¾å®šï¼Œæ˜¯æµè§ˆå™¨çº§åˆ«çš„æ“ä½œï¼Œä¿è¯äº†æ—¶é—´çš„ç²¾ç¡®ã€‚\n2. è¯¥æ–¹æ³•åªæ¥å—ä¸€ä¸ªå›æ‰å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç”±æµè§ˆå™¨è®¾ç½®åˆé€‚çš„æ—¶é—´é—´éš”ï¼ˆæµè§ˆå™¨å‚å•†æ ¹æ®å±å¹•åˆ·æ–°ç‡æ¥è®¾å®šï¼Œé€šå¸¸ä¸º`1/60`ç§’ï¼‰ã€‚åŒæ—¶æµè§ˆå™¨ä¼šæŠŠè¯¥æ—¶åˆ»æ‰€æœ‰çš„ DOM æ“ä½œé›†ä¸­èµ·æ¥å®Œæˆï¼ˆä¼˜åŒ–ï¼‰ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å®Œæˆã€‚åœ¨å¤æ‚åŠ¨ç”»æƒ…å†µä¸‹ï¼Œæ€§èƒ½æå¤§æå‡ã€‚å¹¶ä¸”è¯¥æ–¹æ³•ä¼šå¿½ç•¥ä¸å¯è§å…ƒç´ çš„åŠ¨ç”»æ“ä½œã€‚\n3. å¦‚æœé¡µé¢ä¸å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œä¼šè‡ªåŠ¨æš‚åœåŠ¨ç”»çš„æ‰§è¡Œã€‚\n\n## è¯­æ³•\n\n  `requestAnimationFrame` æ–¹æ³•çš„è¯­æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°å³å¯ï¼š\n\n```js\nwindow.requestAnimationFrame(callback);\nfunction callback() {\n    /* some animation code */\n}\n```\n\n  è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª long éé›¶æ•´æ•°ï¼Œè¯·æ±‚ ID ï¼Œä¹Ÿæ˜¯å›è°ƒåˆ—è¡¨ä¸­å”¯ä¸€çš„æ ‡è¯†ã€‚\n\n  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹æ³•çš„ä½¿ç”¨å’Œ `setTimeout` çš„æ—¶å€™ç•¥æœ‰ä¸åŒã€‚[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame) ä¸­å¯¹è¯¥æ–¹æ³•çš„è§£é‡Šå¦‚ä¸‹ï¼š\n>window.requestAnimationFrame() æ–¹æ³•å‘Šè¯‰æµè§ˆå™¨æ‚¨å¸Œæœ›æ‰§è¡ŒåŠ¨ç”»å¹¶è¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å‡½æ•°æ¥æ›´æ–°åŠ¨ç”»ã€‚è¯¥æ–¹æ³•ä½¿ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨é‡ç»˜ä¹‹å‰è°ƒç”¨ã€‚\n\n  ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ å…¥çš„å›è°ƒå‡½æ•°åªä¼šåœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¸­è¢«è°ƒç”¨ï¼Œä»…æ­¤ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯åƒ `setTimeout` ä¸€æ¬¡è®¾ç½®ï¼Œå¾ªç¯è°ƒç”¨ã€‚æ‰€ä»¥ [MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame) ä¸­ç»™å‡ºäº†è¿™æ ·çš„æç¤ºï¼š\n>æ³¨æ„ï¼šè‹¥æ‚¨æƒ³è¦åœ¨ä¸‹æ¬¡é‡ç»˜æ—¶äº§ç”Ÿå¦ä¸€ä¸ªåŠ¨ç”»ç”»é¢ï¼Œæ‚¨çš„å›è°ƒä¾‹ç¨‹å¿…é¡»è°ƒç”¨ requestAnimationFrame()ã€‚\n\n  å¦å¤–éœ€è¦æ³¨æ„ï¼Œè¯¥æ–¹æ³•ä¼šä¸º `callback` æ–¹æ³•ä¼ å…¥ä¸€ä¸ªé»˜è®¤å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œç”¨ä»¥è®¡ç®—è¯¥åŠ¨ç”»ä»å¼€å§‹åˆ°è¯¥æ¬¡å›è°ƒä¹‹é—´çš„æ¯«ç§’æ•°ã€‚å¦‚æœä¸æ³¨æ„ï¼Œå½“éœ€è¦å¯¹å›è°ƒå‡½æ•°ç»‘å®šå‚æ•°å¹¶ä¸”å‚æ•°ç¼ºçœæ—¶å¯èƒ½ä¼šäº§ç”Ÿè¯¯è§£ã€‚\n\n## ä¾‹å­\n\n<iframe height='600' scrolling='no' title='è‡ªç”±è½ä½“å°çƒ' src='//codepen.io/Hozen/embed/jZrpWE/?height=265&theme-id=0&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n```js\nconst ball = document.getElementById('ball');\n\nlet x = 5;  // åˆå§‹é«˜åº¦\nlet t = 1;  // æ—¶é—´é—´éš”\nlet a = 0.5  // åŠ é€Ÿåº¦\nlet v = 0;  // åˆé€Ÿåº¦\nlet maxX = 400;  // æœ€å¤§ä½ç§»ï¼ˆåå¼¹ä½ç½®ï¼‰\n\nfunction drop() {\n  ball.style.top = Math.floor(x) + 'px';\n  if (x > maxX){\n    v = -v;\n  } else {\n    v += a *t;\n  }\nx += v* t;\n  window.requestAnimationFrame(drop);\n}\nwindow.requestAnimationFrame(drop);\n//drop();\n\n```\n\n  ä¸Šé¢çš„ä¾‹å­æ¨¡æ‹Ÿäº†ä¸€ä¸ªå°çƒçš„æ— èƒ½é‡æŸè€—çš„è‡ªç”±è½ä½“åŠåå¼¹è¿åŠ¨ï¼ˆHTML å’Œ CSS ä»£ç æœªç»™å‡ºï¼‰ã€‚å…¶ä¸­åŠ¨ç”»å‡½æ•°æ˜¯ `drop`ï¼Œåœ¨è¯¥å‡½æ•°ä¸­è®¡ç®—å°çƒçš„ä½ç§»å¹¶å¤åˆ¶ç»™å°çƒ DOM çš„ `top` å±æ€§ã€‚\n\n  æˆ‘ä»¬å¸Œæœ›åŠ¨ç”»å¾ªç¯æ‰§è¡Œï¼Œè‡³è°ƒç”¨ä¸€æ¬¡ `window.requestAnimationFrame(drop)` æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¿™åªä¼š**åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜æ—¶**æ›´æ–°ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ `drop` å‡½æ•°æœ«å°¾å†æ¬¡è°ƒç”¨ `window.requestAnimation(drop)` ä¿è¯æ¯æ¬¡éƒ½æœ‰ä¸‹ä¸€æ¬¡ï¼Œå³å®ç°äº†åŠ¨ç”»å¾ªç¯ã€‚\n\n  å¦‚æœå¸Œæœ›åŠ¨ç”»åœ¨ç‰¹å®šæ¡ä»¶ä¸‹åœæ­¢ï¼Œåœ¨å‡½æ•°ä¸­è°ƒç”¨ `window.requestAnimationFrame` å‰ `return` å³å¯ã€‚\n","tags":["ClientScript","HTML5","requestAnimationFrame"]},{"title":"ä¸ºDOM2çº§äº‹ä»¶å‡½æ•°ä¼ å‚â€”â€”bindçš„åº”ç”¨","url":"/archives/14/","content":"\nåœ¨å¤æ‚çš„ web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”é‡‡ç”¨ DOM 2 çº§äº‹ä»¶æ¥ç»‘å®šå’Œç§»é™¤å‡½æ•°ã€‚å³ä½¿ç”¨ `addEventListener` å’Œ `removeEventListener` æ–¹æ³•ä¸º DOM èŠ‚ç‚¹ç»‘å®šå’Œè§£ç»‘å‡½æ•°ã€‚å› ä¸º DOM 1 çº§äº‹ä»¶ä¸æ”¯æŒå¤šä¸ªå‡½æ•°çš„ç»‘å®šã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ ä½¿ç”¨ DOM 1 çº§ä¸º DOM ç»‘å®šæ–°å‡½æ•°æ—¶ï¼Œæ—§çš„å‡½æ•°ä¼šè¢«å–ä»£ã€‚è¿™åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ä¸è¢«å¸Œæœ›çœ‹åˆ°çš„ã€‚\n<!--more-->\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨ `document` å¯¹è±¡ä¸Šç»‘å®šå¤šä¸ªé¼ æ ‡äº‹ä»¶ï¼Œä½¿ç”¨ DOM 2 çº§äº‹ä»¶æ—¢ä¸ä¼šå–æ¶ˆä¹‹å‰çš„å‡½æ•°ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¯¹é¡¹ç›®ç»„å…¶ä»–æˆå‘˜ç¼–å†™çš„äº‹ä»¶ç»‘å®šé€ æˆå½±å“ã€‚\n\n## ä¸€ä¸ªé—®é¢˜\n\nä¸€ä¸ªå¸¸è§çš„ DOM 2 çº§äº‹ä»¶ç»‘å®šå’Œè§£ç»‘å¦‚ä¸‹ï¼š\n\n```js\nconst fn = () => {\n    console.log('in function');\n}\n\n// ç»‘å®š\nelement.addEventListener('cilck', fn);\n\n// è§£ç»‘\nelement.removeEventListener('click', fn);\n```\n\nå¦‚ä¸Šï¼Œç”±äºä¸€ä¸ª DOM 2 çº§äº‹ä»¶å¯ä»¥è¢«ç»‘å®šå¤šä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è§£ç»‘å‡½æ•°æ—¶ï¼Œéœ€æŒ‡æ˜è¦è§£ç»‘çš„å‡½æ•°åã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœåœ¨ DOM 2 çº§äº‹ä»¶ä¸Šç»‘å®šäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œé‚£ä¹ˆæ˜¯éš¾ä»¥è§£ç»‘æ”¹å‡½æ•°çš„ã€‚æ‰€ä»¥åº”å°½é‡é¿å…ç»‘å®šåŒ¿åå‡½æ•°ã€‚\n\nä½†é€šå¸¸ï¼Œç»‘å®šçš„å‡½æ•°å¹¶ä¸æ˜¯å®Œå…¨å­¤ç«‹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥ä¸€äº›å‚æ•°ã€‚æ–°æ‰‹å¸¸ä¼šçŠ¯çš„ä¸€ä¸ªé”™è¯¯å°±æ˜¯ä¼å›¾é€šè¿‡ä»¥ä¸‹è¯­å¥ä¼ å‚ï¼š\n\n```js\nelement.addEventListener('click', fn(params));\n```\n\nç„¶è€Œï¼Œä¸Šé¢çš„å†™æ³•ä¼šç›´æ¥æ‰§è¡Œ `fn` å‡½æ•°ï¼Œè€Œä¸æ˜¯ç­‰å¾…ç‚¹å‡»äº‹ä»¶çš„è§¦å‘æ—¶æ‰æ‰§è¡Œã€‚ç»™ `click` ç»‘å®šçš„ä¹Ÿæ˜¯ `fn(params)` çš„è¿”å›å€¼ï¼Œè€Œé `fn` å‡½æ•°ã€‚\n\n## å®ä¾‹\n\nä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚è¯¥å®ä¾‹å®ç°ç‚¹å‡»å°çƒæ—¶å¯ä»¥æ‹–æ‹½å°çƒï¼Œå½“æ¾å¼€é¼ æ ‡æ—¶åœæ­¢æ‹–æ‹½ã€‚è€ƒè™‘åˆ°è¦åœ¨ `document` ä¸Šç»‘å®šäº‹ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ DOM 2 çº§äº‹ä»¶ã€‚\n<iframe height='265' scrolling='no' title='bind' src='//codepen.io/Hozen/embed/yKRxRO/?height=265&theme-id=0&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/Hozen/pen/yKRxRO/'>bind</a> by Hozen (<a href='https://codepen.io/Hozen'>@Hozen</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n\né€šå¸¸ï¼Œå®ç°æ‹–æ‹½æ•ˆæœæ—¶ï¼Œå¤§ä½“æ€è·¯æ˜¯ï¼š\n\n* ç‚¹å‡»ç›®æ ‡å¯¹è±¡æ—¶ï¼Œä¸º `document` ç»‘å®š `mousemove` äº‹ä»¶ï¼Œå½“é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œæ ¹æ®é¼ æ ‡ä½ç½®è®¾ç½®ç›®æ ‡å¯¹è±¡çš„ä½ç½®ã€‚\n\n* å½“é¼ æ ‡å¼¹èµ·æ—¶ï¼Œè§£ç»‘ `document` çš„ `mousemove` äº‹ä»¶ã€‚\n\n  è¿™æ ·éœ€è¦ç›‘å¬ç›®æ ‡å¯¹è±¡çš„ `mousedown` äº‹ä»¶ï¼Œ `document` çš„ `mousemove` å’Œ `mouseup` äº‹ä»¶ã€‚\n\n  å½“é¼ æ ‡åœ¨ç›®æ ‡å¯¹è±¡ä¸ŠæŒ‰ä¸‹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºæ­¤æ—¶ç›®æ ‡å¯¹è±¡çš„ä½ç½®ï¼Œç„¶åå°†ä½ç½®ä¿¡æ¯ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ `mousemove` äº‹ä»¶å‡½æ•°ä¸­ã€‚è¿™å°±æ¶‰åŠäº† DOM 2 çº§äº‹ä»¶çš„ä¼ å‚é—®é¢˜ã€‚\n\n  è¯¥ä¾‹ä¸­çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```js\n// ä¸»å‡½æ•°\nconst main = () => {\n  const ball = document.getElementById('ball');\n  \n  let isDraging = false; // è®°å½•æ˜¯å¦åœ¨æ‹–åŠ¨ä¸­\n  \n  let dragWithParams; // ç»‘å®šå‚æ•°çš„æ‹–åŠ¨æ–¹æ³•\n  \n  const drag = (params, e) => {\n    let x = e.clientX - params.offsetLeft;\n    let y = e.clientY - params.offsetTop;\n    \n    // é¿å…å°çƒç§»å‡ºè§†å£\n    if (x < 0) {\n      x = 0;\n    } else if (x > document.documentElement.clientWidth - ball.offsetWidth) {\n      x = document.documentElement.clientWidth - ball.offsetWidth\n    }\n    if (y < 0) {\n      y = 0;\n    } else if (y > document.documentElement.clientHeight - ball.offsetHeight) {\n      y = document.documentElement.clientHeight - ball.offsetHeight;\n    }\n    \n    ball.style.left = x + 'px';\n    ball.style.top = y + 'px';\n  }\n  \n  // å½“é¼ æ ‡å¼¹èµ·æ—¶åˆ¤æ–­æ˜¯å¦ç§»é™¤ mousemove äº‹ä»¶\n  document.addEventListener('mouseup', () => {\n    if (isDraging) {\n      console.log('up');\n      document.removeEventListener('mousemove', dragWithParams);\n      isDraging = false;\n    }\n  })\n  \n  // ç‚¹å‡»çƒæ—¶ä¸º document ç»‘å®š mousemove äº‹ä»¶\n  ball.addEventListener('mousedown', e => {\n    const offsetLeft = e.clientX - ball.offsetLeft;\n    const offsetTop = e.clientY - ball.offsetTop;\n    \n    isDraging = true;\n    \n    // ç»‘å®šå‚æ•°\n    dragWithParams = drag.bind(null, {\n      offsetLeft,\n      offsetTop,\n    })\n    \n    document.addEventListener('mousemove', dragWithParams);\n   });\n  \n}\n\ndocument.addEventListener('DOMContentLoaded', main);\n```\n\n### ä»£ç åˆ†æ\n\nä¸Šä¾‹ä¸­åˆ©ç”¨äº† `bind` æ–¹æ³•å¯ä»¥ç»‘å®šå‚æ•°çš„ç‰¹ç‚¹æ¥ä¸ºäº‹ä»¶å‡½æ•°ç»‘å®šå‚æ•°ã€‚[ç‚¹å‡»æŸ¥çœ‹ `bind` è¯¦æƒ…](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)ã€‚\n\nåŒæ ·éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»£ç ä¸­ä¸ºç»‘å®šå‚æ•°åçš„ `drag` å‡½æ•°èµ‹äºˆäº†æ–°çš„å¼•ç”¨ `dragWithParams`ã€‚è¿™æ˜¯å› ä¸º `bind` æ–¹æ³•è¿”å›çš„æ˜¯åŸå‡½æ•°çš„æ‹·è´è€ŒéåŸå‡½æ•°ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬ä¸èµ‹äºˆå®ƒå¼•ç”¨åï¼Œè¯¥å‡½æ•°å°±å˜æˆäº†åŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬ä¾ç„¶æ— æ³•è§£ç»‘ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ˜¯æ— æ³•è§£ç»‘çš„ã€‚\n\n```js\nconst fn = (params) => {\n    console.log(params);\n}\n\nconst params = 'some params';\n\n// æ­¤å¤„ç›¸å½“äºç»‘å®šäº†ä¸€ä¸ªåŒ¿åå‡½æ•°\ndocument.addEventListener('mousemove', fn.bind(null, params));\n\n// æ— æ³•è§£ç»‘äº‹ä»¶ï¼Œå› ä¸ºè¯¥äº‹ä»¶ç»‘å®šçš„ä¸æ˜¯ fn å‡½æ•°ï¼Œè€Œæ˜¯å®ƒçš„ä¸€ä¸ªæ‹·è´ã€‚\ndocument.remvoeEventListener('mousemove', fn);\n\n```\n\n`bind` æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šå‡½æ•°ä¸­ `this` çš„æŒ‡å‘ï¼Œå…¶ä½™çš„å‚æ•°ä¼šè¢«ä½œä¸ºç»‘å®šçš„å‚æ•°ä¼ å…¥æ–°çš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šå‡ºç°åœ¨ä¼ å…¥å‚æ•°çš„å‰é¢ä½ç½®ã€‚æ‰€ä»¥åœ¨ç¤ºä¾‹ä»£ç  `drag` å‡½æ•°ä¸­ï¼Œå°† event å¯¹è±¡å‚æ•°æ”¾åœ¨äº† `params` åé¢æ¥æ”¶ã€‚\n","tags":["ClientScript","DOMäº‹ä»¶"],"categories":["developer"]},{"title":"æˆ‘ä¸æ˜äºŒ","url":"/archives/13/","content":"\n\nä¸€\n\n  æˆ‘ä¸æ˜äºŒåˆè§æ˜¯ä¸€å¹´å¤šä¹‹å‰çš„äº‹æƒ…äº†ï¼Œé‚£æ—¶å€™æˆ‘åˆšåˆšä¸Šå¤§å­¦ï¼Œè¿˜æœªæˆå¹´ã€‚è¿™å¾ˆå…³é”®ï¼Œæœªæˆå¹´ä½¿å¾—æˆ‘å’Œæ˜äºŒæ—©æ—©ç›¸é‡ã€‚\n<!--more-->\n\n  é‚£æ˜¯å†›è®­åçš„ä¸€ä¸ªå°å‡æœŸï¼Œæˆ‘å’Œå®¤å‹ç™¾æ— èŠèµ–ï¼Œå•†é‡ç€å»ä¸Šç½‘ï¼Œä½†æˆ‘ä»¬ä¸­å‡ äººè¿˜æœªæˆå¹´ï¼Œæ€•å»ç½‘å§è¢«èµ¶å‡ºæ¥ã€‚å…¶å®æˆ‘æ—©è¯¥æ–™åˆ°ï¼Œåˆ°å“ªé‡Œçš„ç½‘å§éƒ½ä¸€æ ·ä¼šæœ‰â€œä¸´æ—¶å¡â€ã€‚ä½†åˆåˆ°ä¸€ä¸ªé™Œç”Ÿçš„åœ°æ–¹ï¼Œæ€»æ˜¯åˆ†å¤–è°¨æ…å’Œå±€ä¿ƒã€‚\n\n  äºæ˜¯æˆ‘ä»¬å†³å®šå»å­¦æ ¡æœºæˆ¿ã€‚ä»æ˜è¿œä¸€åŒºæ•™å­¦æ¥¼é—¨å‰èµ°è¿‡ï¼Œç©¿è¿‡å®é™ä¼˜é›…çš„æ˜è¿œæ¹–ã€‚é‚£æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è§åˆ°æ˜äºŒã€‚å¥¹èƒŒå¯¹ç€å®½å¹¿çš„ä¿®è¿œæ¹–ï¼Œç¬¬ä¸€çœ¼æ„Ÿè§‰æ˜äºŒæ™®æ™®é€šé€šï¼Œä½†å´æœ‰ä¸€ç§ç‹¬ç‰¹çš„å®é™æ°”è´¨ã€‚æ²¡å¤šæ‰“é‡ï¼Œæˆ‘ä¾¿æ€¥åŒ†åŒ†åœ°è¿›äº†æœºæˆ¿ã€‚æ˜äºŒè‡ªç„¶ä¹Ÿä¸ä¼šåœ¨ä¸‰äº”äººç¾¤ä¸­æ³¨æ„åˆ°æˆ‘ã€‚åæ¥è§æ˜äºŒçš„æ¬¡æ•°æ¸æ¸å¤šäº†ï¼Œä½†å¥¹æ€»æ˜¯ä¸€è¨€ä¸å‘ï¼Œæˆ‘ä¹Ÿæ— æ„æ”€è°ˆã€‚\n\n  åæ¥æˆ‘åŠ å…¥äº†å­¦ç”Ÿç»„ç»‡ï¼Œæ¯å‘¨æœ‰ä¸¤æ¬¡å€¼ç­ï¼Œæˆ‘å¾—ä»¥åœ¨å®é™æ— äººçš„æ¸…æ™¨ä¸æ˜äºŒç›¸é‡åœ¨æ˜è¿œæ¹–ç•”ï¼Œæˆ‘æƒ³è¿™æ˜¯å¥¹ç¬¬ä¸€æ¬¡æ³¨æ„åˆ°æˆ‘ã€‚æˆ‘åœ¨åŠå…¬å®¤å®‰å®‰é™é™åœ°å€¼ä¸€ä¸ªä¸Šåˆçš„ç­ã€‚ç­‰æ•™å­¦æ¥¼é‡Œäººæ¸æ¸å¤šèµ·æ¥ï¼Œæˆ‘èƒŒèµ·ä¹¦åŒ…ç¦»å»ï¼Œä¸çŸ¥é“æ­¤æ—¶æ˜äºŒä¼šä¸ä¼šåœ¨ç†™æ”˜çš„äººç¾¤ä¸­æ³¨æ„åˆ°æˆ‘ã€‚\n\n  åæ¥ç‹¬è‡ªå»è‡ªä¹ çš„æ¬¡æ•°å¤šäº†ï¼Œæ€»æ˜¯èƒ½åœ¨å¹½é™çš„æ¸…æ™¨æˆ–å¤œæ™šä¸æ˜äºŒç›¸é‡æˆ–åˆ†åˆ«ã€‚å°¤å…¶æ˜¯å‘¨æœ«ï¼Œä¸€æ•´å¤©æ˜è¿œæ¹–æ—åˆ«æ— ä»–äººï¼Œæˆ‘å’Œæ˜äºŒå°±é™é™åœ°ç‹¬å¤„ä¸€å¤©ï¼Œç›¸é¡¾æ— è¨€å´ä¹Ÿç›¸çœ‹ä¸åŒã€‚æ˜äºŒé«˜å†·ï¼Œé™¤äº†æ™šä¸Šä¼šæ—¶ä¸æ—¶å¼„å‡ºå¥‡æ€ªçš„åŠ¨é™æƒŠå“æˆ‘å¤–ï¼Œå§‹ç»ˆä¸€è¨€ä¸å‘ã€‚æ˜äºŒå¹¶ä¸é«˜ï¼Œæ™®æ™®é€šé€šçš„ä¸ªå¤´ï¼Œä¸è¿‡ç¡®æ˜¯å†·äº†äº›ã€‚\n\n  ä½†æ˜äºŒè¿˜æ˜¯æ¯”æˆ‘é«˜å¤šäº†ï¼Œæˆ‘å€¼ç­çš„æ—¶å€™æ€»è¦ä¸ˆé‡ä¸€éä»–çš„é«˜åº¦ã€‚æ˜äºŒæ˜¯ä¸€æ ‹æ•™å­¦æ¥¼ï¼Œæˆ‘å–œæ¬¢åœ¨å®ƒæ¥¼é¡¶æ— äººçš„åŠå…¬å®¤å€¼ç­æˆ–è‡ªä¹ ã€‚\n\n  æ˜äºŒçš„è„–é¢ˆå¤„æœ‰å‡ æ£µé“æ ‘ï¼Œé•¿åŠ¿ç”šå¥½ï¼Œæ¯”æ˜è¿œä¸€åŒºã€ä¸‰åŒºçš„è¦èŒ‚ç››é«˜å¤§å¾—å¤šã€‚ç”±äºæ˜äºŒæ˜¯æœºæˆ¿é‡åœ°ï¼Œæ‰€ä»¥ä¸åŒäºå…¶ä»–æ•™å­¦æ¥¼çš„ä¸€æ¥¼åŠä¾§å¼€æ”¾ï¼Œæ˜äºŒæ˜¯å…¨å°é—­çš„ã€‚å››åˆé™¢ä¸€æ ·ï¼ŒæŠ¬å¤´åªèƒ½çœ‹åˆ°ä¸€å°å—æ–¹æ–¹çš„å¤©ã€‚é˜³å…‰å¾ˆéš¾ç…§è¿›æ¥ï¼Œé£ä¹Ÿéš¾å¾—å¹è¿›æ¥ï¼Œæœ‰äº›é˜´å†·ã€‚\n\n  å› ä¸ºæ˜äºŒçš„å…¨å°é—­ï¼Œæˆ‘å‡ æ¬¡æ™šä¸Šè¢«å…³åœ¨é‡Œé¢ã€‚å»å«æ¥¼ç®¡å¤§çˆ·ä¸ºæˆ‘å¼€é—¨æ˜¯ä¸€ä»¶æå…¶å›°éš¾å’Œæ— å¥ˆçš„äº‹æƒ…ï¼Œé‚£å¤§çˆ·è„¾æ°”æš´èºï¼Œæ¯æ¬¡æ€»è¦éš”ç€ä»–æˆ¿é—´çš„é—¨æ­‡æ–¯åº•é‡Œè´£éª‚åŠå¤©ï¼Œæˆ‘åœ¨å¤–é¢å‘èº¬å±ˆè†ï¼Œæ´—è€³æ­å¬ï¼Œè¿å£°å”±å–ã€‚ç­‰ä»–éª‚å¾—å·®ä¸å¤šäº†ï¼Œä¾¿å¼€å£è¯·ä»–è€äººå®¶ç½‘å¼€ä¸€é¢ï¼Œé™æ©ä¸æˆ‘ã€‚å¤§çˆ·ç»ä¸äº²è‡ªå‡ºæ¥ï¼Œè€Œæ˜¯ç€å¤§å¦ˆæ‹¿é’¥åŒ™å‡ºé—¨ï¼Œå¥‰æ—¨æ”¾è¡Œã€‚åƒè¥¿å¤©å–ç»å€’æ¢é€šå…³æ–‡ç‰’ï¼Œæ¯æ¬¡éƒ½é¢‡è´¹å‘¨æŠ˜ã€‚\n\n  å¤§å­¦é€šè¿‡å‡ æ¬¡å®µï¼Œæœ‰å‡ æ¬¡æ˜¯åœ¨é»‰é—¨å®¢ã€‚æˆ‘å¾ˆå–œæ¬¢è¿™ä¸ªåå­—ï¼Œâ€œé»‰é—¨å®¢â€ï¼Œç¬¬ä¸€æ¬¡å¬åˆ°è¿™ä¸ªåå­—æ—¶æˆ‘å°±èµå¹ä¸å·²ï¼Œå¦‚æ­¤æ–‡è´¨å½¬å½¬çš„åå­—ç»å¯¹ä¸å¯èƒ½æ˜¯ç½‘å§ä¹‹ç±»çš„ä½ä¿—åœºæ‰€ã€‚å¦æœ‰ä¸¤æ¬¡é€šå®µå°±æ˜¯åœ¨æ˜äºŒäº†ã€‚\n\n  ç¬¬ä¸€æ¬¡æ˜¯é€šå®µåšæ±‡ç¼–è¯­è¨€çš„è¯¾ç¨‹è®¾è®¡ï¼Œä¸€å¤œæ²¡ç¡ï¼Œæ¯«æ— å›°æ„ã€‚äº”æ¥¼æ˜¯æœ‰é£çš„ï¼Œé£ä»å¤©å°æ¶Œè¿›æ¥ï¼Œå¹è¿›å…¨å°é—­çš„æ•™å­¦æ¥¼ï¼Œå››å¤„ä¹±æ’ï¼Œèµ°æŠ•æ— è·¯ï¼Œç»ˆäºä»çŠ„è§’æ—®æ—¯çš„å¤§å°ç¼éš™é’»å‡ºå»ï¼Œå‘å‡ºå›°å…½å‡ºç¬¼èˆ¬çš„ä½å•¸å£°ã€‚\n\n  é£å£°æ•²ç€æˆ‘çš„é—¨ã€‚æˆ‘æŠŠæ•°æ®ä¸€ééå…¥æ ˆå‡ºæ ˆï¼Œå¾ªç¯è°ƒç”¨ï¼Œç”¨æœ€åŸºæœ¬çš„è¯­è¨€å’Œé€»è¾‘æ¼”ç»ç¼–ç¨‹ä¹‹ç¾ã€‚ç»ˆäºåœ¨å¤©äº®ä¹‹å‰å®Œæˆäº†ä»»åŠ¡ï¼Œåƒæ˜¯å®Œæˆäº†â€œå‘½è¿äº¤å“æ›²â€ä¸€èˆ¬éª„å‚²ï¼Œä¸ç”±å‘å‡ºå¦‚é‡Šé‡è´Ÿçš„èµå¹å£°ã€‚æˆ‘çœ‹äº†ä¸‹å¤©æ°”é¢„æŠ¥ï¼Œæ‹¿å‡ºæ‰‹æœºå®šä½ï¼ŒæŸ¥äº†ä¸‹ç»çº¬åº¦ï¼Œç²—ç•¥è®¡ç®—äº†ä¸‹æ—¥å‡ºæ—¶é—´ï¼Œå®šäº†ä¸ªé—¹é’Ÿï¼Œå°æ†©ç‰‡åˆ»ã€‚\n\n  è¿˜æœªæ·±çœ ï¼Œæ‰‹æœºå°±è·³åŠ¨ç€å°†æˆ‘æ‰¯é†’ã€‚å¤©è¿˜æ˜¯é»‘çš„ï¼Œèµ°å‡ºåŠå…¬å®¤ï¼Œä¸€é˜µå¯’æ„ã€‚æ˜äºŒå¤æœ«çš„æ¸…æ™¨çœŸå†·ã€‚æˆ‘èµ°åˆ°å¤©å°ä¼¸äº†å‡ ä¸ªæ‡’è…°ï¼Œå¬åˆ°ä¹…è¿çš„é¸Ÿå„¿å½å–³çš„å£°éŸ³ï¼Œè®©æˆ‘ç»ˆäºæŠŠæ˜¨å¤©å’Œä»Šå¤©åˆ†éš”å¼€æ¥ã€‚\n\n  ä¸œæ–¹æ³›ç™½ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°äº†å¤ªé˜³ä»åŸå¸‚è¾¹ç¼˜æ—ç«‹çš„é«˜æ¥¼ä¸­å‡èµ·ï¼Œè«åæ„ŸåŠ¨æ¶Œä¸Šå¿ƒå¤´ã€‚æˆ‘æ‹ä¸‹ç…§ç‰‡ä¼ åˆ°ç¤¾äº¤ç½‘ç»œï¼Œç‚¹èµæ•°å¯è§‚ï¼Œæœ‹å‹ä»¬ç¾¡æ…•ä¸å·²ã€‚\n\n  äºæ˜¯æ²¡è¿‡å¤šä¹…åˆæ¥é€šå®µäº†ä¸€æ¬¡ï¼Œè¿™ä¸€æ¬¡æœ‰å‡ ä¸ªæœ‹å‹è¿˜æœ‰æœ‹å‹çš„å¥³æœ‹å‹ï¼Œå¥½ä¸çƒ­é—¹ã€‚æˆ‘å¾ˆæ—©å°±ç¡ç€äº†ï¼Œæœ¬æ¥å°±æ˜¯å¼ºè¡Œè¢«ä»–ä»¬å«æ¥ä½“éªŒæ‰€è°“çš„â€œé•¿å¤§å¤œç”Ÿæ´»â€ï¼Œå¯æˆ‘è§‰ç€ç¡è§‰æ‰æ˜¯å¯¹å¤œç”Ÿæ´»æœ€å¥½çš„ä½“éªŒã€‚ä¸­é—´è¢«ä»–ä»¬æ‰¯é†’ï¼šâ€œå‡ ç‚¹æ—¥å‡ºï¼Ÿâ€æˆ‘å¤´ä¹Ÿä¸æŠ¬ï¼šâ€œä»€ä¹ˆå•Šï¼Ÿæ˜å¤©é˜´å¤©ï¼Œæ²¡æœ‰æ—¥å‡ºâ€¦â€¦â€ä¸€é˜µâ€œå§æ§½â€æ­¤èµ·å½¼ä¼â€¦â€¦\n\n  ç­‰æˆ‘é†’æ¥ï¼Œå¤©å·²å¤§äº®ï¼Œåªè¿˜å‰©ä¸‹ä¸€ä¸ªå—œç¡çš„åŒå­¦è¿˜åœ¨åšç€æ—¥å‡ºç¾æ¢¦ã€‚å…¶ä»–äººéƒ½èµ°å…‰äº†ï¼Œåªç•™ä¸‹ä»–ä»¬åƒå‰©ä¸‹çš„é›¶é£ŸåŒ…è£…è¢‹ï¼Œæˆ‘æŠ–äº†æŠ–è¿æ¸£éƒ½æ²¡å‰©ï¼Œé¥®æ–™å€’æ˜¯å‰©äº†å¥½å‡ ä¸ªåŠç“¶ï¼Œæˆ‘å’½äº†å’½å£æ°´æŠŠå®ƒä»¬æŠ›è¿›åƒåœ¾æ¡¶ã€‚æ‹äº†æ‹æ‰‹ï¼šâ€œé„‚ä¿Šè¨€ï¼Œæ¥æ¥æ¥ï¼Œèµ·åºŠçœ‹æ—¥å‡ºäº†ã€‚â€\n\näºŒ\n\n  ä¸‹é›ªçš„æ˜äºŒæ›´å®‰é™ï¼Œæˆ‘æœ¬ä»¥ä¸ºæ˜äºŒçš„é“æ ‘ä¼šé£é›ªæ— ä¾µï¼Œå¯é›ªå´ååèƒ½å®‰å®‰é™é™çš„è½åœ¨é“æ ‘ä¸Šï¼Œä»äº”å±‚å‘ä¸‹çœ‹å»ï¼Œè½å‡ºä¸€ç‰‡ç‰‡å·¨å¤§çš„é›ªèŠ±ã€‚æˆ‘åœ¨çª—å‰å†™ä¸œè¥¿ï¼Œé›ªä»çª—å¤–æ…¢æ…¢è½ä¸‹ï¼Œç”¨ä½™å…‰å°±èƒ½æ„Ÿè§‰åˆ°é›ªèŠ±çš„é£˜è½ï¼Œè®©æˆ‘æœ‰ç‚¹ä¸èƒ½é™ä¸‹å¿ƒæ¥ï¼Œä½†ä¹Ÿä¸è§‰å¾—å­¤å•äº†ã€‚\n\n  æ—©æ™¨åœ¨åºŠä¸Šå¬åˆ°å®¤å‹è¯´ä¸‹é›ªäº†ï¼Œæˆ‘å°±å†ç¡ä¸ç€ï¼Œèµ·åºŠé£é€Ÿçš„æ´—æ¼±åƒé¥­ï¼Œå‡†å¤‡ç€ä¸æ˜äºŒçš„é›ªä¸­é‚‚é€…ã€‚\n\n  ä¸€è·¯ä¸Šå¥½å¤šåŒå­¦æ‹¿å‡ºæ‰‹æœºè®°å½•ä¸‹ä»Šå¹´è¥¿å®‰çš„ç¬¬ä¸€åœºé›ªï¼Œæˆ‘ä¸ä¸ºæ‰€åŠ¨ã€‚å› ä¸ºæˆ‘çŸ¥é“æ˜äºŒåœ¨ç­‰æˆ‘ï¼Œæ˜äºŒæ˜¯å±äºæˆ‘çš„ã€‚æœçœŸï¼Œä¸‹é›ªçš„æ˜äºŒæ›´æ˜¯æ— äººå…‰é¡¾ï¼Œæ¥¼å†…ä¸€ç‰‡è‚ƒç„¶ï¼Œæˆ‘ä¸€åº¦å¬åˆ°äº†é›ªè½çš„å£°éŸ³ã€‚\n\n  æ¯ä¸ªå†¬å¤©æˆ‘éƒ½èƒ½æƒ³èµ·é«˜ä¸­å­¦è¿‡çš„ä¸€ç¯‡è¯¾æ–‡â€”â€”åˆ˜äº®ç¨‹çš„ã€Šå¯’é£å¹å½»ã€‹ï¼ŒæŠŠå®ƒåå¤çš„è¯»å‡ éï¼Œèµå¹ä¸å·²ã€‚é«˜ä¸­çš„æ—¶å€™ï¼Œæˆ‘è¯»ä¸æ‡‚çš„æ–‡ç« éƒ½ä¼šè¢«æˆ‘æ— çŸ¥åœ°è®¤ä¸ºæ•…ä½œé«˜æ·±ã€‚ã€Šå¯’é£å¹å½»ã€‹æ˜¯ä¸ªä¾‹å¤–ï¼Œé¢„ä¹ è¿™ç¯‡è¯¾æ–‡çš„æ—¶å€™ï¼Œæˆ‘å°±å·²ç»å®Œå®Œå…¨å…¨è¢«ä½œè€…çš„è¯­è¨€å’Œé€»è¾‘æ‰€å¸å¼•ã€‚æˆ‘åå¤çš„è¯»ï¼Œå´ç»ˆç©¶è¿˜æ˜¯ä¸èƒ½ä½“ä¼šè¿™äº›è´¨æœ´å¹³é™è€Œåˆæ„å‘³æ·±é•¿çš„æ–‡å­—åé¢éšè—ç€ä½œè€…æ€æ ·çš„å¿ƒå¢ƒã€‚è€å¸ˆè¯´è¿™ç¯‡æ–‡ç« è®²äº†ä½œè€…ç»å†çš„è‹¦éš¾ï¼Œé«˜è€ƒä¸è€ƒï¼Œå…¶ä»–çš„å†ä¸å¤šè¯´ã€‚\n\n>ç»å†è¿‡è®¸å¤šä¸ªå†¬å¤©åï¼Œæˆ‘æ‰æ¸æ¸æ˜ç™½è‡ªå·±å†èº²ä¸è¿‡é›ªï¼Œæ— è®ºæˆ‘æ®‹ç¼©åœ¨å±‹å­é‡Œï¼Œè¿˜æ˜¯è¿œåœ¨å†¬å¤©çš„å¦ä¸€ä¸ªåœ°æ–¹ï¼Œçº·çº·æ‰¬æ‰¬çš„é›ªï¼Œéƒ½ä¼šè½åœ¨æˆ‘æ­£ç»å†çš„ä¸€æ®µå²æœˆé‡Œã€‚å½“ä¸€ä¸ªäººçš„å²æœˆåƒè’é‡ä¸€æ ·æ•å¼€æ—¶ï¼Œä»–ä¾¿å†ä¹Ÿæ— æ³•ç…§ç®¡å¥½è‡ªå·±â€¦â€¦\n\n  å†è¯»è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ç»ˆäºå¼€å§‹æœ‰äº†ä¸ä¸€æ ·çš„ä½“ä¼šã€‚ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹å¹¶éåªæœ‰è‹¦éš¾ï¼Œæ›´å¤šçš„æ˜¯å­¤ç‹¬ã€‚\n\n  æˆ‘ä¼¼ä¹ç†è§£äº†ä½œè€…ä¸ºä»€ä¹ˆä¸€ç›´åœ¨çµ®çµ®å¨åœ°è¯´é‚£æ ¹å†»åçš„éª¨å¤´â€”â€”å¿ƒçŸ¥å†ä¹Ÿæš–ä¸çƒ­å´ä¸€ç›´åŠªåŠ›æƒ³æš–çƒ­çš„éª¨å¤´ã€‚æˆ‘æ‘¸æ‘¸æˆ‘çš„éª¨å¤´ï¼Œæˆ‘å¤§æ¦‚ä¸€ç›´æ˜¯ä½œè€…ç¬”ä¸‹é‚£ä¸ªâ€œä»¥å¾€çš„æˆ‘â€å§ï¼š\n\n>æ¯é€¢ç¬¬ä¸€åœºé›ªï¼Œéƒ½ä¼šæ€€ç€è«åçš„å…´å¥‹ã€‚ç«™åœ¨å±‹æªä¸‹è§‚çœ‹å¥½ä¸€é˜µï¼Œæˆ–å…‰ç€å¤´é’»è¿›å¤§é›ªä¸­ï¼Œå¥½åƒæœ‰æ„è¦è®©é›ªçŸ¥é“ä¸–ä¸Šæœ‰æˆ‘è¿™æ ·ä¸€ä¸ªäººï¼Œå´ä¸çŸ¥é“å¯’å†·æ—©å·²ç›¯ä½äº†è‡ªå·±æ´»è¹¦ä¹±è·³çš„å¹´è½»ç”Ÿå‘½ã€‚\n\n  æˆ‘çªç„¶æ‘¸åˆ°äº†é‚£æ ¹éª¨å¤´ï¼Œå¼€å§‹å‘ç°ï¼Œå½“å†¬å¤©æ¥ä¸´ï¼Œæ— è®ºåšäº†æ€æ ·çš„å‡†å¤‡ï¼Œéƒ½ä¸å¯é¿å…çš„è¦è¢«å†»ä¼¤ã€‚\n\n>ä»é‚£ä¸ªå¤œæ™šæˆ‘æ‡‚å¾—äº†éšè—æ¸©æš–â€”â€”åœ¨å‡›å†½çš„å¯’é£ä¸­ï¼Œèº«ä½“ä¸­é‚£ç‚¹æ¸©æš–æ­£ä¸€æ­¥æ­¥é€€å®ˆåˆ°ä¸€ä¸ªéšç§˜çš„æœ‰æ—¶è¿æˆ‘è‡ªå·±éƒ½éš¾ä»¥æ‰¾çš„æ·±è¿œå¤„â€¦â€¦â€\n\n  ä¹Ÿè®¸æˆ‘è¿˜å¹´è½»ï¼Œè¿˜èƒ½å†ç»å—ä¸€äº›é£é›ªï¼Œè¿˜èƒ½ä»å†°é›ªé‡Œç¬‘ç€çˆ¬èµ·ï¼Œé è‡ªå·±æ‰“é¢¤æ”«å–èº«ä½“æ·±å¤„çš„æ¸©æš–ã€‚æˆ‘çš„äººç”Ÿè¿˜é•¿ï¼Œä¹Ÿè®¸æˆ‘ä¸è¯¥æ—©æ—©æŠŠæˆ‘çš„æ¸©æš–æŒ¥éœä¸€ç©ºã€‚\n\n  è½åœ¨ä¸€ä¸ªäººä¸€ç”Ÿä¸­çš„é›ªï¼Œæˆ‘ä»¬ä¸èƒ½å…¨éƒ¨çœ‹è§ã€‚\n\n  2016å¹´1æœˆäºé•¿å®‰å¤§æ˜äºŒäº”æ¥¼ é›ª\n","tags":["æ•£æ–‡","æ ¡å›­"],"categories":["life"]},{"title":"æ’åºç®—æ³•ï¼ˆäºŒï¼‰â€”â€”äº¤æ¢æ’åºï¼ˆå†’æ³¡æ’åº+å¿«é€Ÿæ’åºï¼‰","url":"/archives/12/","content":"\n\n## å†’æ³¡æ’åº\n\n### ç®—æ³•åˆ†æ\n\n  å†’æ³¡æ’åºå¯èƒ½æ˜¯æ’åºç®—æ³•ä¸­æœ€ç®€å•æœ€å¥½ç†è§£çš„ç®—æ³•äº†ã€‚\n<!--more-->\n\n  ä»¥æ­£åºæ’åºä¸ºä¾‹ï¼Œè¯¥ç®—æ³•ä»åºåˆ—å¤´éƒ¨å¼€å§‹ï¼Œæ¯æ¬¡å°†å½“å‰å…ƒç´ ä¸ä¸‹ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ä¸‹ä¸€ä¸ªå…ƒç´ å°äºè¯¥å…ƒç´ ï¼Œåˆ™äº¤æ¢ä½ç½®ã€‚ä¾æ¬¡é€’å¢è¿­ä»£æŒ‡é’ˆï¼Œç›´è‡³åºåˆ—å°¾éƒ¨ã€‚è¿™â€œä¸€è¶Ÿâ€æ“ä½œè¿‡åï¼Œåºåˆ—ä¸­æœ€å¤§çš„å€¼å°±å†’åˆ°äº†åºåˆ—å°¾éƒ¨ã€‚\n\n  ä»¥ä¸‹åˆ—åºåˆ—ä¸ºä¾‹ï¼š\n\n```txt\n50 13 55 97 27 38 49 65\n```\n\n  ä»ä¸‹æ ‡ä¸º 0 çš„å…ƒç´  `50` å¼€å§‹ï¼Œä¸ `13` è¿›è¡Œæ¯”è¾ƒï¼Œ`13 < 50 == true`ï¼Œåˆ™äº¤æ¢ä½ç½®ã€‚åºåˆ—å˜ä¸ºï¼š\n\n```txt\n13 50 55 97 27 38 49 65\n```\n\n  ä¸‹æ ‡åŠ  1ï¼Œç»§ç»­ä¸Šè¿°æ“ä½œï¼š`55 < 13 == false`ï¼Œåˆ™ä¸æ‰§è¡Œäº¤æ¢æ“ä½œã€‚ä¸‹æ ‡åŠ  1ï¼Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´è‡³åºåˆ—å°¾éƒ¨ï¼Œåˆ™å®Œæˆâ€œä¸€è¶Ÿâ€å†’æ³¡ã€‚åºåˆ—å˜ä¸ºï¼š\n\n```txt\n13 50 55 27 38 49 65 97\n```\n\n  ç»§ç»­ä»å¤´è¿›è¡Œå†’æ³¡æ“ä½œï¼Œæ¯æ¬¡éƒ½å°†å‰©ä½™å…ƒç´ ä¸­æœ€å¤§çš„å…ƒç´ å†’æ³¡åˆ°å°¾éƒ¨ã€‚ç›´è‡³ä¸€è¶Ÿä¸‹æ¥æœªå‘ç”Ÿä½ç½®äº¤æ¢ï¼Œåˆ™è¯´æ˜åºåˆ—å·²æœ‰åºã€‚\n\n### ä»£ç ç¤ºä¾‹\n\n```javascript\nconst bubbleSort = array => {\n    // ä½¿ç”¨ exchange è®°å½•å‘ç”Ÿäº¤æ¢çš„ä½ç½®\n    let exchange = array.length - 1;\n\n    // è‹¥ä¸Šä¸€è¶Ÿæœªå‘ç”Ÿäº¤æ¢ï¼Œåˆ™è¯´æ˜åºåˆ—å·²æœ‰åºï¼Œç®—æ³•ç»“æŸ\n    while (exchange !== 0) {\n        // æš‚å­˜ä¸Šæ¬¡äº¤æ¢ä½ç½®ï¼Œäº¤æ¢ä½ç½®ä¹‹åçš„åºåˆ—å·²ç»æœ‰åºï¼Œåˆ™è·³è¿‡æ¯”è¾ƒã€‚\n        let end = exchange;\n        exchange = 0;\n\n        for (let j = 0; j < end; j++) {\n            if (array[j] > array[j + 1]) {\n                [array[j], array[j + 1]] = [array[j + 1], array[j]];  // äº¤æ¢ä½ç½®\n                exchange = j; // è®°å½•äº¤æ¢ä½ç½®\n            }\n        }\n    }\n}\n```\n\n  ä¸Šè¿°ä»£ç å¯¹å†’æ³¡ç®—æ³•çš„åŸºæœ¬ç®—æ³•è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ã€‚ä½¿ç”¨ä¸€ä¸ªå˜é‡è®°å½•ä¸Šä¸€è¶Ÿå†’æ³¡çš„æœ€åäº¤æ¢ä½ç½®ï¼Œè¯¥ä½ç½®ä¹‹åçš„å…ƒç´ æœªå‘ç”Ÿäº¤æ¢ï¼Œå³è¯´æ˜è¯¥ä½ç½®ä¹‹åçš„åºåˆ—å·²ç»æœ‰åºã€‚åˆ™åœ¨æ­¤è¶Ÿå†’æ³¡ä¸­ä¸éœ€è¦å¯¹åé¢æœ‰åºçš„å­åºåˆ—è¿›è¡Œæ“ä½œäº†ã€‚å½“ä¸Šä¸€èººæœªå‘ç”Ÿäº¤æ¢æ—¶ï¼Œåˆ™è¯´æ˜åºåˆ—å·²ç»æœ‰åºï¼Œç»“æŸå¾ªç¯ã€‚\n\n## å¿«é€Ÿæ’åº\n\n### ç®—æ³•åˆ†æ\n\n  å¿«é€Ÿæ’åºï¼ˆå¿«æ’ï¼‰ç€çœ¼äºè§£å†³å†’æ³¡æ’åºä½ç½®äº¤æ¢æ¬¡æ•°å¤ªå¤šçš„é—®é¢˜ã€‚å¸Œæœ›é€šè¿‡ä¸€æ¬¡è¿›è¡Œé•¿è·ç¦»çš„äº¤æ¢ä»è€Œå‡å°‘äº¤æ¢æ¬¡æ•°ã€‚\n\n  å¿«æ’åˆç§°ä¸ºåˆ†åŒºäº¤æ¢æ’åºï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼šé¦–å…ˆé€‰ä¸€ä¸ªè½´å€¼ï¼ˆpivotï¼Œå³æ¯”è¾ƒçš„åŸºå‡†å€¼ï¼‰ï¼Œæ¯æ¬¡éƒ½å°†åºåˆ—åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå·¦ä¾§è®°å½•çš„å…³é”®ç å‡å°äºåŸºå‡†å€¼ï¼Œå³ä¾§è®°å½•çš„å…³é”®ç å‡å¤§äºåŸºå‡†å€¼ã€‚ç„¶åå¯¹å·¦å³ä¸¤éƒ¨åˆ†åˆ†åˆ«é‡å¤ä¸Šè¿°åˆ’åˆ†æ“ä½œï¼Œç›´è‡³åºåˆ—æ•´ä½“æœ‰åºã€‚\n\n  æ˜¾ç„¶å¿«æ’æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚\n\n### ä¸€æ¬¡åˆ’åˆ†ç®—æ³•\n\n  ç”±äºå¿«æ’æ˜¯ä¸€ä¸ªé€’å½’è¿‡ç¨‹ï¼Œæˆ‘ä»¬å…ˆåˆ†æå¯¹åºåˆ—è¿›è¡Œä¸€æ¬¡åˆ’åˆ†çš„ä¸€ç§ç®—æ³•æ€è·¯ã€‚\n\n  è¯¥ç¤ºä¾‹ç®—æ³•ï¼Œé€‰å–åºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†å€¼ã€‚ä»åºåˆ—ä¸¤ä¾§äº¤æ›¿ä¸è¯¥åŸºå‡†å€¼æ¯”è¾ƒï¼Œè¿›è¡Œç›¸åº”çš„ä½ç½®ç§»åŠ¨ã€‚ç›´è‡³æ‰€æœ‰çš„å€¼éƒ½ç§»åŠ¨åˆ°äº†åˆé€‚çš„ä½ç½®ï¼ˆå°äºåŸºå‡†å€¼çš„ç§»åŠ¨åˆ°åŸºå‡†å€¼å·¦ä¾§ï¼Œåä¹‹å³ä¾§ï¼‰ã€‚\n\n  ä»¥ä¸‹é¢åºåˆ—ä¸ºä¾‹ï¼Œå…·ä½“è§£é‡Šä¸€ä¸‹ç®—æ³•è¿‡ç¨‹ã€‚\n\n  **23** 13 49 6 31 19 28\n\n  é¦–å…ˆé€‰å–ç¬¬ä¸€ä¸ªå…ƒç´  `23` ä½œä¸ºåŸºå‡†å€¼ã€‚å…ˆä»å³ä¾§è¿›è¡Œæ¯”è¾ƒï¼Œä»¤å³ä¾§æŒ‡é’ˆä¸º `j = 6`ï¼Œ`28 > 23 == true` ä¸”è¯¥å€¼å¤„äºåŸºå‡†å€¼å³ä¾§ï¼Œåˆ™æ— åºç§»åŠ¨ã€‚`j--`ï¼Œç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ªå€¼ã€‚`19 > 23 == false`ï¼Œåˆ™å°†è¯¥å€¼ä¸åŸºå‡†å€¼äº¤æ¢ï¼Œä½¿å¾—è¯¥å€¼ä½äºåŸºå‡†å€¼çš„å·¦ä¾§ï¼Œä¸”åŒæ—¶ä¿è¯äº†åŸºå‡†å€¼çš„å³ä¾§éƒ½æ˜¯å¤§äºåŸºå‡†å€¼çš„å…ƒç´ ã€‚æ­¤æ—¶ï¼Œåºåˆ—å˜ä¸ºï¼š\n\n  19 13 49 6 31 **23** 28\n\n  åŸºå‡†å€¼è¢«ç§»åŠ¨åˆ°å³ä¾§ï¼Œè¿›è¡Œè¿›è¡Œå·¦ä¾§å…ƒç´ çš„æ¯”è¾ƒã€‚ä»¤å·¦ä¾§æŒ‡é’ˆä¸º `i = 0`ï¼Œ`19 < 23 == true`ï¼Œä¸”ä½äºåŸºå‡†å€¼å·¦ä¾§ï¼Œæ— éœ€æ“ä½œã€‚`i++`ï¼Œ`13 < 23 == true`ï¼Œæ— éœ€æ“ä½œã€‚ç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ªå€¼ï¼Œ`49 < 23 == false`ï¼Œåˆ™å°† `49` ä¸åŸºå‡†å€¼äº¤æ¢ï¼Œä½¿å¾—è¯¥å€¼ä½äºåŸºå‡†å€¼çš„å³ä¾§ï¼Œä¸”ä¿è¯äº†åŸºå‡†å€¼å·¦ä¾§éƒ½æ˜¯å°äºåŸºå‡†å€¼çš„å…ƒç´ ã€‚æ­¤å®ï¼Œåºåˆ—å˜ä¸ºï¼š\n\n  19 13 **23** 6 31 49 28\n\n  äº¤æ›¿è¿›è¡Œå³ä¾§æ‰«æï¼Œä¸Šæ¬¡ `j = 5`ï¼Œåˆ™å¯¹ `j = 4` çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œ`31 > 23 == true`ï¼Œæ— éœ€æ“ä½œã€‚`j--`ï¼Œ`6 > 23 == false`ï¼Œåˆ™äº¤æ¢ä½ç½®ï¼Œåºåˆ—å˜ä¸ºï¼š\n\n  19 13 6 **23** 31 49 28\n\n  æ­¤æ—¶ï¼ŒåŸºå‡†å€¼å·¦ä¾§çš„å€¼å‡å°äºåŸºå‡†å€¼ï¼Œå³ä¾§çš„å€¼å‡å¤§äºåŸºå‡†å€¼ï¼Œå®Œæˆä¸€æ¬¡åˆ’åˆ†ã€‚\n\n#### ä¸€æ¬¡åˆ’åˆ†ç¤ºä¾‹ä»£ç \n\n```js\nconst partition = (arr, first, end) => {\n    let i = first\n    let j = end\n    while (i < j) {\n        while (i < j && arr[i] <= arr[j]) j--\n        if (i < j) {\n            [arr[i], arr[j]] = [arr[j], arr[i]]\n            i++\n        }\n        while (i < j && arr[i] <= arr[j]) i++\n        if (i < j) {\n            [arr[i], arr[j]] = [arr[j], arr[i]]\n            j--\n        }\n    }\n    return i;\n}\n```\n\n  è¯¥ç¤ºä¾‹ä»£ç ï¼Œå·¦å³ä¾æ¬¡ä¸åŸºå‡†å€¼è¿›è¡Œæ¯”è¾ƒå¹¶äº¤æ¢ä½ç½®ï¼Œä»¥ä¿è¯æ¯æ¬¡äº¤æ¢åéƒ½èƒ½ä½¿å¾—æ“ä½œè¿‡çš„å€¼å¤„äºåˆé€‚çš„ä½ç½®ã€‚åŒæ—¶å½“å·¦å³æŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå€¼æ—¶ï¼Œè¯´æ˜å¾ªç¯ç»“æŸã€‚\n\n### å¿«é€Ÿæ’åºç®—æ³•\n\n  å¿«æ’ç®—æ³•æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚é¦–å…ˆå°†åºåˆ—è¿›è¡Œä¸€æ¬¡åˆ’åˆ†ï¼Œç„¶ååˆ†åˆ«å¯¹å·¦å³å­åºåˆ—è¿›è¡Œé€’å½’çš„åˆ’åˆ†ã€‚ç›´åˆ°å­åºåˆ—è¢«åˆ’åˆ†ä¸ºæœ€å°çš„é•¿åº¦ï¼Œåˆ™æ‰€æœ‰çš„å­åºåˆ—éƒ½æœ‰åºï¼Œåˆ™æ•´ä¸ªåºåˆ—æœ‰åºã€‚\n\n```js\nconst quickSort = (arr, first, end) => {\n    first = first === undefined ? 0 : first\n    end = end === undefined ? arr.length - 1 : end\n\n    if (first < end) {\n        let pivot = partition(arr, first, end)\n        quickSort(arr, first, pivot - 1)\n        quickSort(arr, pivot + 1, end)\n    }\n}\n```\n\n## æ€»ç»“\n\n  å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œæ˜¯ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚\n\n  å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(nlog2n)ï¼Œæ˜¯ä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚\n\n  æ­£å¦‚å…¶åï¼Œå¿«æ’æ˜¯è¿„ä»Šä¸ºæ­¢æ‰€æœ‰å†…æ’åºç®—æ³•ä¸­æœ€å¥½çš„ä¸€ç§ï¼Œå°¤å…¶é€‚ç”¨äºå¾…æ’åºè®°å½•ä¸ªæ•°å¾ˆå¤§ä¸”åŸå§‹è®°å½•éšæœºæ’åˆ—çš„æƒ…å†µã€‚å¿«æ’ç®—æ³•å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œå¦‚ UNIX ç³»ç»Ÿçš„åº“å‡½æ•°ä¸­çš„ `qsort` å‡½æ•°ã€‚\n","tags":["Algorithm","æ’åºç®—æ³•","å†’æ³¡æ’åº","å¿«é€Ÿæ’åº"],"categories":["developer"]},{"title":"æ’åºç®—æ³•ï¼ˆä¸€ï¼‰â€”â€”æ’å…¥æ’åºï¼ˆç›´æ¥æ’å…¥+å¸Œå°”æ’åºï¼‰","url":"/archives/11/","content":"\n\n## æ€è·¯\n\n  æ’å…¥æ’åºçš„åŸºæœ¬æ€è·¯æ˜¯ï¼Œæ¯æ¬¡å°†ä¸€ä¸ªå¾…æ’åºçš„è®°å½•æŒ‰ç…§å…¶å…³é”®ç çš„å¤§å°æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„æœ‰åºåºåˆ—ä¸­ï¼Œç›´åˆ°è®°å½•å…¨éƒ¨æœ‰åºã€‚\n<!--more-->\n## ç›´æ¥æ’åº\n\n  ç›´æ¥æ’åºæ˜¯æ€è·¯æœ€ç®€å•ç›´æ¥çš„æ’å…¥æ’åºï¼Œç±»ä¼¼æˆ‘ä»¬ç©æ‰‘å…‹ç‰Œæ—¶æ•´ç†çº¸ç‰Œçš„è¿‡ç¨‹ã€‚\n\n  æ¯”å¦‚æˆ‘ä»¬æŒ‰å¤§å°é¡ºåºæ’åˆ—ä»¥ä¸‹çº¸ç‰Œï¼ˆæ•°å­—ï¼‰\n\n```txt\nK 10 J 2 4 A 4 3 5 Q 2\n```\n\n  é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥ç¬¬ä¸€å¼ ç‰Œä¸ºä¸€ä¸ªæœ‰åºåºåˆ—ï¼Œç„¶åå°†ç¬¬äºŒå¼ ç‰Œæ’å…¥åˆ°è¯¥æœ‰åºåºåˆ—çš„åˆé€‚ä½ç½®ï¼š\n\n```txt\n10 K J 2 4 A 4 3 5 Q 2\n```\n\n  è¿™æ ·å°±å®Œæˆäº†ç¬¬ä¸€æ¬¡æ’å…¥ã€‚æ­¤æ—¶ï¼Œæœ‰åºåºåˆ—å˜ä¸º `10 K`ã€‚æˆ‘ä»¬ç»§ç»­å°†ä¸‹ä¸€å¼ ç‰Œæ’å…¥åˆ°è¯¥æœ‰åºåºåˆ—ä¸­ã€‚è¿™å¯¹äºçº¸ç‰Œç©å®¶æ¥è¯´ï¼Œé¡ºç†æˆç« ï¼Œç›´æ¥å°† `J` æ’åˆ° `10` å’Œ `K` ä¹‹é—´ã€‚ä½†å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä»¥ä¸‹è¿‡ç¨‹ï¼š\n\n* é¦–å…ˆå°† `J` å’Œ `K` æ¯”è¾ƒï¼Œ`K` > `J`ï¼Œæ‰€ä»¥å°† `K` çš„ä½ç½®å¾€åç§»åŠ¨ä¸€ä½ï¼ˆæ•°ç»„ç´¢å¼•åŠ  1ï¼‰ã€‚\n* ç»§ç»­å¾€å‰æ¯”è¾ƒï¼Œå‘ç° `10` < `J`ï¼Œæ‰€ä»¥å°† `J` æ”¾åœ¨ `10` åé¢ï¼ˆå°† `10` å…ƒç´ ç´¢å¼• + 1 çš„ä½ç½®èµ‹å€¼ä¸º `J`ï¼‰ã€‚\n* å®Œæˆè¯¥æ¬¡æ’å…¥ï¼Œæœ‰åºåºåˆ—å˜ä¸º `10 J K`ã€‚\n\n  ä¾ç…§ä¸Šè¿°æ€è·¯ï¼Œä¸åœçš„å°†æ¥ä¸‹æ¥çš„å…ƒç´ æ’å…¥åˆ°å‰é¢çš„æœ‰åºåºåˆ—ä¸­å»ï¼Œç›´è‡³æ•°ç»„çš„ç»“å°¾ã€‚\n\n### ç®—æ³•åˆ†æ\n\n  ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¤§æ¦‚å¯å¾—ç›´æ¥æ’å…¥çš„å¤§ä½“ç®—æ³•ä¸ºï¼š\n\n* ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæœ‰åºåºåˆ—\n* å°†æœ‰åºåºåˆ—çš„åä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°æœ‰åºåºåˆ—ä¸­å»ï¼Œæ„æˆæ–°çš„æœ‰åºåºåˆ—ã€‚\n* ç»§ç»­æ’å…¥ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œç›´è‡³æ•°ç»„ç»“å°¾ã€‚\n\n  ä»ä¸Šé¢çš„æ€è·¯ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯â€œæ’å…¥â€çš„æ“ä½œã€‚\n\n  é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ’å…¥çš„åˆé€‚ä½ç½®ï¼Œå› ä¸ºè¯¥ç®—æ³•ä»æœ‰åºåºåˆ—çš„åé¢å¾€å‰æŸ¥æ‰¾ã€‚æ‰€ä»¥æ¯å½“é‡åˆ°å…ƒç´ å¤§äºå¸¦æ’å…¥å…ƒç´ æ—¶ï¼Œå°±æŠŠè¯¥å…ƒç´ å‘åç§»åŠ¨ä¸€ä½ï¼Œä»¥ä¾¿ä¸ºæ’å…¥å…ƒç´ â€œç©ºâ€å‡ºä½ç½®ã€‚ç›´åˆ°é‡åˆ°å°äºå¸¦æ’å…¥å…ƒç´ çš„å…ƒç´ æ—¶ï¼Œåˆé€‚çš„ä½ç½®è¢«æ‰¾åˆ°ï¼Œå°†å…ƒç´ æ’å…¥å³å®Œæˆæ­¤æ¬¡æ’å…¥æ“ä½œã€‚\n\n### ä»£ç ç¤ºä¾‹\n\n```js\nconst insertionSort = arr => {\n    for (let i = 1; i < arr.length; i++) {\n        let tmp = arr[i]  // æš‚å­˜è¯¥å…ƒç´ ï¼Œå› ä¸ºåœ¨ç§»åŠ¨æ“ä½œæ—¶ä¼šè¦†ç›–æ‰è¯¥ä½ç½®çš„å€¼\n        let j = i - 1 // ä»æœ‰åºåºåˆ—çš„åé¢å‘å‰æŸ¥æ‰¾æ’å…¥ä½ç½®\n        \n        // æŠŠæœ‰åºåºåˆ—ä¸­æ‰€æœ‰å¤§äºå¾…æ’å…¥çš„å…ƒç´ å‘åç§»åŠ¨ä¸€ä½ã€‚\n        for (; a[j] > tmp; j--) {\n            arr[j + 1] = arr[j]\n        }\n        \n        // å¾ªç¯ç»“æŸï¼Œæ’å…¥ä½ç½®è¢«æ‰¾åˆ°ï¼Œæ’å…¥è¯¥å€¼ï¼Œå®Œæˆè¯¥æ¬¡æ’å…¥\n        arr[j + 1] = tmp\n    }\n}\n```\n\n## å¸Œå°”æ’åº\n\n  ç›´æ¥æ’å…¥æ’åºç®—æ³•é¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œå½“å¾…æ’åºæ•°ç»„åŸºæœ¬æ— åºï¼Œä¸”é•¿åº¦æ¯”è¾ƒé•¿æ—¶ï¼Œè¦è¿›è¡Œå¤§é‡çš„ä½ç½®ç§»åŠ¨æ“ä½œã€‚æ€§èƒ½è¾ƒä½ã€‚\n\n  å¸Œå°”æ’åºè¯•å›¾è§£å†³ä¸Šè¿°é—®é¢˜ã€‚\n\n  å¸Œå°”æ’åºé¦–å…ˆå°†æ•°ç»„åˆ†å‰²ä¸ºè‹¥å¹²ä¸ªåºåˆ—ï¼Œé¦–å…ˆå°†æ¯ä¸ªåºåˆ—è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ç„¶åé‡æ–°åˆ†å‰²åºåˆ—ï¼Œå‡å°‘åºåˆ—çš„ä¸ªæ•°ï¼Œå†æ¬¡å¯¹æ¯ä¸ªåºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ç„¶åå†æ¬¡å‡å°‘åºåˆ—çš„ä¸ªæ•°ï¼Œåˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œç›´è‡³åºåˆ—è¢«å‡å°‘ä¸ºä¸€ä¸ªï¼Œå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œä¸€ä¸ªç›´æ¥æ’å…¥æ’åºå³å¯ã€‚\n\n  é€šè¿‡ä»¥ä¸Šç®—æ³•ï¼Œå¼€å§‹æ¯ä¸ªåºåˆ—çš„é•¿åº¦å¾ˆå°ï¼Œä½ç½®ç§»åŠ¨å¯¹æ€§èƒ½çš„å½±å“ã€‚éšç€åºåˆ—ä¸ªæ•°çš„å‡å°‘ï¼Œåºåˆ—é•¿åº¦çš„å¢åŠ çš„åŒæ—¶ï¼Œåºåˆ—å¼€å§‹æ…¢æ…¢å˜å¾—æœ‰åºï¼Œä½¿å¾—æ’å…¥æ’å…¥æ“ä½œå‡å°‘ã€‚æé«˜äº†æ€§èƒ½ã€‚\n\n### ç®—æ³•åˆ†æ\n\n  å…³äºå¦‚ä½•åˆ’åˆ†åºåˆ—ï¼Œå°šæœªæœ‰äººæ±‚å¾—ä¸€ä¸ªæœ€å¥½çš„æ–¹æ¡ˆã€‚å¸Œå°”æœ€æ—©æå‡ºçš„æ–¹æ¡ˆæ˜¯ï¼Œå¼€å§‹æ¯éš” `length / 2` æ„æˆä¸€ä¸ªå­åºåˆ—ã€‚ç„¶åæ¯æ¬¡å°†é—´éš”ç¼©å°ä¸€å€ï¼Œæ„æˆæ–°çš„å­åºåˆ—ï¼Œå¯¹è¿™äº›å­åºåˆ—è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ç›´è‡³æœ€åé—´éš”å˜ä¸º `1` åˆ™å­åºåˆ—å˜ä¸ºæ•´ä¸ªåºåˆ—ã€‚\n\n  ä»»ç„¶ä¸€ä¸Šé¢çš„åºåˆ—ä¸ºä¾‹ï¼š\n\n```txt\nK 10 J 2 4 A 4 3 5 Q 2\n```\n\n* ç¬¬ä¸€æ¬¡æ¯éš” `5` æ„æˆä¸€ä¸ªå­åºåˆ—ï¼Œåˆ™æœ‰ 5 ä¸ªå­åºåˆ—ï¼Œåˆ†åˆ«ä¸ºï¼š\n\n```txt\nA  2  K\n10 4\nJ  3\n2  5\n4  Q\n```\n\n  å¯¹ä¸Šé¢å­åºåˆ—è¿›è¡Œæ’å…¥æ’åºï¼Œåˆ™åºåˆ—å˜ä¸ºï¼š\n\n```txt\nA  2  K\n4  10\n3  J\n2  5\n4  Q\n```\n\n  åˆ™ç¬¬ä¸€æ¬¡å¯¹å­åºåˆ—è¿›è¡Œæ’å…¥æ’åºåï¼ŒåŸåºåˆ—å˜ä¸ºï¼š\n\n```txt\nA 4 3 2 4 2 10 J 5 Q K\n```\n\n* ç„¶åå°†é—´éš”ç¼©å°ä¸º `5 / 2 = 2` ï¼Œåˆ™å­åºåˆ—å˜ä¸ºï¼š\n\n```txt\nA 3 4 10 5 K\n4 2 2 J Q\n```\n\n  åˆ†åˆ«å¯¹å­åºåˆ—ç›´æ¥æ’å…¥æ’åºåï¼ŒåŸåºåˆ—å˜ä¸ºï¼š\n\n```txt\nA 2 3 2 4 4 5 J 10 Q K\n```\n\n* æœ€åä¸€æ¬¡é—´éš”ç¼©å°ä¸º `1`ï¼Œåˆ™å­åºåˆ—å°±å˜ä¸ºåºåˆ—æœ¬èº«ï¼Œæ­¤æ—¶åºåˆ—åŸºæœ¬æœ‰åºï¼Œç›´æ¥è¿›è¡Œç›´æ¥æ’å…¥æ’åºå®Œæˆæ’åºã€‚\n\n### ä»£ç ç¤ºä¾‹\n\n```js\nconst shellSort = arr => {\n    // åˆå§‹é—´éš”ä¸º length / 2ï¼Œæ¯æ¬¡ç¼©å°ä¸€å€ï¼Œç›´åˆ°é—´éš”å˜ä¸º 1\n    for (let d = Math.floor(arr.length / 2); d >= 1; d = Math.floor(d / 2)) {\n    \n        // å¯¹å­åºåˆ—è¿›è¡Œç›´æ¥æ’å…¥æ’åº\n        for (let i = d; i < arr.length; i++) {\n            let tmp = arr[i]\n            let j = i - d\n            for (; j >=0 && arr[j] > tmp; j -= d) {\n                arr[j + d] = arr[j]\n            }\n            arr[j + d] = tmp\n        }\n        \n    }\n}\n```\n\n## æ€»ç»“\n\n  ç›´æ¥æ’å…¥æ’åºæ—¶é—´å¤æ‚ä¸º O(n^2)ï¼Œæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚\n\n  å¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦åœ¨ O(n^2) å’Œ O(nlog2n)ï¼Œçº¦ä¸º O(n^1.3)ï¼Œæ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚\n","tags":["Algorithm","æ’åºç®—æ³•","å¸Œå°”æ’åº"],"categories":["developer"]},{"title":"CentOS ä¸‹ä½¿ç”¨ certbot é…ç½® Let's Encrypt SSLè¯ä¹¦","url":"/archives/10/","content":"\n[certbot](https://certbot.eff.org/) æ˜¯ä¸€ä¸ªæä¾›å‘½ä»¤è¡Œæ¥è‡ªåŠ¨é…ç½®ç½‘ç«™ SSL è¯ä¹¦çš„å·¥å…·ã€‚è®¿é—®å…¶[å®˜ç½‘](https://certbot.eff.org/)å¯ä»¥è·å¾—ä¸åŒæ“ä½œç³»ç»Ÿä»¥åŠä¸åŒ Web æœåŠ¡å™¨ä¸‹çš„ä½¿ç”¨æ•™ç¨‹ã€‚\n<!--more-->\n\n  [Let's Encrypt](https://letsencrypt.org/) æ˜¯ä¸€ä¸ªæä¾›å…è´¹ SSL è¯ä¹¦è®¤è¯æœåŠ¡çš„éè¥åˆ©æ€§é¡¹ç›®ã€‚æ—¨åœ¨åŠ é€Ÿç½‘é¡µç”± HTTP åè®®åˆ° HTTPS çš„è½¬å˜ã€‚\n\n  è¯¥æ•™ç¨‹ä»¥ CentOS 7.4 å’Œ Apache 2.4 ä¸ºä¾‹ã€‚æœ€åæ›´æ–°æ—¶é—´ï¼š2018å¹´3æœˆ24æ—¥ã€‚\n\n## å®‰è£… certbot\n\n* é¦–å…ˆå¼€å¯ EPEL æº\n\n```bash\nsudo yum -y install yum-utils\nsudo yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional\n```\n\n* å®‰è£… certbot-apache\n\n```bash\nsudo yum install certbot-apache\n```\n\n## å®‰è£…è¯ä¹¦\n\n  å¦‚æœä½ æƒ³ç›´æ¥è‡ªåŠ¨å®‰è£…è‡ªç­¾åçš„è¯ä¹¦ï¼Œç›´æ¥è¿è¡Œï¼š\n\n```bash\nsudo certbot --apache\n```\n\n  æ ¹æ®æç¤ºæ“ä½œå³å¯ã€‚\n\n## å®‰è£… Let's Encrypt è¯ä¹¦\n\n  ä½†ä¸€èˆ¬ä¸ªäººè‡ªç­¾åè¯ä¹¦æ˜¯æ— æ³•è¢«æµè§ˆå™¨è®¤å¯çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å®‰è£… [Let's Encrypt](https://letsencrypt.org/) æä¾›çš„è¯ä¹¦ã€‚\n\n  æ­¥éª¤å¦‚ä¸‹ï¼š\n\n### å®‰è£… DNS æ’ä»¶\n\n  certbot æä¾›äº† [ä¸€äº›DNS æ’ä»¶](https://certbot.eff.org/docs/using.html#dns-plugins) å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨é…ç½®è¯ä¹¦æœåŠ¡ã€‚æ ¹æ®åŸŸåçš„ DNS æœåŠ¡å•†å®‰è£…å¯¹åº”çš„ certbot æ’ä»¶ã€‚\n\n  è¿™é‡Œä»¥ [CloudXNS](https://www.cloudxns.net/) ä¸ºä¾‹ã€‚[CloudXNS](https://www.cloudxns.net/) æä¾›å…è´¹çš„åŸŸåæ‰˜ç®¡æœåŠ¡ã€‚\n\n```bash\n# å®‰è£… certbot-dns-cloudxns æ’ä»¶\nsudo yum install python2-certbot-dns-cloudxns\n```\n\n### å‡†å¤‡ DNS é…ç½®æ–‡ä»¶\n\n  åœ¨ä¸‹é¢çš„å®‰è£…è¯ä¹¦çš„è¿‡ç¨‹ä¸­éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥ç¡®è®¤åŸŸåã€‚\n\n  é¦–å…ˆé€šè¿‡ CloudXNS æä¾›çš„ [API](https://www.cloudxns.net/en/AccountManage/apimanage.html) è·å–è®¤è¯ä¿¡æ¯ï¼Œç„¶åä»¥ä¸‹åˆ—æ ¼å¼ä¿å­˜è¯¥è®¤è¯ä¿¡æ¯ï¼š\n\n```bash\n# CloudXNS API credentials used by Certbot\ndns_cloudxns_api_key = 1234567890abcdef1234567890abcdef\ndns_cloudxns_secret_key = 1122334455667788\n```\n\n### å®‰è£…\n\n  ä½¿ç”¨ certbot è‡ªåŠ¨å®‰è£…è¯ä¹¦ã€‚ï¼ˆæ³¨æ„æ›¿æ¢ä¸‹é¢å‘½ä»¤ä¸­çš„åŸŸåï¼‰\n\n```bash\nsudo certbot -a dns-cloudxns -i apache -d \"*.example.com\" -d example.com --server https://acme-v02.api.letsencrypt.org/directory\n```\n\n  æ ¹æ®æç¤ºè¾“å…¥ä¸Šæ–‡ä¸­å‡†å¤‡å¥½çš„ DNS é…ç½®æ–‡ä»¶è·¯å¾„ã€‚ç„¶åç»§ç»­æŒ‰æç¤ºæ“ä½œå³å¯ã€‚\n\n### å¯èƒ½é‡åˆ°çš„é—®é¢˜\n\nQ: æ‰¾ä¸åˆ° DNS æœåŠ¡å•†å¯¹åº”çš„ certbot dns æ’ä»¶\n\n  A: æ‰‹åŠ¨é…ç½®æˆ–æ›´æ¢ DNS æœåŠ¡å•†\n\nQ: æç¤º openSSL ç‰ˆæœ¬è¿‡ä½\n\n  A: å¸è½½é‡è£…ï¼Œå…·ä½“æ­¥éª¤ç™¾åº¦å¯å¾—\n\nQ: æ‰§è¡Œå®‰è£…è¯ä¹¦å‘½ä»¤æ—¶æç¤ºç¼ºå°‘ python åº“\n\n  A: æ ¹æ®æŠ¥é”™ä¿¡æ¯å®‰è£…å¯¹åº”çš„åº“ã€‚StackOverflow æœ‰ç±»ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚\n\n~~å…¶ä»–é—®é¢˜è¯·ç•™è¨€ã€‚~~\n","tags":["Server","SSL","HTTPS"],"categories":["developer"]},{"title":"ä¸º CentOS æ·»åŠ å›æ”¶ç«™åŠŸèƒ½","url":"/archives/9/","content":"\nåœ¨ centos ä¸­åˆ é™¤æ–‡ä»¶æ—¶ä¼šä½¿ç”¨ `rm -rf` å‘½ä»¤ï¼Œç„¶è€Œè¯¥å‘½ä»¤å¾€å¾€é€ æˆä¸å¯æŒ½å›çš„åæœï¼Œæ¯”å¦‚æ‰‹æŠ–åˆ é”™ç›®å½•ç„¶åè¿‡æ®µæ—¶é—´å†æƒ³æ¢å¤å‡ ä¹æ—¶ä¸å¯èƒ½çš„ã€‚åœ¨å¾ˆå¤šæ¡Œé¢å‘è¡Œç‰ˆæœ¬ä¸­å·²ç»æœ‰äº†å›æ”¶ç«™åŠŸèƒ½ï¼Œåœ¨æœåŠ¡å™¨ç«¯çš„ centos ä¸­è¿™ä¸ªåŠŸèƒ½æ›´ä¸ºé‡è¦ã€‚\n\n<!--more-->\n  æ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªç»å…¸çš„æ·»åŠ â€œå›æ”¶ç«™åŠŸèƒ½â€çš„æ•™ç¨‹ã€‚\n\n## ç¼–å†™ Shell è„šæœ¬\n\n  æ•™ç¨‹åŸç†å³æ˜¯ä½¿ç”¨ `bash` è„šæœ¬ä¸­ `alias` å‘½ä»¤é‡å†™ `rm` å‘½ä»¤ï¼Œå°†å…¶ä¿®æ”¹ä¸ºç§»åŠ¨åˆ°æŒ‡å®šå›æ”¶ç«™ç›®å½•ã€‚\n\n  è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š\n\n```bash\n#!/bin/bash\nmkdir -p ~/.trash\nalias rm=trash\nalias r=trash\nalias rl='ls ~/.trash'\nalias ur=undelfile\nundelfile() {\n   mv -i ~/.trash/$@ ./\n}\ntrash() {\n    mv $@ ~/.trash/\n}\n\n```\n\n  è„šæœ¬å¾ˆç®€å•ï¼Œå³ä½¿æ²¡æœ‰ä»»ä½• `bash` ç¼–ç¨‹åŸºç¡€ä¹Ÿçœ‹å¾—å‡ºå¤§æ¦‚æ„æ€ã€‚\n\n  é¦–å…ˆåœ¨ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ–°å»ºéšè—ç›®å½• `.trash` ä½œä¸ºå›æ”¶ç«™ç›®å½•ã€‚ç„¶åé‡å†™ `rm` å‘½ä»¤ã€‚å…¶ä¸­ `$@` ä¸ºè·å–è¾“å…¥çš„æ‰€æœ‰å‚æ•°ã€‚æ‰€ä»¥é‡å†™å‘½ä»¤åä¸éœ€è¦ä½¿ç”¨ `-r` å‚æ•°ï¼Œå› ä¸º `mv` å‘½ä»¤æ²¡æœ‰è¯¥å‚æ•°ã€‚\n\n## åº”ç”¨è„šæœ¬\n\n  å°†ä¸Šé¢çš„è„šæœ¬è¿½åŠ åˆ° `/etc/profile` å°¾éƒ¨ï¼Œä½¿ç”¨ `source /etc/profile` åº”ç”¨æ”¹å˜ï¼Œåˆ™æ‰€æœ‰çš„ç”¨æˆ·éƒ½ä¼šåº”ç”¨æ”¹å˜ï¼ˆç¬¬ä¸€æ¬¡åˆ‡æ¢ç”¨æˆ·æ—¶è®°å¾— `source /etc/profile`ï¼‰ã€‚å¦‚æœæƒ³ä»…å¯¹æŸç”¨æˆ·æ·»åŠ å›æ”¶ç«™åŠŸèƒ½ï¼Œåˆ™ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„ `.bashrc` æ–‡ä»¶ï¼Œè¿½åŠ ä¸Šé¢çš„è„šæœ¬ï¼Œç„¶å `source ~/.bashrc` å³å¯ã€‚\n\n## è¿›é˜¶ç‰ˆå›æ”¶ç«™\n\n  ä¸‹é¢çš„å›æ”¶ç«™ä¼šæ ¹æ®åˆ é™¤æ—¶é—´åˆ†ç±»å¹¶è‡ªåŠ¨æ¸…ç†å›æ”¶ç«™ã€‚è½¬è½½è‡³[ã€ŠCentOSå®ç°å›æ”¶ç«™æœºåˆ¶ã€‹](https://www.linuxidc.com/Linux/2016-01/127765.htm)ã€‚\n\n```bash\n#!/bin/bash\nmonth=`date \"+%m\"`    #è·å–å½“å‰æœˆä»½\nday=`date \"+%d\"`    #è·å–å½“å‰æ—¥æœŸã€€\n\nlast_day=`date -d \"-1 day\" \"+%d\"`    #è·å–å‰å¤©æœˆä»½\nlast_day_m=`date -d \"-1 day\" \"+%m\"`    #è·å–å‰å¤©æ—¥æœŸ\n\ndel_day=`date -d \"-5 day\" \"+%d\"`    #è·å–äº”å¤©å‰æœˆä»½\ndel_day_m=`date -d \"-5 day\" \"+%m\"`    #è·å–äº”å¤©å‰æ—¥æœŸ\n\nTrash_dir=\"/tmp/del_bak\"    #å›æ”¶ç«™æ€»ç›®å½•\ntmp_dir=\"/tmp/del_bak/tmp\"    #æ¯å¤©åˆ é™¤æ–‡ä»¶å­˜æ”¾ç›®å½•\n\n#ä¸‹é¢æ˜¯åˆ›å»ºç›¸åº”ç›®å½•ï¼Œå¹¶èµ‹äºˆ777æƒé™15 \nif [ ! -d $Trash_dir ]\nthen\n    /bin/mkdir -p $Trash_dir\n    /bin/chmod 777 $Trash_dir\nfi\n\nif [ ! -d $tmp_dir ]\nthen\n    /bin/mkdir -p $tmp_dir\n    /bin/chmod 777 $tmp_dir\nfi\n\nif [ ! -d /tmp/del_bak/$month ]\nthen\n    /bin/mkdir /tmp/del_bak/$month\n    /bin/chmod 777 /tmp/del_bak/$month\nfi\n\nif [ ! -d /tmp/del_bak/$month/$day ]\nthen\n    /bin/mkdir /tmp/del_bak/$month/$day\n    /bin/chmod 777 /tmp/del_bak/$month/$day\nfi\n\nTrash_file=`/bin/ls -A $tmp_dir`\n\n#è¿™æ˜¯å®šæ—¶åœ¨æ¯å¤©å‡Œæ™¨å°†æ˜¨å¤©åˆ é™¤çš„æ–‡ä»¶æ”¾åˆ°å·²æœˆä»½å’Œæ—¥æœŸåˆ†ç±»çš„ç›®å½•ä¸‹\n#ä¿è¯/tmp/del_bak/tmpç›®å½•ä¸‹åªå­˜æ”¾å½“å¤©åˆ é™¤çš„æ–‡ä»¶\nif [ \"$Trash_file\" != \"\" ]\nthen\n    cd $tmp_dir\n    if [ ! -d /tmp/del_bak/$last_day_m/$last_day/ ]\n    then\n      /bin/mkdir -p /tmp/del_bak/$last_day_m/$last_day/\n    fi\n    /bin/mv $tmp_dir/* /tmp/del_bak/$last_day_m/$last_day/\nfi\n\nif [ -d $Trash_dir/$del_day_m/$del_day/ ]    #æ¸…ç†äº”å¤©å‰åˆ é™¤çš„æ–‡ä»¶\nthen\n    cd $Trash_dir/$del_day_m/$del_day/ && {\n        /bin/rm -rf $Trash_dir/$del_day_m/$del_day/\n    }\nfi\n```\n\n```bash\n#!/bin/bash\nUSER=`/usr/bin/whoami`    #è·å–å½“å‰ç”¨æˆ·\nTOOLS=\"/usr/local/tools\"    #å­˜æ”¾Trash_mkdir.shå®šæ—¶ä»»åŠ¡è„šæœ¬çš„è·¯å¾„ï¼Œå¯æ ¹æ®ä¸ªäººè‡ªè¡Œä¿®æ”¹\nHOME_DIR=`/bin/grep \"$USER\" /etc/passwd|awk -F \":\" '{print $6}'`    #è·å–å½“å‰ç”¨æˆ·å®¶ç›®å½•\nCONF=$HOME_DIR\"/.bashrc\"    #æ‹¼æ¥å½“å‰ç”¨æˆ·çš„é…ç½®æ–‡ä»¶è·¯å¾„\nTrash=`/bin/grep \"del\" $CONF`    #åˆ¤æ–­æ˜¯å¦å·²ç»é…ç½®äº†å›æ”¶ç«™æœºåˆ¶\n\nif [ \"$Trash\" = \"\" ]    #æ·»åŠ å›æ”¶ç«™åˆ«ådel\nthen\n    echo \"alias del='mv -t /tmp/del_bak/tmp/ --backup=t'\" >>$CONF\nfi\n\nif [ ! -d $TOOLS ]\nthen\n    /bin/mkdir -p $TOOLS\nfi\n\n/bin/cp Trash_mkdir.sh $TOOLS    #æ‹·è´å®šæ—¶ä»»åŠ¡è„šæœ¬åˆ°æŒ‡å®šç›®å½•\n/bin/chmod +x $TOOLS/Trash_mkdir.sh\n\nif [ -z \"`grep 'Trash_mkdir.sh' /var/spool/cron/root`\" ]    #åˆ¤æ–­å®šæ—¶ä»»åŠ¡crontabé‡Œæ˜¯å¦å·²ç»åŠ äº†å›æ”¶ç«™è„šæœ¬\nthen\n    echo \"10 0 * * * $TOOLS/Trash_mkdir.sh\" >>/var/spool/cron/root\nfi\n\n/bin/sh $TOOLS/Trash_mkdir.shã€€\n```\n\n### éƒ¨ç½²è¯´æ˜\n\n1. å°†ä¸¤ä¸ªè„šæœ¬æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹\n\n2. ä½¿ç”¨éœ€è¦å¯ç”¨å›æ”¶ç«™åŠŸèƒ½çš„ç”¨æˆ·å»æ‰§è¡Œinstall_Trash.shè„šæœ¬å³å¯ä¸€é”®å®‰è£…\n","tags":["Server","CentOS","bash"],"categories":["developer"]},{"title":"è°¨ä»¥æ­¤æ–‡ç¥­å¥ æˆ‘çš„å‰åšå®¢","url":"/archives/8/","content":"\nå½“æˆ‘åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°é‡è£…äº† CentOSï¼Œéƒ¨ç½²å®Œå´­æ–°çš„åšå®¢ç³»ç»Ÿï¼Œåœ¨ç½‘ç«™é¦–é¡µå†æ¬¡å†™ä¸‹â€œç§¯è·¬æ­¥ä»¥è‡³åƒé‡Œï¼Œç§¯å°æµä»¥æˆæ±Ÿæµ·â€è¿™å¥è¯æ—¶ï¼Œæˆ‘çŸ¥é“æˆ‘å…¢å…¢ä¸šä¸šç§¯ç´¯äº†å…­ä¸ªå¤šæœˆï¼Œè¿‘ç™¾ç¯‡æ¶‰çŒç”šå¹¿çš„åšå®¢å·²ç»ä¸€å»ä¸è¿”äº†ã€‚\n<!--more-->\n\n  å†™åšå®¢ä¸æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹ï¼Œåˆè¡·æœ¬æ˜¯ç§¯ç´¯è®°å½•ä»¥ä¾¿ä»¥åæŸ¥é˜…ã€‚ä½†åˆæ€•æœ‰éœ€è¦çš„è®¿å®¢çœ‹åˆ°æ—¶ç”±äºå†…å®¹å¤ªè¿‡ç¬¼ç»Ÿè€Œä¸æ˜æ‰€ä»¥ï¼Œæ‰€ä»¥æˆ‘åŠ›æ±‚æŠŠæ¯ç¯‡åšå®¢å†™çš„æ¸…æ™°ä¸”æ­£ç¡®ã€‚æ¯ä¸€å¥è¯éƒ½æ–Ÿé…Œæ˜¯å¦å‡†ç¡®ï¼Œæ±‚è¯æ˜¯å¦æ­£ç¡®ï¼Œå¹¶æ ‡æ³¨æƒå¨å¼•ç”¨é“¾æ¥ã€‚è¯­è¨€éš¾ä»¥æè¿°æ¸…æ¥šçš„å†…å®¹ä¾¿è‡ªå·± PS ä½œå›¾ï¼Œæˆ–è€…é™„ä¸Šå¯è®¿é—®å±•ç¤ºçš„ Demoã€‚å¯ä»¥è¯´æ˜¯é¢‡è´¹è‹¦å¿ƒäº†ã€‚\n\n  åˆ›é€ ä¸€ä¸ªç¾å¥½ä¸œè¥¿çš„è¿‡ç¨‹é€šå¸¸æ˜¯å¤æ‚å’Œå›°éš¾çš„ï¼Œä½†æ¯ç­å®ƒå¾€å¾€è¦ç®€å•å¾—å¤šã€‚æœ‰æ—¶åªä¸è¿‡å°±æ˜¯ä¸€å¥ `rm -rf` ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ä¼šè¶…è¿‡ä¸¤ç§’ï¼Œå¾ˆå®‰é™ã€‚\n\n## åæ€\n\n  æˆ‘ä»æ¥ä¸å®³æ€•çŠ¯é”™ï¼Œæˆ‘åªæ€•é‡å¤çŠ¯é”™ã€‚æ‰€ä»¥å…³äºè¿™æ¬¡ `rm -rf` è¯¯åˆ ç³»ç»Ÿå…³é”®æ–‡ä»¶å¯¼è‡´åšå®¢ä¸¢å¤±ï¼Œæˆ‘å¾ˆå¿«è¿›è¡Œäº†åæ€ï¼Œå¹¶åœ¨æ–°éƒ¨ç½²çš„åšå®¢ç³»ç»Ÿä¸Šè¿›è¡Œäº†æ”¹è¿›ã€‚æ€»ç»“å¦‚ä¸‹ï¼š\n\n### ç³»ç»Ÿå¤šç”¨æˆ·ç®¡ç†\n\n  root ç”¨æˆ·çš„æƒåˆ©å¤ªå¤§äº†ï¼Œä½¿ç”¨ root ç”¨æˆ·æ“ä½œ Linux ç³»ç»Ÿæ— ç–‘æ˜¯ä¸€ä»¶åˆ€å°–èˆ”è¡€çš„è‰ºæœ¯è¡Œä¸ºã€‚åšå¾—å¥½æ˜¯è‰ºé«˜èƒ†å¤§ï¼Œåšä¸å¥½ä¾¿ä¸‡åŠ«ä¸å¤ã€‚\n\n  åº”å¯¹ä¸åŒçš„åŠŸèƒ½å¼€è®¾ä¸åŒçš„ç”¨æˆ·ã€‚æ¯”å¦‚ä¸ºæœåŠ¡å™¨çš„ç½‘ç«™ç®¡ç†å¼€è®¾ä¸“é—¨çš„ç”¨æˆ·ï¼Œåˆ†é…å…¶æœ‰é™çš„æƒé™ã€‚ä½¿å…¶æ— æ³•å¨èƒåˆ°ç³»ç»Ÿæœ¬èº«çš„æ­£å¸¸è¿è¡Œã€‚\n\n### æ•°æ®åº“å¤šç”¨æˆ·ç®¡ç†\n\n  åŒç†ï¼Œæ•°æ®åº“ä¹Ÿåº”å¼€è®¾ä¸åŒç”¨æˆ·ï¼Œé™åˆ¶å…¶å±é™©æ“ä½œçš„æƒé™ã€‚\n\n### å¼€å¯å›æ”¶ç«™åŠŸèƒ½\n\n  CentOS é»˜è®¤æ˜¯æ²¡æœ‰å›æ”¶ç«™åŠŸèƒ½çš„ï¼Œä¸€æ—¦ `rm -rf` å‘½ä»¤æ“ä½œæˆåŠŸï¼Œæƒ³è¦æ‰¾å›æ•°æ®å¾€å¾€ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œå°¤å…¶æ˜¯å½“æœåŠ¡å™¨è¿˜åœ¨è¿›è¡Œé«˜é¢‘çš„æ•°æ® IOã€‚\n\n  æ‰€ä»¥æˆ‘ä»¬åº”è¯¥è‡ªå·±å®ç°ä¸€ä¸ªå›æ”¶ç«™çš„åŠŸèƒ½ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå³é‡å†™ç³»ç»Ÿçš„ `rm` å‘½ä»¤ä¸º `mv` å‘½ä»¤ã€‚å°†æƒ³è¦åˆ é™¤çš„æ–‡ä»¶è½¬ç§»åˆ°æŒ‡å®šç›®å½•ï¼Œå¹¶å®šæœŸæ¸…ç†å³å¯ã€‚å…³äºå…·ä½“çš„å®ç°è¿‡ç¨‹ï¼Œæˆ‘ä¼šå°½å¿«æ•´ç†å‘å¸ƒã€‚\n\n### æ›´æ”¹ Web æœåŠ¡å™¨é»˜è®¤è·¯å¾„\n\n  ä»¥ Apache ä¸ºä¾‹ï¼Œé»˜è®¤ç½‘ç«™æ›´ç›®å½•æ˜¯åœ¨ `/var/` ä¸‹ã€‚è¿™æ˜¯è¿™æ¬¡è¯¯åˆ äº‹ä»¶çš„ç›´æ¥åŸå› ï¼Œæˆ‘æœ¬æƒ³åˆ é™¤æŸå­ç›®å½•ä¸‹çš„ `var` ç›®å½•ï¼Œç»“æœæ‰‹æŠ–å¤šæ‰“äº† `/` å°±æŠŠ `/var/` ç›®å½•å…¨åˆ äº†ï¼Œæ•°æ®åº“æ–‡ä»¶ä¹Ÿåœ¨é‡Œé¢ã€‚\n\n  æ‰€ä»¥å¦‚æœ Web æœåŠ¡å™¨çš„ç½‘ç«™æ›´ç›®å½•åœ¨ç³»ç»Ÿå…³é”®ç›®å½•ä¸‹ï¼Œåº”è¯¥å°†ä»–è½¬åˆ°ç½‘ç«™ç®¡ç†å‘˜ç”¨æˆ·ç›®å½•ä¸‹ã€‚é™ä½è¯¯æ“ä½œå¸¦æ¥çš„é£é™©ã€‚\n\n### æ•°æ®å¤‡ä»½\n\n  å…¶å®åœ¨è¿™æ¬¡è¯¯åˆ ç³»ç»Ÿæ–‡ä»¶å‰æˆ‘æœ‰å¤‡ä»½è¿‡åšå®¢æ•°æ®ï¼Œä¸è¿‡æ—¶é—´æ¯”è¾ƒä¹…äº†ï¼Œä½†ä»èƒ½æ‰¾å›éƒ¨åˆ†åšå®¢å†…å®¹ã€‚å¯è§æœ‰ä¸€ä¸ªå®šæœŸå¤‡ä»½æ•°æ®çš„å¥½ä¹ æƒ¯æ˜¯å¤šä¹ˆé‡è¦ã€‚\n","tags":["Server","è¿ç»´"],"categories":["developer"]},{"title":"CSS å®ç°æ°´å¹³å‚ç›´å±…ä¸­å¸ƒå±€","url":"/archives/27/","content":"\n\n>å±…ä¸­çš„å®ç°æ˜¯ CSS å¸ƒå±€ä¸­å¾ˆå…¸å‹ï¼ˆposter childï¼‰çš„é—®é¢˜ã€‚æœ¬æ–‡è¯•å›¾ä»ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼ˆæ°´å¹³å±…ä¸­ã€å‚ç›´å±…ä¸­ã€æ°´å¹³å‚ç›´å±…ä¸­ï¼‰å…¥æ‰‹ï¼Œå°½å¯èƒ½åˆ—ä¸¾å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚\n\n<!-- more -->\n\n[å‚è€ƒ]\n\n[ã€ŠCentering in CSS: A Complete Guideã€‹](https://css-tricks.com/centering-css-complete-guide/)\n\n[ã€ŠAbsolute Horizontal And Vertical Centering In CSSã€‹](https://www.smashingmagazine.com/2013/08/absolute-horizontal-vertical-centering-css/)\n\n## 1 æ°´å¹³å±…ä¸­\n\n### 1.1 è¡Œå†…å…ƒç´ çš„æ°´å¹³å±…ä¸­\n\n**è¡Œå†…å…ƒç´ ï¼ˆåŒ…æ‹¬ `inline-block`ï¼‰**çš„æ°´å¹³å±…ä¸­å¾ˆå®¹æ˜“å®ç°ï¼Œåªéœ€è¦åœ¨å…¶çˆ¶çº§ `block` å…ƒç´ ä¸­æ·»åŠ  `text-align: cneter` å±æ€§å³å¯ï¼š\n\n```css\n.father-block {\n  text-align: center;\n}\n```\n\n<iframe height='265' scrolling='no' title='å•è¡Œè¡Œå†…å…ƒç´ æ°´å¹³å±…ä¸­' src='//codepen.io/Hozen/embed/PQgmGP/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \nå½“çˆ¶çº§å…ƒç´ è®¾ç½®äº†ä»¥ä¸Šå±æ€§åï¼Œæ‰€æœ‰è¡Œå†…å­å…ƒç´ éƒ½ä¼šå±…ä¸­ï¼Œå³ä½¿æœ‰**å¤šä¸ªè¡Œå†…å­å…ƒç´ **ã€‚\n\n### 1.2 å—çº§å…ƒç´ çš„æ°´å¹³å±…ä¸­\n\nå—çº§å…ƒç´ çš„æ°´å¹³å±…ä¸­åªéœ€è¦ç»™è¯¥å…ƒç´ çš„ `margin-left` å’Œ `margin-right` å±æ€§çš„å€¼è®¾ç½®ä¸º `auto`ã€‚å½“ç„¶æ­¤æ—¶è¯¥**å…ƒç´ éœ€è¦è®¾ç½®å®½åº¦**ï¼Œä¸ç„¶é»˜è®¤æ˜¯å æ»¡æ•´è¡Œçš„ä¸éœ€è¦æ°´å¹³å±…ä¸­å¤„ç†ã€‚é€šå¸¸ä½¿ç”¨ç®€å†™æ–¹å¼ï¼š\n\n```css\n.center-block {\n  width: 20%;\n  margin: 0 auto;\n}\n```\n\n### 1.3 å¤šä¸ªå—çº§å…ƒç´ çš„å±…ä¸­\n\nå½“æœ‰å¤šä¸ªå—çº§å…ƒç´ æ’å¸ƒåœ¨ä¸€è¡Œæˆ–å¤šè¡Œï¼Œéœ€è¦æ°´å¹³å±…ä¸­æ—¶ã€‚å¯ä»¥å°†è¿™äº›å—çº§å…ƒç´ è®¾ç½®ä¸ºè¡Œå†…å…ƒç´  `display: inline-block`ï¼Œç„¶ååœ¨çˆ¶å…ƒç´ ä¸­è®¾ç½® `text-align: center`ï¼š\n\n<iframe height='400' scrolling='no' title='GQLmWJ' src='//codepen.io/Hozen/embed/GQLmWJ/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \nå¯ä»¥çœ‹åˆ°è¿™ä¸‰ä¸ªå­å…ƒç´ æ°´å¹³å±…ä¸­äº†ã€‚ç”±äºå®ƒä»¬çš„é«˜åº¦ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºè¡Œå†…å…ƒç´ é»˜è®¤æ˜¯åº•éƒ¨å¯¹é½çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®å­å…ƒç´  `vertical-align: middle` ä½¿å¾—ä¸‰ä¸ªå­å…ƒç´ åœ¨å‚ç›´æ–¹å‘ä»¥ä¸­çº¿å¯¹é½ã€‚\n  \nä½¿ç”¨ **flex å¼¹æ€§å¸ƒå±€**æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼š\n\n<iframe height='400' scrolling='no' title='GQLmEp' src='//codepen.io/Hozen/embed/GQLmEp/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\nä½¿ç”¨ flex å¸ƒå±€å­å…ƒç´ çš„é«˜åº¦è¢«ç»Ÿä¸€ã€‚\n\n## 2. å‚ç›´å±…ä¸­\n\nå‚ç›´å±…ä¸­çš„å®ç°ç›¸å¯¹æ°´å¹³å±…ä¸­è¦å¤æ‚ä¸€äº›ã€‚æˆ‘ä»¬ä¾æ—§åˆ†ç±»è®¨è®º:\n\n### 2.1 è¡Œå†…å…ƒç´ çš„å‚ç›´å±…ä¸­\n\n#### 2.1.1 å•è¡Œ\n\nå¦‚æœéœ€è¦å‚ç›´å±…ä¸­çš„å…ƒç´ æ’å¸ƒåœ¨ä¸€è¡Œä¸Šï¼Œå¯ä»¥é€šè¿‡è®¾ç½®çˆ¶å…ƒç´ çš„ `padding-top` å’Œ `padding-bottom` å±æ€§çš„å€¼ç›¸ç­‰æ¥ä½¿å®ƒçš„å­å…ƒç´ å‚ç›´å±…ä¸­ï¼ˆå…¶å®ä¸Šé¢æ°´å¹³å±…ä¸­çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†è¿™ç§æ–¹å¼ä½¿å¾—å­å…ƒç´ å‚ç›´å±…ä¸­äº†ï¼‰ã€‚å½“ç„¶è¿™ç§æƒ…å†µåªèƒ½é€‚ç”¨äº**çˆ¶å…ƒç´ çš„é«˜åº¦æœªæ˜¾å¼æŒ‡å®šè€Œæ˜¯è‡ªåŠ¨é€‚åº”çš„**ã€‚\n  \n<iframe height=\"300\" style=\"width: 100%;\" scrolling=\"no\" title=\"Centering text with Padding\" src=\"https://codepen.io/Hozen/embed/vYvqdRY?default-tab=result\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href=\"https://codepen.io/Hozen/pen/vYvqdRY\">\n  Centering text with Padding</a> by Hozen (<a href=\"https://codepen.io/Hozen\">@Hozen</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.\n</iframe>\n\nå¦‚æœçˆ¶å…ƒç´ çš„ `height` è¢«æŒ‡å®šä¸”å¤§äºå­å…ƒç´ çš„é«˜åº¦æ—¶ï¼Œä¸Šé¢çš„æ–¹æ³•æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚è¿™æ—¶å¯ä»¥é€šè¿‡è®¾ç½®çˆ¶å…ƒç´ çš„ `line-height` å±æ€§çš„å€¼ä½¿å®ƒç­‰äºè‡ªèº«çš„ `height` è¾¾åˆ°å‚ç›´å±…ä¸­çš„æ•ˆæœã€‚\n\n<iframe height='460' scrolling='no' title='YeMVEz' src='//codepen.io/Hozen/embed/YeMVEz/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n#### 2.1.2 å¤šè¡Œ\n\né€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“è¡Œå†…å…ƒç´ ä»…ä»…æ˜¯å•è¡Œæ˜¾ç¤ºçš„è¯ï¼Œå¯ä»¥å¾ˆç®€å•çš„è®¾ç½®çˆ¶å…ƒç´  `line-height` ç­‰äºçˆ¶å…ƒç´ çš„é«˜ä»¥åŠä¸Šä¸‹ `padding` å€¼ç›¸ç­‰çš„æ–¹æ³•ä½¿å­å…ƒç´ å‚ç›´å±…ä¸­ã€‚\n\nåœ¨å­å…ƒç´ åŒ…å«å¤šè¡Œæ–‡æœ¬æ—¶ï¼Œé€šè¿‡è®¾ç½®çˆ¶å…ƒç´ ä¸Šä¸‹ `padding` å€¼ç›¸ç­‰çš„æ–¹æ³•ä¾ç„¶èƒ½å¤Ÿç”Ÿæ•ˆï¼Œä¸è¿‡è¿˜æ˜¯ä¼šæœ‰åŒæ ·çš„é™åˆ¶æ¡ä»¶ã€‚ä¸è¿‡è®¾ç½®å­å…ƒç´  `line-height` çš„æ–¹æ³•å°±è¡Œä¸é€šäº†ã€‚\n\nè¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ table å¸ƒå±€æˆ–é€šè¿‡ CSS æ¨¡æ‹Ÿ table å¸ƒå±€å®ç°å‚ç›´å±…ä¸­ï¼š\n\ntable å¸ƒå±€å®ç°å‚ç›´å±…ä¸­:\n\n<iframe height='460' scrolling='no' title='EQJmeM' src='//codepen.io/Hozen/embed/EQJmeM/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\né€šè¿‡ CSS æ¨¡æ‹Ÿè®¾ç½®çˆ¶å…ƒç´  display ä¸º tableï¼Œè®¾ç½®å­å…ƒç´ ä¸º table-cellï¼Œé‚£ä¹ˆå­å…ƒç´ ä¸­çš„å…ƒç´ å°†å‚ç›´å±…ä¸­ã€‚ä¸è¿‡è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯éœ€è¦ç”¨åˆ°ä¸‰å±‚åµŒå¥—ã€‚\n\n<iframe height='460' scrolling='no' title='YeMVEz' src='//codepen.io/Hozen/embed/YeMVEz/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \ntable å¸ƒå±€å·²ç»ä¸å¸¸ç”¨äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ flex å¸ƒå±€ï¼Œåœ¨èƒ½ä½¿ç”¨ flex çš„æ—¶å€™ï¼Œflex å¤§æ¦‚æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ã€‚\n\n<iframe height='460' scrolling='no' title='aqxVgB' src='//codepen.io/Hozen/embed/aqxVgB/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \né™¤äº† table å¸ƒå±€å’Œ flex å¸ƒå±€ï¼Œè¿˜å¯ä»¥ä½¿ç”¨â€œghost elementâ€æŠ€æœ¯ï¼Œç»™çˆ¶å…ƒç´ æ·»åŠ ä¸€ä¸ªå…¨é«˜åº¦çš„ä¼ªå…ƒç´  `:before`ï¼Œä½¿å†…éƒ¨çš„æ–‡æœ¬ä¸å®ƒå‚ç›´ä¸­çº¿å¯¹é½ã€‚\n\n<iframe height='460' scrolling='no' title='ghost element å‚ç›´å±…ä¸­' src='//codepen.io/Hozen/embed/RQOxRB/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \n### 2.2 å—çº§å…ƒç´ çš„å‚ç›´å±…ä¸­\n\n#### 2.2.1 å·²çŸ¥é«˜åº¦å—çº§å…ƒç´ å‚ç›´å±…ä¸­\n\nå¦‚æœå­å…ƒç´ çš„é«˜åº¦æ˜¯å›ºå®šçš„ï¼Œæˆ–å¯é¢„çŸ¥çš„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç»å¯¹å®šä½ + è´Ÿå¤–è¾¹è·çš„æ–¹æ³•å®ç°å‚ç›´å±…ä¸­ï¼š\n\n```css\n.parent{\n  position: relative;\n}\n.child{\n  position: absolute;\n  top: 50%;\n  height: 100px;\n  margin-top: -50px; /* account for padding and border if not using box-sizing: border-box; */\n}\n```\n\nè¿™ç§æƒ…å†µå¾ˆå¥½ç†è§£ï¼Œä¸å†ä¸¾ä¾‹ã€‚\n\n#### 2.2.2 æœªçŸ¥é«˜åº¦å—çº§å…ƒç´ å‚ç›´å±…ä¸­\n\nä½¿ç”¨ç»å¯¹å®šä½ + 2Då˜æ¢ï¼ˆYè½´å¹³ç§»ï¼‰çš„æ–¹æ³•åœ¨æœªçŸ¥é«˜åº¦çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œã€‚\n\n```css\n.parent {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n```\n\n<iframe height='460' scrolling='no' title='translate å‚ç›´æ°´å¹³å±…ä¸­' src='//codepen.io/Hozen/embed/ddLJNm/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n### 2.3 flex å¸ƒå±€å‚ç›´å±…ä¸­\n\næ¯«æ— ç–‘é—®åƒä¹‹å‰ä¸€æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ flex å¸ƒå±€è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\n```css\n.parent{\n  display: flex;\n  align-items: center;\n}\n```\n\n## 3 æ°´å¹³å‚ç›´å±…ä¸­\n\nå°†ä¸Šé¢åˆ†åˆ«å®ç°æ°´å¹³å’Œå‚ç›´å±…ä¸­çš„æ–¹æ³•ç›¸ç»“åˆå°±èƒ½åŒæ—¶å®ç°æ°´å¹³å’Œå‚ç›´å±…ä¸­äº†ï¼Œå…¶å®åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å·²ç»è¿™ä¹ˆåšäº†ï¼Œæ‰€ä»¥ä¸‹é¢ç®€å•æ€»ç»“ï¼Œä¸å†ä¸¾ä¾‹ã€‚\n\n### 3.1 å›ºå®šå®½é«˜çš„å±…ä¸­\n\nå›ºå®šå®½é«˜çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç»å¯¹å®šä½ + è´Ÿå¤–è¾¹è·ä¿®æ­£çš„æ–¹å¼å®ç°æ°´å¹³å‚ç›´å±…ä¸­ã€‚\n\n```css\n.father {\n  position: relative;\n}\n\n.child {\n  height: 200px;\n  width: 400px;\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n\n  margin-top: -100px;\n  margin-left: -200px;\n}\n```\n\n### 3.2 è‡ªé€‚åº”å®½é«˜çš„å±…ä¸­\n\nä¸å®ç°å—çº§å…ƒç´ çš„å‚ç›´å±…ä¸­æ€è·¯ä¸€è‡´ï¼Œå½“å…ƒç´ å®½é«˜ä¸å›ºå®šæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä½ç½®å˜æ¢ä¿®æ­£ç»å¯¹å®šä½çš„ä½ç½®ã€‚\n\n```css\n.father {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n```\n\n### 3.3 flex å¸ƒå±€\n\nflex å¸ƒå±€æ€»èƒ½è½»æ¾åœ°è§£å†³å„ç§æƒ…å½¢ä¸‹çš„å±…ä¸­é—®é¢˜ã€‚\n\nå¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ flex ä¸­ `align-items` å’Œ `align-content` å±æ€§çš„ä¸åŒæ•ˆæœã€‚\n\n```css\n.father {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n```\n\n### 3.3 tableå¸ƒå±€å®ç°å±…ä¸­\n\nåƒé€šè¿‡ table å¸ƒå±€å®ç°å‚ç›´å±…ä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šé€šè¿‡ `margin: 0 auto` ç­‰æ‰‹æ®µå†ä½¿å¾—å…ƒç´ æ°´å¹³å±…ä¸­å³å¯ã€‚\n  \n### 3.4 ä¼ªå…ƒç´ å®ç°å±…ä¸­\n\né¦–å…ˆæˆ‘ä»¬å°†éœ€è¦å±…ä¸­çš„å…ƒç´ è®¾ç½®ä¸º `inline-block`ï¼Œç„¶åç»™çˆ¶å…ƒç´ æ·»åŠ æ»¡é«˜ä¼ªå…ƒç´ ï¼Œé€šè¿‡ `vertical-align: center` çš„æ–¹æ³•ä½¿å…ƒç´ å‚ç›´å±…ä¸­ã€‚åªéœ€è¦å†åœ¨çˆ¶å…ƒç´ æ€»æ·»åŠ  `text-align: center` å±æ€§å³å¯å®ç°æ°´å¹³å±…ä¸­ã€‚\n\n### 3.5 gridå¸ƒå±€å®ç°å±…ä¸­\n\ngrid å¸ƒå±€åœ¨å…¼å®¹æ€§å…è®¸ä¸‹å¥½åƒæ˜¯ä¸€ä¸ªå®Œç¾çš„å¸ƒå±€æ–¹æ¡ˆï¼Œè¯·å‚ç…§ MDN å®˜æ–¹æ–‡æ¡£ã€‚\n\n### Absolute Centering\n\nè¿™ä¸ªä¸€ä¸ªåŸºäºç»å¯¹å®šä½çš„å±…ä¸­å¤„ç†æ–¹æ¡ˆï¼Œå¹¶ä¸”é€‚ç”¨äºå®½é«˜æœªçŸ¥ï¼ˆç™¾åˆ†æ¯”ï¼‰çš„æƒ…å†µï¼Œå¯ä»¥å®ç°å¤šç§å¸¸è§å¸ƒå±€ï¼Œå…·æœ‰ä¸é”™çš„å…¼å®¹æ€§ã€‚è¿™é‡Œåªç®€å•ä»‹ç»å¦‚æœä½¿ç”¨è¯¥æŠ€æœ¯å®ç°å‚ç›´æ°´å¹³å±…ä¸­ï¼Œæ›´å¤šåº”ç”¨åœºæ™¯å’Œè¯¦ç»†ä»‹ç»è¯·æŸ¥çœ‹[ã€ŠAbsolute Horizontal And Vertical Centering In CSSã€‹](https://www.smashingmagazine.com/2013/08/absolute-horizontal-vertical-centering-css/)\n\n<iframe height='460' scrolling='no' title='absolute centering' src='//codepen.io/Hozen/embed/RQOQGb/?height=265&theme-id=light&default-tab=result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\nå…¶å®ï¼Œè¿™ä¸ªå¸ƒå±€çš„å…³é”®åœ¨äºè®¾ç½®å±€å¯¹å®šä½åï¼Œå°† `top` `right` `bottom` `left` çš„å€¼å…¨è®¾ç½®ä¸º0ï¼Œåœ¨æŒ‡å®šå®½é«˜åï¼ŒåŒæ—¶è®¾ç½® `margin: auto`ï¼Œï¼ˆä¸å¯è®¾ç½®ä¸º0ï¼‰åå°±å¯ä»¥å®ç°äº†æ°´å¹³å‚ç›´å±…ä¸­ã€‚\n\n## æ€»ç»“\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ç°æ°´å¹³å±…ä¸­å¾€å¾€æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œå¯ä»¥ä½¿ç”¨ `margin: 0 auto`ï¼Œå’Œè¡Œå†…å…ƒç´ çš„ `text-align: center` è®¾ç½®å®ç°æ°´å¹³å±…ä¸­ã€‚\n\nå‚ç›´å±…ä¸­é€šå¸¸æ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ ¹æ®åº”ç”¨åœºæ™¯æ¥é€‰æ‹©åˆé€‚çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†å‚ç›´å±…ä¸­å’Œå‚ç›´æ°´å¹³å±…ä¸­çš„å®ç°ä¸€èµ·æ€»ç»“ï¼š\n\nå½“å…ƒç´ çš„é«˜åº¦æ˜¯å›ºå®šå€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ç»å¯¹å®šä½ + è´Ÿå¤–è¾¹è·ä¿®æ­£çš„æ–¹æ³•å®ç°å‚ç›´å±…ä¸­ï¼Œç„¶åé€šè¿‡ `margin: 0 auto` å†å°†å…ƒç´ æ°´å¹³å±…ä¸­ã€‚ç”šè‡³å½“çˆ¶å…ƒç´ çš„å®½é«˜ä¹Ÿå›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¡ç®—å­å…ƒç´ çš„å±…ä¸­å®šä½çš„åæ ‡å³å¯ï¼Œä½†å®é™…å¼€å‘ä¸­è¿™ç§æƒ…å†µå¾ˆå°‘è§ã€‚\n\nå…ƒç´ é«˜åº¦ä¸å®šæ—¶ï¼Œå¯ä»¥é€šè¿‡ç»å¯¹å®šä½ + translate çš„æ–¹æ³•å®ç°å±…ä¸­ï¼Œæ€è·¯å’Œè´Ÿå¤–è¾¹è·ä¸€è‡´ã€‚åœ¨ä¸çŸ¥é“å…ƒç´ å®½é«˜æ—¶ï¼Œå¯ä»¥é€šè¿‡ `translate` çš„ç™¾åˆ†æ¯”å€¼è‡ªåŠ¨è·å–å…ƒç´ å®½é«˜çš„ä¸€åŠã€‚è€Œ `margin` çš„ç™¾åˆ†æ¯”å€¼æ˜¯æ ¹æ®çˆ¶å…ƒç´ çš„ width å€¼è®¡ç®—çš„ï¼Œæˆ‘ä»¬æ— æ³•è·å–å­å…ƒç´ çš„å®½é«˜çš„ä¸€åŠï¼Œè¿™å°±æ˜¯è¿™é‡Œä¸ºä»€ä¹ˆä¸èƒ½é€šè¿‡æŒ‡å®š `margin-top: -50%; margin-left: -50%` å®ç°ä¿®æ­£çš„åŸå› ã€‚\n\nå…ƒç´ é«˜åº¦ä¸å®šæ—¶ï¼Œtable å¸ƒå±€ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ³•ï¼Œå®ƒåˆ©ç”¨äº† `table-cell` å…ƒç´ ä¼šæ²¾æ»¡ `table` çˆ¶å…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ `vertical-align: middle` ä½¿å†…éƒ¨å…ƒç´ å‚ç›´å±…ä¸­å¯¹é½çš„ç‰¹ç‚¹ã€‚ä¸è¿‡è¿™ç§æ–¹æ³•éœ€è¦åµŒå¥—ä¸‰å±‚ç›’å­ã€‚\n\nä¼ªå…ƒç´ å±…ä¸­æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»™çˆ¶å…ƒç´ è®¾ç½®ä¸€ä¸ªæ»¡é«˜çš„ä¼ªå…ƒç´ ï¼Œå­å…ƒç´ è®¾ç½®ä¸º `inline-block`ã€‚è®¾ç½®ä¼ªå…ƒç´  `vertical-align: middle` ä½¿å¾—å­å…ƒç´ ä¸ä¼ªå…ƒç´ ä¸­çº¿å¯¹é½ï¼Œå®ç°å‚ç›´å±…ä¸­ã€‚è®¾ç½®çˆ¶å…ƒç´  `text-align: center`ï¼Œå®ç°æ°´å¹³å±…ä¸­ã€‚ä¸è¿‡è¿™ç§æƒ…å†µå¯èƒ½éœ€è¦ç»™ä¼ªå…ƒç´ ä¸€ä¸ªè´Ÿçš„å¤–è¾¹è·ï¼Œå› ä¸ºä¼ªå…ƒç´ å äº†ä¸€å®šçš„å®½åº¦ï¼Œå¯¼è‡´å­å…ƒç´ å¹¶éçœŸæ­£çš„æ°´å¹³å±…ä¸­ã€‚åŒæ—¶ï¼Œå­å…ƒç´ çš„å®½åº¦ä¸èƒ½å¤ªå®½ï¼ˆè¾¾åˆ°100%ï¼‰ï¼Œä¸ç„¶å¯èƒ½ä½¿å¾—å­å…ƒç´ ä¸ä¼ªå…ƒç´ åˆ†åˆ—ä¸¤è¡Œã€‚\n\nå½“é«˜åº¦ä¸æ˜¯å›ºå®šï¼ˆé€šè¿‡ç™¾åˆ†æ¯”æŒ‡å®šï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨ç»å¯¹å®šä½ + margin: auto çš„æ–¹æ³•å®ç°å‚ç›´æ°´å¹³å±…ä¸­ã€‚è¯¦è§æœ€åä¸€ä¸ªå®ä¾‹ã€‚\n","tags":["CSS","CSS å¸ƒå±€"],"categories":["developer"]},{"title":"CSS3 åˆ¶ä½œå¸¸è§å‡ ä½•å›¾å½¢","url":"/archives/28/","content":"\n\n  é€šè¿‡ CSS3 æä¾›ä¸€äº›æ–°çš„å±æ€§å’Œæ ‡å‡†ï¼Œå¯ä»¥å®ç°ä¸€äº›å¸¸è§çš„å‡ ä½•å›¾å½¢ã€‚é¿å…ä½¿ç”¨è´´å›¾ç­‰å…¶ä»–æ‰‹æ®µï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚å’Œèµ„æºå¤§å°ï¼ŒåŒæ—¶è‡ªé€‚åº”å’Œç¼©æ”¾æ•ˆæœä¼šæ›´å¥½ã€‚\n\n<!-- more -->\n## CSS çš„è¾¹æ¡†\n\n  å› ä¸º HTML çš„å…ƒç´ ä¸€èˆ¬æ˜¯å æ®çŸ©å½¢ç©ºé—´ï¼Œæˆ–è€…ç”±çŸ©å½¢æ‹¼æ¥çš„ç©ºé—´ï¼ˆå¦‚ç”±äºå†…å®¹è¿‡é•¿è€Œæ¢è¡Œçš„è¡Œå†…å…ƒç´ ï¼‰ã€‚æ‰€ä»¥é™¤äº†çŸ©å½¢ä¹‹å¤–çš„å‡ ä½•å›¾å½¢å®ç°ä¸€èˆ¬è¦å€ŸåŠ© `border` å±æ€§æ¥å®Œæˆã€‚ç°åœ¨æ¥äº†è§£ä¸€ä¸‹ CSS çš„ `border` å±æ€§ã€‚\n\n  `border` ç›¸å…³çš„å±æ€§åªæœ‰ `border-width` `border-style` `border-color` å’Œ `border-radius` ç­‰ï¼ŒåŒæ—¶å¯ä»¥åœ¨ `border` åæ·»åŠ  `top` `bottom` `left` æˆ– `right` æ¥æŒ‡å®šå•è¾¹è¾¹æ¡†ã€‚å¦‚ï¼Œ`border-top-width: 10px`ï¼Œä»…æŒ‡å®šä¸Šè¾¹æ¡†çš„å®½åº¦ä¸º `10 px`ã€‚\n\n  `border-style` å¯é€‰çš„å€¼æœ‰ `dotted` `dashed` `solid` `double` `groove` `ridge` `inset` `outset` `none`ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­å¤§æ¦‚åŒºåˆ†ä¸€ä¸‹ï¼š\n\n```html\n<style>\n    .child {\n      display: inline-block;\n      width: 200px;\n      height: 200px;\n      border-width: 10px;\n      border-color: #e3e3e3;\n    }\n    .border1 {\n      border-style: solid double dotted dashed;\n      margin-right: 20px;\n    }\n    .border2 {\n      border-style: groove ridge inset outset;\n    }\n</style>\n<div id='border1'></div>\n<div id='border2'></div>\n```\n\n<iframe height='280' scrolling='no' title='border-style' src='//codepen.io/Hozen/embed/mzgWOZ/?height=265&theme-id=light&default-tab=result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n  \n  `border-width` å’Œ `border-color` å±æ€§å¾ˆç®€å•ï¼ŒæŒ‡å®šå®½åº¦å’Œé¢œè‰²ã€‚é¢œè‰²å¯ä»¥ä½¿ç”¨æ‰€æœ‰ `CSS3` çš„é¢œè‰²æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š `transparent` ä½¿è¾¹æ¡†é€æ˜ï¼Œåœ¨åˆ©ç”¨è¾¹æ¡†ç»˜åˆ¶å¤šè¾¹å½¢æ—¶ï¼Œç»å¸¸ä¼šç”¨åˆ°é€æ˜è¾¹æ¡†ã€‚\n\n  `border-radius` æ˜¯ `CSS3` çš„æ–°å±æ€§ï¼Œä¸ºè¾¹æ¡†æŒ‡å®šåœ†è§’çš„åŠå¾„ã€‚å¯ä»¥é€šè¿‡ `broder-top-left-radius: 2px` çš„æ ¼å¼æŒ‡å®šç‰¹å®šçš„è§’ã€‚åœ¨ä½¿ç”¨ `CSS3` ç»˜åˆ¶åœ†å½¢æˆ–æ¤­åœ†å½¢ç›¸å…³çš„å›¾å½¢æ—¶ç»å¸¸ç”¨åˆ°ã€‚\n\n```html\n<style>\n    div {\n        background: #0aaaa0;\n        border-radius: 50%;  /*ç­‰ä»·äº border-radius: 150px / 100px; */\n        width: 300px;\n        height: 200px;\n    }\n</style>\n<div></div>\n```\n\n<iframe height='322' scrolling='no' title='border-radius' src='//codepen.io/Hozen/embed/gBymXb/?height=322&theme-id=light&default-tab=result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/Hozen/pen/gBymXb/'>border-radius</a> by Hozen (<a href='https://codepen.io/Hozen'>@Hozen</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n\n## æ¤­åœ†å½¢\n\n  ä¸Šä¾‹ä¸­å·²ç»ç»™å‡ºäº†ç»˜åˆ¶æ¤­åœ†å½¢çš„ä¾‹å­ï¼Œåªéœ€ç»™ä¸€ä¸ªé•¿æ–¹å½¢çš„ `border-radius çš„å€¼è®¾ä¸º 50%` å³å¯ç»˜åˆ¶æ¤­åœ†å½¢ï¼Œè€Œç»™ä¸€ä¸ªæ­£æ–¹å½¢çš„ `border-radius` è®¾ç½®ä¸º `50%` æ—¶ï¼Œå³ä¸ºåœ†å½¢ã€‚æ•ˆæœç­‰åŒäºä½¿ç”¨ `/` è®¾ç½®è¾¹è§’çš„æ¨ªå‘å’Œçºµå‘çš„åŠå¾„åˆ†åˆ«ä¸ºå®½å’Œé•¿çš„ä¸€åŠã€‚\n\n  ç»˜åˆ¶åŠä¸ªæ¤­åœ†ï¼š\n\n```html\n<style>\n    div {\n       background: #0aaaa0;\n       border-top-left-radius: 100px 150px;\n       border-top-right-radius: 100px 150px;\n       width: 200px;\n       height: 150px;\n    }\n</style>\n<div></div>\n```\n\n<iframe height='277' scrolling='no' title='border-radius' src='//codepen.io/Hozen/embed/XxQMZq/?height=277&theme-id=light&default-tab=css,result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n## ä¸‰è§’å½¢\n\n  æˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ªçŸ©å½¢è®¾ç½®ä¸åŒçš„è¾¹æ¡†é¢œè‰²æ¥æŸ¥çœ‹è¾¹æ¡†çš„è¡¨ç°å½¢å¼ï¼š\n\n```html\n<style>\n    .item {\n      display: inline-block;\n      width: 100px;\n      height: 100px;\n      border-style: solid;\n      border-width: 40px;\n      border-color: #f6666f #0aaaa0 yellow #aa00ff;\n    }\n    .two {\n      margin-left: 50px;\n      border-right: none;\n    }\n</style>\n<div class=\"item\"></div>\n<div class=\"item two\"></div>\n```\n\n<iframe height='305' scrolling='no' title='border' src='//codepen.io/Hozen/embed/gBymQP/?height=305&theme-id=light&default-tab=result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n  å¯ä»¥çœ‹å‡ºè¾¹æ¡†çš„äº¤æ¥å¤„æ˜¯æ–œè¾¹ï¼Œå¦å¤–å½“æœ‰ä¸€è¾¹æ— è¾¹æ¡†çš„æ—¶å€™ï¼Œä¼šå‘ˆç°å³å›¾çš„æ ·å¼ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹å®ç°ä¸€ä¸ªä¸‰è§’å½¢ã€‚\n\n```html\n<style>\n    div {\n       width: 0;\n       height: 0;\n       border-style: solid;\n       border-width: 80px 100px;\n       border-color: transparent;\n       border-left-color: #0aaaa0;\n       border-right: none;\n    }\n</style>\n<div></div>\n```\n\n<iframe height='288' scrolling='no' title='border' src='//codepen.io/Hozen/embed/ReOpvP/?height=288&theme-id=light&default-tab=css,result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>\n</iframe>\n\n## ç»„åˆå›¾å½¢\n\n  å¯ä»¥ç»“åˆä¼ªç±»é€‰æ‹©å™¨ `before` å’Œ `after` ä»¥åŠ `transform` å˜åŒ–å®ç°ä¸€äº›ç»„åˆå›¾å½¢çš„ç»˜åˆ¶ã€‚æ¯”å¦‚ï¼Œç»˜åˆ¶å‰å·ï¼š\n\n```html\n<style>\ndiv {\n    height: 100px;\n    width: 100px;\n    position: relative;\n}\ndiv::before, div::after{\n    background: #0aaaa0;\n    border-radius: 5px;\n    position: absolute;\n    top: 50%;\n    transform: translateX(-50%);\n    content: '';\n    width: 100px;\n    height: 15px;\n}\ndiv::before {\n    transform: rotate(-45deg);\n}\ndiv::after {\n    transform: rotate(-135deg);\n}\n</style>\n<div></div>\n```\n\n<iframe height=\"300\" style=\"width: 100%;\" scrolling=\"no\" title=\"Untitled\" src=\"https://codepen.io/Hozen/embed/oaOZVK?default-tab=html%2Cresult\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href=\"https://codepen.io/Hozen/pen/oaOZVK\">\n  Untitled</a> by Hozen (<a href=\"https://codepen.io/Hozen\">@Hozen</a>)\n  on <a href=\"https://codepen.io\">CodePen</a>.\n</iframe>\n","tags":["CSS","CSS ç‰¹æ•ˆ"],"categories":["developer"]}]